<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>翻轉吧金魚腦</title><link>https://blog.goldfishbrain-fighting.com/</link><description>Recent content on 翻轉吧金魚腦</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><lastBuildDate>Sun, 31 Mar 2024 16:46:28 +0800</lastBuildDate><atom:link href="https://blog.goldfishbrain-fighting.com/index.xml" rel="self" type="application/rss+xml"/><item><title>安裝Gitlab-runner在linux主機上(centos)，並註冊與執行pipeline</title><link>https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/</link><pubDate>Sun, 31 Mar 2024 16:46:28 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/</guid><description>&lt;h1 id="安裝gitlab-runner">安裝Gitlab Runner&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># curl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh | sudo bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># yum list gitlab-runner --showduplicates | sort -r&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Repository base is listed more than once in the configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Repository updates is listed more than once in the configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Repository extras is listed more than once in the configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Repository centosplus is listed more than once in the configuration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * updates: mirror01.idc.hinet.net
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Loading mirror speeds from cached hostfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Loaded plugins: fastestmirror
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.9.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.9.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.8.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.8.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.7.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.7.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.6.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.6.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.6.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.5.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.4.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.4.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.4.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.3.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.3.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.3.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.2.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.2.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.2.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.1.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.1.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.10.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.0.3-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.0.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.0.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 16.0.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.9.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.9.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.8.3-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.8.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.8.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.8.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.7.4-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.7.3-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.7.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.7.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.7.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.6.3-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.6.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.6.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.6.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.5.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.5.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.5.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.4.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.4.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.4.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.3.3-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.3.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.3.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.3.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.2.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.2.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.2.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.1.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.11.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.11.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.1.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.10.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.10.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.0.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 15.0.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.9.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.9.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.9.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.8.3-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.8.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.8.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.7.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.7.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.6.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.6.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.5.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.5.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.5.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.4.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.4.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.4.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.3.4-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.3.3-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.3.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.3.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.2.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.1.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.10.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.10.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.0.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 14.0.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.9.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.8.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.7.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.6.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.5.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.4.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.4.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.3.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.3.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.3.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.2.4-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.2.3-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.2.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.2.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.2.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.1.3-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.1.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.12.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.1.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.11.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.1.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.10.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.0.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.0.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 13.0.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.9.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.9.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.8.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.7.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.7.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.6.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.5.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.4.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.4.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.3.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.2.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.10.3-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.10.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.1.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.10.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.10.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.0.2-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.0.1-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gitlab-runner.x86_64 12.0.0-1 runner_gitlab-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># sudo yum install gitlab-runner-12.4.0-1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="gitlab-runner註冊">Gitlab Runner註冊&lt;/h1>
&lt;p>進到已安裝的Gitlab管理頁面，點選Runners，可以看到URL和token&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165311.png"
width="1703"
height="548"
srcset="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165311_hu40900f95c39bdb02c72f6dfc0492fc68_142487_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165311_hu40900f95c39bdb02c72f6dfc0492fc68_142487_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="310"
data-flex-basis="745px"
>&lt;/p>
&lt;p>進行註冊&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@docker ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># gitlab-runner register&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Runtime platform &lt;span class="nv">arch&lt;/span>&lt;span class="o">=&lt;/span>amd64 &lt;span class="nv">os&lt;/span>&lt;span class="o">=&lt;/span>linux &lt;span class="nv">pid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">15214&lt;/span> &lt;span class="nv">revision&lt;/span>&lt;span class="o">=&lt;/span>1564076b &lt;span class="nv">version&lt;/span>&lt;span class="o">=&lt;/span>12.4.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Running in system-mode.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please enter the gitlab-ci coordinator URL &lt;span class="o">(&lt;/span>e.g. https://gitlab.com/&lt;span class="o">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http://192.168.1.55/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please enter the gitlab-ci token &lt;span class="k">for&lt;/span> this runner:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">BmSnpmSVS3CMxQ9Vyiki
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please enter the gitlab-ci description &lt;span class="k">for&lt;/span> this runner:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>docker&lt;span class="o">]&lt;/span>: devops-service-runner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please enter the gitlab-ci tags &lt;span class="k">for&lt;/span> this runner &lt;span class="o">(&lt;/span>comma separated&lt;span class="o">)&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">build
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Registering runner... succeeded &lt;span class="nv">runner&lt;/span>&lt;span class="o">=&lt;/span>BmSnpmSV
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please enter the executor: parallels, virtualbox, docker-ssh+machine, kubernetes, custom, docker, docker-ssh, shell, ssh, docker+machine:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shell
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Runner registered successfully. Feel free to start it, but &lt;span class="k">if&lt;/span> it&lt;span class="err">&amp;#39;&lt;/span>s running already the config should be automatically reloaded!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>此時可以回到Gitlab頁面，查看runner是否已註冊&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165528.png"
width="1311"
height="569"
srcset="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165528_hufb2be9430dd16e26e1a6ab1aacd88e34_114833_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165528_hufb2be9430dd16e26e1a6ab1aacd88e34_114833_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="230"
data-flex-basis="552px"
>
確定已註冊，調整Runner設定，並分配給Project使用&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165643.png"
width="1287"
height="619"
srcset="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165643_hufc51c7498b74892e6aa446224758f92c_85668_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165643_hufc51c7498b74892e6aa446224758f92c_85668_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="207"
data-flex-basis="498px"
>&lt;/p>
&lt;p>這裡可以看到，我分配給demo-ci-service project使用
&lt;img src="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165743.png"
width="1304"
height="456"
srcset="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165743_hua6ee695c9aa70849f781761a365922c8_101664_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165743_hua6ee695c9aa70849f781761a365922c8_101664_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="285"
data-flex-basis="686px"
>&lt;/p>
&lt;h1 id="測試-runner-執行pipeline">測試 Runner 執行pipeline&lt;/h1>
&lt;p>在專案新增一個名為.gitlab-ci.yml的檔案&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165923.png"
width="1009"
height="571"
srcset="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165923_hu844c094cec17ef2c00f5f4e343d91330_68754_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331165923_hu844c094cec17ef2c00f5f4e343d91330_68754_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="176"
data-flex-basis="424px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">before_script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;before-script!!&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">variables&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">DOMAIN&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">example.com&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">stages&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">test&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">codescan&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">before_script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;before-script in job&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;mvn clean &amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;mvn install&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;$DOMAIN&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">after_script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;after script in buildjob&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">unittest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">test&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;run test&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;hello deploy&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">sleep 2;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">codescan&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">stage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">codescan&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;codescan&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">sleep 5;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">after_script&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;after-script&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">ech&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>保存並執行pipeline&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331170107.png"
width="1697"
height="695"
srcset="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331170107_hu2481090078c1879a8e6537a300d4bf0a_137679_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331170107_hu2481090078c1879a8e6537a300d4bf0a_137679_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="244"
data-flex-basis="586px"
>&lt;/p>
&lt;p>可以看到，執行完成&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331170208.png"
width="1279"
height="678"
srcset="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331170208_hu507f227958892e328ca79cdcd72a5d25_49476_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331170208_hu507f227958892e328ca79cdcd72a5d25_49476_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="188"
data-flex-basis="452px"
>&lt;/p>
&lt;p>可以看到，確定是使用，我們分配的runner執行&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331170250.png"
width="1185"
height="707"
srcset="https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331170250_hu71a6580a0afba6110fed958f08a72296_72155_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2024/install-gitlab-runner-in-linux-baremetal/media/Pasted-image-20240331170250_hu71a6580a0afba6110fed958f08a72296_72155_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="167"
data-flex-basis="402px"
>&lt;/p></description></item><item><title>Kubernetes Rancher管理平台 Prometheus監控調度到master節點</title><link>https://blog.goldfishbrain-fighting.com/2024/kubernetes-rancher-install-prometheus-selector-to-master/</link><pubDate>Tue, 19 Mar 2024 00:18:30 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2024/kubernetes-rancher-install-prometheus-selector-to-master/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 添加標籤monitoring=enabled&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl label node k8s-master71u &lt;span class="nv">monitoring&lt;/span>&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl label node k8s-master72u &lt;span class="nv">monitoring&lt;/span>&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl label node k8s-master73u &lt;span class="nv">monitoring&lt;/span>&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 佈屬時，修改helm yaml檔&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prometheusSpec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalAlertManagerConfigs: &lt;span class="o">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalAlertManagerConfigsSecret: &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalAlertRelabelConfigs: &lt;span class="o">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalAlertRelabelConfigsSecret: &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalPrometheusSecretsAnnotations: &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalRemoteRead: &lt;span class="o">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalRemoteWrite: &lt;span class="o">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalScrapeConfigs: &lt;span class="o">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> additionalScrapeConfigsSecret: &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> affinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelectorTerms:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: monitoring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageSpec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumeClaimTemplate:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> accessModes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ReadWriteMany
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage: 50Gi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageClassName: rook-cephfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> thanos: &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoExecute
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2024/kubernetes-rancher-install-prometheus-selector-to-master/media/Pasted-image-20240319002149.png"
width="570"
height="410"
srcset="https://blog.goldfishbrain-fighting.com/2024/kubernetes-rancher-install-prometheus-selector-to-master/media/Pasted-image-20240319002149_hubba712153778764a563fd1629a1d2c30_92369_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2024/kubernetes-rancher-install-prometheus-selector-to-master/media/Pasted-image-20240319002149_hubba712153778764a563fd1629a1d2c30_92369_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="333px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2024/kubernetes-rancher-install-prometheus-selector-to-master/media/Pasted-image-20240319002232.png"
width="658"
height="470"
srcset="https://blog.goldfishbrain-fighting.com/2024/kubernetes-rancher-install-prometheus-selector-to-master/media/Pasted-image-20240319002232_hu593c7ddb5e1427bb69f0300e19c08373_90672_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2024/kubernetes-rancher-install-prometheus-selector-to-master/media/Pasted-image-20240319002232_hu593c7ddb5e1427bb69f0300e19c08373_90672_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="140"
data-flex-basis="336px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Prometheus調度到master了，但是狀態都是Init:0/1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -n cattle-monitoring-system -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager-rancher-monitoring-alertmanager-0 2/2 Running &lt;span class="m">0&lt;/span> 18m 10.201.14.153 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus-rancher-monitoring-prometheus-0 0/3 Init:0/1 &lt;span class="m">0&lt;/span> 2m24s &amp;lt;none&amp;gt; k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-grafana-568d4fc6d5-cvw6z 4/4 Running &lt;span class="m">0&lt;/span> 18m 10.201.255.201 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-kube-state-metrics-56b4477cc-gp4lz 1/1 Running &lt;span class="m">0&lt;/span> 18m 10.201.255.214 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-operator-679b99d785-8x79c 1/1 Running &lt;span class="m">0&lt;/span> 18m 10.201.14.154 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-adapter-7494f789f6-kgjdv 1/1 Running &lt;span class="m">0&lt;/span> 18m 10.201.14.140 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-gq66p 1/1 Running &lt;span class="m">0&lt;/span> 18m 192.168.1.72 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-jvdc2 1/1 Running &lt;span class="m">0&lt;/span> 18m 192.168.1.76 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-nmqq2 1/1 Running &lt;span class="m">0&lt;/span> 18m 192.168.1.73 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-rcldf 1/1 Running &lt;span class="m">0&lt;/span> 18m 192.168.1.75 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-rk6pz 1/1 Running &lt;span class="m">0&lt;/span> 18m 192.168.1.71 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 查看原因&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl describe pod prometheus-rancher-monitoring-prometheus-0 -n cattle-monitoring-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Reason Age From Message
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---- ------ ---- ---- -------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Normal Scheduled 2m39s default-scheduler Successfully assigned cattle-monitoring-system/prometheus-rancher-monitoring-prometheus-0 to k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Warning FailedMount 112s kubelet MountVolume.MountDevice failed &lt;span class="k">for&lt;/span> volume &lt;span class="s2">&amp;#34;pvc-972b866f-bc9a-42e0-a34a-0f2a0aa8acac&amp;#34;&lt;/span> : kubernetes.io/csi: attacher.MountDevice failed to create newCsiDriverClient: driver name rook-ceph.cephfs.csi.ceph.com not found in the list of registered CSI drivers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Warning FailedMount 37s kubelet Unable to attach or mount volumes: unmounted &lt;span class="nv">volumes&lt;/span>&lt;span class="o">=[&lt;/span>prometheus-rancher-monitoring-prometheus-db&lt;span class="o">]&lt;/span>, unattached &lt;span class="nv">volumes&lt;/span>&lt;span class="o">=[&lt;/span>prometheus-rancher-monitoring-prometheus-db config kube-api-access-85ljn prometheus-nginx tls-assets nginx-home config-out prometheus-rancher-monitoring-prometheus-rulefiles-0 web-config&lt;span class="o">]&lt;/span>: timed out waiting &lt;span class="k">for&lt;/span> the condition
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>參考網址:
&lt;a class="link" href="https://www.cnblogs.com/lswweb/p/13860186.html" target="_blank" rel="noopener"
>https://www.cnblogs.com/lswweb/p/13860186.html&lt;/a>&lt;/p>
&lt;p>查看現況csidrivers&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get csinodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DRIVERS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master71u &lt;span class="m">0&lt;/span> 106d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master72u &lt;span class="m">0&lt;/span> 106d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master73u &lt;span class="m">0&lt;/span> 106d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node75u &lt;span class="m">2&lt;/span> 106d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node76u &lt;span class="m">2&lt;/span> 106d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get csidrivers
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME ATTACHREQUIRED PODINFOONMOUNT STORAGECAPACITY TOKENREQUESTS REQUIRESREPUBLISH MODES AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph.cephfs.csi.ceph.com &lt;span class="nb">true&lt;/span> &lt;span class="nb">false&lt;/span> &lt;span class="nb">false&lt;/span> &amp;lt;unset&amp;gt; &lt;span class="nb">false&lt;/span> Persistent 91d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph.rbd.csi.ceph.com &lt;span class="nb">true&lt;/span> &lt;span class="nb">false&lt;/span> &lt;span class="nb">false&lt;/span> &amp;lt;unset&amp;gt; &lt;span class="nb">false&lt;/span> Persistent 91d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get pod -n rook-ceph -o wide &lt;span class="p">|&lt;/span> grep csi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-7b5fj 2/2 Running &lt;span class="m">10&lt;/span> &lt;span class="o">(&lt;/span>24h ago&lt;span class="o">)&lt;/span> 91d 192.168.1.76 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-k2xgp 2/2 Running &lt;span class="m">10&lt;/span> &lt;span class="o">(&lt;/span>24h ago&lt;span class="o">)&lt;/span> 91d 192.168.1.75 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-provisioner-668dfcf95b-qbfpz 5/5 Running &lt;span class="m">27&lt;/span> &lt;span class="o">(&lt;/span>24h ago&lt;span class="o">)&lt;/span> 91d 10.201.14.191 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-provisioner-668dfcf95b-xvg52 5/5 Running &lt;span class="m">25&lt;/span> &lt;span class="o">(&lt;/span>24h ago&lt;span class="o">)&lt;/span> 91d 10.201.255.236 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-ddxqm 2/2 Running &lt;span class="m">10&lt;/span> &lt;span class="o">(&lt;/span>24h ago&lt;span class="o">)&lt;/span> 91d 192.168.1.75 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-dlv8p 2/2 Running &lt;span class="m">10&lt;/span> &lt;span class="o">(&lt;/span>24h ago&lt;span class="o">)&lt;/span> 91d 192.168.1.76 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-provisioner-5b78f67bbb-76qjd 5/5 Running &lt;span class="m">27&lt;/span> &lt;span class="o">(&lt;/span>24h ago&lt;span class="o">)&lt;/span> 91d 10.201.14.188 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-provisioner-5b78f67bbb-p8jj8 5/5 Running &lt;span class="m">25&lt;/span> &lt;span class="o">(&lt;/span>24h ago&lt;span class="o">)&lt;/span> 91d 10.201.255.204 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>添加容忍污點將csidrivers也佈屬到master節點&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# vim operator.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (Optional) CephCSI provisioner NodeAffinity (applied to both CephFS and RBD provisioner).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># CSI_PROVISIONER_NODE_AFFINITY: &amp;#34;role=storage-node; storage=rook, ceph&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (Optional) CephCSI provisioner tolerations list(applied to both CephFS and RBD provisioner).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Put here list of taints you want to tolerate in YAML format.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># CSI provisioner would be best to start on the same nodes as other ceph daemons.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CSI_PROVISIONER_TOLERATIONS: &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: node-role.kubernetes.io/control-plane
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoExecute
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: node-role.kubernetes.io/etcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (Optional) CephCSI plugin NodeAffinity (applied to both CephFS and RBD plugin).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># CSI_PLUGIN_NODE_AFFINITY: &amp;#34;role=storage-node; storage=rook, ceph&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (Optional) CephCSI plugin tolerations list(applied to both CephFS and RBD plugin).&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Put here list of taints you want to tolerate in YAML format.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># CSI plugins need to be started on all the nodes where the clients need to mount the storage.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CSI_PLUGIN_TOLERATIONS: &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: node-role.kubernetes.io/control-plane
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoExecute
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: node-role.kubernetes.io/etcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl apply -f operator.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get pod -n rook-ceph -o wide &lt;span class="p">|&lt;/span> grep csi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-2cj79 2/2 Running &lt;span class="m">0&lt;/span> 5m29s 192.168.1.72 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-b4jcd 2/2 Running &lt;span class="m">0&lt;/span> 5m29s 192.168.1.71 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-cmfvm 2/2 Running &lt;span class="m">0&lt;/span> 117s 192.168.1.75 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-ldml2 2/2 Running &lt;span class="m">0&lt;/span> 114s 192.168.1.76 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-provisioner-75d8bf7fc5-69rw9 5/5 Running &lt;span class="m">0&lt;/span> 5m25s 10.201.255.235 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-provisioner-75d8bf7fc5-vnqzc 5/5 Running &lt;span class="m">0&lt;/span> 5m25s 10.201.14.162 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-vbxv2 2/2 Running &lt;span class="m">0&lt;/span> 5m29s 192.168.1.73 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-8glkf 2/2 Running &lt;span class="m">0&lt;/span> 113s 192.168.1.75 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-d2cbd 2/2 Running &lt;span class="m">0&lt;/span> 5m29s 192.168.1.73 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-ltlzk 2/2 Running &lt;span class="m">0&lt;/span> 117s 192.168.1.76 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-msj62 2/2 Running &lt;span class="m">0&lt;/span> 5m29s 192.168.1.72 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-provisioner-5f74ff45d5-kfg9c 5/5 Running &lt;span class="m">0&lt;/span> 5m26s 10.201.255.249 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-provisioner-5f74ff45d5-sq2ph 5/5 Running &lt;span class="m">0&lt;/span> 5m26s 10.201.14.161 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-tzsbz 2/2 Running &lt;span class="m">0&lt;/span> 5m29s 192.168.1.71 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get csinodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME DRIVERS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master71u &lt;span class="m">2&lt;/span> 106d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master72u &lt;span class="m">2&lt;/span> 106d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master73u &lt;span class="m">2&lt;/span> 106d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node75u &lt;span class="m">2&lt;/span> 106d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node76u &lt;span class="m">2&lt;/span> 106d
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>可以看到Prometheus也成功調度到master了&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get pod -n cattle-monitoring-system -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager-rancher-monitoring-alertmanager-0 2/2 Running &lt;span class="m">0&lt;/span> 67m 10.201.14.153 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus-rancher-monitoring-prometheus-0 3/3 Running &lt;span class="m">0&lt;/span> 51m 10.201.133.34 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-grafana-568d4fc6d5-cvw6z 4/4 Running &lt;span class="m">0&lt;/span> 68m 10.201.255.201 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-kube-state-metrics-56b4477cc-gp4lz 1/1 Running &lt;span class="m">0&lt;/span> 68m 10.201.255.214 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-operator-679b99d785-8x79c 1/1 Running &lt;span class="m">0&lt;/span> 68m 10.201.14.154 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-adapter-7494f789f6-kgjdv 1/1 Running &lt;span class="m">0&lt;/span> 68m 10.201.14.140 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-gq66p 1/1 Running &lt;span class="m">0&lt;/span> 68m 192.168.1.72 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-jvdc2 1/1 Running &lt;span class="m">0&lt;/span> 68m 192.168.1.76 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-nmqq2 1/1 Running &lt;span class="m">0&lt;/span> 68m 192.168.1.73 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-rcldf 1/1 Running &lt;span class="m">0&lt;/span> 68m 192.168.1.75 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-rk6pz 1/1 Running &lt;span class="m">0&lt;/span> 68m 192.168.1.71 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>使用kubespray專案佈屬，calico bgp沒有啟動</title><link>https://blog.goldfishbrain-fighting.com/2024/kubernetes-use-kubespray-deploy-calico-bgp-backend-process-bird-is-not-running/</link><pubDate>Sun, 17 Mar 2024 17:05:04 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2024/kubernetes-use-kubespray-deploy-calico-bgp-backend-process-bird-is-not-running/</guid><description>&lt;p>參考網址：
&lt;a class="link" href="https://github.com/kubernetes-sigs/kubespray/blob/master/docs/calico.md" target="_blank" rel="noopener"
>https://github.com/kubernetes-sigs/kubespray/blob/master/docs/calico.md&lt;/a>&lt;/p>
&lt;p>&lt;font color=red>需將kubespray專案佈屬，預設值修改為以下&lt;/font>&lt;/p>
&lt;p>&lt;strong>BGP mode&lt;/strong>&lt;/p>
&lt;p>To enable BGP no-encapsulation mode:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">calico_ipip_mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;Never&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">calico_vxlan_mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;Never&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">calico_network_backend&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;bird&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol>
&lt;li>查看目前bgp狀況&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# calicoctl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master72u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master73u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node75u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node76u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# calicoctl get ippool -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CIDR NAT IPIPMODE VXLANMODE DISABLED DISABLEBGPEXPORT SELECTOR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default-pool 10.201.0.0/16 &lt;span class="nb">true&lt;/span> Never Always &lt;span class="nb">false&lt;/span> &lt;span class="nb">false&lt;/span> all&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 看到 The BGP backend process (BIRD) is not running.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# calicoctl node status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Calico process is running.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The BGP backend process &lt;span class="o">(&lt;/span>BIRD&lt;span class="o">)&lt;/span> is not running.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>修改kubespray專案設定&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim inventory/mycluster/group_vars/k8s_cluster/k8s-net-calico.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 以下是預設&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Set calico network backend: &amp;#34;bird&amp;#34;, &amp;#34;vxlan&amp;#34; or &amp;#34;none&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># bird enable BGP routing, required for ipip and no encapsulation modes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># calico_network_backend: vxlan&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># IP in IP and VXLAN is mutualy exclusive modes.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set IP in IP encapsulation mode: &amp;#34;Always&amp;#34;, &amp;#34;CrossSubnet&amp;#34;, &amp;#34;Never&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># calico_ipip_mode: &amp;#39;Never&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set VXLAN encapsulation mode: &amp;#34;Always&amp;#34;, &amp;#34;CrossSubnet&amp;#34;, &amp;#34;Never&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># calico_vxlan_mode: &amp;#39;Always&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 修改為&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Set calico network backend: &amp;#34;bird&amp;#34;, &amp;#34;vxlan&amp;#34; or &amp;#34;none&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># bird enable BGP routing, required for ipip and no encapsulation modes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico_network_backend: &lt;span class="s1">&amp;#39;bird&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># IP in IP and VXLAN is mutualy exclusive modes.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set IP in IP encapsulation mode: &amp;#34;Always&amp;#34;, &amp;#34;CrossSubnet&amp;#34;, &amp;#34;Never&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico_ipip_mode: &lt;span class="s1">&amp;#39;Never&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># set VXLAN encapsulation mode: &amp;#34;Always&amp;#34;, &amp;#34;CrossSubnet&amp;#34;, &amp;#34;Never&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico_vxlan_mode: &lt;span class="s1">&amp;#39;Never&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>佈屬(無法使用ansible再佈屬，所以直接進k8s修改設定)&lt;/li>
&lt;/ol>
&lt;ul>
&lt;li>1.切換calico_network_backend為bird&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# vim /etc/kubernetes/calico-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster_type: &lt;span class="s2">&amp;#34;kubespray&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> calico_backend: &lt;span class="s2">&amp;#34;bird&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl apply -f /etc/kubernetes/calico-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">configmap/calico-config configured
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>2.設定calico mode ipip和vxlan為Never&lt;/li>
&lt;/ul>
&lt;p>修改設定
&amp;ldquo;ipipMode&amp;rdquo;:&amp;ldquo;Never&amp;rdquo;, &amp;ldquo;vxlanMode&amp;rdquo;:&amp;ldquo;Never&amp;rdquo;&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# calicoctl patch felixconfig default -p &lt;span class="s1">&amp;#39;{&amp;#34;spec&amp;#34;:{&amp;#34;vxlanEnabled&amp;#34;:false}}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 設定下去會POD之間都會連不到喔，除非重啟calico&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# calicoctl patch ippool default-pool -p &lt;span class="s1">&amp;#39;{&amp;#34;spec&amp;#34;:{&amp;#34;ipipMode&amp;#34;:&amp;#34;Never&amp;#34;, &amp;#34;vxlanMode&amp;#34;:&amp;#34;Never&amp;#34;}}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Successfully patched &lt;span class="m">1&lt;/span> &lt;span class="s1">&amp;#39;IPPool&amp;#39;&lt;/span> resource
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# calicoctl get ippool -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CIDR NAT IPIPMODE VXLANMODE DISABLED DISABLEBGPEXPORT SELECTOR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default-pool 10.201.0.0/16 &lt;span class="nb">true&lt;/span> Never Never &lt;span class="nb">false&lt;/span> &lt;span class="nb">false&lt;/span> all&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>重啟calico&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -n kube-system &lt;span class="p">|&lt;/span> grep calico
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-kube-controllers-777ff6cddb-d4htx 1/1 Running &lt;span class="m">8&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 105d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-4qhfj 1/1 Running &lt;span class="m">8&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 105d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-9wrql 1/1 Running &lt;span class="m">7&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 105d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-9xzmn 1/1 Running &lt;span class="m">7&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 105d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-m975z 1/1 Running &lt;span class="m">8&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 105d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-s9w4x 1/1 Running &lt;span class="m">9&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 105d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 重啟calico&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="k">for&lt;/span> i in &lt;span class="sb">`&lt;/span>kubectl get pod -n kube-system &lt;span class="p">|&lt;/span> grep calico &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $1}&amp;#39;&lt;/span>&lt;span class="sb">`&lt;/span>&lt;span class="p">;&lt;/span>&lt;span class="k">do&lt;/span> kubectl delete pod &lt;span class="nv">$i&lt;/span> -n kube-system &lt;span class="p">;&lt;/span>&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;calico-kube-controllers-777ff6cddb-d4htx&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;calico-node-4qhfj&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;calico-node-9wrql&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;calico-node-9xzmn&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;calico-node-m975z&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;calico-node-s9w4x&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -n kube-system &lt;span class="p">|&lt;/span> grep calico
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-kube-controllers-777ff6cddb-xbmt2 1/1 Running &lt;span class="m">0&lt;/span> 26s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-fn4pp 1/1 Running &lt;span class="m">0&lt;/span> 25s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-vrmk7 1/1 Running &lt;span class="m">0&lt;/span> 24s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-w8k8p 1/1 Running &lt;span class="m">0&lt;/span> 23s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-x8j4b 1/1 Running &lt;span class="m">0&lt;/span> 24s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-zc5pm 1/1 Running &lt;span class="m">0&lt;/span> 24s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 可以看到去各節點的路由，都是從實體介面ens160出去了&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# ip route
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default via 192.168.1.1 dev ens160 proto static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.201.14.128/26 via 192.168.1.75 dev ens160 proto bird
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.201.96.0/26 via 192.168.1.73 dev ens160 proto bird
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.201.126.0/26 via 192.168.1.72 dev ens160 proto bird
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">blackhole 10.201.133.0/26 proto bird
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.201.133.8 dev cali755b97c9930 scope link
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.201.133.10 dev cali0c704e12b74 scope link
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.201.133.14 dev cali95c22b6e0f1 scope link
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.201.133.22 dev cali2787253e85e scope link
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.201.133.29 dev cali3e0b78920ca scope link
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.201.255.192/26 via 192.168.1.76 dev ens160 proto bird
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">172.17.0.0/16 dev docker0 proto kernel scope link src 172.17.0.1 linkdown
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">172.18.0.0/16 dev br-9b299fee73c0 proto kernel scope link src 172.18.0.1 linkdown
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.0/24 dev ens160 proto kernel scope link src 192.168.1.71
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>3.測試跨節點，網路是否通的&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redisinsight-cf7f6847b-s2zgg 1/1 Running &lt;span class="m">5&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 91d 10.201.255.199 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">test-nginx 1/1 Running &lt;span class="m">7&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 104d 10.201.14.162 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web2-5d48fb75c5-dt5xd 1/1 Running &lt;span class="m">7&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 104d 10.201.255.230 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web2-5d48fb75c5-ggmrz 1/1 Running &lt;span class="m">7&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 104d 10.201.14.136 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web2-5d48fb75c5-jsvck 1/1 Running &lt;span class="m">7&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 104d 10.201.255.217 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 測試跨節點，網路是通的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl &lt;span class="nb">exec&lt;/span> -ti test-nginx sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl &lt;span class="nb">exec&lt;/span> &lt;span class="o">[&lt;/span>POD&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>COMMAND&lt;span class="o">]&lt;/span> is DEPRECATED and will be removed in a future version. Use kubectl &lt;span class="nb">exec&lt;/span> &lt;span class="o">[&lt;/span>POD&lt;span class="o">]&lt;/span> -- &lt;span class="o">[&lt;/span>COMMAND&lt;span class="o">]&lt;/span> instead.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/ &lt;span class="c1"># ping 10.201.255.230&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PING 10.201.255.230 &lt;span class="o">(&lt;/span>10.201.255.230&lt;span class="o">)&lt;/span>: &lt;span class="m">56&lt;/span> data bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">64&lt;/span> bytes from 10.201.255.230: &lt;span class="nv">seq&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ttl&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">62&lt;/span> &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>0.445 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">64&lt;/span> bytes from 10.201.255.230: &lt;span class="nv">seq&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="nv">ttl&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">62&lt;/span> &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>0.364 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">64&lt;/span> bytes from 10.201.255.230: &lt;span class="nv">seq&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span> &lt;span class="nv">ttl&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">62&lt;/span> &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>0.447 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">64&lt;/span> bytes from 10.201.255.230: &lt;span class="nv">seq&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">3&lt;/span> &lt;span class="nv">ttl&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">62&lt;/span> &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>0.357 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 重啟節點一樣沒問題，如果是在營運的主機，就別重啟了&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# reboot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:~# reboot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:~# reboot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node75u:~# reboot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>查看bgp狀況&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# calicoctl node status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Calico process is running.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IPv4 BGP status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+--------------+-------------------+-------+----------+-------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> PEER ADDRESS &lt;span class="p">|&lt;/span> PEER TYPE &lt;span class="p">|&lt;/span> STATE &lt;span class="p">|&lt;/span> SINCE &lt;span class="p">|&lt;/span> INFO &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+--------------+-------------------+-------+----------+-------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> 192.168.1.72 &lt;span class="p">|&lt;/span> node-to-node mesh &lt;span class="p">|&lt;/span> up &lt;span class="p">|&lt;/span> 15:53:34 &lt;span class="p">|&lt;/span> Established &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> 192.168.1.73 &lt;span class="p">|&lt;/span> node-to-node mesh &lt;span class="p">|&lt;/span> up &lt;span class="p">|&lt;/span> 15:54:20 &lt;span class="p">|&lt;/span> Established &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> 192.168.1.75 &lt;span class="p">|&lt;/span> node-to-node mesh &lt;span class="p">|&lt;/span> up &lt;span class="p">|&lt;/span> 15:53:58 &lt;span class="p">|&lt;/span> Established &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">|&lt;/span> 192.168.1.76 &lt;span class="p">|&lt;/span> node-to-node mesh &lt;span class="p">|&lt;/span> up &lt;span class="p">|&lt;/span> 15:54:40 &lt;span class="p">|&lt;/span> Established &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">+--------------+-------------------+-------+----------+-------------+
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IPv6 BGP status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">No IPv6 peers found.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>kubernetes nodelocaldns 解析自定義domain失敗</title><link>https://blog.goldfishbrain-fighting.com/2024/kubenetes-nodelocaldns-nslookup-custom-domain-error/</link><pubDate>Sun, 17 Mar 2024 16:04:36 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2024/kubenetes-nodelocaldns-nslookup-custom-domain-error/</guid><description>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2024/kubenetes-nodelocaldns-nslookup-custom-domain-error/media/Pasted-image-20240317161321.png"
width="874"
height="1101"
srcset="https://blog.goldfishbrain-fighting.com/2024/kubenetes-nodelocaldns-nslookup-custom-domain-error/media/Pasted-image-20240317161321_hu511830542aba15362dc0bb39918d1bf1_382790_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2024/kubenetes-nodelocaldns-nslookup-custom-domain-error/media/Pasted-image-20240317161321_hu511830542aba15362dc0bb39918d1bf1_382790_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="79"
data-flex-basis="190px"
>&lt;/p>
&lt;p>參考資料：
&lt;a class="link" href="https://www.qikqiak.com/post/resolve-coredns-hosts-invalid/" target="_blank" rel="noopener"
>https://www.qikqiak.com/post/resolve-coredns-hosts-invalid/&lt;/a>&lt;/p>
&lt;p>設定coredns hosts解析custom domain(web.jimmyhom.tw)，kubernetes內部pod，一樣無法正常解析到custom domain。&lt;/p>
&lt;p>&lt;font color=red>需將其nodelocaldns的configmap修改一下，將其forward到coredns。&lt;/font>&lt;/p>
&lt;ol>
&lt;li>測試未修改前，在coredns添加hosts設定，pod無法正常解析到web.jimmyhom.tw&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redisinsight-cf7f6847b-s2zgg 1/1 Running &lt;span class="m">5&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 91d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">test-nginx 1/1 Running &lt;span class="m">7&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 104d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web2-5d48fb75c5-dt5xd 1/1 Running &lt;span class="m">7&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 104d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web2-5d48fb75c5-ggmrz 1/1 Running &lt;span class="m">7&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 104d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web2-5d48fb75c5-jsvck 1/1 Running &lt;span class="m">7&lt;/span> &lt;span class="o">(&lt;/span>79d ago&lt;span class="o">)&lt;/span> 104d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 測試是否可以解析到&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl &lt;span class="nb">exec&lt;/span> -ti test-nginx sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl &lt;span class="nb">exec&lt;/span> &lt;span class="o">[&lt;/span>POD&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>COMMAND&lt;span class="o">]&lt;/span> is DEPRECATED and will be removed in a future version. Use kubectl &lt;span class="nb">exec&lt;/span> &lt;span class="o">[&lt;/span>POD&lt;span class="o">]&lt;/span> -- &lt;span class="o">[&lt;/span>COMMAND&lt;span class="o">]&lt;/span> instead.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/ &lt;span class="c1"># curl web.jimmyhome.tw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl: &lt;span class="o">(&lt;/span>6&lt;span class="o">)&lt;/span> Could not resolve host: web.jimmyhome.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/ &lt;span class="c1"># ping web.jimmyhome.tw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ping: bad address &lt;span class="s1">&amp;#39;web.jimmyhome.tw&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 更改coredns設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get cm coredns -o yaml -n kube-system &amp;gt; coredns-cm.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Corefile: &lt;span class="p">|&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:53 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> errors &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> health &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> lameduck 5s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ready
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kubernetes cluster.local in-addr.arpa ip6.arpa &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pods insecure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fallthrough in-addr.arpa ip6.arpa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 192.168.1.60 web.jimmyhome.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fallthrough
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 套用設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl apply -f coredns-cm.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">configmap/coredns configured&lt;span class="o">](&lt;/span>&amp;lt;root@k8s-master71u:~# kubectl apply -f coredns-cm.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">configmap/coredns configured
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 重啟pod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl delete pod coredns-57c7559cc8-sq8c4 -n kube-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;coredns-57c7559cc8-sq8c4&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl delete pod coredns-57c7559cc8-vrf7g -n kube-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;coredns-57c7559cc8-vrf7g&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -n kube-system &lt;span class="p">|&lt;/span> grep -i coredns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">coredns-57c7559cc8-dpjkw 1/1 Running &lt;span class="m">0&lt;/span> 41s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">coredns-57c7559cc8-ng9kk 1/1 Running &lt;span class="m">0&lt;/span> 24s&amp;gt;&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 測試，一樣解析不到&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl &lt;span class="nb">exec&lt;/span> -ti test-nginx sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl &lt;span class="nb">exec&lt;/span> &lt;span class="o">[&lt;/span>POD&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>COMMAND&lt;span class="o">]&lt;/span> is DEPRECATED and will be removed in a future version. Use kubectl &lt;span class="nb">exec&lt;/span> &lt;span class="o">[&lt;/span>POD&lt;span class="o">]&lt;/span> -- &lt;span class="o">[&lt;/span>COMMAND&lt;span class="o">]&lt;/span> instead.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/ &lt;span class="c1"># curl web.jimmyhome.tw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl: &lt;span class="o">(&lt;/span>6&lt;span class="o">)&lt;/span> Could not resolve host: web.jimmyhome.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/ &lt;span class="c1"># ping web.jimmyhome.tw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ping: bad address &lt;span class="s1">&amp;#39;web.jimmyhome.tw&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>修改nodelocaldns設定，pod正常能解析到web.jimmyhom.tw&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 更改nodelocaldns設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl get cm nodelocaldns -n kube-system -o yaml &amp;gt; nodelocaldns-configmap.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# vim nodelocaldns-configmap.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 原本forward . /etc/resolv.conf&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:53 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> errors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cache &lt;span class="m">30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> loop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">bind&lt;/span> 169.254.25.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> forward . /etc/resolv.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prometheus :9253
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 修改成forward&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> .:53 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> errors
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cache &lt;span class="m">30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> loop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">bind&lt;/span> 169.254.25.10
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> forward . 10.202.0.3 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> force_tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prometheus :9253
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl apply -f nodelocaldns-configmap.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">configmap/nodelocaldns configured
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 重啟pod&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl delete pod nodelocaldns-5wcc7 -n kube-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;nodelocaldns-5wcc7&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl delete pod nodelocaldns-nsnh4 -n kube-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;nodelocaldns-nsnh4&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl delete pod nodelocaldns-nwgxn -n kube-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;nodelocaldns-nwgxn&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl delete pod nodelocaldns-pvwx6 -n kube-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;nodelocaldns-pvwx6&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl delete pod nodelocaldns-zvmsk -n kube-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod &lt;span class="s2">&amp;#34;nodelocaldns-zvmsk&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -n kube-system &lt;span class="p">|&lt;/span> grep nodelocaldns
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nodelocaldns-5pb2r 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>28s ago&lt;span class="o">)&lt;/span> 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nodelocaldns-g82jn 1/1 Running &lt;span class="m">0&lt;/span> 49s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nodelocaldns-gtkpd 1/1 Running &lt;span class="m">0&lt;/span> 59s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nodelocaldns-l9t5p 1/1 Running &lt;span class="m">0&lt;/span> 70s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nodelocaldns-m9rnv 1/1 Running &lt;span class="m">0&lt;/span> 39s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 測試可以ping web.jimmyhome.tw和curl web.jimmyhome.tw了&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl &lt;span class="nb">exec&lt;/span> -ti test-nginx sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl &lt;span class="nb">exec&lt;/span> &lt;span class="o">[&lt;/span>POD&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>COMMAND&lt;span class="o">]&lt;/span> is DEPRECATED and will be removed in a future version. Use kubectl &lt;span class="nb">exec&lt;/span> &lt;span class="o">[&lt;/span>POD&lt;span class="o">]&lt;/span> -- &lt;span class="o">[&lt;/span>COMMAND&lt;span class="o">]&lt;/span> instead.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/ &lt;span class="c1"># ping web.jimmyhome.tw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PING web.jimmyhome.tw &lt;span class="o">(&lt;/span>192.168.1.60&lt;span class="o">)&lt;/span>: &lt;span class="m">56&lt;/span> data bytes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">64&lt;/span> bytes from 192.168.1.60: &lt;span class="nv">seq&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ttl&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">63&lt;/span> &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>0.470 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">64&lt;/span> bytes from 192.168.1.60: &lt;span class="nv">seq&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="nv">ttl&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">63&lt;/span> &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>0.335 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">64&lt;/span> bytes from 192.168.1.60: &lt;span class="nv">seq&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span> &lt;span class="nv">ttl&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">63&lt;/span> &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>0.393 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">64&lt;/span> bytes from 192.168.1.60: &lt;span class="nv">seq&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">3&lt;/span> &lt;span class="nv">ttl&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">63&lt;/span> &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>0.289 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">^C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- web.jimmyhome.tw ping statistics ---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">4&lt;/span> packets transmitted, &lt;span class="m">4&lt;/span> packets received, 0% packet loss
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">round-trip min/avg/max &lt;span class="o">=&lt;/span> 0.289/0.371/0.470 ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/ &lt;span class="c1"># curl web.jimmyhome.tw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;!DOCTYPE html PUBLIC &lt;span class="s2">&amp;#34;-//W3C//DTD XHTML 1.0 Transitional//EN&amp;#34;&lt;/span> &lt;span class="s2">&amp;#34;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;html &lt;span class="nv">xmlns&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://www.w3.org/1999/xhtml&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;!--
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Modified from the Debian original &lt;span class="k">for&lt;/span> Ubuntu
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Last updated: 2022-03-22
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> See: https://launchpad.net/bugs/1966004
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> --&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;head&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;meta http-equiv&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Content-Type&amp;#34;&lt;/span> &lt;span class="nv">content&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;text/html; charset=UTF-8&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;title&amp;gt;Apache2 Ubuntu Default Page: It works&amp;lt;/title&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &amp;lt;style &lt;span class="nv">type&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;text/css&amp;#34;&lt;/span> &lt;span class="nv">media&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;screen&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>牛奶消費的五大風險，最高風險竟可導致死亡！一探究竟。</title><link>https://blog.goldfishbrain-fighting.com/2024/%E7%89%9B%E5%A5%B6%E6%B6%88%E8%B2%BB%E7%9A%84%E4%BA%94%E5%A4%A7%E9%A2%A8%E9%9A%AA%E6%9C%80%E9%AB%98%E9%A2%A8%E9%9A%AA%E7%AB%9F%E5%8F%AF%E5%B0%8E%E8%87%B4%E6%AD%BB%E4%BA%A1%E4%B8%80%E6%8E%A2%E7%A9%B6%E7%AB%9F/</link><pubDate>Sun, 04 Feb 2024 23:00:42 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2024/%E7%89%9B%E5%A5%B6%E6%B6%88%E8%B2%BB%E7%9A%84%E4%BA%94%E5%A4%A7%E9%A2%A8%E9%9A%AA%E6%9C%80%E9%AB%98%E9%A2%A8%E9%9A%AA%E7%AB%9F%E5%8F%AF%E5%B0%8E%E8%87%B4%E6%AD%BB%E4%BA%A1%E4%B8%80%E6%8E%A2%E7%A9%B6%E7%AB%9F/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">歡迎來到「異境偵探」頻道，我們今天將深入探討一個日常生活中常見卻又爭議性的話題：飲用牛奶的好處與壞處。牛奶一直被認為是健康飲食的重要組成部分，但隨著時間的推移，越來越多的研究揭示了其潛在的負面影響。讓我們一起了解更多。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 牛奶的好處
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">從小我們就被告知，喝牛奶可以幫助我們成長、變得強壯。然而，這部影片揭示了過量飲用牛奶可能導致的健康問題。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. 消化問題
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">約65%的世界人口難以消化牛奶中的乳糖，這可能會引起消化不良等問題。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. 過量飲用牛奶的風險
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">大量攝入鈣質可能導致多種健康問題，包括腎結石、乳鹼症候群（由於酸鹼失衡導致腎功能損失）以及增加患前列腺癌和結直腸癌的風險。此外，牛奶中的高脂肪和膽固醇含量也可能增加心臟病的風險。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4. 過量飲用牛奶與死亡率
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">一項2014年對超過61,000名瑞典女性和45,000名瑞典男性的研究發現，每天飲用三杯或以上牛奶的女性，與每天飲用少於一杯的女性相比，癌症死亡風險增加了44%。每多喝一杯牛奶，心臟病死亡風險增加15%。男性的總體死亡風險較低，每天飲用三杯或以上牛奶的男性與每天飲用少於一杯的男性相比，總體死亡風險增加了10%。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5. 牛奶僅飲食挑戰
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">一些主要是健身愛好者嘗試僅喝牛奶，甚至一天喝一加侖，以增加體重。儘管這可能會增加體重，但僅飲用牛奶會讓人們對其他含有必需營養素（如纖維、葉酸和鐵）的重要食物的食慾減少，這些營養素對降低膽固醇、管理血糖和向細胞及組織運送氧氣至關重要。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">結論
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">影片結論建議，除非經過註冊營養師的建議，否則應遵循專業設定的飲食指南，限制牛奶的攝取量，不要過量飲用。牛奶無疑是營養豐富的飲品，但像所有食物一樣，適量攝取才是關鍵。感謝觀看「異境偵探」頻道，如果您對此話題感興趣，請不要忘記訂閱我們的頻道，分享此視頻，並開啟通知，以便獲得更多健康飲食和生活方式的實用信息。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">根據以上逐字稿，幫我配畫面，每三秒換一個畫面，列出素材對應的關鍵字就可以，不用生成圖片，中英文對照，同時也產生leonardo ai prompt，表格形式給我，提供詳細一點時間長一點，可分段生成
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">按照這個公式：最「形容詞」的「數量」的「對象」 結合對標的標題與&amp;#34;牛奶的益處與風險：一個全面的解析，top5&amp;#34;，給我十個標題給我，hashtag也都要提供喔
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1.全世界最大的人體部位，第壹名長度34.29公分，許多女性爭相“試槍”。#全球最top#吉尼 斯世界紀錄#最大人體部位#驚奇時刻批o10#腦洞大開#世界奇聞
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2.全世界1O種吃掉主人的寵物！猫咪和猪也會吃人？駱駝竟然會侵犯女人？#全球最top#危 險寵物牡op10#腦洞大開
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3.世界最瘋狂的分娩方式，雌性竟然可以長出陰莖？第一名直接治愈密集恐懼癥！#全球最 top#分娩#驚奇時刻top1O#腦洞大開#世界奇聞
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">牛奶消費的五大風險，最高風險竟可導致死亡！一探究竟。#牛奶風險#健康飲食Top5#生活小知識#腦洞大開#飲食安全
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">five-major-risks-of-milk-consumption-the-highest-risk-can-lead-to-death-check-it-out
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">請將以下標題，產生leonardo ai prompt，要做為Youtube封面用的，prompt裡面要包含Youbute Icon，不用真的產生圖片，提供我prompt就好
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">牛奶消費的五大風險，最高風險竟可導致死亡！一探究竟。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">幫我依據以下逐字稿，生成這部影片的說明稿，根據這個標題&amp;#34;牛奶消費的五大風險，最高風險竟可導致死亡！一探究竟。&amp;#34;，開頭幫我加一些針對這些逐字稿的介紹，並加上頻道&amp;#34;異境偵探&amp;#34;，我需要放在影片的說明欄中，每一章都要列出標題與簡單介紹，不用太細節
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>最啟發人心的三個原子習慣章節，開啟改變生活的第一步。</title><link>https://blog.goldfishbrain-fighting.com/2024/%E6%9C%80%E5%95%9F%E7%99%BC%E4%BA%BA%E5%BF%83%E7%9A%84%E4%B8%89%E5%80%8B%E5%8E%9F%E5%AD%90%E7%BF%92%E6%85%A3%E7%AB%A0%E7%AF%80%E9%96%8B%E5%95%9F%E6%94%B9%E8%AE%8A%E7%94%9F%E6%B4%BB%E7%9A%84%E7%AC%AC%E4%B8%80%E6%AD%A5/</link><pubDate>Sun, 04 Feb 2024 00:04:20 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2024/%E6%9C%80%E5%95%9F%E7%99%BC%E4%BA%BA%E5%BF%83%E7%9A%84%E4%B8%89%E5%80%8B%E5%8E%9F%E5%AD%90%E7%BF%92%E6%85%A3%E7%AB%A0%E7%AF%80%E9%96%8B%E5%95%9F%E6%94%B9%E8%AE%8A%E7%94%9F%E6%B4%BB%E7%9A%84%E7%AC%AC%E4%B8%80%E6%AD%A5/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">在這段探索中，我們將深入「異境偵探」的莫測領域，一起揭開原子習慣如何逐步重塑我們生活的神秘面紗。在即將呈現的影片中，我們將帶領您深入探索一系列我從閱讀中精選出來的、對我個人影響深遠的句子。這部影片不僅是一場知識的旅程，更是一次關於自我發現與成長的冒險。影片的結構精心設計，以「基本原理」作為大章節的核心，探討一個關鍵問題：為何細微改變能夠帶來巨大的差異？
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">前言：原子習慣改變了我的人生
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我們將從我的個人經歷出發，分享原子習慣如何根本上改變了我的人生軌跡。這不僅是一段自我轉變的旅程，也是對於如何透過小小的改變來實現人生巨大進步的深刻見解。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">第一章：原子習慣的驚人力量
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">在這一章節中，我們將深入探討原子習慣所蘊含的無窮力量，以及這些看似微小的習慣如何累積成為改變命運的關鍵。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">第二章：改變習慣最有效的方法，是改變身分認同
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我們將探討為何改變身分認同是改變習慣中最核心、最有效的策略，以及這一策略如何使我們達到長期的自我提升與成長。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">第三章：四個簡單的步驟，讓你建立更好的習慣
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">最後，我們將揭示四個簡單卻強大的步驟，這些步驟將指引你建立更好的習慣，從而開啟一個更加積極、更有成就的生活。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">基本原理| 為何細微改變會帶來巨大差異?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">〈前言〉原子習慣改變了我的人生
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 我進入丹尼森大學時。那是一個新的開始，也是在那個地方，我初次發現微小習慣的驚人力量。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 只要你願意堅持多年，起初看似微不足道的改變終將像以複利計算一樣利滾利，滾出非比尋常的結果。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 唯一讓我進步的方式──我唯一做的選擇──就是由小做起。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 微小的習慣幫助我發揮自身潛能
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 本書的骨幹是我所謂「習慣的四階段模型」──提示、渴望、回應、獎賞
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 這本書探討的是不變的部分
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 人很容易高估一個決定性瞬間的重要性，也很容易低估每天都做些小改善的價值
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 本書的骨幹是我所謂「習慣的四階段模型」──提示、渴望、回應、獎賞
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 這本書探討的是不變的部分
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1. 原子習慣的驚人力量
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「複利效應，讓小習慣造就大不同」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 人很容易高估一個決定性瞬間的重要性，也很容易低估每天都做些小改善的價值
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 造就成功的，是日常習慣，而不是千載難逢的轉變。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 好習慣讓時間成為你的盟友，壞習慣讓時間與你為敵。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「建立持久的習慣為何這麼難？」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 在任何追尋的前期或中期，常常出現所謂的「失望之谷」──你期待有線性進展，但在前幾天、幾週，甚至幾個月，效果都很不顯著，令人感到挫敗。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 強大的成果總是姍姍來遲。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「別管目標，專注於系統就好」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 目標是你想要達到的成果，而系統是讓你達到那些成果的過程。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 想要更好的成果，就不要管目標了，把焦點放在系統上就好。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 目標有助於確立方向，但系統是進步的最佳解答。如果花太多時間思考目標，卻花太少時間設計系統，會浮現許多問題。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">``問題一贏家跟輸家擁有同樣的目標``
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">``問題二目標達成不過是短暫的改變``
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 目標的達成只能暫時改變你的生活。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">``問題三目標限制了你的快樂``
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 系統優先的心態提供了解藥。當你愛上過程，而非產物，就不必等到獲得自己的許可才能快樂。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">``問題四目標與長期進步互相矛盾``
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 最後，目標取向的心態可能造成一種「溜溜球效應」。許多跑者連續努力數月，但衝過終點線之後，就停止訓練了。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 到頭來，progress（進步）的必要條件，是對 process（過程）的投入。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「原子習慣的系統」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 本書的核心主旨之一，就是教你聚焦於整體系統，而非單一目標。這也是「原子」一詞背後較為深層的意義之一。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 原子習慣指的是微小的改變、微不足道的增長、百分之一的改善。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 習慣雖小，力量無窮，這便是「原子習慣」一詞的真義
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「本章總覽」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 習慣是「自我改善」這件事的複利。每天進步百分之一，長久下來，進境可觀。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 習慣是一把兩面刃，能載舟亦能覆舟，因此了解細節是必要的。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 在跨越關鍵門檻之前，小改變往往看似無足輕重。所有複利過程的強大成果總是遲來，你要有耐性。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 原子習慣是構成大系統的小習慣。如同原子是分子的組成單元，原子習慣是建構非凡成果的元件。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 想要更好的結果，就別管目標設定，而是專注於你的系統。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 決定你成功或失敗的，不是你的目標，而是你的系統。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">２. 改變習慣最有效的方法，是改變身分認同
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 改變習慣之所以如此具有挑戰性，原因有二：一，我們試圖改變的東西不對；二，我們試圖改變習慣的方式不對。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 第一個錯誤是試圖改變的東西不對。要了解我的意思，必須知道改變的發生分成三個層次，你可以想成洋蔥的三層皮。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">``第一層是改變結果。``
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">``第二層是改變過程。``
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">``最深的第三層是改變身分認同。``
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 結果關乎你得到什麼，過程關乎你做了什麼，身分認同則關乎你相信什麼。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 問題在於改變的方向。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 許多人在展開改變習慣的過程時，都把重點放在想要達成什麼。這會將我們引至以結果為基礎的習慣。替代做法是建立以身分認同為基礎的習慣──在這種方式下，我們一開始就把重點放在希望成為什麼樣的人。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 每個行動系統的背後都是一個信念系統。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 一組信念與假設形塑了系統，習慣背後存在著一個身分認同。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 你也許想要更有錢，但倘若你的身分認同就是個傾向消費而非創造收入的人，你就會一直被吸引去花錢，而不是賺錢
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 你也許想要變得更健康，但倘若你繼續把舒適擺在成就之前，你便會選擇放鬆而非訓練
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 你有新的目標與新的計畫，但你還沒改變自己是個什麼樣的人。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 內在動機的終極型態，就是讓習慣成為身分認同的一部分。覺得自己是想要這樣的人是一回事，覺得自己就是這樣的人又是另一回事。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 反覆對自己述說同一個故事，多年下來就很容易陷入這個心理慣例，認為它就是事實。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 然而長遠來說，未能維持習慣的真正原因，都是被你的自我形象阻攔。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 想要成為最好的自己，就要持續編輯、修訂自己的信念，升級並拓展你的身分認同。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「改變身分認同的兩個步驟」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 習慣就是身分認同的具體化。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 有愈多證據支持某個信念，你愈會深信不疑。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 我並非一開始就是個，而是透過習慣成為一名。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 當然，習慣並非影響身分認同的唯一因素，但因為頻率的關係，它們往往是最重要的因素。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 藉由提供新身分的證據，小習慣可以造就有意義的差異；而當一個改變有意義，它實際上就是一個大改變。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 要改變你是什麼樣的人，最實際的方法就是改變你做的事。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">``1.決定你想要成為什麼樣的人。``
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">``2.透過生活中的小勝利來向自己證明。``
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 以身分認同為基礎的習慣這個概念是一塊敲門磚，引出本書另一個關鍵主題：回饋迴路。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 焦點永遠都要放在成為某一種人，而非得到某一種成果。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「習慣會讓你變成你想要成為的人」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 第一個步驟不是什麼，也不是如何，而是什麼樣的人。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 習慣可以幫助你達成上述這些，但根本上，習慣的精髓並非擁有，而是成為。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「本章總覽」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 改變分為三個層次：成果改變、過程改變，以及身分認同改變。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 改變習慣最有效的方法，就是把焦點放在想要成為什麼樣的人，而不是想要達到什麼成果。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 你的身分認同源自你的習慣。每個行動都是一張選票，投給你想要成為的那種人。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 要成為最好的自己，就必須持續編輯、修訂自己的信念，升級並拓展你的身分認同。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 習慣之所以重要的真正原因，不是因為可以讓你得到更好的成果（雖然確實有這個功效），而是因為可以讓你改變對自身的信念。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">３. 四個簡單的步驟，讓你建立更好的習慣
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 桑代克如此描述學習的過程：「帶來可喜後果的行為往往會被重複，而帶來可厭後果的行為比較不可能被重複。」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「習慣可以讓你騰出自由思考與創意所需的心理空間」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 所謂習慣，就是重複次數多到足以自動化的行為。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 碰巧遇上意料之外的獎賞後，你下次就會變更策略。大腦會立刻開始記錄獎賞出現之前的行為。等一下，這感覺真棒。我在這之前做了什麼？
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 所謂習慣，就是針對規律遇上的問題與壓力的一組自動化解決方案。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 科學家傑森．瑞哈所言：「習慣不過是環境中反覆出現的問題的可靠解決之道。」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 習慣減輕了認知負荷，釋出心智容量，好讓你把注意力分配給其他任務。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 習慣不會限制自由，而是創造了自由。事實上，沒能掌握習慣的人往往擁有最少的自由。少了良好的財務習慣，你永遠在操心下一餐的著落；少了良好的健康習慣，你會永遠缺乏活力；少了良好的學習習慣，你會一直感覺自己追不上別人。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「習慣形成的四步驟」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 提示、渴望、回應、獎賞
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 我們因為兩個目的追求獎賞：一，獎賞滿足我們；二，獎賞教育我們。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 這四個步驟合在一起，形成了一個神經學上的回饋迴路──提示、渴望、回應、獎賞；提示、渴望、回應、獎賞──最終讓你建立了自動化的習慣。這樣的循環被稱為習慣迴路。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「適用於任何領域的行為改變四法則」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">每當你想要改變一個行為，只要自問：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 1.我要怎麼讓提示顯而易見？
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 2.我要怎麼讓習慣有吸引力？
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 3.我要怎麼讓行動輕而易舉？
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 4.我要怎麼讓獎賞令人滿足？
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「本章總覽」
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 習慣就是重複次數多到足以自動化的行為。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 習慣的終極目標，就是用最少的能量與努力解決生活中的問題。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 所有習慣都能被分解為包括提示、渴望、回應、獎賞等四步驟的回饋迴路。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- 行為改變四法則是一組能幫助我們建立更好習慣的簡單規則：一，讓提示顯而易見；二，讓習慣有吸引力；三，讓行動輕而易舉；四，讓獎賞令人滿足。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">「異境偵探」透過這一系列的探索，揭示了原子習慣背後的深層意義：不是關於一時的改變，而是關於身分認同的轉變、持續的自我革新。透過微小的、日常的努力，我們可以逐步塑造出更好的自我，實現那些似乎遙不可及的目標。在這個過程中，「異境偵探」不僅是你的指南，更是你的同行者，見證每一步成長與變化。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">感謝您的觀看與支持，我們「異境偵探」下一次的探險，期待您的再次加入。記得開啟通知鈴鐺，隨時掌握我們的最新動態。在這個充滿奇幻與未知的世界中，讓我們一起探索、學習、成長。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">按照這個公式：最「形容詞」的「數量」的「對象」 結合對標的標題與&amp;#34;原子習慣，精選句子，影響深遠，chapter1~3&amp;#34;，給我十個標題給我，hashtag也都要提供喔
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1.全世界最大的人體部位，第壹名長度34.29公分，許多女性爭相“試槍”。#全球最top#吉尼 斯世界紀錄#最大人體部位#驚奇時刻批o10#腦洞大開#世界奇聞
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2.全世界1O種吃掉主人的寵物！猫咪和猪也會吃人？駱駝竟然會侵犯女人？#全球最top#危 險寵物牡op10#腦洞大開
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3.世界最瘋狂的分娩方式，雌性竟然可以長出陰莖？第一名直接治愈密集恐懼癥！#全球最 top#分娩#驚奇時刻top1O#腦洞大開#世界奇聞
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">最啟發人心的三個原子習慣章節，開啟改變生活的第一步。#原子習慣#啟發人心#影響深遠#改變生活#開啟第一步#章節精選
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">the-most-inspiring-chapters-on-three-atomic-habits-are-the-first-step-to-changing-your-life
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">請將以下標題，產生leonardo ai prompt，指定16:9格式，要做為Youtube封面用的，prompt裡面要包含Youbute Icon，不用真的產生圖片，提供我prompt就好
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">最啟發人心的三個原子習慣章節，開啟改變生活的第一步。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">幫我依據以下逐字稿，生成這部影片的說明稿，根據這個標題&amp;#34;最啟發人心的三個原子習慣章節，開啟改變生活的第一步。&amp;#34;，開頭幫我加一些針對這些逐字稿的介紹，並加上頻道&amp;#34;異境偵探&amp;#34;，我需要放在影片的說明欄中，每一章都要列出標題與簡單介紹，不用太細節
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>台灣彰化鹿港最神秘的10個角落，貝殼廟的隱藏秘密揭露！</title><link>https://blog.goldfishbrain-fighting.com/2024/%E5%8F%B0%E7%81%A3%E5%BD%B0%E5%8C%96%E9%B9%BF%E6%B8%AF%E6%9C%80%E7%A5%9E%E7%A7%98%E7%9A%8410%E5%80%8B%E8%A7%92%E8%90%BD%E8%B2%9D%E6%AE%BC%E5%BB%9F%E7%9A%84%E9%9A%B1%E8%97%8F%E7%A7%98%E5%AF%86%E6%8F%AD%E9%9C%B2/</link><pubDate>Sat, 03 Feb 2024 00:01:29 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2024/%E5%8F%B0%E7%81%A3%E5%BD%B0%E5%8C%96%E9%B9%BF%E6%B8%AF%E6%9C%80%E7%A5%9E%E7%A7%98%E7%9A%8410%E5%80%8B%E8%A7%92%E8%90%BD%E8%B2%9D%E6%AE%BC%E5%BB%9F%E7%9A%84%E9%9A%B1%E8%97%8F%E7%A7%98%E5%AF%86%E6%8F%AD%E9%9C%B2/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">根據台灣彰化的貝殼廟為故事，幫我寫一個8分鐘的逐字稿，同時加入頻道名稱「異境偵探」，語氣故弄玄虚，不囉嗦。視頻結構為：開頭，第十名，第九名，第八名…把最吸引人的第一名放在結尾，提升視頻完播率，每個名次，幫我描述詳細一點，最少要4000字，分段生成，請用繁體中文撰寫
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">親愛的觀眾，歡迎您進入「異境偵探」的奇幻世界。在今天的節目裡，我們將踏上一段尋奇探秘的旅程，目的地是台灣彰化縣鹿港鎮一處神祕而壯觀的地點——貝殼廟。在接下來的時間裡，我們將揭開貝殼廟十大迷人之處的面紗，從第十名一路探索到最讓人嘆為觀止的第一名。現在，就讓我們一同啟程，開始這趟不凡的旅程。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">在這個神秘旅程的起點，第十名是貝殼廟的外牆。這些外牆不僅堅固，更是藝術品。從遠處看，這些牆面宛如一幅巨大的壁畫，色彩斑斕，光彩奪目。靠近一看，才發現這些繽紛的色彩全由無數小巧精緻的貝殼拼湊而成。每一片貝殼都經過精心挑選和布置，共同繪出了一幅幅生動的自然景象，彷彿是大海的波浪在牆上起伏舞動，讓人感受到海洋的呼吸和節奏。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">轉向第九名，我們來到了廟宇的前院。這裡，每一塊石板上都鑲嵌著精美的貝殼圖案，彷彿是大地上的星星，引領著信徒和遊客進入這個神祕空間。走在這條通往神聖殿堂的路上，每一步都踩在藝術品上，每一步都充滿敬畏和好奇。這些石板不僅是路徑，更像是一段故事的開端，讓人不禁想要揭開更多貝殼廟的秘密。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">第八名的魅力在於廟宇的屋頂。這些屋頂不同於一般的廟宇，它們經過精心設計，用貝殼和珊瑚創造出獨特的圖騰和圖案。站在廟宇的外面遠遠望去，這些屋頂在陽光下閃耀著金光，彷彿是天空中的一片片雲彩。每當風吹過，屋頂上的貝殼和珊瑚會發出輕柔的聲響，像是大自然的樂章，讓人心神寧靜。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">繼續前進，第七名是廟內的一座古鐘。這座鐘不僅體型龐大，其表面更鑲滿了奇特的海洋寶藏。每當鐘聲響起，那深沉而悠遠的聲音彷彿能穿越時空，帶領人們回到過去。這聲音不只是時間的記號，它更像是一個神秘的咒語，喚醒著每個人內心深處的記憶和情感。鐘聲中蘊含的不僅是歲月的故事，更是一種文化的傳承和對未來的祈盼。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">在我們的探索旅程中，第六名帶我們來到了一個神秘的角落——貝殼廟的後院。這裡有一座小巧而精緻的花園，每一處都布滿了來自海洋的禮物。這個花園不僅有美麗的花朵和綠葉，更有用各種貝殼和珊瑚精心打造的小型裝飾，這些裝飾巧妙地融入了自然之中，創造出一個和諧而寧靜的空間。在這座花園中漫步，彷彿可以聽到海浪的聲音，感受到大海的呼吸。每一個轉角都有新的驚喜，每一個細節都彷彿在訴說著一個關於海洋的故事。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">第五名，則是貝殼廟中一座隱藏的小型展覽廳。這個展覽廳裡收藏著各種珍稀的貝殼和珊瑚，每一件都是大自然的傑作，也是人類智慧的結晶。這些展品不僅展示了貝殼和珊瑚的自然之美，更通過精心的陳列和照明，展現了一種超凡脫俗的藝術氛圍。在這裡，人們可以近距離地欣賞這些海洋寶藏的細節，感受到與大海的深刻連結。這個展覽廳不僅是一個觀賞的場所，更是一個學習和領悟的空間，讓人們對大自然的奧秘有更深的理解和敬畏。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">接著，第四名將我們帶到了貝殼廟的一個核心區域——內殿。內殿的氣氛神聖而肅穆，每一個角落都透露著莊嚴和尊敬。這裡的牆壁和天花板上布滿了華麗的貝殼和珊瑚裝飾，每一塊貝殼都經過精心挑選和安置，共同繪出了一幅幅宗教和神話的畫面。這些畫面不僅美輪美奐，更富含深厚的文化和宗教意義。站在內殿中央，抬頭仰望，可以看到一幅巨大的天花板畫，這幅畫以貝殼和珊瑚為媒介，描繪了一個關於創世和神話的宏偉故事。在這樣的環境下，人們不禁會感到自己的渺小和對宇宙的敬畏。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我們的探險旅程來到了第三名，這是一處令人驚嘆的場所——廟宇的主祭台。這裡不僅是進行宗教儀式的中心，更是匠心獨運的藝術展示。主祭台上，擺放著由各種貝殼和珊瑚精心製作的神像和供品。這些神像在蠟燭的微光下閃閃發亮，彷彿每一尊都有著自己的生命和故事。每一個細節，從神像的表情到供品的擺放，都經過精心設計，展現了人與自然和諧共處的美好。在這裡，時間似乎凝固，空氣中充滿了神聖和莊重的氣息，讓所有來訪者都能感受到一種內心的平靜和敬畏。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">緊接著，第二名是一個讓人無法忘懷的神秘之地——廟宇的地下神殿。這個地下神殿只有少數人能夠進入，它是貝殼廟最為隱秘和神聖的區域。走下古老的石階，隨著每一步的下沉，周圍的光線變得柔和而神秘。地下神殿的牆壁上掛滿了歷史悠久的藝術品，每一件都以貝殼和珊瑚為主題，展現了不同文化和歷史時期的風格。在這裡，時間似乎停滯，空氣中充滿了故事和傳說的味道。地下神殿不僅是一個靜思和祈禱的場所，更是一個連接過去與未來，現實與神話的神秘空間。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">最終，我們來到了這次探險的高潮——第一名，貝殼廟中最令人震撼的秘密——主殿的頂層。這個位置僅對少數人開放，是一個真正的神秘之地。當你攀登上狹窄的樓梯，抵達頂層時，一個由無數貝殼和珊瑚組成的瑰麗世界呈現眼前。頂層的每一寸空間都用貝殼和珊瑚精心裝飾，光是站在這裡，就能感受到一種超脫世俗的神奇。這些貝殼和珊瑚在陽光下閃爍著耀眼的光芒，宛如置身於一個夢幻的海底王國。在這裡，你會發現時間和空間的界限模糊，彷彿自己已經融入了這個奇妙世界的一部分。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">親愛的觀眾，我們的「異境偵探」之旅就到這裡結束了。今天，我們一起探索了台灣彰化貝殼廟的十大神秘之處，從外牆的貝殼鑲嵌到頂層的海底王國，每一處都充滿了驚喜和神秘。希望這次的旅程能給您留下深刻的印象，並激發您探索世界上更多未知奇景的熱情。謝謝您的陪伴，「異境偵探」下一期節目，我們將帶您走進另一個神秘的世界。敬請期待，再見！
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">按照這個公式：最「形容詞」的「數量」的「對象」 結合對標的標題與&amp;#34;台灣彰化鹿港，神秘貝殼廟，探險，top10&amp;#34;，給我十個標題給我，hashtag也都要提供喔
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1.全世界最大的人體部位，第壹名長度34.29公分，許多女性爭相“試槍”。#全球最top#吉尼 斯世界紀錄#最大人體部位#驚奇時刻批o10#腦洞大開#世界奇聞
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2.全世界1O種吃掉主人的寵物！猫咪和猪也會吃人？駱駝竟然會侵犯女人？#全球最top#危 險寵物牡op10#腦洞大開
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3.世界最瘋狂的分娩方式，雌性竟然可以長出陰莖？第一名直接治愈密集恐懼癥！#全球最 top#分娩#驚奇時刻top1O#腦洞大開#世界奇聞
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">台灣彰化鹿港最神秘的10個角落，貝殼廟的隱藏秘密揭露！#台灣彰化#鹿港貝殼廟#探險神秘#Top10#腦洞大開#神秘探索
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">the-10-most-mysterious-corners-of-lukang-changhua-taiwan-the-hidden-secrets-of-the-shell-temple-revealed
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">請將以下標題，產生leonardo ai prompt，指定16:9格式，要做為Youtube封面用的，prompt裡面要包含Youbute Icon，不用真的產生圖片，提供我prompt就好
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">台灣彰化鹿港最神秘的10個角落，貝殼廟的隱藏秘密揭露！
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">幫我依據以下逐字稿，生成這部影片的說明稿，根據這個標題&amp;#34;台灣彰化鹿港最神秘的10個角落，貝殼廟的隱藏秘密揭露！&amp;#34;，開頭幫我加一些針對這些逐字稿的介紹，並加上頻道&amp;#34;異境偵探&amp;#34;，我需要放在影片的說明欄中，每一名都要列出標題與簡單介紹，不用太細節
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Zookeeper-Kafka集群佈署(Docker-Compose)</title><link>https://blog.goldfishbrain-fighting.com/2024/docker-compose-zookeeper-kafka-multinodes-cluster/</link><pubDate>Fri, 12 Jan 2024 14:41:34 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2024/docker-compose-zookeeper-kafka-multinodes-cluster/</guid><description>&lt;p>參考專案: &lt;a class="link" href="https://hub.docker.com/r/bitnami/kafka" target="_blank" rel="noopener"
>https://hub.docker.com/r/bitnami/kafka&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主機名稱&lt;/th>
&lt;th>主機IP&lt;/th>
&lt;th>node.name&lt;/th>
&lt;th>角色&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>k8s-master71u&lt;/td>
&lt;td>192.168.1.71&lt;/td>
&lt;td>zookeeper1&lt;br>&lt;br>kafka1&lt;/td>
&lt;td>zookeeper&lt;br>&lt;br>kafka&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-master72u&lt;/td>
&lt;td>192.168.1.72&lt;/td>
&lt;td>zookeeper2&lt;br>&lt;br>kafka2&lt;/td>
&lt;td>zookeeper&lt;br>&lt;br>kafka&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-master73u&lt;/td>
&lt;td>192.168.1.73&lt;/td>
&lt;td>zookeeper3&lt;br>&lt;br>kafka3&lt;/td>
&lt;td>zookeeper&lt;br>&lt;br>kafka&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="zookeeperkafka集群建置">Zookeeper+Kafka集群建置&lt;/h3>
&lt;h4 id="目錄結構">目錄結構&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/zookeeper-kafka# tree -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── docker-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── etc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   ├── localtime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── timezone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── kafka
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│   └── .gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── zookeeper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── .gitignore
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="設定docker-composeyml">設定docker-compose.yml&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 三台k8s-master71u、k8s-master72u、k8s-master73u設定都要修改&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">修改如下:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1. zookeeper1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2. ZOO_SERVER_ID: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3. ZOO_SERVERS: 0.0.0.0:2888:3888,192.168.1.72:2888:3888,192.168.1.73:2888:3888
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4. kafka1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 5. KAFKA_ADVERTISED_HOST_NAME: 192.168.1.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 6. KAFKA_HOST_NAME: 192.168.1.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 7. KAFKA_BROKER_ID: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 8. KAFKA_CFG_ADVERTISED_LISTENERS: PLAINTEXT://192.168.1.71:9092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master72u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1. zookeeper2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2. ZOO_SERVER_ID: &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3. ZOO_SERVERS: 192.168.1.71:2888:3888,0.0.0.0:2888:3888,192.168.1.73:2888:3888
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4. kafka2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 5. KAFKA_ADVERTISED_HOST_NAME: 192.168.1.72
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 6. KAFKA_HOST_NAME: 192.168.1.72
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 7. KAFKA_BROKER_ID: &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 8. KAFKA_CFG_ADVERTISED_LISTENERS: PLAINTEXT://192.168.1.72:9092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master73u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1. zookeeper3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2. ZOO_SERVER_ID: &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3. ZOO_SERVERS: 192.168.1.71:2888:3888,192.168.1.72:2888:3888,0.0.0.0:2888:3888
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4. kafka3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 5. KAFKA_ADVERTISED_HOST_NAME: 192.168.1.73
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 6. KAFKA_HOST_NAME: 192.168.1.73
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 7. KAFKA_BROKER_ID: &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 8. KAFKA_CFG_ADVERTISED_LISTENERS: PLAINTEXT://192.168.1.73:9092
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>以下是k8s-master71u的docker-compose.yml&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="l">root@k8s-master71u:/data/zookeeper-kafka# cat docker-compose.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># https://hub.docker.com/r/bitnami/kafka&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># https://hub.docker.com/r/bitnami/zookeeper&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;2&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">zookeeper1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;bitnami/zookeeper:latest&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">network_mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;host&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hostname&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">zookeeper1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">zookeeper1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">2181&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">2181&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">2888&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">2888&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">3888&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">3888&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ZOO_SERVER_ID&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ZOO_SERVERS&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0.0.0.0&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">2888&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">3888&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">192.168.1.72&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">2888&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">3888&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">192.168.1.73&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">2888&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">3888&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ALLOW_ANONYMOUS_LOGIN&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./zookeeper/data:/bitnami/zookeeper&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 校時文件&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">kafka1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;bitnami/kafka:latest&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">network_mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;host&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hostname&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kafka1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kafka1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">9092&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">9092&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">KAFKA_ADVERTISED_HOST_NAME&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">192.168.1.71&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">KAFKA_HOST_NAME&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">192.168.1.71&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">KAFKA_ADVERTISED_PORT&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">9092&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">KAFKA_BROKER_ID&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">KAFKA_CFG_ZOOKEEPER_CONNECT&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">192.168.1.71&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">2181&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">192.168.1.72&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">2181&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="m">192.168.1.73&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">2181&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">KAFKA_CFG_ADVERTISED_LISTENERS&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">PLAINTEXT://192.168.1.71:9092&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">KAFKA_CFG_LISTENERS&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">PLAINTEXT://:9092&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ALLOW_PLAINTEXT_LISTENER&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">yes&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">KAFKA_CFG_AUTO_CREATE_TOPICS_ENABLE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./kafka/data:/bitnami/kafka&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 校時文件&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="目錄權限修改">目錄權限修改&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/zookeeper-kafka# chmod &lt;span class="m">777&lt;/span> -R zookeeper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/zookeeper-kafka# chmod &lt;span class="m">777&lt;/span> -R kafka
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/zookeeper-kafka# chmod &lt;span class="m">777&lt;/span> -R zookeeper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/zookeeper-kafka# chmod &lt;span class="m">777&lt;/span> -R kafka
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/zookeeper-kafka# chmod &lt;span class="m">777&lt;/span> -R zookeeper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/zookeeper-kafka# chmod &lt;span class="m">777&lt;/span> -R kafka
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="服務啟動">服務啟動&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 啟動&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/zookeeper-kafka# docker compose up -d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Running 4/4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✔ Container kafka1 Started 0.1s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✔ Container zookeeper1 Started 0.1s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ! kafka1 Published ports are discarded when using host network mode 0.0s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ! zookeeper1 Published ports are discarded when using host network mode 0.0s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/zookeeper-kafka# docker compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME IMAGE COMMAND SERVICE CREATED STATUS PORTS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kafka1 bitnami/kafka:latest &lt;span class="s2">&amp;#34;/opt/bitnami/scripts/kafka/entrypoint.sh /opt/bitnami/scripts/kafka/run.sh&amp;#34;&lt;/span> kafka1 &lt;span class="m">15&lt;/span> seconds ago Up &lt;span class="m">14&lt;/span> seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zookeeper1 bitnami/zookeeper:latest &lt;span class="s2">&amp;#34;/opt/bitnami/scripts/zookeeper/entrypoint.sh /opt/bitnami/scripts/zookeeper/run.sh&amp;#34;&lt;/span> zookeeper1 &lt;span class="m">15&lt;/span> seconds ago Up &lt;span class="m">14&lt;/span> seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/zookeeper-kafka# docker compose up -d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Running 4/4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✔ Container kafka2 Started 0.1s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✔ Container zookeeper2 Started 0.1s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ! kafka2 Published ports are discarded when using host network mode 0.0s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ! zookeeper2 Published ports are discarded when using host network mode 0.0s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/zookeeper-kafka# docker compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME IMAGE COMMAND SERVICE CREATED STATUS PORTS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kafka2 bitnami/kafka:latest &lt;span class="s2">&amp;#34;/opt/bitnami/scripts/kafka/entrypoint.sh /opt/bitnami/scripts/kafka/run.sh&amp;#34;&lt;/span> kafka2 &lt;span class="m">15&lt;/span> seconds ago Up &lt;span class="m">14&lt;/span> seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zookeeper2 bitnami/zookeeper:latest &lt;span class="s2">&amp;#34;/opt/bitnami/scripts/zookeeper/entrypoint.sh /opt/bitnami/scripts/zookeeper/run.sh&amp;#34;&lt;/span> zookeeper2 &lt;span class="m">15&lt;/span> seconds ago Up &lt;span class="m">14&lt;/span> seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/zookeeper-kafka# docker compose up -d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Running 4/4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✔ Container kafka3 Started 0.1s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ✔ Container zookeeper3 Started 0.1s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ! kafka3 Published ports are discarded when using host network mode 0.0s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ! zookeeper3 Published ports are discarded when using host network mode 0.0s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/zookeeper-kafka# docker compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME IMAGE COMMAND SERVICE CREATED STATUS PORTS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kafka3 bitnami/kafka:latest &lt;span class="s2">&amp;#34;/opt/bitnami/scripts/kafka/entrypoint.sh /opt/bitnami/scripts/kafka/run.sh&amp;#34;&lt;/span> kafka3 &lt;span class="m">15&lt;/span> seconds ago Up &lt;span class="m">14&lt;/span> seconds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zookeeper3 bitnami/zookeeper:latest &lt;span class="s2">&amp;#34;/opt/bitnami/scripts/zookeeper/entrypoint.sh /opt/bitnami/scripts/zookeeper/run.sh&amp;#34;&lt;/span> zookeeper3 &lt;span class="m">15&lt;/span> seconds ago Up &lt;span class="m">14&lt;/span> seconds
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="測試kafka消息推送與消費功能是否正常">測試kafka消息推送與消費功能是否正常&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 進到一個kafka (71的kafka)，測試kafka消息推送與消費功能是否正常&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/zookeeper-kafka# docker &lt;span class="nb">exec&lt;/span> -ti kafka1 bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I have no name!@kafka1:/$
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 創建一個topic為test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I have no name!@kafka1:/$ kafka-topics.sh --create --topic &lt;span class="nb">test&lt;/span> --bootstrap-server localhost:9092 --partitions &lt;span class="m">3&lt;/span> --replication-factor &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Created topic test.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 消費&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I have no name!@kafka1:/$ kafka-console-consumer.sh --topic &lt;span class="nb">test&lt;/span> --bootstrap-server localhost:9092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 進到另一個kafka (72的kafka)，推送數據到topic test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/zookeeper-kafka# docker &lt;span class="nb">exec&lt;/span> -ti kafka2 bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I have no name!@kafka2:/$
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I have no name!@kafka2:/$ kafka-console-producer.sh --topic &lt;span class="nb">test&lt;/span> --broker-list localhost:9092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;nihao
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;^CI have no name!@kafka2:/$
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 回到kafka (71的kafka)，可以看到消費&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/zookeeper-kafka# docker &lt;span class="nb">exec&lt;/span> -it kafka bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I have no name!@kafka1:/$ kafka-console-consumer.sh --topic &lt;span class="nb">test&lt;/span> --bootstrap-server localhost:9092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nihao
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">^CProcessed a total of &lt;span class="m">9&lt;/span> messages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">I have no name!@kafka1:/$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>在 Ubuntu 出現 Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.</title><link>https://blog.goldfishbrain-fighting.com/2023/error-key-is-stored-in-legacy-trusted-gpg-keyring/</link><pubDate>Mon, 18 Dec 2023 22:22:30 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/error-key-is-stored-in-legacy-trusted-gpg-keyring/</guid><description>&lt;p>出現報錯：但還是可以更新&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="n">W&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">download&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">docker&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">linux&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">ubuntu&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">dists&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">jammy&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">InRelease&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">Key&lt;/span> &lt;span class="n">is&lt;/span> &lt;span class="n">stored&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">legacy&lt;/span> &lt;span class="n">trusted&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gpg&lt;/span> &lt;span class="n">keyring&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">etc&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">apt&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">trusted&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">gpg&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="n">see&lt;/span> &lt;span class="n">the&lt;/span> &lt;span class="n">DEPRECATION&lt;/span> &lt;span class="n">section&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">apt&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">key&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="k">for&lt;/span> &lt;span class="n">details&lt;/span>&lt;span class="o">.&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hit:1 http://tw.archive.ubuntu.com/ubuntu jammy InRelease
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Get:2 http://tw.archive.ubuntu.com/ubuntu jammy-updates InRelease &lt;span class="o">[&lt;/span>&lt;span class="m">119&lt;/span> kB&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hit:3 https://download.docker.com/linux/ubuntu jammy InRelease
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hit:4 http://tw.archive.ubuntu.com/ubuntu jammy-backports InRelease
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Get:5 http://tw.archive.ubuntu.com/ubuntu jammy-security InRelease &lt;span class="o">[&lt;/span>&lt;span class="m">110&lt;/span> kB&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Fetched &lt;span class="m">229&lt;/span> kB in 1s &lt;span class="o">(&lt;/span>&lt;span class="m">244&lt;/span> kB/s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reading package lists... Done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Building dependency tree... Done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reading state information... Done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">50&lt;/span> packages can be upgraded. Run &lt;span class="s1">&amp;#39;apt list --upgradable&amp;#39;&lt;/span> to see them.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">W: https://download.docker.com/linux/ubuntu/dists/jammy/InRelease: Key is stored in legacy trusted.gpg keyring &lt;span class="o">(&lt;/span>/etc/apt/trusted.gpg&lt;span class="o">)&lt;/span>, see the DEPRECATION section in apt-key&lt;span class="o">(&lt;/span>8&lt;span class="o">)&lt;/span> &lt;span class="k">for&lt;/span> details.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# sudo apt-key list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead &lt;span class="o">(&lt;/span>see apt-key&lt;span class="o">(&lt;/span>8&lt;span class="o">))&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/apt/trusted.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pub rsa4096 2017-02-22 &lt;span class="o">[&lt;/span>SCEA&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 9DC8 &lt;span class="m">5822&lt;/span> 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uid &lt;span class="o">[&lt;/span> unknown&lt;span class="o">]&lt;/span> Docker Release &lt;span class="o">(&lt;/span>CE deb&lt;span class="o">)&lt;/span> &amp;lt;docker@docker.com&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sub rsa4096 2017-02-22 &lt;span class="o">[&lt;/span>S&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/apt/trusted.gpg.d/ubuntu-keyring-2012-cdimage.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pub rsa4096 2012-05-11 &lt;span class="o">[&lt;/span>SC&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">8439&lt;/span> 38DF 228D 22F7 B374 2BC0 D94A A3F0 EFE2 &lt;span class="m">1092&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uid &lt;span class="o">[&lt;/span> unknown&lt;span class="o">]&lt;/span> Ubuntu CD Image Automatic Signing Key &lt;span class="o">(&lt;/span>2012&lt;span class="o">)&lt;/span> &amp;lt;cdimage@ubuntu.com&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/apt/trusted.gpg.d/ubuntu-keyring-2018-archive.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pub rsa4096 2018-09-17 &lt;span class="o">[&lt;/span>SC&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> F6EC B376 &lt;span class="m">2474&lt;/span> EDA9 D21B &lt;span class="m">7022&lt;/span> &lt;span class="m">8719&lt;/span> 20D1 991B C93C
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uid &lt;span class="o">[&lt;/span> unknown&lt;span class="o">]&lt;/span> Ubuntu Archive Automatic Signing Key &lt;span class="o">(&lt;/span>2018&lt;span class="o">)&lt;/span> &amp;lt;ftpmaster@ubuntu.com&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>將第一個pub的後八碼提取出來0EBF CD88&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# sudo apt-key &lt;span class="nb">export&lt;/span> 0EBFCD88 &lt;span class="p">|&lt;/span> sudo gpg --dearmour -o /etc/apt/trusted.gpg.d/hashicorp.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: apt-key is deprecated. Manage keyring files in trusted.gpg.d instead &lt;span class="o">(&lt;/span>see apt-key&lt;span class="o">(&lt;/span>8&lt;span class="o">))&lt;/span>.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>這樣update就不會有那個訊息了&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hit:1 http://tw.archive.ubuntu.com/ubuntu jammy InRelease
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hit:2 http://tw.archive.ubuntu.com/ubuntu jammy-updates InRelease
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hit:3 http://tw.archive.ubuntu.com/ubuntu jammy-backports InRelease
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hit:4 http://tw.archive.ubuntu.com/ubuntu jammy-security InRelease
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hit:5 https://download.docker.com/linux/ubuntu jammy InRelease
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reading package lists... Done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Building dependency tree... Done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Reading state information... Done
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">50&lt;/span> packages can be upgraded. Run &lt;span class="s1">&amp;#39;apt list --upgradable&amp;#39;&lt;/span> to see them.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Kubernetes 使用Rancher管理平台 安裝Prometheus監控</title><link>https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/</link><pubDate>Mon, 18 Dec 2023 21:54:42 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/</guid><description>&lt;p>參考網址：
&lt;a class="link" href="https://ranchermanager.docs.rancher.com/zh/how-to-guides/advanced-user-guides/monitoring-alerting-guides/enable-monitoring" target="_blank" rel="noopener"
>https://ranchermanager.docs.rancher.com/zh/how-to-guides/advanced-user-guides/monitoring-alerting-guides/enable-monitoring&lt;/a>&lt;/p>
&lt;p>&lt;font color=red>注意：&lt;/font>&lt;/p>
&lt;p>&lt;font color=red>由於我之前有安裝rook-ceph，也有用到prometheus監控rook-ceph集群，所以也有安裝prometheus-operator，現在rancher安裝的prometheus也會用到prometheus-operator，所以這裡要刪除掉，不然會有衝突，導致rancher安裝的prometheus無法啟動。&lt;/font>&lt;/p>
&lt;p>&lt;font color=red>等安裝好rancher的prometheus，再來重新安裝rook-ceph用的prometheus。&lt;/font>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl delete -f bundle.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &lt;span class="s2">&amp;#34;alertmanagerconfigs.monitoring.coreos.com&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &lt;span class="s2">&amp;#34;alertmanagers.monitoring.coreos.com&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &lt;span class="s2">&amp;#34;podmonitors.monitoring.coreos.com&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &lt;span class="s2">&amp;#34;probes.monitoring.coreos.com&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &lt;span class="s2">&amp;#34;prometheusagents.monitoring.coreos.com&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &lt;span class="s2">&amp;#34;prometheuses.monitoring.coreos.com&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &lt;span class="s2">&amp;#34;prometheusrules.monitoring.coreos.com&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &lt;span class="s2">&amp;#34;scrapeconfigs.monitoring.coreos.com&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &lt;span class="s2">&amp;#34;servicemonitors.monitoring.coreos.com&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io &lt;span class="s2">&amp;#34;thanosrulers.monitoring.coreos.com&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io &lt;span class="s2">&amp;#34;prometheus-operator&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io &lt;span class="s2">&amp;#34;prometheus-operator&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps &lt;span class="s2">&amp;#34;prometheus-operator&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount &lt;span class="s2">&amp;#34;prometheus-operator&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service &lt;span class="s2">&amp;#34;prometheus-operator&amp;#34;&lt;/span> deleted
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="安裝prometheus">安裝Prometheus&lt;/h2>
&lt;p>點選左下角，Cluster Tools-&amp;gt; Monitoring&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231218235722.png"
width="1707"
height="946"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231218235722_hu741b6d593547bd44901779f738acfa9f_200228_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231218235722_hu741b6d593547bd44901779f738acfa9f_200228_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="180"
data-flex-basis="433px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231218235912.png"
width="1717"
height="948"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231218235912_huf9a4c3031e451ab1209e7fc9739d2185_131124_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231218235912_huf9a4c3031e451ab1209e7fc9739d2185_131124_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="434px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231218235944.png"
width="1713"
height="948"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231218235944_hu683003fbddde459c613ad621ceb56f70_135976_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231218235944_hu683003fbddde459c613ad621ceb56f70_135976_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="180"
data-flex-basis="433px"
>&lt;/p>
&lt;p>Prometheus修改資料存儲天數，和使用持久化數據&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000304.png"
width="1719"
height="945"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000304_hu4ca4fb6c3f4fceb808fa610437250c92_156240_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000304_hu4ca4fb6c3f4fceb808fa610437250c92_156240_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="436px"
>&lt;/p>
&lt;p>Grafana使用持久化數據&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000406.png"
width="1719"
height="868"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000406_hu87d5b8b891b89edc637fb6f1bd96f210_99800_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000406_hu87d5b8b891b89edc637fb6f1bd96f210_99800_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="198"
data-flex-basis="475px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000427.png"
width="1718"
height="946"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000427_hu80f4cb3e46af77fb072b26e5a478aa29_112547_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000427_hu80f4cb3e46af77fb072b26e5a478aa29_112547_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="435px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000732.png"
width="1719"
height="909"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000732_hu175959e3b476af4e2d901ebefd4f5f58_376241_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219000732_hu175959e3b476af4e2d901ebefd4f5f58_376241_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="189"
data-flex-basis="453px"
>&lt;/p>
&lt;p>安裝完成&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl get pod -n cattle-monitoring-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager-rancher-monitoring-alertmanager-0 2/2 Running &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>49s ago&lt;span class="o">)&lt;/span> 58s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus-rancher-monitoring-prometheus-0 3/3 Running &lt;span class="m">0&lt;/span> 56s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-grafana-568d4fc6d5-zsnq7 3/4 Running &lt;span class="m">0&lt;/span> 88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-kube-state-metrics-56b4477cc-2zgmf 1/1 Running &lt;span class="m">0&lt;/span> 88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-operator-c66c76fd9-cns8h 1/1 Running &lt;span class="m">0&lt;/span> 88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-adapter-7494f789f6-x2v6p 1/1 Running &lt;span class="m">0&lt;/span> 88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-65n2k 1/1 Running &lt;span class="m">0&lt;/span> 88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-7t4nt 1/1 Running &lt;span class="m">0&lt;/span> 88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-s9kwh 1/1 Running &lt;span class="m">0&lt;/span> 88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-w8tv9 1/1 Running &lt;span class="m">0&lt;/span> 88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-monitoring-prometheus-node-exporter-zzqpc 1/1 Running &lt;span class="m">0&lt;/span> 88s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219004042.png"
width="1718"
height="761"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219004042_hu0842e95e2649b8c35fcf46110ec67e3b_228426_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219004042_hu0842e95e2649b8c35fcf46110ec67e3b_228426_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="225"
data-flex-basis="541px"
>&lt;/p>
&lt;h2 id="測試monitoring功能">測試Monitoring功能&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219012927.png"
width="1713"
height="943"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219012927_hu0fc5ea31c669cf294c8ebbe871fa7c48_134397_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219012927_hu0fc5ea31c669cf294c8ebbe871fa7c48_134397_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="435px"
>&lt;/p>
&lt;h3 id="查看prometheus">查看Prometheus&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013023.png"
width="1712"
height="944"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013023_hu55f4ff22df1ab0fb0c3e02512c362a2d_154901_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013023_hu55f4ff22df1ab0fb0c3e02512c362a2d_154901_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="435px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013037.png"
width="1717"
height="944"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013037_hub88a9b4b816e5d68de46b102bed26cb1_205158_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013037_hub88a9b4b816e5d68de46b102bed26cb1_205158_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="436px"
>&lt;/p>
&lt;h3 id="查看alertmanager">查看Alertmanager&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013059.png"
width="1716"
height="947"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013059_hu7656d9b1bc82251953d7222d79385f62_154593_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013059_hu7656d9b1bc82251953d7222d79385f62_154593_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="434px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013112.png"
width="1714"
height="946"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013112_hu8fa7c34531028b95562c015662ac949e_98701_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013112_hu8fa7c34531028b95562c015662ac949e_98701_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="434px"
>&lt;/p>
&lt;h3 id="查看grafana">查看Grafana&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013140.png"
width="1713"
height="946"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013140_hu6f1736b6a39cc2458e21493953e45551_154723_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013140_hu6f1736b6a39cc2458e21493953e45551_154723_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="434px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013201.png"
width="1712"
height="947"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013201_hue1073a9af7617e17a85afad4b23e249f_193601_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013201_hue1073a9af7617e17a85afad4b23e249f_193601_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="180"
data-flex-basis="433px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013221.png"
width="1714"
height="924"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013221_huca277ea012c3d6d9912547b1911bb616_128457_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219013221_huca277ea012c3d6d9912547b1911bb616_128457_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="185"
data-flex-basis="445px"
>&lt;/p>
&lt;h3 id="重新安裝rook-ceph用的prometheus">重新安裝rook-ceph用的prometheus&lt;/h3>
&lt;p>重新安裝rook-ceph用的prometheus，prometheus-operator就不用安裝了，也就是最前面刪除的bundle.yaml那個檔案。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f prometheus.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus.monitoring.coreos.com/rook-prometheus created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f prometheus-service.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">The Service &lt;span class="s2">&amp;#34;rook-prometheus&amp;#34;&lt;/span> is invalid: spec.ports&lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span>.nodePort: Invalid value: 30900: provided port is already allocated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f service-monitor.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">servicemonitor.monitoring.coreos.com/rook-ceph-mgr created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219014254.png"
width="1716"
height="553"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219014254_huc4ba3b28f91efb3ae172b630efc72e6d_104348_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219014254_huc4ba3b28f91efb3ae172b630efc72e6d_104348_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="310"
data-flex-basis="744px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219014312.png"
width="1717"
height="948"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219014312_hu00e271da05919ef24beef98d6f7ed7aa_254549_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231219014312_hu00e271da05919ef24beef98d6f7ed7aa_254549_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="434px"
>&lt;/p>
&lt;h2 id="kubelet-內部-cadvisor-無法取得特定-label">Kubelet 內部 cAdvisor 無法取得特定 Label&lt;/h2>
&lt;p>參考文章：
&lt;a class="link" href="https://ithelp.ithome.com.tw/m/articles/10331330" target="_blank" rel="noopener"
>https://ithelp.ithome.com.tw/m/articles/10331330&lt;/a>&lt;/p>
&lt;p>由於 Kubernetes 在 v1.24 後，剔除對 docker shim 的依賴，導致 Kubelet 內部原本用來收集各種容器指標的 cAdvisor 服務，沒辦法取得有關 image、container 等指標，直到目前這個問題依然持續發生著：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://github.com/google/cadvisor/issues/3162" target="_blank" rel="noopener"
>https://github.com/google/cadvisor/issues/3162&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/prometheus-community/helm-charts/issues/3058" target="_blank" rel="noopener"
>https://github.com/prometheus-community/helm-charts/issues/3058&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://github.com/google/cadvisor/issues/3336" target="_blank" rel="noopener"
>https://github.com/google/cadvisor/issues/3336&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>這造成我們 Kube-Prometheus-Stack 中許多關於服務資源使用量的圖表無法取得數據，大部分的圖表都沒辦法正常顯示。&lt;/p>
&lt;p>目前社群上的解決方法為自己替 Kubelet 在 Kubernetes 叢集建立 cAdvisor 來產生正常的容器資源指標，以解決 Kubelet 在 v1.24 升級後普遍遇到的的問題。&lt;/p>
&lt;p>首先讓我們先將 Kubelet 的 cAdvisor 功能關閉：&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229012757.png"
width="1823"
height="946"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229012757_hub331c825ed58db6808974f72128b3eaa_223652_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229012757_hub331c825ed58db6808974f72128b3eaa_223652_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="192"
data-flex-basis="462px"
>&lt;/p>
&lt;p>接下來，我們需要自訂安裝 cAdvisor 服務並建立 ServiceMonitor 資源，使 Prometheus 拉取容器指標：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ServiceAccount&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kube-system&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rbac.authorization.k8s.io/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ClusterRole&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">rules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">apiGroups&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">policy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">resourceNames&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">resources&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">podsecuritypolicies&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">verbs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">use&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rbac.authorization.k8s.io/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ClusterRoleBinding&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">roleRef&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">apiGroup&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rbac.authorization.k8s.io&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ClusterRole&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">subjects&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ServiceAccount&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kube-system&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">apps/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">DaemonSet&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">annotations&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">seccomp.security.alpha.kubernetes.io/pod&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">docker/default&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kube-system&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">automountServiceAccountToken&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- --&lt;span class="l">housekeeping_interval=10s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- --&lt;span class="l">max_housekeeping_interval=15s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- --&lt;span class="l">event_storage_event_limit=default=0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- --&lt;span class="l">event_storage_age_limit=default=0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- --&lt;span class="l">enable_metrics=app,cpu,disk,diskIO,memory,network,process&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- --&lt;span class="l">docker_only&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- --&lt;span class="l">store_container_labels=false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- --&lt;span class="l">whitelisted_container_labels=io.kubernetes.container.name,io.kubernetes.pod.name,io.kubernetes.pod.namespace&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gcr.io/cadvisor/cadvisor:v0.45.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">resources&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">limits&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cpu&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">800m&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">memory&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">2000Mi&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">requests&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cpu&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">400m&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">memory&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">400Mi&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumeMounts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">mountPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/rootfs&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rootfs&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">readOnly&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">mountPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/var/run&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">var-run&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">readOnly&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">mountPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/sys&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sys&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">readOnly&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">mountPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/var/lib/docker&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">docker&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">readOnly&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">mountPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/dev/disk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">disk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">readOnly&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">priorityClassName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">system-node-critical&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">serviceAccountName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">terminationGracePeriodSeconds&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">30&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tolerations&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">node-role.kubernetes.io/controlplane&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">effect&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">NoSchedule&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">node-role.kubernetes.io/etcd&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;true&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">effect&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">NoExecute&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">hostPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">rootfs&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">hostPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/var/run&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">var-run&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">hostPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/sys&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sys&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">hostPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/var/lib/docker&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">docker&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">hostPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/dev/disk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">disk&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kube-system&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8080&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">monitoring.coreos.com/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ServiceMonitor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">release&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus-stack&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespace&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kube-system&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">endpoints&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">metricRelabelings&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">sourceLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">container_label_io_kubernetes_pod_name&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetLabel&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">sourceLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">container_label_io_kubernetes_container_name&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetLabel&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">container&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">sourceLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">container_label_io_kubernetes_pod_namespace&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetLabel&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">namespace&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">action&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">labeldrop&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">regex&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">container_label_io_kubernetes_pod_name&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">action&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">labeldrop&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">regex&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">container_label_io_kubernetes_container_name&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">action&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">labeldrop&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">regex&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">container_label_io_kubernetes_pod_namespace&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">relabelings&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">sourceLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">__meta_kubernetes_pod_node_name&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetLabel&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">node&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">sourceLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">__metrics_path__&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetLabel&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">metrics_path&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">replacement&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/metrics/cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">sourceLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">job&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetLabel&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">job&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">replacement&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">kubelet&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">namespaceSelector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">matchNames&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">kube-system&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">cadvisor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ref：&lt;a class="link" href="https://github.com/rancher/rancher/issues/38934#issuecomment-1294585708" target="_blank" rel="noopener"
>https://github.com/rancher/rancher/issues/38934#issuecomment-1294585708&lt;/a>&lt;/p>
&lt;p>執行上列設定後，cAdvisor 就能替我們開始收集指標：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/kube-prometheus-stack# kubectl create -f cAdvisor.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/cadvisor created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/cadvisor created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/cadvisor created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">daemonset.apps/cadvisor created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/cadvisor created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">servicemonitor.monitoring.coreos.com/cadvisor created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>如此一來圖表可以正常顯示：&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229013013.png"
width="1824"
height="948"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229013013_hu4ed9df9ade63f99dd0dfcc2c4fa9f3d3_188979_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229013013_hu4ed9df9ade63f99dd0dfcc2c4fa9f3d3_188979_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="192"
data-flex-basis="461px"
>&lt;/p>
&lt;h2 id="分配權限給user可以查看監控數據">分配權限給User，可以查看監控數據&lt;/h2>
&lt;h3 id="建立一個project取名monitoring">建立一個Project，取名Monitoring&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020236.png"
width="1822"
height="543"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020236_hu8ee1227e1c49ef72addb663d920a6614_64618_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020236_hu8ee1227e1c49ef72addb663d920a6614_64618_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="335"
data-flex-basis="805px"
>&lt;/p>
&lt;h3 id="設定user為此project的成員">設定User為此Project的成員&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020353.png"
width="1822"
height="656"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020353_huc8c0b3105b84dc94044e8001327e1b88_100860_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020353_huc8c0b3105b84dc94044e8001327e1b88_100860_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="277"
data-flex-basis="666px"
>&lt;/p>
&lt;h3 id="將cattle-monitoring-system命名空間移至此project中">將cattle-monitoring-system命名空間移至此Project中&lt;/h3>
&lt;p>預設cattle-monitoring-system不屬於任何一個Project&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020520.png"
width="1553"
height="233"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020520_hu28fe6fa058dec4b3064eb9705be90648_30820_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020520_hu28fe6fa058dec4b3064eb9705be90648_30820_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="666"
data-flex-basis="1599px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020647.png"
width="437"
height="269"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020647_huf1f1974bd2c4da678ca1a86985ea0cb1_18477_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020647_huf1f1974bd2c4da678ca1a86985ea0cb1_18477_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="162"
data-flex-basis="389px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020805.png"
width="1554"
height="138"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020805_hu0f0d4787d6211ceb03616eddc5dad739_13592_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020805_hu0f0d4787d6211ceb03616eddc5dad739_13592_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="1126"
data-flex-basis="2702px"
>&lt;/p>
&lt;h3 id="登入user帳號測試">登入User帳號測試&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020835.png"
width="574"
height="478"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020835_hu906c2cd510c5c896e57353b9d6005750_21640_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020835_hu906c2cd510c5c896e57353b9d6005750_21640_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="120"
data-flex-basis="288px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020934.png"
width="1830"
height="632"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020934_hu513b229cea71417c72b8f1c5ece135b0_100620_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229020934_hu513b229cea71417c72b8f1c5ece135b0_100620_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="289"
data-flex-basis="694px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229021009.png"
width="1825"
height="942"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229021009_hu807b1408bbf1574f15ebafe96f169a74_210986_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rancher-install-prometheus/media/Pasted-image-20231229021009_hu807b1408bbf1574f15ebafe96f169a74_210986_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="193"
data-flex-basis="464px"
>&lt;/p></description></item><item><title>Github Hugo Build Timeout(報錯原因If this is just a slow template, you can try to increase the 'timeout' config setting.)</title><link>https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/</link><pubDate>Sun, 17 Dec 2023 21:38:38 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/</guid><description>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217213939.png"
width="1711"
height="656"
srcset="https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217213939_hu846f4b638c60ac52c8d11b770692e003_160894_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217213939_hu846f4b638c60ac52c8d11b770692e003_160894_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="260"
data-flex-basis="625px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217213954.png"
width="1703"
height="813"
srcset="https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217213954_hu29eb38c7713ca957ae817bc9e794d928_104444_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217213954_hu29eb38c7713ca957ae817bc9e794d928_104444_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="209"
data-flex-basis="502px"
>&lt;/p>
&lt;p>&lt;font color=red>報錯主要原因&lt;/font>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">If this is just a slow template, you can try to increase the &amp;#39;timeout&amp;#39; config setting.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217214027.png"
width="1700"
height="941"
srcset="https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217214027_hu7b87f3bd92b3b7efc5c80a77d15a3a35_206972_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217214027_hu7b87f3bd92b3b7efc5c80a77d15a3a35_206972_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="180"
data-flex-basis="433px"
>&lt;/p>
&lt;p>修改hugo檔案timeout&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 檔案位置，最後面添加以下timeout = 100000設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">config/_default/config.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Build Timeout Settings (Because Error: &amp;#34;If this is just a slow template, you can try to increase the &amp;#39;timeout&amp;#39; config setting.&amp;#34;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">timeout&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="m">100000&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>修改完，就可以正常build了&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217214847.png"
width="1677"
height="811"
srcset="https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217214847_hu736f3ad1f8bd24115bc439b3992736c8_82822_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/github-hugo-build-timeout/media/Pasted-image-20231217214847_hu736f3ad1f8bd24115bc439b3992736c8_82822_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="206"
data-flex-basis="496px"
>&lt;/p></description></item><item><title>使用Redis-Shake，還原數據，從一個cluster遷移所有分片數據到另一個cluster，結果->可行，恢復數據非常快</title><link>https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/</link><pubDate>Sun, 17 Dec 2023 18:49:32 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/</guid><description>&lt;p>專案GitHub網址：
&lt;a class="link" href="https://github.com/tair-opensource/RedisShake" target="_blank" rel="noopener"
>https://github.com/tair-opensource/RedisShake&lt;/a>&lt;/p>
&lt;p>使用這個版本：
&lt;a class="link" href="https://github.com/tair-opensource/RedisShake/releases/tag/v4.0.2" target="_blank" rel="noopener"
>https://github.com/tair-opensource/RedisShake/releases/tag/v4.0.2&lt;/a>&lt;/p>
&lt;h2 id="redis-cluster主機ip表">Redis Cluster主機IP表&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217182757.png"
width="668"
height="1011"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217182757_hu958cbfd0a734f396244b4db5ea229923_132015_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217182757_hu958cbfd0a734f396244b4db5ea229923_132015_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="66"
data-flex-basis="158px"
>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>主機名稱&lt;/td>
&lt;td>主機IP&lt;/td>
&lt;td>角色&lt;/td>
&lt;td>主機IP&lt;/td>
&lt;td>角色&lt;/td>
&lt;td>跟隨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis91&lt;/td>
&lt;td>192.168.1.91:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.91:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.92:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis92&lt;/td>
&lt;td>192.168.1.92:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.92:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.93:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis93&lt;/td>
&lt;td>192.168.1.93:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.93:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.91:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis94&lt;/td>
&lt;td>192.168.1.94:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.94:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.98:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis98&lt;/td>
&lt;td>192.168.1.98:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.98:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.94:6380&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="golang安裝">Golang安裝&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># sudo tar -C /usr/local -xzf go1.21.5.linux-amd64.tar.gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># sudo vim /etc/profile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 加到最後面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$PATH&lt;/span>:/usr/local/go/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># source /etc/profile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># go version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go version go1.21.5 linux/amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="redis-shake設定">Redis-Shake設定&lt;/h2>
&lt;p>創建工作目錄，解壓redis-shake包&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 創建工作目錄&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># mkdir redis-shake&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># sudo tar -C ./redis-shake -xzvf redis-shake-linux-amd64.tar.gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./redis-shake
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">./shake.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd redis-shake&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># ls -l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">11212&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x &lt;span class="m">1&lt;/span> &lt;span class="m">1001&lt;/span> &lt;span class="m">127&lt;/span> &lt;span class="m">11473016&lt;/span> 10月 &lt;span class="m">11&lt;/span> 19:52 redis-shake
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> &lt;span class="m">1001&lt;/span> &lt;span class="m">127&lt;/span> &lt;span class="m">2927&lt;/span> 10月 &lt;span class="m">11&lt;/span> 19:52 shake.toml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>創建dumprdbfile目錄，解壓要恢復數據的dump.rdb包，總共五個dump-master1.rdb、dump-master2.rdb、dump-master3.rdb、dump-master4.rdb、dump-master5.rdb&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># mkdir dumprdbfile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">11212&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">2&lt;/span> root root &lt;span class="m">6&lt;/span> 12月 &lt;span class="m">17&lt;/span> 19:55 dumprdbfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x &lt;span class="m">1&lt;/span> &lt;span class="m">1001&lt;/span> &lt;span class="m">127&lt;/span> &lt;span class="m">11473016&lt;/span> 10月 &lt;span class="m">11&lt;/span> 19:52 redis-shake
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> &lt;span class="m">1001&lt;/span> &lt;span class="m">127&lt;/span> &lt;span class="m">2927&lt;/span> 10月 &lt;span class="m">11&lt;/span> 19:52 shake.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd dumprdbfile/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 dumprdbfile&lt;span class="o">]&lt;/span>&lt;span class="c1"># ls -l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">1256064&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">255824392&lt;/span> 12月 &lt;span class="m">17&lt;/span> 19:56 redis-master1_dump_rdb.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">253817683&lt;/span> 12月 &lt;span class="m">17&lt;/span> 19:56 redis-master2_dump_rdb.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">254657334&lt;/span> 12月 &lt;span class="m">17&lt;/span> 19:56 redis-master3_dump_rdb.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">254929776&lt;/span> 12月 &lt;span class="m">17&lt;/span> 19:56 redis-master4_dump_rdb.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">266967631&lt;/span> 12月 &lt;span class="m">17&lt;/span> 19:56 redis-master5_dump_rdb.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 dumprdbfile&lt;span class="o">]&lt;/span>&lt;span class="c1"># tar -xzvf redis-master1_dump_rdb.tar.gz -O dump.rdb &amp;gt; dump-master1.rdb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 dumprdbfile&lt;span class="o">]&lt;/span>&lt;span class="c1"># tar -xzvf redis-master2_dump_rdb.tar.gz -O dump.rdb &amp;gt; dump-master2.rdb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 dumprdbfile&lt;span class="o">]&lt;/span>&lt;span class="c1"># tar -xzvf redis-master3_dump_rdb.tar.gz -O dump.rdb &amp;gt; dump-master3.rdb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 dumprdbfile&lt;span class="o">]&lt;/span>&lt;span class="c1"># tar -xzvf redis-master4_dump_rdb.tar.gz -O dump.rdb &amp;gt; dump-master4.rdb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 dumprdbfile&lt;span class="o">]&lt;/span>&lt;span class="c1"># tar -xzvf redis-master5_dump_rdb.tar.gz -O dump.rdb &amp;gt; dump-master5.rdb&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 dumprdbfile&lt;span class="o">]&lt;/span>&lt;span class="c1"># ls -l&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">3014796&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">343630318&lt;/span> 12月 &lt;span class="m">17&lt;/span> 20:03 dump-master1.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">348759548&lt;/span> 12月 &lt;span class="m">17&lt;/span> 20:04 dump-master2.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">349938872&lt;/span> 12月 &lt;span class="m">17&lt;/span> 20:04 dump-master3.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">402484559&lt;/span> 12月 &lt;span class="m">17&lt;/span> 20:04 dump-master4.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">356118026&lt;/span> 12月 &lt;span class="m">17&lt;/span> 20:04 dump-master5.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">255824392&lt;/span> 12月 &lt;span class="m">17&lt;/span> 19:56 redis-master1_dump_rdb.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">253817683&lt;/span> 12月 &lt;span class="m">17&lt;/span> 19:56 redis-master2_dump_rdb.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">254657334&lt;/span> 12月 &lt;span class="m">17&lt;/span> 19:56 redis-master3_dump_rdb.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">254929776&lt;/span> 12月 &lt;span class="m">17&lt;/span> 19:56 redis-master4_dump_rdb.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">266967631&lt;/span> 12月 &lt;span class="m">17&lt;/span> 19:56 redis-master5_dump_rdb.tar.gz
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>編輯redis-shake設定檔&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim shake.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 填寫要恢復數據的rdb檔案位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">filepath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/root/redis-shake/dumprdbfile/dump-master1.rdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 填寫cluster其中一台master的ip，連接redis有帳號密碼，也要填上&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>redis_writer&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">cluster&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">true&lt;/span> &lt;span class="c1"># set to true if target is a redis cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">address&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;192.168.1.91:6379&amp;#34;&lt;/span> &lt;span class="c1"># when cluster is true, set address to one of the cluster node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;帳號&amp;#34;&lt;/span> &lt;span class="c1"># keep empty if not using ACL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;密碼&amp;#34;&lt;/span> &lt;span class="c1"># keep empty if no authentication is required&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">tls&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="redis-shake開始恢復數據">Redis-Shake開始恢復數據&lt;/h2>
&lt;h3 id="恢復dump-master1rdb數據">恢復dump-master1，rdb數據&lt;/h3>
&lt;p>開始恢復dump-master1.rdb數據至cluster&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># ./redis-shake shake.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Usage: redis-shake &lt;span class="o">[&lt;/span>config file&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Example:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> redis-shake sync.toml &lt;span class="c1"># load config from sync.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> redis-shake &lt;span class="c1"># load config from environment variables&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># ./redis-shake shake.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF load config from file: shake.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF log_level: &lt;span class="o">[&lt;/span>info&lt;span class="o">]&lt;/span>, log_file: &lt;span class="o">[&lt;/span>/root/redis-shake/data/shake.log&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF changed work dir to &lt;span class="o">[&lt;/span>/root/redis-shake/data&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF GOMAXPROCS defaults to the value of runtime.NumCPU &lt;span class="o">[&lt;/span>8&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF not &lt;span class="nb">set&lt;/span> pprof port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF no &lt;span class="k">function&lt;/span> script
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF create RdbReader: /root/redis-shake/dumprdbfile/dump-master1.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379@16379 myself,master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815406000&lt;/span> &lt;span class="m">1&lt;/span> connected 0-3276
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815406361&lt;/span> &lt;span class="m">5&lt;/span> connected 13107-16383
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815405000&lt;/span> &lt;span class="m">2&lt;/span> connected 3277-6553
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815403000&lt;/span> &lt;span class="m">3&lt;/span> connected 6554-9829
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815405357&lt;/span> &lt;span class="m">4&lt;/span> connected 9830-13106
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF redisClusterWriter connected to redis cluster successful. &lt;span class="nv">addresses&lt;/span>&lt;span class="o">=[&lt;/span>192.168.1.91:6379 192.168.1.98:6379 192.168.1.92:6379 192.168.1.93:6379 192.168.1.94:6379&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF create RedisClusterWriter: 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF not &lt;span class="nb">set&lt;/span> status port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF start syncing...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:47 INF &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> start &lt;span class="nb">read&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:52 INF &lt;span class="nv">read_count&lt;/span>&lt;span class="o">=[&lt;/span>298147&lt;span class="o">]&lt;/span>, &lt;span class="nv">read_ops&lt;/span>&lt;span class="o">=[&lt;/span>62121.63&lt;span class="o">]&lt;/span>, &lt;span class="nv">write_count&lt;/span>&lt;span class="o">=[&lt;/span>298146&lt;span class="o">]&lt;/span>, &lt;span class="nv">write_ops&lt;/span>&lt;span class="o">=[&lt;/span>62121.63&lt;span class="o">]&lt;/span>, &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> rdb file synced: 51.78%
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:54 INF &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> rdb file parse &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:16:54 INF all &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>檢查一下，恢復數據後，數據分布和集群slot狀況&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.91:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.91:6379 &lt;span class="o">(&lt;/span>2c05c930...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">327164&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.98:6379 &lt;span class="o">(&lt;/span>c40f72b0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379 &lt;span class="o">(&lt;/span>71d88e30...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">108611&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.93:6379 &lt;span class="o">(&lt;/span>caa1fb6b...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379 &lt;span class="o">(&lt;/span>eaeb50d0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">435775&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">26.60 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.91:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-3276&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 1709189e2036c2e0c4168189be9074d66bce2991 192.168.1.92:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 2c05c930c506e54ebea35f8f0b731754cd44082a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>3277-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 500ed38b799c6d5ad13483f8e0fee45fc9142d69 192.168.1.94:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 533669750790e904050e917657beae942185a407 192.168.1.91:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates caa1fb6b5fbc4e133b5ef472e2def11e836481f7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: b0bff6695a1318da9a01af2550c85de1e8e81a83 192.168.1.93:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 71d88e302c0a7ec240cbbb6f8380786d01da984c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 2b487243e0c78adb93ac73017d04a6ad39b51c36 192.168.1.98:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates eaeb50d0d31025f1589b7c8cdc12867f7a474c24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="恢復dump-master2rdb數據">恢復dump-master2，rdb數據&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 修改要恢復數據的rdb檔案位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim shake.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">filepath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/root/redis-shake/dumprdbfile/dump-master2.rdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>開始恢復dump-master2.rdb數據至cluster&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># ./redis-shake shake.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF load config from file: shake.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF log_level: &lt;span class="o">[&lt;/span>info&lt;span class="o">]&lt;/span>, log_file: &lt;span class="o">[&lt;/span>/root/redis-shake/data/shake.log&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF changed work dir to &lt;span class="o">[&lt;/span>/root/redis-shake/data&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF GOMAXPROCS defaults to the value of runtime.NumCPU &lt;span class="o">[&lt;/span>8&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF not &lt;span class="nb">set&lt;/span> pprof port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF no &lt;span class="k">function&lt;/span> script
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF create RdbReader: /root/redis-shake/dumprdbfile/dump-master2.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379@16379 myself,master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815523000&lt;/span> &lt;span class="m">1&lt;/span> connected 0-3276
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815524860&lt;/span> &lt;span class="m">5&lt;/span> connected 13107-16383
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815521000&lt;/span> &lt;span class="m">2&lt;/span> connected 3277-6553
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815523000&lt;/span> &lt;span class="m">3&lt;/span> connected 6554-9829
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815522000&lt;/span> &lt;span class="m">4&lt;/span> connected 9830-13106
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF redisClusterWriter connected to redis cluster successful. &lt;span class="nv">addresses&lt;/span>&lt;span class="o">=[&lt;/span>192.168.1.91:6379 192.168.1.98:6379 192.168.1.92:6379 192.168.1.93:6379 192.168.1.94:6379&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF create RedisClusterWriter: 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF not &lt;span class="nb">set&lt;/span> status port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF start syncing...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:45 INF &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> start &lt;span class="nb">read&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:50 INF &lt;span class="nv">read_count&lt;/span>&lt;span class="o">=[&lt;/span>301839&lt;span class="o">]&lt;/span>, &lt;span class="nv">read_ops&lt;/span>&lt;span class="o">=[&lt;/span>62949.67&lt;span class="o">]&lt;/span>, &lt;span class="nv">write_count&lt;/span>&lt;span class="o">=[&lt;/span>301838&lt;span class="o">]&lt;/span>, &lt;span class="nv">write_ops&lt;/span>&lt;span class="o">=[&lt;/span>62949.67&lt;span class="o">]&lt;/span>, &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> rdb file synced: 69.52%
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:52 INF &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> rdb file parse &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:18:52 INF all &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>檢查一下，恢復數據後，數據分布和集群slot狀況&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.91:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.91:6379 &lt;span class="o">(&lt;/span>2c05c930...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">327164&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.98:6379 &lt;span class="o">(&lt;/span>c40f72b0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379 &lt;span class="o">(&lt;/span>71d88e30...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">326861&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.93:6379 &lt;span class="o">(&lt;/span>caa1fb6b...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">218263&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379 &lt;span class="o">(&lt;/span>eaeb50d0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">872288&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">53.24 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.91:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-3276&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 1709189e2036c2e0c4168189be9074d66bce2991 192.168.1.92:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 2c05c930c506e54ebea35f8f0b731754cd44082a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>3277-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 500ed38b799c6d5ad13483f8e0fee45fc9142d69 192.168.1.94:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 533669750790e904050e917657beae942185a407 192.168.1.91:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates caa1fb6b5fbc4e133b5ef472e2def11e836481f7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: b0bff6695a1318da9a01af2550c85de1e8e81a83 192.168.1.93:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 71d88e302c0a7ec240cbbb6f8380786d01da984c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 2b487243e0c78adb93ac73017d04a6ad39b51c36 192.168.1.98:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates eaeb50d0d31025f1589b7c8cdc12867f7a474c24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="恢復dump-master3rdb數據">恢復dump-master3，rdb數據&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 修改要恢復數據的rdb檔案位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim shake.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">filepath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/root/redis-shake/dumprdbfile/dump-master3.rdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>開始恢復dump-master3.rdb數據至cluster&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># ./redis-shake shake.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF load config from file: shake.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF log_level: &lt;span class="o">[&lt;/span>info&lt;span class="o">]&lt;/span>, log_file: &lt;span class="o">[&lt;/span>/root/redis-shake/data/shake.log&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF changed work dir to &lt;span class="o">[&lt;/span>/root/redis-shake/data&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF GOMAXPROCS defaults to the value of runtime.NumCPU &lt;span class="o">[&lt;/span>8&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF not &lt;span class="nb">set&lt;/span> pprof port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF no &lt;span class="k">function&lt;/span> script
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF create RdbReader: /root/redis-shake/dumprdbfile/dump-master3.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379@16379 myself,master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815636000&lt;/span> &lt;span class="m">1&lt;/span> connected 0-3276
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815635243&lt;/span> &lt;span class="m">5&lt;/span> connected 13107-16383
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815636000&lt;/span> &lt;span class="m">2&lt;/span> connected 3277-6553
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815638000&lt;/span> &lt;span class="m">3&lt;/span> connected 6554-9829
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815639056&lt;/span> &lt;span class="m">4&lt;/span> connected 9830-13106
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF redisClusterWriter connected to redis cluster successful. &lt;span class="nv">addresses&lt;/span>&lt;span class="o">=[&lt;/span>192.168.1.91:6379 192.168.1.98:6379 192.168.1.92:6379 192.168.1.93:6379 192.168.1.94:6379&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF create RedisClusterWriter: 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF not &lt;span class="nb">set&lt;/span> status port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF start syncing...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:39 INF &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> start &lt;span class="nb">read&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:44 INF &lt;span class="nv">read_count&lt;/span>&lt;span class="o">=[&lt;/span>335689&lt;span class="o">]&lt;/span>, &lt;span class="nv">read_ops&lt;/span>&lt;span class="o">=[&lt;/span>82529.84&lt;span class="o">]&lt;/span>, &lt;span class="nv">write_count&lt;/span>&lt;span class="o">=[&lt;/span>335689&lt;span class="o">]&lt;/span>, &lt;span class="nv">write_ops&lt;/span>&lt;span class="o">=[&lt;/span>82529.84&lt;span class="o">]&lt;/span>, &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> rdb file synced: 57.47%
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:45 INF &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> rdb file parse &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:20:45 INF all &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>檢查一下，恢復數據後，數據分布和集群slot狀況&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.91:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.91:6379 &lt;span class="o">(&lt;/span>2c05c930...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">327164&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.98:6379 &lt;span class="o">(&lt;/span>c40f72b0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379 &lt;span class="o">(&lt;/span>71d88e30...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">326860&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.93:6379 &lt;span class="o">(&lt;/span>caa1fb6b...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">327959&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379 &lt;span class="o">(&lt;/span>eaeb50d0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">327538&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">1309521&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">79.93 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.91:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-3276&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 1709189e2036c2e0c4168189be9074d66bce2991 192.168.1.92:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 2c05c930c506e54ebea35f8f0b731754cd44082a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>3277-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 500ed38b799c6d5ad13483f8e0fee45fc9142d69 192.168.1.94:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 533669750790e904050e917657beae942185a407 192.168.1.91:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates caa1fb6b5fbc4e133b5ef472e2def11e836481f7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: b0bff6695a1318da9a01af2550c85de1e8e81a83 192.168.1.93:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 71d88e302c0a7ec240cbbb6f8380786d01da984c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 2b487243e0c78adb93ac73017d04a6ad39b51c36 192.168.1.98:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates eaeb50d0d31025f1589b7c8cdc12867f7a474c24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="恢復dump-master4rdb數據">恢復dump-master4，rdb數據&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 修改要恢復數據的rdb檔案位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim shake.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">filepath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/root/redis-shake/dumprdbfile/dump-master4.rdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>開始恢復dump-master4.rdb數據至cluster&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># ./redis-shake shake.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF load config from file: shake.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF log_level: &lt;span class="o">[&lt;/span>info&lt;span class="o">]&lt;/span>, log_file: &lt;span class="o">[&lt;/span>/root/redis-shake/data/shake.log&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF changed work dir to &lt;span class="o">[&lt;/span>/root/redis-shake/data&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF GOMAXPROCS defaults to the value of runtime.NumCPU &lt;span class="o">[&lt;/span>8&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF not &lt;span class="nb">set&lt;/span> pprof port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF no &lt;span class="k">function&lt;/span> script
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF create RdbReader: /root/redis-shake/dumprdbfile/dump-master4.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379@16379 myself,master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815696000&lt;/span> &lt;span class="m">1&lt;/span> connected 0-3276
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815695487&lt;/span> &lt;span class="m">5&lt;/span> connected 13107-16383
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815699501&lt;/span> &lt;span class="m">2&lt;/span> connected 3277-6553
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815695000&lt;/span> &lt;span class="m">3&lt;/span> connected 6554-9829
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815697000&lt;/span> &lt;span class="m">4&lt;/span> connected 9830-13106
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF redisClusterWriter connected to redis cluster successful. &lt;span class="nv">addresses&lt;/span>&lt;span class="o">=[&lt;/span>192.168.1.91:6379 192.168.1.98:6379 192.168.1.92:6379 192.168.1.93:6379 192.168.1.94:6379&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF create RedisClusterWriter: 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF not &lt;span class="nb">set&lt;/span> status port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF start syncing...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:39 INF &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> start &lt;span class="nb">read&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:44 INF &lt;span class="nv">read_count&lt;/span>&lt;span class="o">=[&lt;/span>219205&lt;span class="o">]&lt;/span>, &lt;span class="nv">read_ops&lt;/span>&lt;span class="o">=[&lt;/span>48733.57&lt;span class="o">]&lt;/span>, &lt;span class="nv">write_count&lt;/span>&lt;span class="o">=[&lt;/span>219204&lt;span class="o">]&lt;/span>, &lt;span class="nv">write_ops&lt;/span>&lt;span class="o">=[&lt;/span>48733.57&lt;span class="o">]&lt;/span>, &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> rdb file synced: 53.23%
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:48 INF &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> rdb file parse &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:21:48 INF all &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>檢查一下，恢復數據後，數據分布和集群slot狀況&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.91:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.91:6379 &lt;span class="o">(&lt;/span>2c05c930...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">437387&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.98:6379 &lt;span class="o">(&lt;/span>c40f72b0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">149&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379 &lt;span class="o">(&lt;/span>71d88e30...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">437074&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.93:6379 &lt;span class="o">(&lt;/span>caa1fb6b...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">437832&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379 &lt;span class="o">(&lt;/span>eaeb50d0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">437593&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">1750035&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">106.81 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.91:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-3276&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 1709189e2036c2e0c4168189be9074d66bce2991 192.168.1.92:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 2c05c930c506e54ebea35f8f0b731754cd44082a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>3277-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 500ed38b799c6d5ad13483f8e0fee45fc9142d69 192.168.1.94:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 533669750790e904050e917657beae942185a407 192.168.1.91:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates caa1fb6b5fbc4e133b5ef472e2def11e836481f7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: b0bff6695a1318da9a01af2550c85de1e8e81a83 192.168.1.93:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 71d88e302c0a7ec240cbbb6f8380786d01da984c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 2b487243e0c78adb93ac73017d04a6ad39b51c36 192.168.1.98:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates eaeb50d0d31025f1589b7c8cdc12867f7a474c24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="恢復dump-master5rdb數據">恢復dump-master5，rdb數據&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 修改要恢復數據的rdb檔案位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim shake.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">filepath&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;/root/redis-shake/dumprdbfile/dump-master5.rdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>開始恢復dump-master5.rdb數據至cluster&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># ./redis-shake shake.toml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF load config from file: shake.toml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF log_level: &lt;span class="o">[&lt;/span>info&lt;span class="o">]&lt;/span>, log_file: &lt;span class="o">[&lt;/span>/root/redis-shake/data/shake.log&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF changed work dir to &lt;span class="o">[&lt;/span>/root/redis-shake/data&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF GOMAXPROCS defaults to the value of runtime.NumCPU &lt;span class="o">[&lt;/span>8&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF not &lt;span class="nb">set&lt;/span> pprof port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF no &lt;span class="k">function&lt;/span> script
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF create RdbReader: /root/redis-shake/dumprdbfile/dump-master5.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379@16379 myself,master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815801000&lt;/span> &lt;span class="m">1&lt;/span> connected 0-3276
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815800000&lt;/span> &lt;span class="m">5&lt;/span> connected 13107-16383
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815799000&lt;/span> &lt;span class="m">2&lt;/span> connected 3277-6553
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815801921&lt;/span> &lt;span class="m">3&lt;/span> connected 6554-9829
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF redisClusterWriter load cluster nodes. &lt;span class="nv">line&lt;/span>&lt;span class="o">=&lt;/span>eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702815800000&lt;/span> &lt;span class="m">4&lt;/span> connected 9830-13106
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF redisClusterWriter connected to redis cluster successful. &lt;span class="nv">addresses&lt;/span>&lt;span class="o">=[&lt;/span>192.168.1.91:6379 192.168.1.98:6379 192.168.1.92:6379 192.168.1.93:6379 192.168.1.94:6379&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF create RedisClusterWriter: 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF not &lt;span class="nb">set&lt;/span> status port
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF start syncing...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:23 INF &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> start &lt;span class="nb">read&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:28 INF &lt;span class="nv">read_count&lt;/span>&lt;span class="o">=[&lt;/span>318286&lt;span class="o">]&lt;/span>, &lt;span class="nv">read_ops&lt;/span>&lt;span class="o">=[&lt;/span>61021.11&lt;span class="o">]&lt;/span>, &lt;span class="nv">write_count&lt;/span>&lt;span class="o">=[&lt;/span>318285&lt;span class="o">]&lt;/span>, &lt;span class="nv">write_ops&lt;/span>&lt;span class="o">=[&lt;/span>61021.11&lt;span class="o">]&lt;/span>, &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> rdb file synced: 59.98%
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:30 INF &lt;span class="o">[&lt;/span>rdb_reader&lt;span class="o">]&lt;/span> rdb file parse &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-12-17 20:23:30 INF all &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>檢查一下，恢復數據後，數據分布和集群slot狀況&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis-shake&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.91:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.91:6379 &lt;span class="o">(&lt;/span>2c05c930...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">436710&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.98:6379 &lt;span class="o">(&lt;/span>c40f72b0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">437406&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379 &lt;span class="o">(&lt;/span>71d88e30...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">436424&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.93:6379 &lt;span class="o">(&lt;/span>caa1fb6b...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">437055&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379 &lt;span class="o">(&lt;/span>eaeb50d0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">436830&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">2184425&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">133.33 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.91:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-3276&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 1709189e2036c2e0c4168189be9074d66bce2991 192.168.1.92:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 2c05c930c506e54ebea35f8f0b731754cd44082a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>3277-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 500ed38b799c6d5ad13483f8e0fee45fc9142d69 192.168.1.94:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 533669750790e904050e917657beae942185a407 192.168.1.91:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates caa1fb6b5fbc4e133b5ef472e2def11e836481f7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: b0bff6695a1318da9a01af2550c85de1e8e81a83 192.168.1.93:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 71d88e302c0a7ec240cbbb6f8380786d01da984c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 2b487243e0c78adb93ac73017d04a6ad39b51c36 192.168.1.98:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates eaeb50d0d31025f1589b7c8cdc12867f7a474c24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="分析數據">分析數據&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217202511.png"
width="1221"
height="811"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217202511_hubbad321770ed9063655dbcc7392e6aef_147929_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217202511_hubbad321770ed9063655dbcc7392e6aef_147929_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="361px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217203437.png"
width="1661"
height="832"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217203437_hu91070495c515dc52476009876a80df1b_116118_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217203437_hu91070495c515dc52476009876a80df1b_116118_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="199"
data-flex-basis="479px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217203507.png"
width="1681"
height="902"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217203507_huc302e745bb689e5d0fc211bec2dadd78_265363_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217203507_huc302e745bb689e5d0fc211bec2dadd78_265363_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="186"
data-flex-basis="447px"
>&lt;/p>
&lt;p>以下是將RBD檔案複製到REDIS目錄，一台一台REDIS服務重啟，慢慢導入RBD數據的效果&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217180124.png"
width="1677"
height="807"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217180124_hu8fe506ee02ff998d1d1e8dc4d146a970_106504_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217180124_hu8fe506ee02ff998d1d1e8dc4d146a970_106504_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="207"
data-flex-basis="498px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217180139.png"
width="1676"
height="909"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217180139_hucd14407a271551d597e0c9776110b94b_261103_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redis-shake/media/Pasted-image-20231217180139_hucd14407a271551d597e0c9776110b94b_261103_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="184"
data-flex-basis="442px"
>&lt;/p>
&lt;p>看起來效果是一樣，但是使用Redis-Shake，有幾個好處：&lt;/p>
&lt;ol>
&lt;li>Redis服務不用重啟，線上恢復數據&lt;/li>
&lt;li>Redis slot不會有異常分配狀況，還要使用&amp;ndash;cluster fix的狀況發生&lt;/li>
&lt;li>恢復數據非常快，一個dump恢復大約5秒完成&lt;/li>
&lt;/ol>
&lt;h2 id="測試數據是否正確">測試數據，是否正確&lt;/h2>
&lt;p>來查查看數據，是不是跟之前使用重啟Redis服務恢復數據時，得到的一樣&lt;/p>
&lt;p>以下是使用重啟Redis服務恢復數據時，查到的key和value&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 -c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key剛好就在redis01主機上，所以執行直接顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:362C74F290B63E5F751DCF1E49EC34BEAF6822F0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis02主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; &lt;span class="nb">type&lt;/span> DRM01001000347201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>5914&lt;span class="o">]&lt;/span> located at 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis03主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:EBB87CF1F764E6BACCC709323FE1457065B0CC8E
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>10759&lt;span class="o">]&lt;/span> located at 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379&amp;gt; SMEMBERS spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:EBB87CF1F764E6BACCC709323FE1457065B0CC8E
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;\xac\xed\x00\x05t\x00&lt;/span>&lt;span class="nv">$aef3b17d&lt;/span>&lt;span class="s2">-ed6f-4c4e-9cc3-ef69eda6f33c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis04主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379&amp;gt; &lt;span class="nb">type&lt;/span> TON01001010231201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>12921&lt;span class="o">]&lt;/span> located at 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379&amp;gt; hgetall TON01001010231201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;path&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;/reader/book_content_unpack/teb/2022/10/17/TON01001010231201/TON01001010231201&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;iv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;06ac4696c8a4bb94ecb7e82b38a1dc3f&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;key&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;36971e857d647324cb59e1cdf58d7071&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis05主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:25E30A2AB63FE661B9AE7803EAD9A9AC234097FC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>16326&lt;span class="o">]&lt;/span> located at 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379&amp;gt; SMEMBERS spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:25E30A2AB63FE661B9AE7803EAD9A9AC234097FC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;\xac\xed\x00\x05t\x00&lt;/span>&lt;span class="nv">$f0d82ce3&lt;/span>&lt;span class="s2">-28e3-493c-b992-439565cf987e&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis02主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379&amp;gt; &lt;span class="nb">type&lt;/span> BOOK_CASE_LIST_U_39048951
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>5895&lt;span class="o">]&lt;/span> located at 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379&amp;gt; hgetall BOOK_CASE_LIST_U_39048951
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;0_5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;{\&amp;#34;result\&amp;#34;:\&amp;#34;00\&amp;#34;,\&amp;#34;syncTime\&amp;#34;:\&amp;#34;20231202164546\&amp;#34;,\&amp;#34;ebooks\&amp;#34;:[{\&amp;#34;deliverId\&amp;#34;:\&amp;#34;SON03001000560201\&amp;#34;,\&amp;#34;contentId\&amp;#34;:\&amp;#34;SON03001000560\&amp;#34;,\&amp;#34;title\&amp;#34;:\&amp;#34;\xe6\x8a\x95\xe8\xb3\x875\xe5\xb9\xb4\xef\xbc\x8c\xe6\x9c\xac\xe9\x87\x91\xe5\xbe\x9e4\xe8\x90\xac\xe5\x88\xb01\xe5\x84\x84\xe7\x9a\x84\xe5\xa5\xb3\xe4\xba\xba\xef\xbc\x9a\xe5\xbe\x9e\xe7\x9c\x81\xe9\x8c\xa2\xe3\x80\x81\xe5\xae\x9a\xe5\xad\x98\xe5\x88\xb0\xe8\x82\xa1\xe7\xa5\xa8\xef\xbc\x8c\xe5\xb0\x88\xe5\xb1\xac\xe5\xb0\x8f\xe8\xb3\x87\xe5\xa5\xb3\xe7\x9a\x84\xe8\xb3\xaa\xe6\x84\x9f\xe7\x90\x86\xe8\xb2\xa1\xe6\x8f\x90\xe6\xa1\x88\&amp;#34;,\&amp;#34;publisher\&amp;#34;:\&amp;#34;\xe5\xb4\xa7\xe7\x87\x81\xe6\x96\x87\xe5\x8c\x96\&amp;#34;,\&amp;#34;author\&amp;#34;:\&amp;#34;\xe6\xb7\x98\xe6\xb7\x98\&amp;#34;,\&amp;#34;bodyTypeCode\&amp;#34;:\&amp;#34;201\&amp;#34;,\&amp;#34;ebookType\&amp;#34;:\&amp;#34;\xe6\x9b\xb8\xe7\xb1\x8d\&amp;#34;,\&amp;#34;categories\&amp;#34;:[\&amp;#34;\xe9\x87\x91\xe8\x9e\x8d\xe7\x90\x86\xe8\xb2\xa1\&amp;#34;],
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;font color=red>注意：可以看到，數據都正確，此方法恢復數據，可行&lt;/font>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 -c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key剛好就在redis01主機上，所以執行直接顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:362C74F290B63E5F751DCF1E49EC34BEAF6822F0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis92主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; &lt;span class="nb">type&lt;/span> DRM01001000347201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>5914&lt;span class="o">]&lt;/span> located at 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis94主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:EBB87CF1F764E6BACCC709323FE1457065B0CC8E
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>10759&lt;span class="o">]&lt;/span> located at 192.168.1.94:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379&amp;gt; SMEMBERS spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:EBB87CF1F764E6BACCC709323FE1457065B0CC8E
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;\xac\xed\x00\x05t\x00&lt;/span>&lt;span class="nv">$aef3b17d&lt;/span>&lt;span class="s2">-ed6f-4c4e-9cc3-ef69eda6f33c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key剛好就在redis94主機上，所以執行直接顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379&amp;gt; &lt;span class="nb">type&lt;/span> TON01001010231201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379&amp;gt; hgetall TON01001010231201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;path&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;/reader/book_content_unpack/teb/2022/10/17/TON01001010231201/TON01001010231201&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;key&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;36971e857d647324cb59e1cdf58d7071&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;iv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;06ac4696c8a4bb94ecb7e82b38a1dc3f&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis98主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:25E30A2AB63FE661B9AE7803EAD9A9AC234097FC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>16326&lt;span class="o">]&lt;/span> located at 192.168.1.98:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.98:6379&amp;gt; SMEMBERS spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:25E30A2AB63FE661B9AE7803EAD9A9AC234097FC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;\xac\xed\x00\x05t\x00&lt;/span>&lt;span class="nv">$f0d82ce3&lt;/span>&lt;span class="s2">-28e3-493c-b992-439565cf987e&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis92主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.98:6379&amp;gt; &lt;span class="nb">type&lt;/span> BOOK_CASE_LIST_U_39048951
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>5895&lt;span class="o">]&lt;/span> located at 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379&amp;gt; hgetall BOOK_CASE_LIST_U_39048951
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;0_5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;{\&amp;#34;result\&amp;#34;:\&amp;#34;00\&amp;#34;,\&amp;#34;syncTime\&amp;#34;:\&amp;#34;20231202164546\&amp;#34;,\&amp;#34;ebooks\&amp;#34;:[{\&amp;#34;deliverId\&amp;#34;:\&amp;#34;SON03001000560201\&amp;#34;,\&amp;#34;contentId\&amp;#34;:\&amp;#34;SON03001000560\&amp;#34;,\&amp;#34;title\&amp;#34;:\&amp;#34;\xe6\x8a\x95\xe8\xb3\x875\xe5\xb9\xb4\xef\xbc\x8c\xe6\x9c\xac\xe9\x87\x91\xe5\xbe\x9e4\xe8\x90\xac\xe5\x88\xb01\xe5\x84\x84\xe7\x9a\x84\xe5\xa5\xb3\xe4\xba\xba\xef\xbc\x9a\xe5\xbe\x9e\xe7\x9c\x81\xe9\x8c\xa2\xe3\x80\x81\xe5\xae\x9a\xe5\xad\x98\xe5\x88\xb0\xe8\x82\xa1\xe7\xa5\xa8\xef\xbc\x8c\xe5\xb0\x88\xe5\xb1\xac\xe5\xb0\x8f\xe8\xb3\x87\xe5\xa5\xb3\xe7\x9a\x84\xe8\xb3\xaa\xe6\x84\x9f\xe7\x90\x86\xe8\xb2\xa1\xe6\x8f\x90\xe6\xa1\x88\&amp;#34;,\&amp;#34;publisher\&amp;#34;:\&amp;#34;\xe5\xb4\xa7\xe7\x87\x81\xe6\x96\x87\xe5\x8c\x96\&amp;#34;,\&amp;#34;author\&amp;#34;:\&amp;#34;\xe6\xb7\x98\xe6\xb7\x98\&amp;#34;,\&amp;#34;bodyTypeCode\&amp;#34;:\&amp;#34;201\&amp;#34;,\&amp;#34;ebookType\&amp;#34;:\&amp;#34;\xe6\x9b\xb8\xe7\xb1\x8d\&amp;#34;,\&amp;#34;categories\&amp;#34;:[\&amp;#34;\xe9\x87\x91
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>使用RedisInsight 1.x版，BULK ACTIONS功能，還原數據，從一個cluster遷移所有分片數據到另一個cluster，結果->有些數據Key Name被修改了，此方式不可行</title><link>https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/</link><pubDate>Sun, 17 Dec 2023 17:05:34 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/</guid><description>&lt;h2 id="redis-cluster主機ip表">Redis Cluster主機IP表&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217182757.png"
width="668"
height="1011"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217182757_hu958cbfd0a734f396244b4db5ea229923_132015_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217182757_hu958cbfd0a734f396244b4db5ea229923_132015_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="66"
data-flex-basis="158px"
>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>主機名稱&lt;/td>
&lt;td>主機IP&lt;/td>
&lt;td>角色&lt;/td>
&lt;td>主機IP&lt;/td>
&lt;td>角色&lt;/td>
&lt;td>跟隨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis91&lt;/td>
&lt;td>192.168.1.91:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.91:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.92:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis92&lt;/td>
&lt;td>192.168.1.92:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.92:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.93:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis93&lt;/td>
&lt;td>192.168.1.93:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.93:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.91:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis94&lt;/td>
&lt;td>192.168.1.94:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.94:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.98:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis98&lt;/td>
&lt;td>192.168.1.98:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.98:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.94:6380&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="redisinsight添加redis主機">RedisInsight添加Redis主機&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170716.png"
width="1112"
height="679"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170716_hu8941ff57d904a7570160d2b84b67f41c_52216_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170716_hu8941ff57d904a7570160d2b84b67f41c_52216_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="163"
data-flex-basis="393px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170728.png"
width="1118"
height="632"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170728_hu063dd0b54e9d99400b14cc8c918e0655_90309_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170728_hu063dd0b54e9d99400b14cc8c918e0655_90309_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="176"
data-flex-basis="424px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170744.png"
width="1155"
height="700"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170744_hu8099a67496bdb5dfde1d28b49eb4b9c4_63457_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170744_hu8099a67496bdb5dfde1d28b49eb4b9c4_63457_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="165"
data-flex-basis="396px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173105.png"
width="1679"
height="775"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173105_hu0e7edbdab7fde8c2c7e2dba7a6e95699_116971_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173105_hu0e7edbdab7fde8c2c7e2dba7a6e95699_116971_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="216"
data-flex-basis="519px"
>&lt;/p>
&lt;h2 id="使用bulk-action-restore數據">使用BULK ACTION Restore數據&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170841.png"
width="1118"
height="774"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170841_hu55eae7e8d5f6eee98578b69c9738d807_100007_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217170841_hu55eae7e8d5f6eee98578b69c9738d807_100007_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="144"
data-flex-basis="346px"
>&lt;/p>
&lt;p>我是用k8s佈屬RedisInsight，所以才看一下，佈屬到哪個節點，需要把要恢復數據的RBD檔案，傳至那台主機RedisInsight POD裡面&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redisinsight-cf7f6847b-s2zgg 1/1 Running &lt;span class="m">0&lt;/span> 18h 10.201.255.218 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">test-nginx 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>13d ago&lt;span class="o">)&lt;/span> 13d 10.201.14.154 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web2-5d48fb75c5-dt5xd 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>13d ago&lt;span class="o">)&lt;/span> 13d 10.201.255.211 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web2-5d48fb75c5-ggmrz 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>13d ago&lt;span class="o">)&lt;/span> 13d 10.201.14.148 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web2-5d48fb75c5-jsvck 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>13d ago&lt;span class="o">)&lt;/span> 13d 10.201.255.215 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# docker ps &lt;span class="p">|&lt;/span> grep -i redis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5524bf7385e4 64a3d4d7e868 &lt;span class="s2">&amp;#34;bash ./docker-entry…&amp;#34;&lt;/span> &lt;span class="m">18&lt;/span> hours ago Up &lt;span class="m">18&lt;/span> hours k8s_redisinsight_redisinsight-cf7f6847b-s2zgg_default_65440569-c6e2-4f40-b836-8bf2b0c9b511_0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">efebd005bac3 registry.k8s.io/pause:3.9 &lt;span class="s2">&amp;#34;/pause&amp;#34;&lt;/span> &lt;span class="m">18&lt;/span> hours ago Up &lt;span class="m">18&lt;/span> hours k8s_POD_redisinsight-cf7f6847b-s2zgg_default_65440569-c6e2-4f40-b836-8bf2b0c9b511_0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# docker &lt;span class="nb">exec&lt;/span> -ti 5524bf7385e4 bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redisinsight@redisinsight-cf7f6847b-s2zgg:/app$ ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">6015&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> appicon.pyc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">841&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> docker-entry.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">377&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> entry.pyc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">2511&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> manage.pyc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">6850&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> pyinstaller.spec
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">24&lt;/span> root root &lt;span class="m">4096&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> redisinsight
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1089&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> requirements.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">26991&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> startup.pyc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redisinsight@redisinsight-cf7f6847b-s2zgg:/app$
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>將要恢復數據的RBD檔案，傳至RedisInsight POD裡面&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# chown -R root:root dump-master*.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# chmod o+rw dump-master*.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# docker cp dump-master1.rdb 5524bf7385e4:/app/dump-master1.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# docker cp dump-master2.rdb 5524bf7385e4:/app/dump-master2.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# docker cp dump-master3.rdb 5524bf7385e4:/app/dump-master3.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# docker cp dump-master4.rdb 5524bf7385e4:/app/dump-master4.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# docker cp dump-master5.rdb 5524bf7385e4:/app/dump-master5.rdb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">redisinsight@redisinsight-cf7f6847b-s2zgg:/app$ ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">1758796&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">6015&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> appicon.pyc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">841&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> docker-entry.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw----rw- &lt;span class="m">1&lt;/span> root root &lt;span class="m">343630318&lt;/span> Dec &lt;span class="m">5&lt;/span> 07:27 dump-master1.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw----rw- &lt;span class="m">1&lt;/span> root root &lt;span class="m">348759548&lt;/span> Dec &lt;span class="m">5&lt;/span> 07:32 dump-master2.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw----rw- &lt;span class="m">1&lt;/span> root root &lt;span class="m">349938872&lt;/span> Dec &lt;span class="m">5&lt;/span> 07:53 dump-master3.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw----rw- &lt;span class="m">1&lt;/span> root root &lt;span class="m">402484559&lt;/span> Dec &lt;span class="m">5&lt;/span> 07:56 dump-master4.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw----rw- &lt;span class="m">1&lt;/span> root root &lt;span class="m">356118026&lt;/span> Dec &lt;span class="m">5&lt;/span> 07:56 dump-master5.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">377&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> entry.pyc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">2511&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> manage.pyc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">6850&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> pyinstaller.spec
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">24&lt;/span> root root &lt;span class="m">4096&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> redisinsight
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-rw-r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1089&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> requirements.txt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">26991&lt;/span> May &lt;span class="m">2&lt;/span> &lt;span class="m">2023&lt;/span> startup.pyc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>開始恢復數據
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173157.png"
width="1124"
height="774"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173157_hu24a702ba6f3fc8c7d4b878270ed652e5_107549_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173157_hu24a702ba6f3fc8c7d4b878270ed652e5_107549_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173216.png"
width="1716"
height="787"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173216_hud738e7dae71b3ecce62c0ff15ac06370_115574_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173216_hud738e7dae71b3ecce62c0ff15ac06370_115574_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="218"
data-flex-basis="523px"
>&lt;/p>
&lt;p>恢復數據完成
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173438.png"
width="1714"
height="789"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173438_hu934af6320153a37e888616a64c623532_113353_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173438_hu934af6320153a37e888616a64c623532_113353_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="217"
data-flex-basis="521px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.91:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.91:6379 &lt;span class="o">(&lt;/span>2c05c930...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">122790&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.98:6379 &lt;span class="o">(&lt;/span>c40f72b0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">75980&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379 &lt;span class="o">(&lt;/span>71d88e30...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">91349&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.93:6379 &lt;span class="o">(&lt;/span>caa1fb6b...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">76507&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379 &lt;span class="o">(&lt;/span>eaeb50d0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">76336&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">442962&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">27.04 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.91:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-3276&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 1709189e2036c2e0c4168189be9074d66bce2991 192.168.1.92:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 2c05c930c506e54ebea35f8f0b731754cd44082a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>3277-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 500ed38b799c6d5ad13483f8e0fee45fc9142d69 192.168.1.94:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 533669750790e904050e917657beae942185a407 192.168.1.91:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates caa1fb6b5fbc4e133b5ef472e2def11e836481f7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: b0bff6695a1318da9a01af2550c85de1e8e81a83 192.168.1.93:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 71d88e302c0a7ec240cbbb6f8380786d01da984c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 2b487243e0c78adb93ac73017d04a6ad39b51c36 192.168.1.98:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates eaeb50d0d31025f1589b7c8cdc12867f7a474c24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>再選第二個rbd檔進行恢復
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173551.png"
width="1711"
height="767"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173551_hu09f9e6f01303187eae4fce88869a6eaa_128490_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173551_hu09f9e6f01303187eae4fce88869a6eaa_128490_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="223"
data-flex-basis="535px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173646.png"
width="1718"
height="844"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173646_huaf632375579d3507ea0ea82dc245424e_124377_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173646_huaf632375579d3507ea0ea82dc245424e_124377_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="203"
data-flex-basis="488px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173937.png"
width="1714"
height="790"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173937_hu2e766fa75da7d163520a39c4b5a93aae_119721_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217173937_hu2e766fa75da7d163520a39c4b5a93aae_119721_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="216"
data-flex-basis="520px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.91:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.91:6379 &lt;span class="o">(&lt;/span>2c05c930...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">198625&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.98:6379 &lt;span class="o">(&lt;/span>c40f72b0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">152593&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379 &lt;span class="o">(&lt;/span>71d88e30...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">198771&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.93:6379 &lt;span class="o">(&lt;/span>caa1fb6b...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">184053&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379 &lt;span class="o">(&lt;/span>eaeb50d0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">152590&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">886632&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">54.12 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.91:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-3276&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 1709189e2036c2e0c4168189be9074d66bce2991 192.168.1.92:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 2c05c930c506e54ebea35f8f0b731754cd44082a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>3277-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 500ed38b799c6d5ad13483f8e0fee45fc9142d69 192.168.1.94:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 533669750790e904050e917657beae942185a407 192.168.1.91:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates caa1fb6b5fbc4e133b5ef472e2def11e836481f7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: b0bff6695a1318da9a01af2550c85de1e8e81a83 192.168.1.93:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 71d88e302c0a7ec240cbbb6f8380786d01da984c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 2b487243e0c78adb93ac73017d04a6ad39b51c36 192.168.1.98:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates eaeb50d0d31025f1589b7c8cdc12867f7a474c24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>再選第三個rbd檔進行恢復，陸續將5個都恢復完成&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217174037.png"
width="1716"
height="773"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217174037_hu5f22c996f6384f509836bf44138693cf_134780_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217174037_hu5f22c996f6384f509836bf44138693cf_134780_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="221"
data-flex-basis="532px"
>&lt;/p>
&lt;p>陸續完成五個dump.rdb的RESTORE&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217174851.png"
width="1716"
height="759"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217174851_hu20fe9b2924c3d0f7d31686b02efd9333_136972_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217174851_hu20fe9b2924c3d0f7d31686b02efd9333_136972_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="226"
data-flex-basis="542px"
>&lt;/p>
&lt;p>可以看到，key是平均寫入每個master，slot也不會有什麼改變&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.91:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.91:6379 &lt;span class="o">(&lt;/span>2c05c930...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">442550&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.98:6379 &lt;span class="o">(&lt;/span>c40f72b0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">444646&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379 &lt;span class="o">(&lt;/span>71d88e30...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">443416&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.93:6379 &lt;span class="o">(&lt;/span>caa1fb6b...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">444081&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379 &lt;span class="o">(&lt;/span>eaeb50d0...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">443884&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">2218577&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">135.41 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.91:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 2c05c930c506e54ebea35f8f0b731754cd44082a 192.168.1.91:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-3276&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 1709189e2036c2e0c4168189be9074d66bce2991 192.168.1.92:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 2c05c930c506e54ebea35f8f0b731754cd44082a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf 192.168.1.98:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 71d88e302c0a7ec240cbbb6f8380786d01da984c 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>3277-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: caa1fb6b5fbc4e133b5ef472e2def11e836481f7 192.168.1.93:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 500ed38b799c6d5ad13483f8e0fee45fc9142d69 192.168.1.94:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates c40f72b0ee3ac4be0b9ddaea4d16079f723e13bf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 533669750790e904050e917657beae942185a407 192.168.1.91:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates caa1fb6b5fbc4e133b5ef472e2def11e836481f7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: b0bff6695a1318da9a01af2550c85de1e8e81a83 192.168.1.93:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 71d88e302c0a7ec240cbbb6f8380786d01da984c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: eaeb50d0d31025f1589b7c8cdc12867f7a474c24 192.168.1.94:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 2b487243e0c78adb93ac73017d04a6ad39b51c36 192.168.1.98:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates eaeb50d0d31025f1589b7c8cdc12867f7a474c24
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="分析數據">分析數據&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175052.png"
width="1652"
height="756"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175052_hu1e6f69fa541db1247a7b9997e31f2b7d_98815_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175052_hu1e6f69fa541db1247a7b9997e31f2b7d_98815_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="218"
data-flex-basis="524px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175113.png"
width="1215"
height="720"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175113_hu958f04d58f0c25c1ed4f6b09ce32f109_101955_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175113_hu958f04d58f0c25c1ed4f6b09ce32f109_101955_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="168"
data-flex-basis="405px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175141.png"
width="707"
height="549"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175141_hu521eac495c8b9ba0c2ed1b45668fe721_37116_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175141_hu521eac495c8b9ba0c2ed1b45668fe721_37116_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="128"
data-flex-basis="309px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175157.png"
width="1679"
height="913"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175157_huc2153e67b2b306265b0dd5015c4b6120_122574_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175157_huc2153e67b2b306265b0dd5015c4b6120_122574_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="183"
data-flex-basis="441px"
>&lt;/p>
&lt;p>會讓REDIS執行一次bgsave，存下目前的所有key，並使用SYNC，將檔案複製到RedisInsight目錄/db/rsnaps裡面來進行分析&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">595660&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">609714517&lt;/span> 12月 &lt;span class="m">17&lt;/span> 17:53 dump6379.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">175&lt;/span> 12月 &lt;span class="m">17&lt;/span> 17:16 dump6380.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1303&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:17 nodes-6379.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1303&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:17 nodes-6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:01 redis6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:01 redis.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1041&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:01 users.acl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">redisinsight@redisinsight-cf7f6847b-s2zgg:/db/rsnaps$ &lt;span class="nb">pwd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/db/rsnaps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redisinsight@redisinsight-cf7f6847b-s2zgg:/db/rsnaps$ ls -lh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 5.0G
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redisinsight redisinsight 975M Dec &lt;span class="m">17&lt;/span> 09:56 2a974363-c6f6-4d86-9333-68a5d83f46a2.rsnap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redisinsight redisinsight 647M Dec &lt;span class="m">17&lt;/span> 09:52 2a974363-c6f6-4d86-9333-68a5d83f46a21702806698_0.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redisinsight redisinsight 568M Dec &lt;span class="m">17&lt;/span> 09:52 2a974363-c6f6-4d86-9333-68a5d83f46a21702806733_1.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redisinsight redisinsight 579M Dec &lt;span class="m">17&lt;/span> 09:53 2a974363-c6f6-4d86-9333-68a5d83f46a21702806764_2.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redisinsight redisinsight 582M Dec &lt;span class="m">17&lt;/span> 09:53 2a974363-c6f6-4d86-9333-68a5d83f46a21702806794_3.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redisinsight redisinsight 583M Dec &lt;span class="m">17&lt;/span> 09:54 2a974363-c6f6-4d86-9333-68a5d83f46a21702806827_4.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redisinsight redisinsight 819M Dec &lt;span class="m">16&lt;/span> 15:10 f784974f-a2e9-4dec-a74c-2b309d733efe.rsnap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>執行完畢後&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">redisinsight@redisinsight-cf7f6847b-s2zgg:/db/rsnaps$ ls -lh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total 1.8G
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redisinsight redisinsight 975M Dec &lt;span class="m">17&lt;/span> 09:56 2a974363-c6f6-4d86-9333-68a5d83f46a2.rsnap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redisinsight redisinsight 819M Dec &lt;span class="m">16&lt;/span> 15:10 f784974f-a2e9-4dec-a74c-2b309d733efe.rsnap
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>用RedisInsight BULK ACTIONS復原數據的效果&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175808.png"
width="1664"
height="878"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175808_huf5fd5049a9d41f530456b6c2b3e5a547_140279_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175808_huf5fd5049a9d41f530456b6c2b3e5a547_140279_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="189"
data-flex-basis="454px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175855.png"
width="1681"
height="913"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175855_hu025e17bfca9d8479fb79a7c3cbf5b100_262186_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217175855_hu025e17bfca9d8479fb79a7c3cbf5b100_262186_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="184"
data-flex-basis="441px"
>&lt;/p>
&lt;p>以下是將RBD檔案複製到REDIS目錄，一台一台REDIS服務重啟，慢慢導入RBD數據的效果&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217180124.png"
width="1677"
height="807"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217180124_hu8fe506ee02ff998d1d1e8dc4d146a970_106504_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217180124_hu8fe506ee02ff998d1d1e8dc4d146a970_106504_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="207"
data-flex-basis="498px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217180139.png"
width="1676"
height="909"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217180139_hucd14407a271551d597e0c9776110b94b_261103_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer-with-redisinsight-bulk-actions/media/Pasted-image-20231217180139_hucd14407a271551d597e0c9776110b94b_261103_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="184"
data-flex-basis="442px"
>&lt;/p>
&lt;p>看起來效果是一樣，但是使用RedisInsight BULK ACTIONS，有幾個好處：&lt;/p>
&lt;ol>
&lt;li>Redis服務不用重啟，線上恢復數據&lt;/li>
&lt;li>Redis slot不會有異常分配狀況，還要使用&amp;ndash;cluster fix的狀況發生&lt;/li>
&lt;/ol>
&lt;h2 id="測試數據是否正確結果-有些數據key-name被修改了">測試數據，是否正確，結果-&amp;gt;有些數據Key Name被修改了&lt;/h2>
&lt;p>來查查看數據，是不是跟之前使用重啟Redis服務恢復數據時，得到的一樣&lt;/p>
&lt;p>以下是使用重啟Redis服務恢復數據時，查到的key和value&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 -c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key剛好就在redis01主機上，所以執行直接顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:362C74F290B63E5F751DCF1E49EC34BEAF6822F0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis02主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; &lt;span class="nb">type&lt;/span> DRM01001000347201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>5914&lt;span class="o">]&lt;/span> located at 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis03主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:EBB87CF1F764E6BACCC709323FE1457065B0CC8E
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>10759&lt;span class="o">]&lt;/span> located at 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379&amp;gt; SMEMBERS spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:EBB87CF1F764E6BACCC709323FE1457065B0CC8E
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;\xac\xed\x00\x05t\x00&lt;/span>&lt;span class="nv">$aef3b17d&lt;/span>&lt;span class="s2">-ed6f-4c4e-9cc3-ef69eda6f33c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis04主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379&amp;gt; &lt;span class="nb">type&lt;/span> TON01001010231201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>12921&lt;span class="o">]&lt;/span> located at 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379&amp;gt; hgetall TON01001010231201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;path&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;/reader/book_content_unpack/teb/2022/10/17/TON01001010231201/TON01001010231201&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;iv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;06ac4696c8a4bb94ecb7e82b38a1dc3f&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;key&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;36971e857d647324cb59e1cdf58d7071&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis05主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:25E30A2AB63FE661B9AE7803EAD9A9AC234097FC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>16326&lt;span class="o">]&lt;/span> located at 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379&amp;gt; SMEMBERS spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:25E30A2AB63FE661B9AE7803EAD9A9AC234097FC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;\xac\xed\x00\x05t\x00&lt;/span>&lt;span class="nv">$f0d82ce3&lt;/span>&lt;span class="s2">-28e3-493c-b992-439565cf987e&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis02主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379&amp;gt; &lt;span class="nb">type&lt;/span> BOOK_CASE_LIST_U_39048951
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>5895&lt;span class="o">]&lt;/span> located at 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379&amp;gt; hgetall BOOK_CASE_LIST_U_39048951
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;0_5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;{\&amp;#34;result\&amp;#34;:\&amp;#34;00\&amp;#34;,\&amp;#34;syncTime\&amp;#34;:\&amp;#34;20231202164546\&amp;#34;,\&amp;#34;ebooks\&amp;#34;:[{\&amp;#34;deliverId\&amp;#34;:\&amp;#34;SON03001000560201\&amp;#34;,\&amp;#34;contentId\&amp;#34;:\&amp;#34;SON03001000560\&amp;#34;,\&amp;#34;title\&amp;#34;:\&amp;#34;\xe6\x8a\x95\xe8\xb3\x875\xe5\xb9\xb4\xef\xbc\x8c\xe6\x9c\xac\xe9\x87\x91\xe5\xbe\x9e4\xe8\x90\xac\xe5\x88\xb01\xe5\x84\x84\xe7\x9a\x84\xe5\xa5\xb3\xe4\xba\xba\xef\xbc\x9a\xe5\xbe\x9e\xe7\x9c\x81\xe9\x8c\xa2\xe3\x80\x81\xe5\xae\x9a\xe5\xad\x98\xe5\x88\xb0\xe8\x82\xa1\xe7\xa5\xa8\xef\xbc\x8c\xe5\xb0\x88\xe5\xb1\xac\xe5\xb0\x8f\xe8\xb3\x87\xe5\xa5\xb3\xe7\x9a\x84\xe8\xb3\xaa\xe6\x84\x9f\xe7\x90\x86\xe8\xb2\xa1\xe6\x8f\x90\xe6\xa1\x88\&amp;#34;,\&amp;#34;publisher\&amp;#34;:\&amp;#34;\xe5\xb4\xa7\xe7\x87\x81\xe6\x96\x87\xe5\x8c\x96\&amp;#34;,\&amp;#34;author\&amp;#34;:\&amp;#34;\xe6\xb7\x98\xe6\xb7\x98\&amp;#34;,\&amp;#34;bodyTypeCode\&amp;#34;:\&amp;#34;201\&amp;#34;,\&amp;#34;ebookType\&amp;#34;:\&amp;#34;\xe6\x9b\xb8\xe7\xb1\x8d\&amp;#34;,\&amp;#34;categories\&amp;#34;:[\&amp;#34;\xe9\x87\x91\xe8\x9e\x8d\xe7\x90\x86\xe8\xb2\xa1\&amp;#34;],
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;font color=red>注意：可以看到，有些數據找不到了&lt;/font>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 -c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 此數據找不到了&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:362C74F290B63E5F751DCF1E49EC34BEAF6822F0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">none
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; &lt;span class="nb">type&lt;/span> DRM01001000347201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>5914&lt;span class="o">]&lt;/span> located at 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 此數據找不到了&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:EBB87CF1F764E6BACCC709323FE1457065B0CC8E
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>10759&lt;span class="o">]&lt;/span> located at 192.168.1.94:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">none
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379&amp;gt; &lt;span class="nb">type&lt;/span> TON01001010231201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379&amp;gt; hgetall TON01001010231201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;path&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;/reader/book_content_unpack/teb/2022/10/17/TON01001010231201/TON01001010231201&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;key&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;36971e857d647324cb59e1cdf58d7071&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;iv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;06ac4696c8a4bb94ecb7e82b38a1dc3f&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 此數據找不到了&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.94:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:25E30A2AB63FE661B9AE7803EAD9A9AC234097FC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>16326&lt;span class="o">]&lt;/span> located at 192.168.1.98:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">none
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.98:6379&amp;gt; &lt;span class="nb">type&lt;/span> BOOK_CASE_LIST_U_39048951
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>5895&lt;span class="o">]&lt;/span> located at 192.168.1.92:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.92:6379&amp;gt; hgetall BOOK_CASE_LIST_U_39048951
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;0_5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;{\&amp;#34;result\&amp;#34;:\&amp;#34;00\&amp;#34;,\&amp;#34;syncTime\&amp;#34;:\&amp;#34;20231202164546\&amp;#34;,\&amp;#34;ebooks\&amp;#34;:[{\&amp;#34;deliverId\&amp;#34;:\&amp;#34;SON03001000560201\&amp;#34;,\&amp;#34;contentId\&amp;#34;:\&amp;#34;SON03001000560\&amp;#34;,\&amp;#34;title\&amp;#34;:\&amp;#34;\xe6\x8a\x95\xe8\xb3\x875\xe5\xb9\xb4\xef\xbc\x8c\xe6\x9c\xac\xe9\x87\x91\xe5\xbe\x9e4\xe8\x90\xac\xe5\x88\xb01\xe5\x84\x84\xe7\x9a\x84\xe5\xa5\xb3\xe4\xba\xba\xef\xbc\x9a\xe5\xbe\x9e\xe7\x9c\x81\xe9\x8c\xa2\xe3\x80\x81\xe5\xae\x9a\xe5\xad\x98\xe5\x88\xb0\xe8\x82\xa1\xe7\xa5\xa8\xef\xbc\x8c\xe5\xb0\x88\xe5\xb1\xac\xe5\xb0\x8f\xe8\xb3\x87\xe5\xa5\xb3\xe7\x9a\x84\xe8\xb3\xaa\xe6\x84\x9f\xe7\x90\x86\xe8\xb2\xa1\xe6\x8f\x90\xe6\xa1\x88\&amp;#34;,\&amp;#34;publisher\&amp;#34;:\&amp;#34;\xe5\xb4\xa7\xe7\x87\x81\xe6\x96\x87\xe5\x8c\x96\&amp;#34;,\&amp;#34;author\&amp;#34;:\&amp;#34;\xe6\xb7\x98\xe6\xb7\x98\&amp;#34;,\&amp;#34;bodyTypeCode\&amp;#34;:\&amp;#34;201\&amp;#34;,\&amp;#34;ebookType\&amp;#34;:\&amp;#34;\xe6\x9b\xb8\xe7\xb1\x8d\&amp;#34;,\&amp;#34;categories\&amp;#34;:[\&amp;#34;\xe9
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;font color=red>可以看到，數據樣式變了，此恢復數據方式會有問題，不可用&lt;/font>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 原數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:362C74F290B63E5F751DCF1E49EC34BEAF6822F0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 用RedisInsight BULK ACTIONS恢復後的數據樣式變這樣&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">\x&lt;/span>19spring:session:index:org.s&lt;span class="sb">`&lt;/span>&lt;span class="se">\x&lt;/span>18&lt;span class="se">\t&lt;/span>framework.&lt;span class="se">\x&lt;/span>a0!&lt;span class="se">\x&lt;/span>01.F &lt;span class="se">\&amp;#34;\x&lt;/span>02ByI@&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="se">\x&lt;/span>00N &lt;span class="se">\x&lt;/span>1b&lt;span class="se">\x&lt;/span>00S&lt;span class="se">\x&lt;/span>808&lt;span class="se">\x&lt;/span>1eRepository.PRINCIPAL_NAME_INDEX&lt;span class="sb">`&lt;/span>&lt;span class="se">\n\x&lt;/span>1f:8E09B7E74AAA48FF8481847092A40E8&lt;span class="se">\b&lt;/span>A0FBB829A
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>使用Kubernetes架設RedisInsight 1.x版，管理Redis集群</title><link>https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/</link><pubDate>Sun, 17 Dec 2023 00:31:18 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/</guid><description>&lt;p>參考網址：https://docs.redis.com/latest/ri/installing/install-k8s/&lt;/p>
&lt;h2 id="create-the-redisinsight-deployment-and-service">Create the RedisInsight deployment and service&lt;/h2>
&lt;p>&lt;font color=red>沒有持久化數據，也就是POD重起，設定數據就會消失&lt;/font>&lt;/p>
&lt;p>Below is an annotated YAML file that will create a RedisInsight deployment and a service in a k8s cluster.&lt;/p>
&lt;ol>
&lt;li>Create a new file redisinsight.yaml with the content below&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># RedisInsight service with name &amp;#39;redisinsight-service&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight-service &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># name should not be &amp;#39;redisinsight&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># since the service creates&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># environment variables that&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># conflicts with redisinsight&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># application&amp;#39;s environment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># variables `REDISINSIGHT_HOST` and&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># `REDISINSIGHT_PORT`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">NodePort&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8001&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># RedisInsight deployment with name &amp;#39;redisinsight&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">apps/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#deployment name&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#deployment label&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">replicas&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#a single replica pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#which pods is the deployment managing, as defined by the pod template&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#pod template&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#label for pod/s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#Container name (DNS_LABEL, unique)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redislabs/redisinsight:latest&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#repo/image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#Always pull image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumeMounts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">db&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#Pod volumes to mount into the container&amp;#39;s filesystem. Cannot be updated.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mountPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8001&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#exposed container port and protocol&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">emptyDir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{}&lt;span class="w"> &lt;/span>&lt;span class="c"># node-ephemeral volume https://kubernetes.io/docs/concepts/storage/volumes/#emptydir&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>Create the RedisInsight deployment and service&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">kubectl apply -f redisinsight.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="3">
&lt;li>Once the deployment and service are successfully applied and complete, access RedisInsight. This can be accomplished by listing the using the &lt;code>&amp;lt;external-ip&amp;gt;&lt;/code> of the service we created to reach redisinsight.&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get svc,pod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/redisinsight-service NodePort 10.202.52.175 &amp;lt;none&amp;gt; 80:31785/TCP 8s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/redisinsight-cf7f6847b-s2zgg 1/1 Running &lt;span class="m">0&lt;/span> 8s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="or-create-the-redisinsight-deployment-with-persistant-storage">Or Create the RedisInsight deployment with persistant storage&lt;/h2>
&lt;p>&lt;font color=red>持久化數據，也就是POD重起，設定數據也不會消失&lt;/font>&lt;/p>
&lt;p>Below is an annotated YAML file that will create a RedisInsight deployment in a K8s cluster. It will assign a peristent volume created from a volume claim template. Write access to the container is configured in an init container. When using deployments with persistent writeable volumes, it’s best to set the strategy to &lt;code>Recreate&lt;/code>. Otherwise you may find yourself with two pods trying to use the same volume.&lt;/p>
&lt;ol>
&lt;li>Create a new file &lt;code>redisinsight.yaml&lt;/code> with the content below.&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># RedisInsight service with name &amp;#39;redisinsight-service&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight-service &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># name should not be &amp;#39;redisinsight&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># since the service creates&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># environment variables that&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># conflicts with redisinsight&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># application&amp;#39;s environment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># variables `REDISINSIGHT_HOST` and&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># `REDISINSIGHT_PORT`&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">NodePort&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">port&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">targetPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8001&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">PersistentVolumeClaim&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight-pv-claim&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">accessModes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">ReadWriteOnce&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">resources&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">requests&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">storage&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">2Gi&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">storageClassName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;rook-cephfs&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nn">---&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># RedisInsight deployment with name &amp;#39;redisinsight&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">apiVersion&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">apps/v1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deployment&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#deployment name&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#deployment label&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">replicas&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">1&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#a single replica pod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">strategy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Recreate&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">selector&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">matchLabels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#which pods is the deployment managing, as defined by the pod template&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">template&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#pod template&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">metadata&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">app&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#label for pod/s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">spec&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">persistentVolumeClaim&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">claimName&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight-pv-claim&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">initContainers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">init&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">busybox&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">/bin/sh&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;-c&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> chown -R 1001 /db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">resources&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{}&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumeMounts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mountPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">terminationMessagePath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/dev/termination-log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">terminationMessagePolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">File&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">containers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redisinsight&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#Container name (DNS_LABEL, unique)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redislabs/redisinsight:latest&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#repo/image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">imagePullPolicy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">IfNotPresent&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#Always pull image&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumeMounts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">db&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#Pod volumes to mount into the container&amp;#39;s filesystem. Cannot be updated.&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mountPath&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">containerPort&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">8001&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#exposed container port and protocol&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">protocol&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">TCP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="2">
&lt;li>Create the RedisInsight deployment and service.&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">kubectl apply -f redisinsight.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="開網頁測試">開網頁測試&lt;/h2>
&lt;p>http://192.168.1.71:31785/&lt;/p>
&lt;h3 id="redis-cluster主機ip表">Redis Cluster主機IP表&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>主機名稱&lt;/td>
&lt;td>主機IP&lt;/td>
&lt;td>角色&lt;/td>
&lt;td>主機IP&lt;/td>
&lt;td>角色&lt;/td>
&lt;td>跟隨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis01&lt;/td>
&lt;td>192.168.1.11:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.11:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.12:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis02&lt;/td>
&lt;td>192.168.1.12:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.12:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.13:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis03&lt;/td>
&lt;td>192.168.1.13:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.13:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.11:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis04&lt;/td>
&lt;td>192.168.1.14:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.14:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.18:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis05&lt;/td>
&lt;td>192.168.1.18:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.18:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.14:6380&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="登入畫面">登入畫面&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231216235027.png"
width="1520"
height="894"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231216235027_hubc595a2880cfb08687aea0955beb0c64_103230_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231216235027_hubc595a2880cfb08687aea0955beb0c64_103230_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="408px"
>&lt;/p>
&lt;h3 id="點選add-redis-database">點選ADD REDIS DATABASE&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231216235104.png"
width="1122"
height="678"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231216235104_hu816cd84f59ec0e73557eb24ada62e87c_59820_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231216235104_hu816cd84f59ec0e73557eb24ada62e87c_59820_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="165"
data-flex-basis="397px"
>&lt;/p>
&lt;h3 id="填寫其中一台redis-cluster資訊">填寫其中一台redis cluster資訊&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231216235257.png"
width="1108"
height="670"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231216235257_hu43f0193d99c61175a068e1c65da95568_50719_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231216235257_hu43f0193d99c61175a068e1c65da95568_50719_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="165"
data-flex-basis="396px"
>&lt;/p>
&lt;p>偵測到為Cluster，就會幫我一同找到其他節點IP&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000345.png"
width="1121"
height="684"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000345_hu000ce6b82cba0ff6fa000c7b112b8380_59384_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000345_hu000ce6b82cba0ff6fa000c7b112b8380_59384_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="163"
data-flex-basis="393px"
>&lt;/p>
&lt;h3 id="all-masterreplica-nodes-summary">ALL MASTER、REPLICA NODES SUMMARY&lt;/h3>
&lt;p>可以看到MASTER 節點，彙整總結資訊&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000508.png"
width="1873"
height="861"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000508_huc4d26850c3517e5d881b327fd6d0b9d3_161690_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000508_huc4d26850c3517e5d881b327fd6d0b9d3_161690_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="217"
data-flex-basis="522px"
>&lt;/p>
&lt;p>也可以看到REPLICA 節點，彙整總結資訊&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000624.png"
width="1674"
height="879"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000624_hua887d4c4927a02e3229116473dd8c7e0_148094_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000624_hua887d4c4927a02e3229116473dd8c7e0_148094_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="190"
data-flex-basis="457px"
>&lt;/p>
&lt;h3 id="browserscan-key">Browser(SCAN Key）&lt;/h3>
&lt;p>可以透過此，查詢所有key及其value，也可以添加KEY&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000755.png"
width="1915"
height="871"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000755_huefbff92471ed817598608ac1c241ab15_241077_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000755_huefbff92471ed817598608ac1c241ab15_241077_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="219"
data-flex-basis="527px"
>&lt;/p>
&lt;h3 id="clicommand">CLI(COMMAND）&lt;/h3>
&lt;p>可以針對節點下REDIS指令&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000943.png"
width="1906"
height="854"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000943_hucc5359ba6836c337b39835780581fb06_125044_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217000943_hucc5359ba6836c337b39835780581fb06_125044_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="223"
data-flex-basis="535px"
>&lt;/p>
&lt;p>這裡針對所有MASTER下scan 0 count 50指令&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001038.png"
width="1912"
height="835"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001038_hub242481e8ad9141a8375b65511187ee3_152528_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001038_hub242481e8ad9141a8375b65511187ee3_152528_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="228"
data-flex-basis="549px"
>&lt;/p>
&lt;p>就會針對每一台MASTER幫你下指令，並統一顯示於視窗&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001200.png"
width="1636"
height="657"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001200_hu982f8309205c0bf63243849c78a5c20e_316786_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001200_hu982f8309205c0bf63243849c78a5c20e_316786_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="249"
data-flex-basis="597px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001215.png"
width="1663"
height="657"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001215_hu77f57ec20b04b6925069e5dcc67587df_316377_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001215_hu77f57ec20b04b6925069e5dcc67587df_316377_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="253"
data-flex-basis="607px"
>&lt;/p>
&lt;h3 id="analysememory-analysis">ANALYSE(Memory Analysis)&lt;/h3>
&lt;p>可以選擇使用離線分析，也就是提供他rdb file，&lt;/p>
&lt;p>或者線上分析，他會對所有redis下bgsave指令，在遠端的redis就會存下目前所有的key資訊為dump.rdb檔。&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001720.png"
width="1354"
height="794"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001720_hu89b8e7b94ed341b285872504d99afd0a_140302_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001720_hu89b8e7b94ed341b285872504d99afd0a_140302_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="409px"
>&lt;/p>
&lt;h4 id="memory-overview">Memory Overview&lt;/h4>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001411.png"
width="1882"
height="849"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001411_hub353f13bb15e8d6d47f780560c45b4ea_117088_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001411_hub353f13bb15e8d6d47f780560c45b4ea_117088_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="221"
data-flex-basis="532px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001423.png"
width="1874"
height="910"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001423_hu8a88c2f797068db404e3feb4e5eac50b_185128_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001423_hu8a88c2f797068db404e3feb4e5eac50b_185128_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="205"
data-flex-basis="494px"
>&lt;/p>
&lt;h4 id="keyspace-summary">Keyspace Summary&lt;/h4>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001438.png"
width="1919"
height="650"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001438_hu53ae2237005015c4c86a8e360836895c_177798_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001438_hu53ae2237005015c4c86a8e360836895c_177798_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="295"
data-flex-basis="708px"
>&lt;/p>
&lt;h4 id="recommendations">Recommendations&lt;/h4>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001500.png"
width="1347"
height="899"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001500_hu65a9842b606217ca1e1d2351e0fa4c16_218933_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001500_hu65a9842b606217ca1e1d2351e0fa4c16_218933_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="149"
data-flex-basis="359px"
>&lt;/p>
&lt;h4 id="memory-analyzer">Memory Analyzer&lt;/h4>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001514.png"
width="1881"
height="908"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001514_hua028830752b5e018d6e8bd2f94a4c129_273482_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217001514_hua028830752b5e018d6e8bd2f94a4c129_273482_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="207"
data-flex-basis="497px"
>&lt;/p>
&lt;h3 id="analyse-profilermonitor">ANALYSE Profiler(Monitor)&lt;/h3>
&lt;p>記錄當下指令執行&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002212.png"
width="1903"
height="766"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002212_hu394e3ebe52a6f3c55e0006c4197c2417_127713_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002212_hu394e3ebe52a6f3c55e0006c4197c2417_127713_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="248"
data-flex-basis="596px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002230.png"
width="1916"
height="795"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002230_hu9f703c181e6a5b16f8082c8c97b36aee_114738_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002230_hu9f703c181e6a5b16f8082c8c97b36aee_114738_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="241"
data-flex-basis="578px"
>&lt;/p>
&lt;h3 id="analyse-slowlog">ANALYSE Slowlog&lt;/h3>
&lt;p>查看目前有沒有slowlog慢日誌產生&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002242.png"
width="1914"
height="782"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002242_hu5ee9039f311db725ba369211d2105819_124388_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002242_hu5ee9039f311db725ba369211d2105819_124388_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="244"
data-flex-basis="587px"
>&lt;/p>
&lt;h3 id="bulk-actions">Bulk Actions&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002349.png"
width="1865"
height="771"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002349_hu28bcbf2c09fed4869ce237cced7d569c_118656_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002349_hu28bcbf2c09fed4869ce237cced7d569c_118656_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="241"
data-flex-basis="580px"
>&lt;/p>
&lt;h3 id="datebase-configuration">DATEBASE Configuration&lt;/h3>
&lt;p>可以查看，並設定REDIS&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002605.png"
width="1321"
height="920"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002605_hu72f2db596c7d1961a33efee3e1ceb93b_155110_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002605_hu72f2db596c7d1961a33efee3e1ceb93b_155110_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="143"
data-flex-basis="344px"
>&lt;/p>
&lt;h3 id="datebase-cluster-management">DATEBASE Cluster Management&lt;/h3>
&lt;p>可以管理Cluster&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002652.png"
width="1528"
height="758"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002652_hucbe0daba715cf90120a1dfcdefcbafed_144547_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002652_hucbe0daba715cf90120a1dfcdefcbafed_144547_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="201"
data-flex-basis="483px"
>&lt;/p>
&lt;h3 id="datebase-client-list">DATEBASE Client List&lt;/h3>
&lt;p>可以看到目前連接的客戶端資訊&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002741.png"
width="1119"
height="912"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002741_hu4e64c5dd0c1ff4561f2410ddd39bf1fb_224268_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-redisinsight/media/Pasted-image-20231217002741_hu4e64c5dd0c1ff4561f2410ddd39bf1fb_224268_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="122"
data-flex-basis="294px"
>&lt;/p></description></item><item><title>Redis Cluster 資料移轉，從一個cluster遷移所有分片數據到另一個cluster</title><link>https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer/</link><pubDate>Sat, 16 Dec 2023 23:43:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer/</guid><description>&lt;h2 id="redis-cluster來源主機ip表">Redis Cluster來源主機IP表&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer/media/Pasted-image-20231217005056.png"
width="668"
height="1011"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer/media/Pasted-image-20231217005056_hu970dfcb3f0cf2fdac96614a15315f26c_135448_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer/media/Pasted-image-20231217005056_hu970dfcb3f0cf2fdac96614a15315f26c_135448_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="66"
data-flex-basis="158px"
>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>主機名稱&lt;/td>
&lt;td>主機IP&lt;/td>
&lt;td>角色&lt;/td>
&lt;td>主機IP&lt;/td>
&lt;td>角色&lt;/td>
&lt;td>跟隨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis91&lt;/td>
&lt;td>192.168.1.91:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.91:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.92:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis92&lt;/td>
&lt;td>192.168.1.92:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.92:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.93:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis93&lt;/td>
&lt;td>192.168.1.93:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.93:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.91:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis94&lt;/td>
&lt;td>192.168.1.94:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.94:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.98:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis98&lt;/td>
&lt;td>192.168.1.98:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.98:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.94:6380&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="redis-cluster目的主機ip表">Redis Cluster目的主機IP表&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer/media/Pasted-image-20231217005115.png"
width="668"
height="1011"
srcset="https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer/media/Pasted-image-20231217005115_hua47f22cd06286ccf2b27f50d9b902ee1_132470_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/redis-cluster-database-transfer/media/Pasted-image-20231217005115_hua47f22cd06286ccf2b27f50d9b902ee1_132470_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="66"
data-flex-basis="158px"
>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;th>&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>主機名稱&lt;/td>
&lt;td>主機IP&lt;/td>
&lt;td>角色&lt;/td>
&lt;td>主機IP&lt;/td>
&lt;td>角色&lt;/td>
&lt;td>跟隨&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis01&lt;/td>
&lt;td>192.168.1.11:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.11:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.12:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis02&lt;/td>
&lt;td>192.168.1.12:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.12:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.13:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis03&lt;/td>
&lt;td>192.168.1.13:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.13:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.11:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis04&lt;/td>
&lt;td>192.168.1.14:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.14:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.18:6380&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>redis05&lt;/td>
&lt;td>192.168.1.18:6379&lt;/td>
&lt;td>master&lt;/td>
&lt;td>192.168.1.18:6380&lt;/td>
&lt;td>slave&lt;/td>
&lt;td>192.168.1.14:6380&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="實現目的與流程">實現目的與流程&lt;/h2>
&lt;ol>
&lt;li>從來源5台master使用bgsave指令，產生各master的數據檔案dump.rdb，共會產生5個dump.rdb檔&lt;/li>
&lt;li>將來源dump.rdb檔案傳送至目的5台master的redis工作目錄下，覆蓋原dump.rdb檔&lt;/li>
&lt;li>一台一台重啟redis服務&lt;/li>
&lt;li>重啟一台redis服務，就檢查一次數據恢復狀況(&amp;ndash;cluster check)，並修復(&amp;ndash;cluster fix)&lt;/li>
&lt;li>確定檢查正常，再執行下一台redis服務重啟&lt;/li>
&lt;li>直到5台都執行完畢，確認數據全部還原至目的集群&lt;/li>
&lt;/ol>
&lt;p>&lt;font color=red>注意：以上流程，一定要一台一台來執行，不能一次全部重啟redis服務&lt;/font>&lt;/p>
&lt;h2 id="目的cluser建置">目的cluser建置&lt;/h2>
&lt;h3 id="master-cluster集群創建master">master cluster集群創建(master)&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster create 192.168.1.11:6379 192.168.1.12:6379 192.168.1.13:6379 192.168.1.14:6379 192.168.1.18:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing &lt;span class="nb">hash&lt;/span> slots allocation on &lt;span class="m">5&lt;/span> nodes...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Master&lt;span class="o">[&lt;/span>0&lt;span class="o">]&lt;/span> -&amp;gt; Slots &lt;span class="m">0&lt;/span> - &lt;span class="m">3276&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Master&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span> -&amp;gt; Slots &lt;span class="m">3277&lt;/span> - &lt;span class="m">6553&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Master&lt;span class="o">[&lt;/span>2&lt;span class="o">]&lt;/span> -&amp;gt; Slots &lt;span class="m">6554&lt;/span> - &lt;span class="m">9829&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Master&lt;span class="o">[&lt;/span>3&lt;span class="o">]&lt;/span> -&amp;gt; Slots &lt;span class="m">9830&lt;/span> - &lt;span class="m">13106&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Master&lt;span class="o">[&lt;/span>4&lt;span class="o">]&lt;/span> -&amp;gt; Slots &lt;span class="m">13107&lt;/span> - &lt;span class="m">16383&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 216fa2035f19dbf88e5e6ab709861ba11b1705de 192.168.1.11:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-3276&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 00bbea618be49cb6ce38b1371b3cf57fea59f557 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>3277-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 980e3f5cbfc7739ded0ed08d60127888d7593e25 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 6637e3135cfa345bc155d39fa07718882e9b5bf8 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 059bda64ea1e49e38ef833ed9e997cffd7dff0c5 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Can I &lt;span class="nb">set&lt;/span> the above configuration? &lt;span class="o">(&lt;/span>&lt;span class="nb">type&lt;/span> &lt;span class="s1">&amp;#39;yes&amp;#39;&lt;/span> to accept&lt;span class="o">)&lt;/span>: yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Nodes configuration updated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Assign a different config epoch to each node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Sending CLUSTER MEET messages to join the cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting &lt;span class="k">for&lt;/span> the cluster to join
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.11:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 216fa2035f19dbf88e5e6ab709861ba11b1705de 192.168.1.11:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-3276&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 00bbea618be49cb6ce38b1371b3cf57fea59f557 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>3277-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 980e3f5cbfc7739ded0ed08d60127888d7593e25 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 059bda64ea1e49e38ef833ed9e997cffd7dff0c5 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 6637e3135cfa345bc155d39fa07718882e9b5bf8 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli -c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; auth 帳號 密碼
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; CLUSTER info
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_state:ok
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_slots_assigned:16384
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_slots_ok:16384
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_slots_pfail:0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_slots_fail:0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_known_nodes:5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_size:5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_current_epoch:5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_my_epoch:1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_stats_messages_ping_sent:85
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_stats_messages_pong_sent:92
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_stats_messages_sent:177
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_stats_messages_ping_received:88
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_stats_messages_pong_received:85
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_stats_messages_meet_received:4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster_stats_messages_received:177
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; CLUSTER NODES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">00bbea618be49cb6ce38b1371b3cf57fea59f557 192.168.1.12:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702735779504&lt;/span> &lt;span class="m">2&lt;/span> connected 3277-6553
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">980e3f5cbfc7739ded0ed08d60127888d7593e25 192.168.1.13:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702735780000&lt;/span> &lt;span class="m">3&lt;/span> connected 6554-9829
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">059bda64ea1e49e38ef833ed9e997cffd7dff0c5 192.168.1.18:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702735778502&lt;/span> &lt;span class="m">5&lt;/span> connected 13107-16383
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">216fa2035f19dbf88e5e6ab709861ba11b1705de 192.168.1.11:6379@16379 myself,master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702735779000&lt;/span> &lt;span class="m">1&lt;/span> connected 0-3276
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6637e3135cfa345bc155d39fa07718882e9b5bf8 192.168.1.14:6379@16379 master - &lt;span class="m">0&lt;/span> &lt;span class="m">1702735780506&lt;/span> &lt;span class="m">4&lt;/span> connected 9830-13106
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="master-cluster集群創建slave加入">master cluster集群創建(slave加入)&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis-cli --user 帳號 --pass 密碼 --cluster add-node --cluster-slave --cluster-master-id 216fa2035f19dbf88e5e6ab709861ba11b1705de 192.168.1.12:6380 192.168.1.11:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis-cli --user 帳號 --pass 密碼 --cluster add-node --cluster-slave --cluster-master-id 00bbea618be49cb6ce38b1371b3cf57fea59f557 192.168.1.13:6380 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis-cli --user 帳號 --pass 密碼 --cluster add-node --cluster-slave --cluster-master-id 980e3f5cbfc7739ded0ed08d60127888d7593e25 192.168.1.11:6380 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis-cli --user 帳號 --pass 密碼 --cluster add-node --cluster-slave --cluster-master-id 6637e3135cfa345bc155d39fa07718882e9b5bf8 192.168.1.18:6380 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis-cli --user 帳號 --pass 密碼 --cluster add-node --cluster-slave --cluster-master-id 059bda64ea1e49e38ef833ed9e997cffd7dff0c5 192.168.1.14:6380 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="檢查集群狀況">檢查集群狀況&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.11:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.11:6379 &lt;span class="o">(&lt;/span>216fa203...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379 &lt;span class="o">(&lt;/span>059bda64...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379 &lt;span class="o">(&lt;/span>00bbea61...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379 &lt;span class="o">(&lt;/span>980e3f5c...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379 &lt;span class="o">(&lt;/span>6637e313...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">0&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0.00 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.11:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 216fa2035f19dbf88e5e6ab709861ba11b1705de 192.168.1.11:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-3276&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 059bda64ea1e49e38ef833ed9e997cffd7dff0c5 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: a6b58413201cc43612df257da40992c0ce6a3510 192.168.1.13:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 00bbea618be49cb6ce38b1371b3cf57fea59f557
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 6076d42c63dfd435f784391f871d101c3d1a7aa5 192.168.1.11:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 980e3f5cbfc7739ded0ed08d60127888d7593e25
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 00bbea618be49cb6ce38b1371b3cf57fea59f557 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>3277-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 980e3f5cbfc7739ded0ed08d60127888d7593e25 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 915d7535fc4ebe9853ad2ee5fb9033b549b5a5cb 192.168.1.18:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 6637e3135cfa345bc155d39fa07718882e9b5bf8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: aed68c3aa851fdcab4d691b02a2a941b39d43ab5 192.168.1.14:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 059bda64ea1e49e38ef833ed9e997cffd7dff0c5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 6637e3135cfa345bc155d39fa07718882e9b5bf8 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 61d58f3e445d8d5398221d22bc358c65a189faf4 192.168.1.12:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 216fa2035f19dbf88e5e6ab709861ba11b1705de
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="load來源dumprdb檔重啟redis服務">Load來源dump.rdb檔，重啟Redis服務&lt;/h2>
&lt;h3 id="第一台redis011921681116379">第一台redis01(192.168.1.11:6379)&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># systemctl restart redis&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># systemctl status redis&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>執行&amp;ndash;cluster fix，&lt;/p>
&lt;p>執行&amp;ndash;cluster check，最後面要沒報錯才OK&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster fix 192.168.1.11:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.11:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.11:6379 &lt;span class="o">(&lt;/span>216fa203...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">435929&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">4096&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379 &lt;span class="o">(&lt;/span>00bbea61...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">2458&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379 &lt;span class="o">(&lt;/span>6637e313...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379 &lt;span class="o">(&lt;/span>980e3f5c...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379 &lt;span class="o">(&lt;/span>059bda64...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">435929&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">26.61 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.11:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 216fa2035f19dbf88e5e6ab709861ba11b1705de 192.168.1.11:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-4095&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">4096&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 61d58f3e445d8d5398221d22bc358c65a189faf4 192.168.1.12:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 216fa2035f19dbf88e5e6ab709861ba11b1705de
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 6076d42c63dfd435f784391f871d101c3d1a7aa5 192.168.1.11:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 980e3f5cbfc7739ded0ed08d60127888d7593e25
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 915d7535fc4ebe9853ad2ee5fb9033b549b5a5cb 192.168.1.18:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 6637e3135cfa345bc155d39fa07718882e9b5bf8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 00bbea618be49cb6ce38b1371b3cf57fea59f557 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>4096-6553&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">2458&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: a6b58413201cc43612df257da40992c0ce6a3510 192.168.1.13:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 00bbea618be49cb6ce38b1371b3cf57fea59f557
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 6637e3135cfa345bc155d39fa07718882e9b5bf8 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 980e3f5cbfc7739ded0ed08d60127888d7593e25 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>6554-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 059bda64ea1e49e38ef833ed9e997cffd7dff0c5 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: aed68c3aa851fdcab4d691b02a2a941b39d43ab5 192.168.1.14:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 059bda64ea1e49e38ef833ed9e997cffd7dff0c5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="第二台redis021921681126379">第二台redis02(192.168.1.12:6379)&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis02 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># systemctl restart redis&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis02 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># systemctl status redis&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>執行&amp;ndash;cluster fix，&lt;/p>
&lt;p>執行&amp;ndash;cluster check，最後面要沒報錯才OK&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster fix 192.168.1.12:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.12:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379 &lt;span class="o">(&lt;/span>00bbea61...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">436657&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">4096&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379 &lt;span class="o">(&lt;/span>6637e313...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379 &lt;span class="o">(&lt;/span>059bda64...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.11:6379 &lt;span class="o">(&lt;/span>216fa203...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">435928&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">4096&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379 &lt;span class="o">(&lt;/span>980e3f5c...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">1638&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">872585&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">53.26 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.12:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 00bbea618be49cb6ce38b1371b3cf57fea59f557 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>4096-8191&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">4096&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 6637e3135cfa345bc155d39fa07718882e9b5bf8 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9830-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 059bda64ea1e49e38ef833ed9e997cffd7dff0c5 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 61d58f3e445d8d5398221d22bc358c65a189faf4 192.168.1.12:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 216fa2035f19dbf88e5e6ab709861ba11b1705de
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 216fa2035f19dbf88e5e6ab709861ba11b1705de 192.168.1.11:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-4095&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">4096&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 980e3f5cbfc7739ded0ed08d60127888d7593e25 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>8192-9829&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">1638&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 6076d42c63dfd435f784391f871d101c3d1a7aa5 192.168.1.11:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 980e3f5cbfc7739ded0ed08d60127888d7593e25
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 915d7535fc4ebe9853ad2ee5fb9033b549b5a5cb 192.168.1.18:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 6637e3135cfa345bc155d39fa07718882e9b5bf8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: a6b58413201cc43612df257da40992c0ce6a3510 192.168.1.13:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 00bbea618be49cb6ce38b1371b3cf57fea59f557
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: aed68c3aa851fdcab4d691b02a2a941b39d43ab5 192.168.1.14:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 059bda64ea1e49e38ef833ed9e997cffd7dff0c5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="第三台redis031921681136379">第三台redis03(192.168.1.13:6379)&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis03 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># systemctl restart redis&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis03 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># systemctl status redis&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>執行&amp;ndash;cluster fix，&lt;/p>
&lt;p>執行&amp;ndash;cluster check，最後面要沒報錯才OK&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster fix 192.168.1.13:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.13:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379 &lt;span class="o">(&lt;/span>980e3f5c...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">436921&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">4096&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379 &lt;span class="o">(&lt;/span>00bbea61...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">436657&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">4096&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.11:6379 &lt;span class="o">(&lt;/span>216fa203...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">435927&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">4096&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379 &lt;span class="o">(&lt;/span>6637e313...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">819&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379 &lt;span class="o">(&lt;/span>059bda64...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3277&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">1309505&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">79.93 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.13:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 980e3f5cbfc7739ded0ed08d60127888d7593e25 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>8192-12287&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">4096&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 915d7535fc4ebe9853ad2ee5fb9033b549b5a5cb 192.168.1.18:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 6637e3135cfa345bc155d39fa07718882e9b5bf8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 6076d42c63dfd435f784391f871d101c3d1a7aa5 192.168.1.11:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 980e3f5cbfc7739ded0ed08d60127888d7593e25
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: aed68c3aa851fdcab4d691b02a2a941b39d43ab5 192.168.1.14:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 059bda64ea1e49e38ef833ed9e997cffd7dff0c5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 61d58f3e445d8d5398221d22bc358c65a189faf4 192.168.1.12:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 216fa2035f19dbf88e5e6ab709861ba11b1705de
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: a6b58413201cc43612df257da40992c0ce6a3510 192.168.1.13:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 00bbea618be49cb6ce38b1371b3cf57fea59f557
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 00bbea618be49cb6ce38b1371b3cf57fea59f557 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>4096-8191&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">4096&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 216fa2035f19dbf88e5e6ab709861ba11b1705de 192.168.1.11:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-4095&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">4096&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 6637e3135cfa345bc155d39fa07718882e9b5bf8 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>12288-13106&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">819&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 059bda64ea1e49e38ef833ed9e997cffd7dff0c5 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13107-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3277&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="第四台redis041921681146379">第四台redis04(192.168.1.14:6379)&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis04 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># systemctl restart redis&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis04 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># systemctl status redis&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>執行&amp;ndash;cluster fix，&lt;/p>
&lt;p>執行&amp;ndash;cluster check，最後面要沒報錯才OK&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster fix 192.168.1.14:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.14:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379 &lt;span class="o">(&lt;/span>6637e313...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">438263&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3280&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.11:6379 &lt;span class="o">(&lt;/span>216fa203...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">435926&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379 &lt;span class="o">(&lt;/span>980e3f5c...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">436921&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379 &lt;span class="o">(&lt;/span>00bbea61...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">436656&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379 &lt;span class="o">(&lt;/span>059bda64...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">0&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">1747766&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">106.68 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.14:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 6637e3135cfa345bc155d39fa07718882e9b5bf8 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-819&lt;span class="o">]&lt;/span>,&lt;span class="o">[&lt;/span>4096-4915&lt;span class="o">]&lt;/span>,&lt;span class="o">[&lt;/span>8192-9011&lt;span class="o">]&lt;/span>,&lt;span class="o">[&lt;/span>12288-13107&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3280&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 216fa2035f19dbf88e5e6ab709861ba11b1705de 192.168.1.11:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>820-4095&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: aed68c3aa851fdcab4d691b02a2a941b39d43ab5 192.168.1.14:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 059bda64ea1e49e38ef833ed9e997cffd7dff0c5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: a6b58413201cc43612df257da40992c0ce6a3510 192.168.1.13:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 00bbea618be49cb6ce38b1371b3cf57fea59f557
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 61d58f3e445d8d5398221d22bc358c65a189faf4 192.168.1.12:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 216fa2035f19dbf88e5e6ab709861ba11b1705de
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 915d7535fc4ebe9853ad2ee5fb9033b549b5a5cb 192.168.1.18:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 6637e3135cfa345bc155d39fa07718882e9b5bf8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 980e3f5cbfc7739ded0ed08d60127888d7593e25 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9012-12287&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 6076d42c63dfd435f784391f871d101c3d1a7aa5 192.168.1.11:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 980e3f5cbfc7739ded0ed08d60127888d7593e25
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 00bbea618be49cb6ce38b1371b3cf57fea59f557 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>4916-8191&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 059bda64ea1e49e38ef833ed9e997cffd7dff0c5 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13108-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="第五台redis051921681186379">第五台redis05(192.168.1.18:6379)&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis05 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># systemctl restart redis&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis05 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># systemctl status redis&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>執行&amp;ndash;cluster fix，&lt;/p>
&lt;p>執行&amp;ndash;cluster check，最後面要沒報錯才OK&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster fix 192.168.1.18:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 --cluster check 192.168.1.18:6379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: Using a password with &lt;span class="s1">&amp;#39;-a&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;-u&amp;#39;&lt;/span> option on the &lt;span class="nb">command&lt;/span> line interface may not be safe.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379 &lt;span class="o">(&lt;/span>059bda64...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">435798&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379 &lt;span class="o">(&lt;/span>6637e313...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">438263&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3280&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379 &lt;span class="o">(&lt;/span>00bbea61...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">436655&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379 &lt;span class="o">(&lt;/span>980e3f5c...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">436921&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.11:6379 &lt;span class="o">(&lt;/span>216fa203...&lt;span class="o">)&lt;/span> -&amp;gt; &lt;span class="m">435926&lt;/span> keys &lt;span class="p">|&lt;/span> &lt;span class="m">3276&lt;/span> slots &lt;span class="p">|&lt;/span> &lt;span class="m">1&lt;/span> slaves.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> &lt;span class="m">2183563&lt;/span> keys in &lt;span class="m">5&lt;/span> masters.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">133.27 keys per slot on average.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Performing Cluster Check &lt;span class="o">(&lt;/span>using node 192.168.1.18:6379&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 059bda64ea1e49e38ef833ed9e997cffd7dff0c5 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>13108-16383&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 6076d42c63dfd435f784391f871d101c3d1a7aa5 192.168.1.11:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 980e3f5cbfc7739ded0ed08d60127888d7593e25
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 6637e3135cfa345bc155d39fa07718882e9b5bf8 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>0-819&lt;span class="o">]&lt;/span>,&lt;span class="o">[&lt;/span>4096-4915&lt;span class="o">]&lt;/span>,&lt;span class="o">[&lt;/span>8192-9011&lt;span class="o">]&lt;/span>,&lt;span class="o">[&lt;/span>12288-13107&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3280&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 915d7535fc4ebe9853ad2ee5fb9033b549b5a5cb 192.168.1.18:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 6637e3135cfa345bc155d39fa07718882e9b5bf8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: 61d58f3e445d8d5398221d22bc358c65a189faf4 192.168.1.12:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 216fa2035f19dbf88e5e6ab709861ba11b1705de
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 00bbea618be49cb6ce38b1371b3cf57fea59f557 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>4916-8191&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 980e3f5cbfc7739ded0ed08d60127888d7593e25 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>9012-12287&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: a6b58413201cc43612df257da40992c0ce6a3510 192.168.1.13:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 00bbea618be49cb6ce38b1371b3cf57fea59f557
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">S: aed68c3aa851fdcab4d691b02a2a941b39d43ab5 192.168.1.14:6380
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots: &lt;span class="o">(&lt;/span>&lt;span class="m">0&lt;/span> slots&lt;span class="o">)&lt;/span> slave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicates 059bda64ea1e49e38ef833ed9e997cffd7dff0c5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">M: 216fa2035f19dbf88e5e6ab709861ba11b1705de 192.168.1.11:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> slots:&lt;span class="o">[&lt;/span>820-4095&lt;span class="o">]&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="m">3276&lt;/span> slots&lt;span class="o">)&lt;/span> master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> additional replica&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All nodes agree about slots configuration.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check &lt;span class="k">for&lt;/span> open slots...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;gt;&amp;gt;&amp;gt; Check slots coverage...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>OK&lt;span class="o">]&lt;/span> All &lt;span class="m">16384&lt;/span> slots covered.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="測試key與value是否正常">測試key與value是否正常&lt;/h2>
&lt;p>藉由type key方式，確認是否有查到key的type，&lt;/p>
&lt;p>並確認是否針對key所在slot的位置，有Redirected過去key所在的主機，&lt;/p>
&lt;p>並查看key是否有取到正確的值。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli --user 帳號 --pass 密碼 -c&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key剛好就在redis01主機上，所以執行直接顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:362C74F290B63E5F751DCF1E49EC34BEAF6822F0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis02主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; &lt;span class="nb">type&lt;/span> DRM01001000347201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>5914&lt;span class="o">]&lt;/span> located at 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis03主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:EBB87CF1F764E6BACCC709323FE1457065B0CC8E
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>10759&lt;span class="o">]&lt;/span> located at 192.168.1.13:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379&amp;gt; SMEMBERS spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:EBB87CF1F764E6BACCC709323FE1457065B0CC8E
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;\xac\xed\x00\x05t\x00&lt;/span>&lt;span class="nv">$aef3b17d&lt;/span>&lt;span class="s2">-ed6f-4c4e-9cc3-ef69eda6f33c&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis04主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13:6379&amp;gt; &lt;span class="nb">type&lt;/span> TON01001010231201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>12921&lt;span class="o">]&lt;/span> located at 192.168.1.14:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379&amp;gt; hgetall TON01001010231201
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;path&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;/reader/book_content_unpack/teb/2022/10/17/TON01001010231201/TON01001010231201&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;iv&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;06ac4696c8a4bb94ecb7e82b38a1dc3f&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;key&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">6&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;36971e857d647324cb59e1cdf58d7071&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看key type，此key在redis05主機上，會Redirected到此key所在slot主機上，再顯示type&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14:6379&amp;gt; &lt;span class="nb">type&lt;/span> spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:25E30A2AB63FE661B9AE7803EAD9A9AC234097FC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>16326&lt;span class="o">]&lt;/span> located at 192.168.1.18:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379&amp;gt; SMEMBERS spring:session:index:org.springframework.session.FindByIndexNameSessionRepository.PRINCIPAL_NAME_INDEX_NAME:25E30A2AB63FE661B9AE7803EAD9A9AC234097FC
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;\xac\xed\x00\x05t\x00&lt;/span>&lt;span class="nv">$f0d82ce3&lt;/span>&lt;span class="s2">-28e3-493c-b992-439565cf987e&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.18:6379&amp;gt; &lt;span class="nb">type&lt;/span> BOOK_CASE_LIST_U_39048951
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-&amp;gt; Redirected to slot &lt;span class="o">[&lt;/span>5895&lt;span class="o">]&lt;/span> located at 192.168.1.12:6379
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">hash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12:6379&amp;gt; hgetall BOOK_CASE_LIST_U_39048951
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;0_5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2&lt;span class="o">)&lt;/span> &lt;span class="s2">&amp;#34;{\&amp;#34;result\&amp;#34;:\&amp;#34;00\&amp;#34;,\&amp;#34;syncTime\&amp;#34;:\&amp;#34;20231202164546\&amp;#34;,\&amp;#34;ebooks\&amp;#34;:[{\&amp;#34;deliverId\&amp;#34;:\&amp;#34;SON03001000560201\&amp;#34;,\&amp;#34;contentId\&amp;#34;:\&amp;#34;SON03001000560\&amp;#34;,\&amp;#34;title\&amp;#34;:\&amp;#34;\xe6\x8a\x95\xe8\xb3\x875\xe5\xb9\xb4\xef\xbc\x8c\xe6\x9c\xac\xe9\x87\x91\xe5\xbe\x9e4\xe8\x90\xac\xe5\x88\xb01\xe5\x84\x84\xe7\x9a\x84\xe5\xa5\xb3\xe4\xba\xba\xef\xbc\x9a\xe5\xbe\x9e\xe7\x9c\x81\xe9\x8c\xa2\xe3\x80\x81\xe5\xae\x9a\xe5\xad\x98\xe5\x88\xb0\xe8\x82\xa1\xe7\xa5\xa8\xef\xbc\x8c\xe5\xb0\x88\xe5\xb1\xac\xe5\xb0\x8f\xe8\xb3\x87\xe5\xa5\xb3\xe7\x9a\x84\xe8\xb3\xaa\xe6\x84\x9f\xe7\x90\x86\xe8\xb2\xa1\xe6\x8f\x90\xe6\xa1\x88\&amp;#34;,\&amp;#34;publisher\&amp;#34;:\&amp;#34;\xe5\xb4\xa7\xe7\x87\x81\xe6\x96\x87\xe5\x8c\x96\&amp;#34;,\&amp;#34;author\&amp;#34;:\&amp;#34;\xe6\xb7\x98\xe6\xb7\x98\&amp;#34;,\&amp;#34;bodyTypeCode\&amp;#34;:\&amp;#34;201\&amp;#34;,\&amp;#34;ebookType\&amp;#34;:\&amp;#34;\xe6\x9b\xb8\xe7\xb1\x8d\&amp;#34;,\&amp;#34;categories\&amp;#34;:[\&amp;#34;\xe9\x87\x91\xe8\x9e\x8d\xe7\x90\x86\xe8\xb2\xa1\&amp;#34;],
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="redis工作目錄檔案">redis工作目錄檔案&lt;/h2>
&lt;p>dump.rdb：是來源的檔案，覆蓋成dump6379.rdb，讓redis 6379 PORT使用這個檔案恢復數據&lt;/p>
&lt;p>dump6380.rdb：是redis 6380 PORT使用的rdb檔&lt;/p>
&lt;p>nodes-6379.conf：是redis 6379 PORT Cluster建置後產生的node資訊檔&lt;/p>
&lt;p>nodes-6380.conf：是redis 6380 PORT Cluster建置後產生的node資訊檔&lt;/p>
&lt;p>redis6380.conf：是redis 6380 PORT Cluster的設定檔&lt;/p>
&lt;p>redis.conf：是redis 6379 PORT Cluster的設定檔&lt;/p>
&lt;p>users.acl：是redis 6379、6380 PORT共用的acl檔&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd /usr/local/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">1443640&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">553867150&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 dump6379.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">580550225&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 dump6380.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">343630318&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:27 dump.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1333&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 nodes-6379.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1333&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 nodes-6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 21:59 redis6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 21:59 redis.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1041&lt;/span> 12月 &lt;span class="m">16&lt;/span> 21:59 users.acl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis02 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd /usr/local/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis02 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">1444340&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">576136538&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 dump6379.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">553867150&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 dump6380.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">348759548&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:34 dump.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1334&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 nodes-6379.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1334&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:28 nodes-6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 redis6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 redis.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1041&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 users.acl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis03 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd /usr/local/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis03 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">1471548&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">580550225&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 dump6379.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">576136538&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 dump6380.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">349938872&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:38 dump.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1333&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 nodes-6379.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1333&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 nodes-6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 redis6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 redis.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1041&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 users.acl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis04 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd /usr/local/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis04 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">1679456&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">738751856&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 dump6379.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">578286056&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 dump6380.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">402484559&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:41 dump.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1335&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:28 nodes-6379.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1334&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:28 nodes-6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 redis6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 redis.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1041&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 users.acl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis05 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd /usr/local/redis/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis05 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">1634176&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">578286056&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 dump6379.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">738751856&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:27 dump6380.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">356118026&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:44 dump.rdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1335&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:28 nodes-6379.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1334&lt;/span> 12月 &lt;span class="m">16&lt;/span> 23:28 nodes-6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 redis6380.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">109501&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 redis.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> redis redis &lt;span class="m">1041&lt;/span> 12月 &lt;span class="m">16&lt;/span> 22:00 users.acl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Day08 - 字典相關操作、元組相關操作、集合相關操作、字節編碼理論、字節編碼實操</title><link>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day08/</link><pubDate>Sat, 16 Dec 2023 16:00:32 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day08/</guid><description>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day08/day08-mindmap.png"
width="2293"
height="1220"
srcset="https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day08/day08-mindmap_huf615278891714dbce6b39450b8b59c80_303663_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day08/day08-mindmap_huf615278891714dbce6b39450b8b59c80_303663_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="187"
data-flex-basis="451px"
>&lt;/p>
&lt;h3 id="字典相關操作">字典相關操作&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">類型轉換&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">dict&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">字典的轉換一般不使用關鍵字&lt;/span> &lt;span class="n">而是自己動手轉&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">dict&lt;/span>&lt;span class="p">([(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;pwd&amp;#39;&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;123&amp;#39;&lt;/span>&lt;span class="p">)]))&lt;/span> &lt;span class="c1"># {&amp;#39;name&amp;#39;: &amp;#39;pwd&amp;#39;, &amp;#39;jimmy&amp;#39;: &amp;#39;123&amp;#39;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">字典必須要掌握的操作&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_dict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;hobby&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;read&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;music&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;run&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">按k取值&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">不推薦使用&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;phone&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># k不存在會直接報錯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">按內建方法get取值&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">推薦使用&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;age&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;沒有喲 嘿嘿嘿&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># jimmy 鍵存在的情況下獲取對應的值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;phone&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;沒有喲 嘿嘿嘿&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># 鍵不存在默認返回None 可以通過第二個參數自訂&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">修改值數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">id&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span> &lt;span class="c1"># 鍵存在則修改對應的值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">id&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">4.&lt;/span>&lt;span class="n">新增鍵值對&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;age&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">18&lt;/span> &lt;span class="c1"># 鍵不存在則新增鍵值對&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">5.&lt;/span>&lt;span class="n">刪除數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">del&lt;/span> &lt;span class="n">user_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># {&amp;#39;password&amp;#39;: 123, &amp;#39;hobby&amp;#39;: [&amp;#39;read&amp;#39;, &amp;#39;music&amp;#39;, &amp;#39;run&amp;#39;]}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># {&amp;#39;username&amp;#39;: &amp;#39;jimmy&amp;#39;, &amp;#39;hobby&amp;#39;: [&amp;#39;read&amp;#39;, &amp;#39;music&amp;#39;, &amp;#39;run&amp;#39;]}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">6.&lt;/span>&lt;span class="n">統計字典中鍵值對的個數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># 3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">7.&lt;/span>&lt;span class="n">字典三劍客&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">keys&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1"># 一次性獲取字典所有的鍵 dict_keys([&amp;#39;username&amp;#39;, &amp;#39;password&amp;#39;, &amp;#39;hobby&amp;#39;])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1"># 一次性獲取字典所有的值 dict_values([&amp;#39;jimmy&amp;#39;, 123, [&amp;#39;read&amp;#39;, &amp;#39;music&amp;#39;, &amp;#39;run&amp;#39;]])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">items&lt;/span>&lt;span class="p">())&lt;/span> &lt;span class="c1"># 一次性獲取字典的鍵值對數據 dict_items([(&amp;#39;username&amp;#39;, &amp;#39;jimmy&amp;#39;), (&amp;#39;password&amp;#39;, 123), (&amp;#39;hobby&amp;#39;, [&amp;#39;read&amp;#39;, &amp;#39;music&amp;#39;, &amp;#39;run&amp;#39;])])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">items&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">k&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">k&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">v&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">8.&lt;/span>&lt;span class="n">補充說明&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fromkeys&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;pwd&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;hobby&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># 快速生成值相同的字典 # {&amp;#39;name&amp;#39;: 123, &amp;#39;pwd&amp;#39;: 123, &amp;#39;hobby&amp;#39;: 123}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">fromkeys&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;pwd&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;hobby&amp;#39;&lt;/span>&lt;span class="p">],&lt;/span> &lt;span class="p">[])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># {&amp;#39;name&amp;#39;: [], &amp;#39;pwd&amp;#39;: [], &amp;#39;hobby&amp;#39;: []}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;pwd&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">123&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;hobby&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;study&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># {&amp;#39;name&amp;#39;: [&amp;#39;jimmy&amp;#39;, 123, &amp;#39;study&amp;#39;], &amp;#39;pwd&amp;#39;: [&amp;#39;jimmy&amp;#39;, 123, &amp;#39;study&amp;#39;], &amp;#39;hobby&amp;#39;: [&amp;#39;jimmy&amp;#39;, 123, &amp;#39;study&amp;#39;]}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;當第二個公共值是可變類型的時候 一定要注意 通過任何一個鍵修改都會影響所有&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">setdefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 鍵存在則不修改 結果是鍵對應的值 # {&amp;#39;username&amp;#39;: &amp;#39;jimmy&amp;#39;, &amp;#39;password&amp;#39;: 123, &amp;#39;hobby&amp;#39;: [&amp;#39;read&amp;#39;, &amp;#39;music&amp;#39;, &amp;#39;run&amp;#39;]} jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">setdefault&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;age&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">123&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">res&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 存不存在則新增鍵值對 結果是新增的值 # {&amp;#39;username&amp;#39;: &amp;#39;jimmy&amp;#39;, &amp;#39;password&amp;#39;: 123, &amp;#39;hobby&amp;#39;: [&amp;#39;read&amp;#39;, &amp;#39;music&amp;#39;, &amp;#39;run&amp;#39;], &amp;#39;age&amp;#39;: 123} 123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">popitem&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1"># 彈出鍵值對 後進先出&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="元組相關操作">元組相關操作&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">類型轉換&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">tuple&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">支持for循環的數據類型都可以轉成元組&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">元組必須掌握的方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">44&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">55&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">66&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">索引取值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">切片操作&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">間隔&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">方向&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">4.&lt;/span>&lt;span class="n">統計元組內數據值的個數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># 6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">5.&lt;/span>&lt;span class="n">統計元組內某個數據值出現的次數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">count&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">6.&lt;/span>&lt;span class="n">統計元組內指定數據值的索引值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">index&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">22&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">7.&lt;/span>&lt;span class="n">元組內如果只有一個數據值那麼逗號不能少&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">8.&lt;/span>&lt;span class="n">元組內索引綁定的記憶體地址不能被修改&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">注意區分&lt;/span> &lt;span class="n">可變與不可變&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">9.&lt;/span>&lt;span class="n">元組不能新增或刪除數據&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="集合相關操作">集合相關操作&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">類型轉換&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">set&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">集合內數據必須是不可變類型&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">整型&lt;/span> &lt;span class="n">浮點型&lt;/span> &lt;span class="n">字串&lt;/span> &lt;span class="n">元組&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">集合內數據也是無序的&lt;/span> &lt;span class="n">沒有索引的概念&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">集合需要掌握的方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">去重&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">關係運算&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">只有遇到上述兩種需求的時候才應該考慮使用集合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">去重&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">222&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># {33, 11, 222, 22}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># [33, 11, 22]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;集合的去重無法保留原先數據的排列順序&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">關係運算&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">群體之間做差異化校驗&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">eg&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">兩個微信帳戶之間&lt;/span> &lt;span class="n">有不同的好友&lt;/span> &lt;span class="n">有相同的好友&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;jerry&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;oscar&amp;#39;&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="c1"># 用戶1的好友列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">f2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;jack&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;tom&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">}&lt;/span> &lt;span class="c1"># 用戶2的好友列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">求兩個人的共同好友&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f1&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">f2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># {&amp;#39;jimmy&amp;#39;, &amp;#39;tony&amp;#39;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">求用戶1獨有的好友&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f1&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">f2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># {&amp;#39;jerry&amp;#39;, &amp;#39;oscar&amp;#39;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">求兩個人所有的好友&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f1&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">f2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># {&amp;#39;jimmy&amp;#39;, &amp;#39;jack&amp;#39;, &amp;#39;tom&amp;#39;, &amp;#39;tony&amp;#39;, &amp;#39;oscar&amp;#39;, &amp;#39;jerry&amp;#39;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">4.&lt;/span>&lt;span class="n">求兩個人各自獨有的好友&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f1&lt;/span> &lt;span class="o">^&lt;/span> &lt;span class="n">f2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># {&amp;#39;oscar&amp;#39;, &amp;#39;tom&amp;#39;, &amp;#39;jack&amp;#39;, &amp;#39;jerry&amp;#39;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">5.&lt;/span>&lt;span class="n">父集&lt;/span> &lt;span class="n">子集&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f1&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">f2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># False # f1 是否都包含 f2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">f1&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">f2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># False # f2 是否都包含 f1&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="字節編碼理論">字節編碼理論&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">該知識點理論特別多&lt;/span> &lt;span class="n">但是結論很少&lt;/span> &lt;span class="n">代碼使用也很短&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">字符編碼只針對文本數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">回憶計算機內部儲存數據的本質&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">既然計算機內部只認識01&lt;/span> &lt;span class="n">為什麼我們卻可以敲出人類各式各樣的字節&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">肯定存在一個數字跟字符的對應關係&lt;/span> &lt;span class="n">儲存該關係的地方稱為&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">字符編碼本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">字符編碼發展史&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">4.1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">一家獨大&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">計算機是由美國人發明的&lt;/span> &lt;span class="n">為了能夠讓計算機識別英文&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">需要發明一個數字跟英文字母的對應關係&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ASCII碼&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">記錄了英文字母跟數字的對應關係&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">用8bit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="n">位元組&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">來表示一個英文字符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">4.2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">群雄割據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">中國人&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">GBK碼&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">記錄了英文&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">中文與數字的對應關係&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">用至少16bit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="n">位元組&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">來表示一個中文字符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">很多生僻字還需要使用更多的位元組&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">英文還是用8bit&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="n">位元組&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">來表示&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">日本人&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">shift_JIS碼&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">記錄了英文&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">日文與數字的對應關係&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">韓國人&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Euc_kr碼&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">記錄了英文&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">韓文與數字的對應關係&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 每個國家的計算機使用的都是自己訂製的編碼本
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 不同國家的文本數據無法直接交互 會出現&amp;#34;亂碼&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">4.3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">天下一統&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">unicode萬國碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">相容所有國家語言字節&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">起步就是兩個位元組來表示字節&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">utf系列&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">utf8&lt;/span> &lt;span class="n">utf16&lt;/span> &lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">專門用於最佳化unocide儲存問題&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">英文還是採用一個位元組&lt;/span> &lt;span class="n">中文三個位元組&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="字節編碼實操">字節編碼實操&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">針對亂碼不要慌&lt;/span> &lt;span class="n">切換編碼慢慢試即可&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">編碼與解碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">編碼&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">將人類的字符按照指定的編碼編碼成計算機能夠讀懂的數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">字串&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">encode&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">info&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;假日是用來充實自己 不是用來偷懶的&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">info&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">encode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;utf8&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">info&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">encode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;utf8&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">解碼&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">將計算機能夠讀懂的數據按照指定的編碼解碼成人能夠讀懂&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">bytes類型數據&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">decode&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">decode&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;utf8&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">python2與python3差異&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python2預設的編碼是ASCII&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">文件頭&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># encoding:utf8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># -*- encoding:utf8 -*- =&amp;gt;沒有什麼特別，只是比較好看而已&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">字符串前面加u&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sa">u&lt;/span>&lt;span class="s1">&amp;#39;你好啊&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python3預設的編碼是utf系列&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">unicode&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="作業">作業&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">最佳化員工管理系統&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">拔高&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">是否可以換成字典或者數據的嵌套使用完成更加完善的員工管理而不是簡簡單單的一個使用者名稱&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">能寫就寫不會沒有關係&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">員工的資訊有&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">使用者名稱&lt;/span> &lt;span class="n">年齡&lt;/span> &lt;span class="n">崗位&lt;/span> &lt;span class="n">薪資&lt;/span>&lt;span class="o">...&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">員工管理系統&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">註冊&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">查看&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">單個員工&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">所有員工&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">修改薪資&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">刪除員工&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">去重下列列表並保留數據值原來的順序&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">eg&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="n">去重之後&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">有如下兩個集合&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">pythons是報名python課程的學員名字集合&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">linuxs是報名linux課程的學員名字集合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">　　&lt;span class="n">pythons&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;oscar&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;ricky&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;gangdan&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;biubiu&amp;#39;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">　　&lt;span class="n">linuxs&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;kermit&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;gangdan&amp;#39;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">　　&lt;span class="mf">1.&lt;/span> &lt;span class="n">求出即報名python又報名linux課程的學員名字集合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">　　&lt;span class="mf">2.&lt;/span> &lt;span class="n">求出所有報名的學生名字集合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">　　&lt;span class="mf">3.&lt;/span> &lt;span class="n">求出只報名python課程的學員名字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">　　&lt;span class="mf">4.&lt;/span> &lt;span class="n">求出沒有同時這兩門課程的學員名字集合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">統計列表中每個數據值出現的次數並組織成字典戰士&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">eg&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;oscar&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">結果&lt;/span>&lt;span class="p">:{&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;oscar&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">真實數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;oscar&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1.最佳化員工管理系統&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># STEP2.定義一個儲存所有員工資訊的字典&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">user_data_dict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span> &lt;span class="c1"># {&amp;#39;編號&amp;#39;:用戶字典, &amp;#39;編號&amp;#39;:用戶字典}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">數據儲存的方式1(有點欠缺，沒有辦法很精確判斷值代表什麼)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">{
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;jimmy&amp;#39;:[18, &amp;#39;teacher&amp;#39;, 10],
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;kevin&amp;#39;:[28, &amp;#39;sale&amp;#39;, 90]
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">數據儲存的方式2(還可以，但是如果key，同時為jimmy的時候，就不能用了)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">{
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;jimmy&amp;#39;:{&amp;#39;age&amp;#39;:18, &amp;#39;job&amp;#39;:&amp;#39;teacher&amp;#39;, &amp;#39;salary&amp;#39;:8000},
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;kevin&amp;#39;:{&amp;#39;age&amp;#39;:28, &amp;#39;job&amp;#39;:&amp;#39;sale&amp;#39;, &amp;#39;salary&amp;#39;:9000}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">數據儲存的方式3(用編號做字典的鍵，兼容性最好)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">{
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;1&amp;#39;:{&amp;#39;name&amp;#39;:&amp;#39;jimmy&amp;#39;,&amp;#39;age&amp;#39;:18, &amp;#39;job&amp;#39;:&amp;#39;teacher&amp;#39;, &amp;#39;salary&amp;#39;:8000},
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;2&amp;#39;:{&amp;#39;name&amp;#39;:&amp;#39;kevin&amp;#39;,&amp;#39;age&amp;#39;:28, &amp;#39;job&amp;#39;:&amp;#39;sale&amp;#39;, &amp;#39;salary&amp;#39;:9000},
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;3&amp;#39;:{&amp;#39;name&amp;#39;:&amp;#39;jimmy&amp;#39;,&amp;#39;age&amp;#39;:18, &amp;#39;job&amp;#39;:&amp;#39;teacher&amp;#39;, &amp;#39;salary&amp;#39;:8000},
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># STEP1.先搭建系統骨架&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 1.創建員工資訊
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 2.查看單個員工
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 3.查看所有員工
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 4.修改員工薪資
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 5.刪除員工資訊
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">choice&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請選擇您想要執行的功能編號&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">choice&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.獲取員工編號&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">emp_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入該員工的員工編號(q)&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">emp_id&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;q&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 判斷編號是否是純數字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">emp_id&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isdigit&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;員工編號必須是純數字&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.判斷員工編號是否已存在&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">emp_id&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">user_data_dict&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;員工編號已存在 請重新輸入&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3.獲取員工詳細資訊&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入員工姓名&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入員工年齡&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">job&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入員工崗位&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">salary&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入員工薪資&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 4.構建一個臨時的小字典&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp_dict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 5.添加員工資訊鍵值對&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;emp_id&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">emp_id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">username&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;age&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">age&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;job&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">job&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">temp_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;salary&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">salary&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 6.添加到大字典中&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_data_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">emp_id&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">temp_dict&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s1">&amp;#39;員工&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1">添加成功&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">choice&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;2&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.先獲取員工編號&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">target_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入您想要查看的員工編號(q)&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">target_id&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;q&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.判斷員工編號是否不存在&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">target_id&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">user_data_dict&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;員工編號不存在 無法查看&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3.根據員工編號獲取員工字典數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_dict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">user_data_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">target_id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 4.格式化輸出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> --------------info of emp-------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 編號:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;emp_id&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 姓名:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 年齡:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;age&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 崗位:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;job&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 薪資:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;salary&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> --------------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">choice&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;3&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">user_dict&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">user_data_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">values&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> --------------info of emp-------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 編號:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;emp_id&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 姓名:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 年齡:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;age&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 崗位:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;job&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 薪資:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">user_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;salary&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> --------------------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">choice&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;4&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.先獲取想要修改的員工編號&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">target_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入您想要修改的員工編號(q)&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">target_id&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;q&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">target_id&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">user_data_dict&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;員工編號不存在&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.獲取新的薪資&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">new_salary&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入該員工的新薪資待遇&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="n">new_salary&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">isdigit&lt;/span>&lt;span class="p">():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;薪資只能是純數字&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3.獲取員工字典&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_dict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">user_data_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">target_id&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># {&amp;#39;salary&amp;#39;:123}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 4.修改字典中的薪資&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;salary&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">new_salary&lt;/span> &lt;span class="c1"># {&amp;#39;salary&amp;#39;: 321}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 5.修改大字典&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_data_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">target_id&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">user_dict&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">user_data_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">get&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">target_id&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">choice&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;5&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.先獲取想要修改的員工編號&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">target_id&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入您想要刪除的員工編號(q)&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">target_id&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;q&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">target_id&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">user_data_dict&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;員工編號不存在&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.字典刪除鍵值對&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_data_dict&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">pop&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">target_id&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;抱歉 暫無該功能編號!!!&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2.去重下列列表並保留數據值原來的順序&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># eg: [1,2,3,2,1] 去重之後 [1,2,3]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 不考慮順序的情況下 去重&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">s1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">set&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">l2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 考慮順序&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">new_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">l1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">new_list&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">new_list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">new_list&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3.有如下兩個集合，pythons是報名python課程的學員名字集合，linuxs是報名linux課程的學員名字集合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 　　pythons={&amp;#39;jimmy&amp;#39;,&amp;#39;oscar&amp;#39;,&amp;#39;kevin&amp;#39;,&amp;#39;ricky&amp;#39;,&amp;#39;gangdan&amp;#39;,&amp;#39;biubiu&amp;#39;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 　　linuxs={&amp;#39;kermit&amp;#39;,&amp;#39;tony&amp;#39;,&amp;#39;gangdan&amp;#39;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 　　1. 求出即報名python又報名linux課程的學員名字集合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 　　2. 求出所有報名的學生名字集合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 　　3. 求出只報名python課程的學員名字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 　　4. 求出沒有同時這兩門課程的學員名字集合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">pythons&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;oscar&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;ricky&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;gangdan&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;biubiu&amp;#39;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">linuxs&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;kermit&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;gangdan&amp;#39;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pythons&lt;/span> &lt;span class="o">&amp;amp;&lt;/span> &lt;span class="n">linuxs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pythons&lt;/span> &lt;span class="o">|&lt;/span> &lt;span class="n">linuxs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pythons&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">linuxs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">pythons&lt;/span> &lt;span class="o">^&lt;/span> &lt;span class="n">linuxs&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4.統計列表中每個數據值出現的次數並組織成字典展示&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># eg: l1 = [&amp;#39;jimmy&amp;#39;,&amp;#39;jimmy&amp;#39;,&amp;#39;kevin&amp;#39;,&amp;#39;oscar&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 結果:{&amp;#39;jimmy&amp;#39;:2,&amp;#39;kevin&amp;#39;:1,&amp;#39;oscar&amp;#39;:1}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 真實數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;oscar&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1.先定義結果集空字典&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">data_dict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2.循環列表中每一個數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">l1&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1"># &amp;#39;jimmy&amp;#39; &amp;#39;kevin&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3.判斷當前數據值是否在字典的k中&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="ow">not&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">data_dict&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1"># {&amp;#39;jimmy&amp;#39;:1}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># data_dict[name] = data_dict.get(name) + 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data_dict&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Day07 - 數據類型內建方法、整型內建方法、浮點型內建方法、字串內建方法、列表內建方法、可變類型與不可變類型</title><link>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day07/</link><pubDate>Sat, 09 Dec 2023 08:13:05 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day07/</guid><description>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day07/Day07-mindmap.png"
width="1703"
height="1204"
srcset="https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day07/Day07-mindmap_hu4b496845d71f03aeeab7906e2ccacada_258291_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day07/Day07-mindmap_hu4b496845d71f03aeeab7906e2ccacada_258291_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="339px"
>&lt;/p>
&lt;h3 id="數據類型內建方法理論">數據類型內建方法理論&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">我們之前所學習的每一種數據類型本身都含有一系列的操作方法&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">內建方法是其中最多的&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">自帶的功能&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">在python中數據類型調用內建方法的統一句式為&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">句點符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">字串內建方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">綁定字串的變數名&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">字串內建方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">str&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">字串內建方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">11.11&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">11.57&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;11&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;11.11&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 字符串中必須是純數字才可以轉 報錯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">數據類型的內建方法比較的多&lt;/span> &lt;span class="n">我們如果想要掌握&lt;/span> &lt;span class="n">不要光靠死記硬背&lt;/span> &lt;span class="n">更多時候靠的是熟能生巧&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="整型內建方法與操作">整型內建方法與操作&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">類型轉換&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">將其他數據類型轉換成整型&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">其他數據類型&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">浮點型可以直接轉&lt;/span> &lt;span class="n">字串必須滿足內部是純數字才可以&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">進位制數轉換&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">十進位制轉其他進位制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">bin&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># 0b1100100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">oct&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># 0o144&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">hex&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># 0x64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> 數字的開頭如果是0b則為二進位制 0o則為八進位制 0x則為十六進位制
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">其他進位制轉十進位制&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mb">0b1100100&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mo">0o144&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mh">0x64&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;0b1100100&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;0o144&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;0x64&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">python自身對數字的敏感度較低&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">精確度低&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python這門語言其實真的一點都不厲害&lt;/span> &lt;span class="n">主要是因為它背後有太多大佬&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">如果需要進準的計算需要借助於模組numpy&lt;/span>&lt;span class="o">.....&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">10.5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">2.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s1&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="n">s2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 22.05 這還算精確&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mf">1.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s1&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="n">s2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 0.10000000000000009&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="浮點型內建方法與操作">浮點型內建方法與操作&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">類型轉換&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">float&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">其他數據類型&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">字串裡面可以允許出現一個小數點&lt;/span> &lt;span class="n">其他都必須是純數字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">float&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 11.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">float&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;11&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 11.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">float&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;11.11&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 11.0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">float&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;1.1.1.1&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 不行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">float&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;abc&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 不行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">python自身對數字的敏感度較低&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">精確度低&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python這門語言其實真的一點都不厲害&lt;/span> &lt;span class="n">主要是因為它背後有太多大佬&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">如果需要進準的計算需要借助於模組numpy&lt;/span>&lt;span class="o">.....&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="字串內建方法與操作">字串內建方法與操作&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">類型轉換&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">其他數據類型&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">可以轉任意數據類型&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">只需要在前後加引號即可&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># 11 &amp;lt;class &amp;#39;str&amp;#39;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">res1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mf">11.11&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res1&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># 11.11 &amp;lt;class &amp;#39;str&amp;#39;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">res2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;hello&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res2&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># hello &amp;lt;class &amp;#39;str&amp;#39;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">res3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">([&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res3&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># [1, 2, 3, 4] &amp;lt;class &amp;#39;str&amp;#39;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">res4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res4&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># {&amp;#39;name&amp;#39;: &amp;#39;jimmy&amp;#39;} &amp;lt;class &amp;#39;str&amp;#39;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">res5&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res5&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># (1, 2, 3, 4, 5) &amp;lt;class &amp;#39;str&amp;#39;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">res6&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res6&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># {1, 2, 3, 4, 5} &amp;lt;class &amp;#39;str&amp;#39;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">res7&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">str&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res7&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># True &amp;lt;class &amp;#39;str&amp;#39;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">必須要掌握的方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># s1 = &amp;#39;helloworld&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1.索引取值(起始位置0開始 超出範圍直接報錯)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[0]) # h&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[-1]) # d 支持負數 從末尾開始&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2.切片操作&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[1:5]) # 顧頭不顧尾 從索引1一直切取到索引4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[-1:-5]) # 預設的順序是從左往右，無值取出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[-5:-1]) # 預設的順序是從左往右&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3.修改切片方向(間隔)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[1:5:1]) # 預設是1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[1:5:2]) # 預設是1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[-1:-5:-1]) # 從右到左，間隔1，dlro&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[:]) # 不寫數字就預設都要&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[2:]) # 從索引2開始往後都要&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[:5]) # 從索引0開始往後要到4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1[::2]) # 每個都要，間隔2，hlool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4.統計字串中字元的個數(空格也算長度)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(len(s1)) # 10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5.移除字串首尾指定的字元&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># username = input(&amp;#39;username&amp;gt;&amp;gt;&amp;gt;:&amp;#39;).strip()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># # username = username.strip()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># if username == &amp;#39;jimmy&amp;#39;:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;登錄成功&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39; jimmy &amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(len(res)) # 9&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(len(res.strip())) # 括號內不寫 默認移除首尾的空格 # 5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res1 = &amp;#39;$$jimmy$$&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res1.strip(&amp;#39;$&amp;#39;)) # jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res1.lstrip(&amp;#39;$&amp;#39;)) # jimmy$$&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res1.rstrip(&amp;#39;$&amp;#39;)) # $$jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res1 = &amp;#39;$$jim$my$$&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res1.strip(&amp;#39;$&amp;#39;)) # jim$my&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 6.切割字串中指定的字元&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;jimmy|123|read&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.split(&amp;#39;|&amp;#39;)) # [&amp;#39;jimmy&amp;#39;, &amp;#39;123&amp;#39;, &amp;#39;read&amp;#39;] 該方法的處理結果是一個列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># name, pwd, hobby = res.split(&amp;#39;|&amp;#39;) # 解壓賦值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(name, pwd, hobby) # jimmy 123 read&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.split(&amp;#39;|&amp;#39;, maxsplit=1)) # [&amp;#39;jimmy&amp;#39;, &amp;#39;123|read&amp;#39;] 從左往右切指定個數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.rsplit(&amp;#39;|&amp;#39;,maxsplit=1)) # [&amp;#39;jimmy|123&amp;#39;, &amp;#39;read&amp;#39;] 從右往左切指定個數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 7.字串格式化輸出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># format玩法1:等價於占位符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;my name is {} my age is {}&amp;#39;.format(&amp;#39;jimmy&amp;#39;, 123)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res) # my name is jimmy my age is 123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># format玩法2:索引取值並支持反覆使用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;my name is {0} my age is {1} {0} {0} {1}&amp;#39;.format(&amp;#39;jimmy&amp;#39;, 123)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res) # my name is jimmy my age is 123 jimmy jimmy 123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># format玩法3:占位符見名知意(關鍵字傳參)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;my name is {name1} my age is {age1} {name1} {age1} {name1} &amp;#39;.format(name1=&amp;#39;jimmy&amp;#39;, age1=123)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res) # my name is jimmy my age is 123 jimmy 123 jimmy &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># format玩法4:推薦使用(******)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;age&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s1">&amp;#39;my name is &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1"> my age is &lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">age&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">res&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># username&amp;gt;&amp;gt;&amp;gt;:jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># age&amp;gt;&amp;gt;&amp;gt;:33&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># my name is jimmy my age is 33&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">字串需要了解的方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1.大小寫相關&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;hElLO WorlD 666&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.upper()) # HELLO WORLD 666&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.lower()) # hello world 666&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;圖片驗證碼:生成沒有大小寫統一的驗證碼 展示給用戶看
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">獲取用戶輸入的驗證碼 將用戶輸入的驗證碼和當初產生的驗證碼統一轉大寫或者小寫再比對
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># code = &amp;#39;8Ja6Cc&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;展示給用戶看的圖片驗證碼&amp;#39;, code)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># confirm_code = input(&amp;#39;請輸入驗證碼&amp;#39;).strip()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># if confirm_code.upper() == code.upper():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;驗證碼正確&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 展示給用戶看的圖片驗證碼 8Ja6Cc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 請輸入驗證碼8ja6cc&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 驗證碼正確&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;hello world&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.isupper()) # 判斷字串是否是純大寫 False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.islower()) # 判斷字串是否是純小寫 True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2.判斷字串中是否是純數字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;jimmy&amp;#39; # False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;123&amp;#39; # True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;&amp;#39; # False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.isdigit())&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># guess_age = input(&amp;#39;guess_age&amp;gt;&amp;gt;&amp;gt;:&amp;#39;).strip()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># if guess_age.isdigit():&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># guess_age = int(guess_age)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># else:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;年齡都不知道怎麼輸嗎???&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># guess_age &amp;gt;&amp;gt; &amp;gt;: a&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 年齡都不知道怎麼輸嗎???&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># guess_age&amp;gt;&amp;gt;&amp;gt;:123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3.替換字串中指定的內容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;my name is jimmy jimmy jimmy jimmy jimmy&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.replace(&amp;#39;jimmy&amp;#39;, &amp;#39;tonySB&amp;#39;)) # my name is tonySB tonySB tonySB tonySB tonySB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.replace(&amp;#39;jimmy&amp;#39;, &amp;#39;tonySB&amp;#39;, 1)) # my name is tonySB jimmy jimmy jimmy jimmy 從左往右替換指定個數內容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4.字串的拼接&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ss1 = &amp;#39;hello&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ss2 = &amp;#39;world&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(ss1 + &amp;#39;$$$&amp;#39; + ss2) # hello$$$world&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(ss1 * 10) # hellohellohellohellohellohellohellohellohellohello&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;|&amp;#39;.join([&amp;#39;jimmy&amp;#39;, &amp;#39;123&amp;#39;, &amp;#39;read&amp;#39;, &amp;#39;JDB&amp;#39;])) # jimmy|123|read|JDB&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;|&amp;#39;.join([&amp;#39;jimmy&amp;#39;, 123])) # 參與拼接的數據值必須都是字串&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5.統計指定字元出現的次數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;hello world&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.count(&amp;#39;l&amp;#39;)) # 3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 6.判斷字串的開頭或者結尾&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;jimmy say hello&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.startswith(&amp;#39;jimmy&amp;#39;)) # True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.startswith(&amp;#39;j&amp;#39;)) # True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.startswith(&amp;#39;jim&amp;#39;)) # True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.startswith(&amp;#39;m&amp;#39;)) # False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.startswith(&amp;#39;mmy&amp;#39;)) # False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.startswith(&amp;#39;say&amp;#39;)) # False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.endswith(&amp;#39;o&amp;#39;)) # True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.endswith(&amp;#39;llo&amp;#39;)) # True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.endswith(&amp;#39;hello&amp;#39;)) # True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 7.其他方法補充(使用頻率低)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">res&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;helLO wORld hELlo worLD&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.title()) # Hello World Hello World (每個單字開頭都大寫)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.capitalize()) # Hello world hello world (開頭大寫)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.swapcase()) # HELlo WorLD HelLO WORld (大小寫互換)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.index(&amp;#39;O&amp;#39;)) # 找索引位置為多少 4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.find(&amp;#39;O&amp;#39;))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.index(&amp;#39;c&amp;#39;)) # 找不到直接報錯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.find(&amp;#39;c&amp;#39;)) # 找不到默認返回-1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res.find(&amp;#39;LO&amp;#39;)) # 3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="列表內建方法及操作">列表內建方法及操作&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">類型轉換&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">其他數據類型&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">能夠被for循環的數據類型都可以轉成列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;hello&amp;#39;&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># [&amp;#39;h&amp;#39;, &amp;#39;e&amp;#39;, &amp;#39;l&amp;#39;, &amp;#39;l&amp;#39;, &amp;#39;o&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;pwd&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">}))&lt;/span> &lt;span class="c1"># [&amp;#39;name&amp;#39;, &amp;#39;pwd&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="p">((&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">)))&lt;/span> &lt;span class="c1"># [1, 2, 3, 4]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">list&lt;/span>&lt;span class="p">({&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">}))&lt;/span> &lt;span class="c1"># [1, 2, 3, 4, 5]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">需要掌握的方法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">111&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">222&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">333&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">444&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">555&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">666&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">777&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">888&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.索引取值(正負數)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1[0])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1[-1])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.切片操作 與字串講解操作一致&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1[0:5])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1[:])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3.間隔數 方向 與字串講解操作一致&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1[::-1]) # [888, 777, 666, 555, 444, 333, 222, 111]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 4.統計列表中數據值的個數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(len(l1)) # 8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 5.數據值修改&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># l1[0] = 123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1) # [123, 222, 333, 444, 555, 666, 777, 888]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 6.列表添加數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 方式1:尾部追加數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># l1.append(&amp;#39;吃飯&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1) # [111, 222, 333, 444, 555, 666, 777, 888, &amp;#39;吃飯&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># l1.append([&amp;#39;jimmy&amp;#39;, &amp;#39;kevin&amp;#39;, &amp;#39;jerry&amp;#39;])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1) # [111, 222, 333, 444, 555, 666, 777, 888, [&amp;#39;jimmy&amp;#39;, &amp;#39;kevin&amp;#39;, &amp;#39;jerry&amp;#39;]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 方式2:任意位置插入數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># l1.insert(0, &amp;#39;jimmy&amp;#39;) # [&amp;#39;jimmy&amp;#39;, 111, 222, 333, 444, 555, 666, 777, 888]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># l1.insert(1, [11, 22, 33, 44])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1) # [111, [11, 22, 33, 44], 222, 333, 444, 555, 666, 777, 888]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 方式3:擴展列表 合併列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ll1 = [11, 22, 33]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ll2 = [44, 55, 66]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(ll1 + ll2) # [11, 22, 33, 44, 55, 66]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ll1.extend(ll2) # for循環+append&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(ll1) # [11, 22, 33, 44, 55, 66]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for i in ll2:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ll1.append(i)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(ll1)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 7.刪除列表數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 方式1:通用的刪除關鍵字del&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># del l1[0]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1) # [222, 333, 444, 555, 666, 777, 888]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 方式2:remove&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># l1.remove(444) # 括號內填寫數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1) # [111, 222, 333, 555, 666, 777, 888]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 方式3:pop&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># l1.pop(3) # 括號內填寫索引值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1) # [111, 222, 333, 555, 666, 777, 888]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># l1.pop() # 默認尾部彈出數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1) # [111, 222, 333, 444, 555, 666, 777]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># res = l1.pop(3)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(res) # 444&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># res1 = l1.remove(444)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(res1) # None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 8.排序&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ss = [54, 99, 55, 76, 12, 43, 76, 88, 99, 100, 33]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ss.sort() # 預設是升序&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(ss) # [12, 33, 43, 54, 55, 76, 76, 88, 99, 99, 100]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># ss.sort(reverse=True)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(ss) # 改為降序 [100, 99, 99, 88, 76, 76, 55, 54, 43, 33, 12]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 9.統計列表中某個數據值出現的次數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1.count(111)) # 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 10.顛倒列表順序&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># l1.reverse()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(l1) # [888, 777, 666, 555, 444, 333, 222, 111]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="可變類型與不可變類型">可變類型與不可變類型&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># s1 = &amp;#39;$$jimmy$$&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># l1 = [11, 22, 33]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># s1.strip(&amp;#39;$&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1.strip(&amp;#39;$&amp;#39;)) # jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(s1) # $$jimmy$$&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;字串在調用內建方法之後並不會修改自己 而是產生了一個新的結果
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">如何查看調用方法之後有沒有新的結果 可以在調用該方法的代碼左側添加變數名和賦值符號
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> res = s1.strip(&amp;#39;$&amp;#39;)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ret = l1.append(44)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(l1) # [11, 22, 33, 44]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(ret) # None&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;列表在調用內建方法之後修改的就是自身 並沒有產生一個新的結果&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 可變類型:值改變 記憶體地址不變&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># l1 = [11, 22, 33]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(l1) # [11, 22, 33]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(id(l1)) # 4335317568&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># l1.append(44) &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(l1) # [11, 22, 33, 44]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(id(l1)) # 4335317568&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 不可變類型:值改變 記憶體地址肯定變&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res = &amp;#39;$$hello world$$&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res) # $$hello world$$&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(id(res)) # 4339363504&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># res.strip(&amp;#39;$&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(res) # $$hello world$$&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(id(res)) # 4339363504&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="作業">作業&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">整理今日內容及部落格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">每個內建方法一定要自己動手寫案例&lt;/span> &lt;span class="n">查看效果&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">基於字串充當資料庫完成用戶登錄&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">基礎練習&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jimmy|123&amp;#39;&lt;/span> &lt;span class="c1"># 一個用戶數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">獲取用戶使用者名稱和密碼&lt;/span> &lt;span class="n">將上述數據拆分校驗用戶資訊是否正確&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">基於列表充當資料庫完成用戶登錄&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">拔高練習&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 多個用戶數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jimmy|123&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;kevin|321&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;oscar|222&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">利用列表編寫一個員工姓名管理系統&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">輸入1執行添加使用者名稱功能&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">輸入2執行查看所有使用者名稱功能&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">輸入3執行刪除指定使用者名稱功能&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;分析 用戶輸入的不同 可以執行不同的代碼&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">思考如何讓程序循環起來並且可以根據不同指令執行不同操作&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">提示&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">循環結構&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">分支結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">拔高&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">是否可以換成字典或者數據的嵌套使用完成更加完善的員工管理而不是簡簡單單的一個使用者名稱&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">能寫就寫不會沒有關係&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">基於字串充當資料庫完成用戶登錄&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">基礎練習&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jason|123&amp;#39;&lt;/span> &lt;span class="c1"># 一個用戶數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">獲取用戶使用者名稱和密碼&lt;/span> &lt;span class="n">將上述數據拆分校驗用戶資訊是否正確&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 定義用戶真實數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jason|123&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.獲取使用者名稱和密碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;password&amp;gt;&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.切割字串 獲取真實使用者名稱和密碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">real_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">real_pwd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data_source&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;|&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3.校驗使用者名稱和密碼是否正確&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">real_name&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">password&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">real_pwd&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;登錄成功&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;使用者名稱或密碼錯誤&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">基於列表充當資料庫完成用戶登錄&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">拔高練習&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 多個用戶數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jason|123&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;kevin|321&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;oscar|222&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jason|123&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;kevin|321&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;oscar|222&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.先獲取用戶輸入的使用者名稱和密碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;password&amp;gt;&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.循環獲取列表中每一個真實數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">data&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">data_source&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="c1"># &amp;#39;jason|123&amp;#39; &amp;#39;kevin|321&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">real_name&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">real_pwd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">split&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;|&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># jason 123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">real_name&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">password&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="n">real_pwd&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;登錄成功&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;使用者名稱或密碼錯誤&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_source&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jason|123&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;kevin|321&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;oscar|222&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;password&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">user_data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="sa">f&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1">|&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">password&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="c1"># username + &amp;#39;|&amp;#39; + password&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">user_data&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">data_source&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;登錄成功&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;使用者名稱或密碼錯誤&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">利用列表編寫一個員工姓名管理系統&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">輸入1執行添加使用者名稱功能&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">輸入2執行查看所有使用者名稱功能&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">輸入3執行刪除指定使用者名稱功能&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;分析 用戶輸入的不同 可以執行不同的代碼&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">思考如何讓程序循環起來並且可以根據不同指令執行不同操作&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">提示&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">循環結構&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">分支結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.先定義一個專門儲存使用者名稱的列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.添加循環結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3.先列印項目功能 供用戶選擇&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 1.添加用戶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 2.查看用戶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 3.刪除用戶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 4.獲取用戶想要執行的功能編號&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">choice_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入您想要執行的功能編號&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 5.根據不同的功能編號執行不同的分支代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">choice_num&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;1&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 6.獲取用戶輸入的使用者名稱&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入您的使用者名稱&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 7.判斷當前使用者名稱是否已存在&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">data_list&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;使用者名稱已存在&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 8.列表添加使用者名稱&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s1">&amp;#39;使用者名稱&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1">添加成功&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">choice_num&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;2&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 9.循環列印每一個用戶數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">data_list&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="sa">f&lt;/span>&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> ------------user info---------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 使用者名稱:&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">name&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> ------------------------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">choice_num&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;3&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 10.獲取用戶想要刪除的使用者名稱&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">delete_username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入您想要刪除的使用者名稱&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">strip&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 11.先判斷使用者名稱是否存在&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">delete_username&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">data_list&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">data_list&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">remove&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">delete_username&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="sa">f&lt;/span>&lt;span class="s1">&amp;#39;使用者名稱&lt;/span>&lt;span class="si">{&lt;/span>&lt;span class="n">delete_username&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s1">刪除成功&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;使用者名稱不存在!!!&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;很抱歉 暫時沒有您想要執行的功能編號&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Pycharm 常用快捷鍵</title><link>https://blog.goldfishbrain-fighting.com/2023/pycharm-command/</link><pubDate>Fri, 08 Dec 2023 18:42:56 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/pycharm-command/</guid><description>&lt;ol>
&lt;li>&lt;code>ctrl+N&lt;/code> &lt;strong>新建文件&lt;/strong>&lt;/li>
&lt;li>&lt;code>command+R&lt;/code> Replace, 替換&lt;/li>
&lt;li>&lt;code>command+F&lt;/code> Find, 查找&lt;/li>
&lt;li>&lt;code>command+/&lt;/code> 注釋&lt;/li>
&lt;li>&lt;code>command&lt;/code>+&amp;lt;/&amp;gt; 跳轉到行首 / 行尾&lt;/li>
&lt;li>&lt;code>command+Y&lt;/code> 刪除整行&lt;/li>
&lt;li>&lt;code>command+Z&lt;/code> 撤回修改&lt;/li>
&lt;li>&lt;code>command+Alt+L&lt;/code> &lt;strong>格式化程式碼&lt;/strong>&lt;/li>
&lt;/ol></description></item><item><title>Day06 - while循環、for循環、range方法</title><link>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day06/</link><pubDate>Fri, 08 Dec 2023 17:03:54 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day06/</guid><description>&lt;h3 id="while循環補充說明">while循環補充說明&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">死循環&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">真正的死循環是一旦執行&lt;/span> &lt;span class="n">CPU功耗會急速上升&lt;/span> &lt;span class="n">直到系統採取緊急措施&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">盡量不要讓CPU長時間不間斷運算&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">嵌套及全局標誌位&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">強調&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">一個break只能結束它所在的那一層循環&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">強調&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">有幾個while的嵌套&lt;/span> &lt;span class="n">想一次性結束&lt;/span> &lt;span class="n">就應該寫幾個break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">強調&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">如果不想反覆寫break&lt;/span> &lt;span class="n">可以使用全局標誌位&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">is_flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">is_flag&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;password&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">password&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;123&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="n">is_flag&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">cmd&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入您的指令&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">cmd&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;q&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">is_flag&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;正在執行您的指令:&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">cmd&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;使用者名稱或密碼錯誤&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="流程控制之for循環">流程控制之for循環&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">for循環能夠做到的事情while都可以做到&lt;/span> &lt;span class="n">只不過for循環在一些場景下使用更簡單&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">主要場景為&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">循環獲取儲存多個數據的數據內部數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">實際案例&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;oscar&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># 遍歷&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 循環列印出列表中每一個數據值(while 索引取值&amp;gt;&amp;gt;&amp;gt;:超出範圍會報錯)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># count = 0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># while count &amp;lt; 4:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(name_list[count])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># count += 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># for循環&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">name_list&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">for循環語法結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">變數名&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">待遍歷的數據&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">for循環體代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">for循環特點&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">擅長遍歷取值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">不需要結束條件&lt;/span> &lt;span class="n">自動結束&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">遍歷完&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">for循環主要遍歷的數據類型有&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">常見有&lt;/span> &lt;span class="n">字串&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">列表&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">元組&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">字典&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">集合&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">info&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;hello world&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">info&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 單個單個字元&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">d&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;password&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">d&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 只有鍵參與遍歷&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">for循環語法結構中的變數名如何命名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">見名知意&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">如果遍歷出來的數據值沒有具體的含義&lt;/span> &lt;span class="n">可以使用常用的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">i&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="n">k&lt;/span> &lt;span class="n">item&lt;/span> &lt;span class="n">v&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">for循環體代碼中如果執行到break也會直接結束整個for循環&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">for循環體代碼中如果執行到continue也會結束當前循環直接開始下一次循環&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">變數名&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">待遍歷的數據&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">for循環體代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">for循環體代碼沒有被break強制結束的情況下運行完畢之後&lt;/span> &lt;span class="n">運行&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="range方法">range方法&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">range可以簡單的理解為是幫我們產生一個內部含有多個數字的數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">101&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># 起始位置為0 終止位置為100 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># [0,.......100]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># 第一個為起始位置 第二個終止位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># 第三個數為等差值 默認不寫為1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># 打印100三次 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">在python2中
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> range()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 直接產生一個列表 內部含有多個數值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> xrange()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 其實就是python3裡面的range
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">在python3中
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> range()
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 類似於一個工廠 不會占用太多的記憶體空間 要就生產
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">chenqingze&lt;/span>&lt;span class="nd">@chenqingze&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MBP&lt;/span> &lt;span class="n">Downloads&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">python2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Python&lt;/span> &lt;span class="mf">2.7.18&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="mf">.7.18&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">d21aa21f2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Apr&lt;/span> &lt;span class="mi">19&lt;/span> &lt;span class="mi">2020&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">48&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">48&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;gt;&amp;gt;&amp;gt;&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">chenqingze&lt;/span>&lt;span class="nd">@chenqingze&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MBP&lt;/span> &lt;span class="n">Downloads&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">python2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Python&lt;/span> &lt;span class="mf">2.7.18&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">v2&lt;/span>&lt;span class="mf">.7.18&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">8&lt;/span>&lt;span class="n">d21aa21f2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">Apr&lt;/span> &lt;span class="mi">19&lt;/span> &lt;span class="mi">2020&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">48&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">48&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;gt;&amp;gt;&amp;gt;&lt;/span> &lt;span class="n">xrange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">xrange&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">chenqingze&lt;/span>&lt;span class="nd">@chenqingze&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">MBP&lt;/span> &lt;span class="n">Downloads&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">python3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">Python&lt;/span> &lt;span class="mf">3.9.13&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">v3&lt;/span>&lt;span class="mf">.9.13&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">6&lt;/span>&lt;span class="n">de2ca5339&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">May&lt;/span> &lt;span class="mi">17&lt;/span> &lt;span class="mi">2022&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">37&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="mi">23&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">&amp;gt;&amp;gt;&amp;gt;&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="range實戰案例">range實戰案例&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">網路爬蟲&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">使用代碼爬取網路上我們需要的數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">項目需求&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">爬取所有頁面的數據&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">部落格園&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">找尋規律&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cnblogs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cnblogs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="c1">#p2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cnblogs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="c1">#p3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cnblogs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="c1">#p4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">大膽猜測&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">第一頁是&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">cnblogs&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="c1">#p1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">編寫程式碼產生部落格園文章前兩百頁的網址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">分頁的規律 不同的網址有所區別
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> 1.在網址裡面有規律
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> 2.內部js文件動態載入
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">https://www.cnblogs.com/
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">https://www.cnblogs.com/#p2
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">https://www.cnblogs.com/#p3
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">https://www.cnblogs.com/#p4
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1.先定義網址的模版 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">base_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;https://www.cnblogs.com/#p&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">201&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">base_url&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 通過代碼朝上述的網址發送請求獲取頁面數據&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="作業講解">作業講解&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">計算1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="n">所有的數之和&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">判斷列表中數字2出現的次數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">編寫程式碼自動生成所有頁網址&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">注意總共多少頁&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">movie&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">douban&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">top250&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">編寫程式碼列印出下列圖形&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">for循環嵌套&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">*****&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">*****&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">*****&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">*****&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">計算1&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="mi">100&lt;/span>&lt;span class="n">所有的數之和&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">all_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">101&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">all_num&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="n">i&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">all_num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">判斷列表中數字2出現的次數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.先定義一個紀錄數字2出現次數的計數器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.循環獲取列表中每一個數據值判斷是不是數字2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">l1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3.如果i綁定的數據值是2 則讓計數器自增1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count_num&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 4.等待for循環運行結束 列印計數器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">count_num&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">編寫程式碼自動生成所有頁網址&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">注意總共多少頁&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">movie&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">douban&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">top250&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nb">filter&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">movie&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">douban&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">top250&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">25&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nb">filter&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">movie&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">douban&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">top250&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="n">start&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">50&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="nb">filter&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">base_url&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;https://movie.douban.com/top250?start=&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s1">&amp;amp;filter=&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">250&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">25&lt;/span>&lt;span class="p">):&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">base_url&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="n">i&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">編寫程式碼列印出下列圖形&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">for循環嵌套&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">*****&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">*****&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">*****&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">*****&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> &lt;span class="n">i&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">4&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># 0 1 2 3 4次 4行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="n">j&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="nb">range&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">5&lt;/span>&lt;span class="p">):&lt;/span> &lt;span class="c1"># 0 1 2 3 4 5次 5列&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;*&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">end&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1"># 每次內層循環結束 換行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">補充debug除錯模式(程式設計師後期找bug必備工具)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>無人島的Diva</title><link>https://blog.goldfishbrain-fighting.com/2023/castaway-diva/</link><pubDate>Fri, 08 Dec 2023 16:22:34 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/castaway-diva/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/castaway-diva/media/Pasted-image-20231208163037.png" alt="Featured image of post 無人島的Diva" />&lt;h2 id="據述">據述&lt;/h2>
&lt;p>來源：Google Bard&lt;/p>
&lt;p>該劇講述了時隔15年在無人島獲救的歌手志願生“徐木河”（朴恩斌 飾）挑戰Diva的成長之路。&lt;/p>
&lt;p>木河是一名歌手志願生，在一次海上旅行中遭遇事故，被困在無人島上長達15年。她在無人島上學會了生存技能，也找到了唱歌的樂趣。&lt;/p>
&lt;p>15年後，木河被救回了人類社會。她決心實現自己的夢想，成為一名真正的歌手。然而，她在社會上卻面臨著種種挑戰。她必須克服自己的恐懼和自卑，才能成為一名真正的Diva。&lt;/p>
&lt;h2 id="經典話">經典話&lt;/h2>
&lt;p>來源：Google Bard&lt;/p>
&lt;ul>
&lt;li>&lt;strong>「期盼，總有一天會以從未想過的方式實現。」&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這是劇中木河的經典台詞。她在無人島上度過了15年，在那裡她學會了堅強和勇敢。她相信，只要她一直期盼著回家，總有一天會以她意想不到的方式實現。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>「如果一直擔心接下來的事，那到最後，反而會有更多的後悔，所以我從現在開始，一定會做我當下想做的事。」&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這是木河在回歸社會後的心境轉變。她意識到，如果一直擔心未來，只會讓自己失去當下的幸福。因此，她決定要勇敢地追求自己的夢想。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>「我們不是單純的逃家，那時候我們是為了活下來。」&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這是木河和她的好朋友蘭珠在無人島上時的對話。她們兩個都是出身貧寒的少女，為了逃避不幸的生活而逃家。然而，她們在無人島上經歷了種種磨難，才真正明白了生存的意義。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>「你是世界上最美麗的女人，因為你有著最堅強的心。」&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這是木河的經紀人保傑對她說的話。保傑是木河在無人島上遇見的第一個人，也是她最堅強的後盾。他相信，木河的堅強和勇敢，讓她成為了世界上最美麗的女人。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>「我不是沒有恐懼，但我知道，恐懼不是我的對手。」&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這是木河在克服恐懼時說的話。她在無人島上學會了如何克服恐懼，也明白了恐懼不是她的對手。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>「我不是完美的，但我會努力成為更好的自己。」&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這是木河在追求夢想時說的話。她知道自己不是完美的，但她會努力成為更好的自己，才能實現自己的夢想。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>「我不是為了別人而唱歌，我是為了自己而唱歌。」&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這是木河在找到自己的歌聲之路時說的話。她明白，歌唱是她自己的夢想，她要為自己而唱歌。&lt;/p>
&lt;p>這些台詞都反映了劇中人物的成長和蛻變。它們不僅是劇中的經典台詞，也能給觀眾帶來思考和啟發。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>「你是世界上最美麗的女人，因為你有著最堅強的心。」&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這句話不僅是劇中的經典台詞，也是我一直很喜歡的一句話。它告訴我們，一個人真正的美麗，不僅在於外表，更在於內心。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>「我不是為了別人而唱歌，我是為了自己而唱歌。」&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這句話讓我明白，追求夢想，最重要的是要為自己而做。只有這樣，我們才能真正地享受到追求夢想的過程。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>「我不是沒有恐懼，但我知道，恐懼不是我的對手。」&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這句話給了我很大的鼓勵。它讓我明白，即使有恐懼，也不要害怕。只要我們勇敢地面對，恐懼就不會成為我們的阻礙。&lt;/p>
&lt;h2 id="劇照">劇照&lt;/h2>
&lt;p>來源：
&lt;a class="link" href="https://www.storm.mg/lifestyle/4928978?mode=whole" target="_blank" rel="noopener"
>https://www.storm.mg/lifestyle/4928978?mode=whole&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/castaway-diva/media/Pasted-image-20231208162712.png"
width="800"
height="533"
srcset="https://blog.goldfishbrain-fighting.com/2023/castaway-diva/media/Pasted-image-20231208162712_hu8f07278d7569092d83f05dbc4f7ff8b7_594369_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/castaway-diva/media/Pasted-image-20231208162712_hu8f07278d7569092d83f05dbc4f7ff8b7_594369_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/castaway-diva/media/Pasted-image-20231208162819.png"
width="1200"
height="800"
srcset="https://blog.goldfishbrain-fighting.com/2023/castaway-diva/media/Pasted-image-20231208162819_hu92deac2a7a166e9554c3b114fb115a82_1383555_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/castaway-diva/media/Pasted-image-20231208162819_hu92deac2a7a166e9554c3b114fb115a82_1383555_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/castaway-diva/media/Pasted-image-20231208162858.png"
width="1200"
height="542"
srcset="https://blog.goldfishbrain-fighting.com/2023/castaway-diva/media/Pasted-image-20231208162858_hub1a3302237ef4942d4a78ae9ddf7d2c2_383596_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/castaway-diva/media/Pasted-image-20231208162858_hub1a3302237ef4942d4a78ae9ddf7d2c2_383596_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="221"
data-flex-basis="531px"
>&lt;/p></description></item><item><title>精神病房也會迎來清晨</title><link>https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/</link><pubDate>Fri, 08 Dec 2023 16:10:10 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161857.png" alt="Featured image of post 精神病房也會迎來清晨" />&lt;h2 id="據述">據述&lt;/h2>
&lt;p>來源：Google Bard&lt;/p>
&lt;p>劇情講述第一次來到精神健康醫學科的護士多恩，在精神病房裡看到的世界和心灰意冷的病人們的故事。&lt;/p>
&lt;p>這部劇獲得了不少好評，被稱為“溫暖治癒的韓劇”。多恩的善良和溫暖，讓她逐漸融入了精神病房的生活，也讓病人們感受到了希望。劇中對精神疾病的描寫也十分真實，讓觀眾們對精神病患者有了更多的理解和同情。&lt;/p>
&lt;h2 id="經典話">經典話&lt;/h2>
&lt;p>來源：Google Bard&lt;/p>
&lt;ul>
&lt;li>&lt;strong>“心理的免疫力下降時，就要來精神科，就像骨折要去看骨科，感冒的話就去內科，因為任何人隨時都有可能變得軟弱，生活應有盡有的話，就不會罹患精神疾病嗎？ 反過來說，缺乏什麼的話就會生病嗎？”&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這句話告訴我們，精神疾病就像其他疾病一樣，是一種需要治療的疾病。任何人都有患上精神疾病的可能，因此我們要學會正視和接受精神疾病。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>“幸福哪有這麼複雜，可以隨心所慾做喜歡的事，就是幸福。”&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這句話告訴我們，幸福是一種簡單而美好的感受。只要我們能做自己喜歡的事，就會感到幸福。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>“與其花力氣讓別人喜歡你，請先多多珍惜自己吧。”&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這句話告訴我們，要先學會愛自己，才能得到他人的愛。如果我們一味地討好他人，只會讓自己感到疲憊和失落。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>“試試看自私一點過日子，怎麼樣？ 不要先顧慮對方感受如何，而是先照自己的意願去做，就這樣嘗試看吧，也來寫寫讚美日記，就只是稱讚妳自己，那怕是微不足道的事也好，想到什麼就儘管寫出來。”&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這句話告訴我們，有時候我們需要學會自私一點，才能照顧好自己。我們也要學會讚美自己，才能建立自信。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>“死亡這回事，是經歷千萬遍都不會習慣的事。”&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這句話告訴我們，死亡是人生的必經之路，我們要學會接受它。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>“我們都會犯錯，但重要的是，我們要從錯誤中學習，然後繼續前進。”&lt;/strong>&lt;/li>
&lt;li>&lt;strong>“不要害怕表達自己的感受，即使是負面的情緒也要允許自己去感受。”&lt;/strong>&lt;/li>
&lt;li>&lt;strong>“不要把自己和別人比較，每個人都是獨一無二的。”&lt;/strong>&lt;/li>
&lt;li>&lt;strong>“要相信自己，相信自己能克服任何困難。”&lt;/strong>&lt;/li>
&lt;li>&lt;strong>“要學會原諒自己和他人，才能真正地放下過去。”&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這些話都很有啟發性，可以幫助我們更好地理解自己和他人，也能讓我們在人生的道路上走得更加順利。&lt;/p>
&lt;p>以下是一些具體的劇情中的經典台詞：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>“我覺得自己好像哪裡故障了，連自己漸漸枯萎都不知道，人生全部變成了黃色，黃燈在眼前閃爍你都看不見，為了孩子的幸福，對於自己的幸福睜一隻眼閉一隻眼，你都不幸福了，其他人會幸福嗎？”&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這句話是多恩在照顧病人時聽到的，它告訴我們，不要為了他人而犧牲自己的幸福。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>“我以為時機點才是癥結點，我以為錯過了時機，但問題不是時機，其實只是有的人勇敢，有的人不勇敢而已。”&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這句話是多恩在和病人交談時說的，它告訴我們，只要我們勇敢地去做，就沒有什麼是不可能的。&lt;/p>
&lt;ul>
&lt;li>&lt;strong>“每個人都會遇到挫折，但重要的是，我們要從挫折中學習，然後繼續前進。”&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>這句話是多恩在面對自己的困難時說的，它告訴我們，挫折是人生的必經之路，我們要學會勇敢地面對它。&lt;/p>
&lt;h2 id="劇照">劇照&lt;/h2>
&lt;p>來源：
&lt;a class="link" href="https://hk.news.yahoo.com/netflix%E3%80%8A%E7%B2%BE%E7%A5%9E%E7%97%85%E6%88%BF%E4%B9%9F%E6%9C%83%E8%BF%8E%E4%BE%86%E6%B8%85%E6%99%A8%E3%80%8B8%E5%A4%A7%E7%9C%8B%E9%BB%9E%EF%BC%9A%E6%9C%B4%E5%AF%B6%E8%8B%B1%E5%A4%A7%E5%B1%95%E6%8F%AA%E5%BF%83%E3%80%8C%E5%B4%A9%E6%BD%B0%E6%BC%94%E6%8A%80%E3%80%8D%E5%85%B1%E9%B3%B4%E5%82%AC%E6%B7%9A%E5%8A%87%E6%83%85%EF%BC%8C%E5%BC%95%E7%88%86%E8%A7%80%E7%9C%BE%E6%B7%9A%E6%B5%B7%EF%BC%81-071442362.html" target="_blank" rel="noopener"
>https://hk.news.yahoo.com/netflix%E3%80%8A%E7%B2%BE%E7%A5%9E%E7%97%85%E6%88%BF%E4%B9%9F%E6%9C%83%E8%BF%8E%E4%BE%86%E6%B8%85%E6%99%A8%E3%80%8B8%E5%A4%A7%E7%9C%8B%E9%BB%9E%EF%BC%9A%E6%9C%B4%E5%AF%B6%E8%8B%B1%E5%A4%A7%E5%B1%95%E6%8F%AA%E5%BF%83%E3%80%8C%E5%B4%A9%E6%BD%B0%E6%BC%94%E6%8A%80%E3%80%8D%E5%85%B1%E9%B3%B4%E5%82%AC%E6%B7%9A%E5%8A%87%E6%83%85%EF%BC%8C%E5%BC%95%E7%88%86%E8%A7%80%E7%9C%BE%E6%B7%9A%E6%B5%B7%EF%BC%81-071442362.html&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161610.png"
width="960"
height="540"
srcset="https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161610_hu3e4e35d8f051552846a0357b159ecb8a_680627_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161610_hu3e4e35d8f051552846a0357b159ecb8a_680627_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161645.png"
width="960"
height="540"
srcset="https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161645_hu78ed51022d04fca39cd0aaa461accf8b_704759_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161645_hu78ed51022d04fca39cd0aaa461accf8b_704759_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161714.png"
width="960"
height="540"
srcset="https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161714_hu45005bb4665a95d6cfb5a11014c348e8_507944_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161714_hu45005bb4665a95d6cfb5a11014c348e8_507944_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161733.png"
width="960"
height="540"
srcset="https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161733_hu9895222b3b8b7de9a9f4a51847538678_720756_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161733_hu9895222b3b8b7de9a9f4a51847538678_720756_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161806.png"
width="960"
height="540"
srcset="https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161806_hue16ea938341f784233ad0025682799ab_692189_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/daily-dose-of-sunshine/media/Pasted-image-20231208161806_hue16ea938341f784233ad0025682799ab_692189_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p></description></item><item><title>Lesson033 - 別跟你的胃過不去！空腹喝酒的後果？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson033/</link><pubDate>Fri, 08 Dec 2023 16:04:21 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson033/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson033/media/Pasted-image-20231208160527.png" alt="Featured image of post Lesson033 - 別跟你的胃過不去！空腹喝酒的後果？" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/JLMV_A-1aaE" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">underage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 未成年的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">correlation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 相關
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">debate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 爭論
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">requirement
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 規定
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">intestine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 腸
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">digest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 消化
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">valve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 瓣膜
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">protein
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 蛋白質
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wasted
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 喝醉的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">contrary
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 相反的
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>轉述句&lt;/p>
&lt;p>Reported Speech&lt;/p>
&lt;/blockquote>
&lt;p>轉述句就是幫忙表達了別人的想法或意見，常由「第三人稱」起首。在直述句改為轉述句時，一般要將直述句的時態「往前推」。例如本部影片中，有一句 &amp;ldquo;Some say raising the age to 21 was a success.&amp;rdquo; 就是由直述句 &amp;ldquo;Some (people) say, &amp;rsquo; raising the age to 21 is a success.&amp;rsquo;&amp;rdquo; 所衍伸出來的。若原本直述句中的動詞是現在式，則轉述句中就會是過去式，依此類推。如果直述句的內容對現在來說依然是如此，就不改變時態。以下例句中，第一個為直述句，對應的第二個則為轉述句。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- &amp;#34;I am playing with my cats&amp;#34;, he said. vs. He said (that) he was playing with his cats.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">他說：「我當時正在和我的貓玩」。與 他說他當時正在跟他的貓玩。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- They complained, &amp;#34;We&amp;#39;re not happy with the services.&amp;#34; vs. They complained (that) they were not happy with the services.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">他們抱怨道：「我們對服務不是很滿意」。與 他們抱怨他們對服務不是很滿意。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- She told me, &amp;#34;I was living in London.&amp;#34; vs. She told me (that) she had been living in London.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">她曾告訴我說：「我以前住在倫敦一陣子過」。與 她曾告訴我她以前住在倫敦一陣子過。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson032 - 從科學角度看蜘蛛人！</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson032/</link><pubDate>Fri, 08 Dec 2023 16:01:29 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson032/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson032/media/Pasted-image-20231208160209.png" alt="Featured image of post Lesson032 - 從科學角度看蜘蛛人！" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/o40wD7Nf9oY" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">scientific
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 科學的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">insert
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 插入
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thick
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 厚的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">affect
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 影響
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stick
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 黏住
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">extremely
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adv. 極度地；非常
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">permanently
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adv. 永久地
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>分詞構句與關係代子句簡化為分詞片語&lt;/p>
&lt;p>Participle Clauses and Reduced Relative Clauses&lt;/p>
&lt;/blockquote>
&lt;p>因為分詞構句與關係代子句簡化為分詞片語都以現在或過去分詞的方式呈現，所以很多人會把兩者搞混。關係代子句簡化為分詞片語通常出現於名詞（先行詞）後，是省略關係代名詞後形成的分詞片語。例如影片例句：Spider webs, one-tenth the size of a piece of hair, are able to catch insects flying upwards of 15 miles an hour. 這裡的 flying 修飾先行詞 insects，可以將句子還原成：able to catch insects that fly upwards of 15 miles an hour. 分詞構句目的在「簡化」句子，當兩句主詞相同時，會省略「表示原因、條件、時間等」那句的主詞，而動詞改為分詞。例如影片例句：This creates electrostatic forces, allowing them to stick with a strength of 170 times their own weight. 這裡可以將句子寫成：This creates electrostatic forces and allows them to stick with a strength of 170 times their own weight. 至於是要變成現在分詞（Ving）還是過去分詞（V.pp），就要看該動詞是否是被動態。如果不是被動的話，該動詞改為Ving；如果是被動，則保留Vpp的型態。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The window broken by Johan is being fixed.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">那扇被Johan打破的窗現在正在被修復。（分詞片語broken by Johan修飾某扇特定的窗戶。）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Having a fever, I didn&amp;#39;t go to work today.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">因為發燒，所以我今天沒去上班。（分詞構句表示原因Because I have a fever簡化成Having a fever）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Shocked by the news, my sister hasn&amp;#39;t spoken for a while.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">因為我姊被那則新聞所震驚，這幾天半句話也不說。（分詞構句表示原因Because my sister was shocked by the news簡化成Shocked by the news）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson031 - 如果地球上的重力突然減半？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson031/</link><pubDate>Fri, 08 Dec 2023 15:58:28 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson031/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson031/media/Pasted-image-20231208155908.png" alt="Featured image of post Lesson031 - 如果地球上的重力突然減半？" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/z0rEhNKl-zo" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">float
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 飄移
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">slightly
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adv. 稍微
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">universe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 宇宙
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">weigh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 有…多重
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">consequence
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 後果
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">relatively
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adv. 相對地
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pump
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 輸送
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">astronaut
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 太空人
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">extent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 程度
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gravity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 重力
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>第二類條件句&lt;/p>
&lt;p>The Second Conditional&lt;/p>
&lt;/blockquote>
&lt;p>第二類條件句用於敘述一個對現況的假設，以及這個假設可能帶來的結果，所描述的假設是與當下情況相反或不符的，if 開頭的子句為假設，以過去簡單式敘述，而主要子句是可能的結果，以「would/could + 原形動詞」敘述。 如課程提到 If you survived, and everything on Earth seemed to carry on about the same but just with half gravity, there would likely be health consequences. （如果你存活下來，地球上的一切萬物似乎都會保持不變，只是重力減半，可能對身體狀況造成影響。 ）句中的假設情況有違現在事實，所以動詞為過去簡單式 survived 和 seemed to。 另外一句 What would happen if the gravity here on Earth was suddenly cut in half?（如果地球上的重力突然減半，會發生什麼事？）句中的假設情況 if the gravity here on Earth was suddenly cut in half 一樣與現實不符，所以用過去簡單式敘述。這裡同學可以注意，以正式用法來說，be 動詞在假設語氣中一律為 were，也就是說不管主詞的人稱或是單複數，對應的 be 動詞都應該要用 were，如例句一 if I were you 而非 if I was you。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I would accept that job offer if I were you.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果我是你，我會接受那份工作邀約。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- If they didn’t like Joe, they wouldn’t invite him to the party.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果他們不喜歡 Joe 就不會邀請他來派對了。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I would weigh so much less if I lived on the moon.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果我住在月球上，我會變輕許多。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson030 -【國際時事】脫歐是什麼？看看這支短片簡單弄清何謂脫歐！</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson030/</link><pubDate>Fri, 08 Dec 2023 15:55:24 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson030/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson030/media/Pasted-image-20231208155621.png" alt="Featured image of post Lesson030 -【國際時事】脫歐是什麼？看看這支短片簡單弄清何謂脫歐！" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/VKIOBefut5Y" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">lately
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adv. 最近
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">commercial
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 廣告
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">unorganized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 雜亂的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prime minister
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 首相; 總理
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">framework
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 架構
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">citizen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 公民
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">parliament
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 國會
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>副詞&lt;/p>
&lt;p>Adverbs&lt;/p>
&lt;/blockquote>
&lt;p>按意義來分，副詞可分為情狀（一般）副詞、程度副詞、地方副詞、時間副詞、頻率副詞等。程度副詞用於修飾形容詞、動詞的「程度」。如 fully 有「完全地」的意思。其餘常見的程度副詞還包括fairly、pretty、rather、quite、greatly、almost、nearly、highly、awfully、deeply、partly、perfectly 等。而 initially 則是屬於「時間副詞」的一種，它標明了事物在時間上發生的先後，其他時間副詞還包括 eventually、finally、later、tomorrow 等。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I am fully aware of the dangers of meeting that person.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我完全清楚跟那個人碰面的危險性。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Frankly, I&amp;#39;m not quite clear what to do next.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">老實說，我不是很清楚接下來要怎麼做。（這邊的 quite 是「完全地」）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Today is quite a lovely day, isn&amp;#39;t it?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">今天算是個相當愉快的一天，不是嗎？ （在此 quite 表示「相當」之意）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson029 - 特勤局如何使用墨水破案？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson029/</link><pubDate>Fri, 08 Dec 2023 15:51:59 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson029/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson029/media/Pasted-image-20231208155256.png" alt="Featured image of post Lesson029 - 特勤局如何使用墨水破案？" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/kCKM_ICjDtc" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">crime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 違法行爲，犯罪活動
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">investigation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. (對罪案、問題、陳述等的) 調查
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">complicated
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 複雜的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">handwriting
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 字跡，筆跡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">collection
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 收藏
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ink
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 墨水；油墨
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">currency
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 貨幣
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">glance
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 一瞥；掃視
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">solve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 解決，偵破
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 照片，快照
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>關係子句簡化為分詞片語&lt;/p>
&lt;p>Reduced Relative Clauses&lt;/p>
&lt;/blockquote>
&lt;p>今天要跟大家介紹關係代名詞省略時要注意的事情。我們來看看影片裡的句子： They&amp;rsquo;re also an elite team of investigators solving some of the nation&amp;rsquo;s biggest crimes. 這裡 solving 是用於修飾前面的 an elite team of investigators，此句是省略了關係代名詞，可以將句子還原成：They&amp;rsquo;re also an elite team of investigators who solve some of the nation&amp;rsquo;s biggest crimes. 當關係代名詞作為關係子句中的主詞，關係代名詞省略後，其後的動詞型態也要有所變化，變成分詞。至於是要變成現在分詞（Ving）還是過去分詞（V.pp），就要看該動詞是否是被動態。如果不是被動的話，該動詞改為Ving；如果是被動，則保留Vpp的型態。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The boy sleeping soundly didn&amp;#39;t hear the door bell ringing.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">那個睡得很香的男孩沒有聽到門鈴聲。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The roads covered by snow made our journey impossible.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">被雪所覆蓋的道路使我們無法進行我們的旅程。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The new computer bought by Amy works very well.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Amy買的新電腦非常好用。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson028 - 不想下床？來看看賴床對身體的影響！</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson028/</link><pubDate>Fri, 08 Dec 2023 15:48:37 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson028/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson028/media/Pasted-image-20231208154938.png" alt="Featured image of post Lesson028 - 不想下床？來看看賴床對身體的影響！" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/zj4zvXpQW1Y" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">lung
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 肺
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gravity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. （尤指地球的）重力，引力，地心引力
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pneumonia
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 肺炎
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">muscle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 肌肉
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thigh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 大腿；股
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">suck
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 吸
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ankle
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 腳踝
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">oxygen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 氧氣
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">opposite
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 全然不同的，迥異的，截然相反的
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>片語動詞&lt;/p>
&lt;p>Phrasal Verbs&lt;/p>
&lt;/blockquote>
&lt;p>這堂課中我們學到了兩個「可分片語動詞」：crumple up 與 rip through。判斷可分或不可分大致上由動詞後是介系詞或是副詞來決定。兩者都使在動詞後接上方位副詞 (up) 與方向副詞 (through)，所以大致可以判斷是可分片語動詞唷！以下我們就介紹幾組與 &amp;ldquo;up&amp;quot;有關的片語動詞吧～&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Can you go tidy up the kitchen? The guests will be arriving in ten minutes.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">你可以去整理一下廚房嗎？客人在十分鐘內就要到了。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I&amp;#39;ll go pick them up at the airport. When did you say they will arrive again?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我會到機場接他們。你再說一次他們幾點會到？
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I&amp;#39;m totally fed up with the stories you made up by yourself.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我受夠了你自己編造的這些故事。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson027 - 你有多自律，就有多自由！</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson027/</link><pubDate>Fri, 08 Dec 2023 15:43:09 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson027/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson027/media/Pasted-image-20231208154617.png" alt="Featured image of post Lesson027 - 你有多自律，就有多自由！" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/Ky7ARprxpNM" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">disciplined
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 自律的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ability
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 能力
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sting
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 蜇
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">seek out
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">phrasal v. （尤指費時地）找出，尋找
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">social media
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 社交媒體
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wisdom
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 智慧
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">advantage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 優勢
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 以…為目標
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>被動語態&lt;/p>
&lt;p>The Passive Voice&lt;/p>
&lt;/blockquote>
&lt;p>被動語態，隨著時態（tense）以及語體（aspect）的不同，而有多種變化型態。例如有過去被動式（had been P.P.）、過去進行被動式（was being P.P.）等。每種形式所強調的「目的」不同。例如本堂課中我們所學會兩種： 現在完成被動 - The internet has been designed to take advantage of this desire for novelty by showing you more novelty than you can ever dream of.，強調某事項已經被完成。 現在進行被動 - We are being targeted by corporations seeking to take advantage of us and make a profit.，強調某事項正在被執行中。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The mischievous boy is being told by his mum not to make fun of his sister.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">那個頑皮男孩正被他媽媽告誡不要嘲笑他的妹妹。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- These lands have been cultivated by farmers for as long as we know it.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">在我們有認知以來，這些土地就已被農夫們耕作了。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The computer is being repaired.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">那台電腦在被維修中。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson026 - 為什麼泡麵在獄中那麼有價值？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson026/</link><pubDate>Fri, 08 Dec 2023 15:37:28 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson026/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson026/media/Pasted-image-20231208154238.png" alt="Featured image of post Lesson026 - 為什麼泡麵在獄中那麼有價值？" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/PLt9fRYT92M" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">inmate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 囚犯
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">staple
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 主食
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">durable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 耐久的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tobacco
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 煙草
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">informal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 非正規的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">overwhelming
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 極大的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">starve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 挨餓
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">federal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 聯邦政府的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">taint
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 污染
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nutrition
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 營養
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>過去完成式&lt;/p>
&lt;p>The Past Perfect&lt;/p>
&lt;/blockquote>
&lt;p>過去完成式的句型為「had + 過去分詞」，表示在過去某一時間點之前，就已經完成的事件。若我們用過去完成式來敘述某個事件，通常會與另一個發生於過去但較晚發生的事件比較。因此，這個時態可以幫助我們判斷兩個過去事件的先後順序。 如本課例句 The Marshall Project reported one prison that had whittled down costs to as low as $.56 a meal. 以過去完成式來敘述的事件為 had whittled down costs，以過去簡單式敘述的事件是 reported。我們可以從這兩種不同的時態得知，是監獄內已經餐費縮減，這個組織才指出有這種狀況。 我們來看更多過去完成式的例句：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- We already had dinner when my sister came back home at 9.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我姐姐九點回到家時，我們早就吃過晚餐了。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- My neighbor just complained that my friend and I had been noisy last night.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我的鄰居剛抱怨說我和我朋友昨晚很吵。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I had read that novel which you recommended a while ago.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我已經讀過你之前推薦的那本小說了。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>使用kubespray專案，用ansible批量佈屬生產環境高可用kubernetes集群(haproxy、keepalived)</title><link>https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/</link><pubDate>Sat, 02 Dec 2023 17:34:57 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231205222815.png" alt="Featured image of post 使用kubespray專案，用ansible批量佈屬生產環境高可用kubernetes集群(haproxy、keepalived)" />&lt;h1 id="架構圖">架構圖&lt;/h1>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231205214821.png"
width="1276"
height="728"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231205214821_hua7912735140a57843d03f863f5ef97a0_414365_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231205214821_hua7912735140a57843d03f863f5ef97a0_414365_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="175"
data-flex-basis="420px"
>&lt;/p>
&lt;h1 id="集群自動化建置">集群自動化建置&lt;/h1>
&lt;h2 id="準備">準備&lt;/h2>
&lt;p>&lt;a class="link" href="https://kubespray.io/#/docs/ansible?id=installing-ansible" target="_blank" rel="noopener"
>https://kubespray.io/#/docs/ansible?id=installing-ansible&lt;/a>&lt;/p>
&lt;p>使用python3創建虛擬目錄，安裝依賴包&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># python3 --version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Python 3.9.18
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># git clone https://github.com/kubernetes-sigs/kubespray.git&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># VENVDIR=kubespray-venv&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># KUBESPRAYDIR=kubespray&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># python3 -m venv $VENVDIR&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># source $VENVDIR/bin/activate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd $KUBESPRAYDIR&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># pip install -U -r requirements.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting &lt;span class="nv">ansible&lt;/span>&lt;span class="o">==&lt;/span>8.5.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading ansible-8.5.0-py3-none-any.whl &lt;span class="o">(&lt;/span>47.5 MB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 47.5/47.5 MB 4.0 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting &lt;span class="nv">cryptography&lt;/span>&lt;span class="o">==&lt;/span>41.0.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading cryptography-41.0.4-cp37-abi3-manylinux_2_17_x86_64.manylinux2014_x86_64.whl &lt;span class="o">(&lt;/span>4.4 MB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 4.4/4.4 MB 9.2 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting &lt;span class="nv">jinja2&lt;/span>&lt;span class="o">==&lt;/span>3.1.2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading Jinja2-3.1.2-py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">133&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 133.1/133.1 kB 9.1 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting &lt;span class="nv">jmespath&lt;/span>&lt;span class="o">==&lt;/span>1.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading jmespath-1.0.1-py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">20&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting &lt;span class="nv">MarkupSafe&lt;/span>&lt;span class="o">==&lt;/span>2.1.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading MarkupSafe-2.1.3-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl &lt;span class="o">(&lt;/span>&lt;span class="m">25&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting &lt;span class="nv">netaddr&lt;/span>&lt;span class="o">==&lt;/span>0.9.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading netaddr-0.9.0-py3-none-any.whl &lt;span class="o">(&lt;/span>2.2 MB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.2/2.2 MB 9.2 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting &lt;span class="nv">pbr&lt;/span>&lt;span class="o">==&lt;/span>5.11.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading pbr-5.11.1-py2.py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">112&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 112.7/112.7 kB 8.2 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting ruamel.yaml&lt;span class="o">==&lt;/span>0.17.35
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading ruamel.yaml-0.17.35-py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">112&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 112.9/112.9 kB 9.4 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting ruamel.yaml.clib&lt;span class="o">==&lt;/span>0.2.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading ruamel.yaml.clib-0.2.8-cp39-cp39-manylinux_2_5_x86_64.manylinux1_x86_64.whl &lt;span class="o">(&lt;/span>&lt;span class="m">562&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 562.1/562.1 kB 10.4 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting ansible-core~&lt;span class="o">=&lt;/span>2.15.5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading ansible_core-2.15.6-py3-none-any.whl &lt;span class="o">(&lt;/span>2.2 MB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 2.2/2.2 MB 9.3 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting cffi&amp;gt;&lt;span class="o">=&lt;/span>1.12
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading cffi-1.16.0-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl &lt;span class="o">(&lt;/span>&lt;span class="m">443&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 443.4/443.4 kB 9.7 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting importlib-resources&amp;lt;5.1,&amp;gt;&lt;span class="o">=&lt;/span>5.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading importlib_resources-5.0.7-py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">24&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting PyYAML&amp;gt;&lt;span class="o">=&lt;/span>5.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading PyYAML-6.0.1-cp39-cp39-manylinux_2_17_x86_64.manylinux2014_x86_64.whl &lt;span class="o">(&lt;/span>&lt;span class="m">738&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 738.9/738.9 kB 8.6 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting packaging
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading packaging-23.2-py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">53&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 53.0/53.0 kB 7.5 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting resolvelib&amp;lt;1.1.0,&amp;gt;&lt;span class="o">=&lt;/span>0.5.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading resolvelib-1.0.1-py2.py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">17&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Collecting pycparser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Downloading pycparser-2.21-py2.py3-none-any.whl &lt;span class="o">(&lt;/span>&lt;span class="m">118&lt;/span> kB&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 118.7/118.7 kB 8.6 MB/s eta 0:00:00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installing collected packages: resolvelib, netaddr, ruamel.yaml.clib, PyYAML, pycparser, pbr, packaging, MarkupSafe, jmespath, importlib-resources, ruamel.yaml, jinja2, cffi, cryptography, ansible-core, ansible
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Successfully installed MarkupSafe-2.1.3 PyYAML-6.0.1 ansible-8.5.0 ansible-core-2.15.6 cffi-1.16.0 cryptography-41.0.4 importlib-resources-5.0.7 jinja2-3.1.2 jmespath-1.0.1 netaddr-0.9.0 packaging-23.2 pbr-5.11.1 pycparser-2.21 resolvelib-1.0.1 ruamel.yaml-0.17.35 ruamel.yaml.clib-0.2.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>notice&lt;span class="o">]&lt;/span> A new release of pip is available: 23.0.1 -&amp;gt; 23.3.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>notice&lt;span class="o">]&lt;/span> To update, run: pip install --upgrade pip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="生成hostsyaml">生成hosts.yaml&lt;/h2>
&lt;p>&lt;a class="link" href="https://kubespray.io/#/?id=deploy-a-production-ready-kubernetes-cluster" target="_blank" rel="noopener"
>https://kubespray.io/#/?id=deploy-a-production-ready-kubernetes-cluster&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># cp -rfp inventory/sample inventory/mycluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># declare -a IPS=(192.168.1.71 192.168.1.72 192.168.1.73 192.168.1.75 192.168.1.76)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># CONFIG_FILE=inventory/mycluster/hosts.yaml python3 contrib/inventory_builder/inventory.py ${IPS[@]}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: Adding group all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: Adding group kube_control_plane
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: Adding group kube_node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: Adding group etcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: Adding group k8s_cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: Adding group calico_rr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node1 to group all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node2 to group all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node3 to group all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node4 to group all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node5 to group all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node1 to group etcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node2 to group etcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node3 to group etcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node1 to group kube_control_plane
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node2 to group kube_control_plane
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node1 to group kube_node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node2 to group kube_node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node3 to group kube_node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node4 to group kube_node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">DEBUG: adding host node5 to group kube_node
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="修改allyml">修改all.yml&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">主要修改內容如下：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">VIP與domain_name設定
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">需要Proxy的可以設定
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim inventory/mycluster/group_vars/all/all.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiserver_loadbalancer_domain_name: &lt;span class="s2">&amp;#34;k8s-apiserver-lb.jimmyhome.tw&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loadbalancer_apiserver:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> address: 192.168.1.74
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: &lt;span class="m">7443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Set these proxy values in order to update package manager and docker daemon to use proxies and custom CA for https_proxy if needed&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># http_proxy: &amp;#34;http://x.x.x.x:3128&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https_proxy: &amp;#34;http://x.x.x.x:3128&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https_proxy_cert_file: &amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Refer to roles/kubespray-defaults/defaults/main.yml before modifying no_proxy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># no_proxy: &amp;#34;127.0.0.0/8,10.0.0.0/8,172.16.0.0/12,192.168.0.0/16,cattle-system.svc,.svc,.cluster.local,k8s-apiserver-lb.jimmyhome.tw&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="修改k8s-clusteryml">修改k8s-cluster.yml&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">主要修改內容如下：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">要安裝的kubernetes版本
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service ip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod ip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">network_node_prefix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">容器引擎，我這裡使用docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">是否憑證自動更新(每個月月初，會自動更新)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim inventory/mycluster/group_vars/k8s_cluster/k8s-cluster.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Change this to use another Kubernetes version, e.g. a current beta release&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube_version: v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Kubernetes internal network for services, unused block of space.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube_service_addresses: 10.202.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># internal network. When used, it will assign IP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># addresses from this range to individual pods.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This network must be unused in your network infrastructure!&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube_pods_subnet: 10.201.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube_network_node_prefix: &lt;span class="m">16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Container runtime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## docker for docker, crio for cri-o and containerd for containerd.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Default: containerd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">container_manager: docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Automatically renew K8S control plane certificates on first Monday of each month&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto_renew_certificates: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="修改addonsyml">修改addons.yml&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">主要修改內容如下：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">安裝Nginx ingress
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">安裝helm工具
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">安裝metrics_server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim inventory/mycluster/group_vars/k8s_cluster/addons.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Nginx ingress controller deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress_nginx_enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress_nginx_host_network: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress_publish_status_address: &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ingress_nginx_nodeselector:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># kubernetes.io/os: &amp;#34;linux&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress_nginx_tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: &lt;span class="s2">&amp;#34;node-role.kubernetes.io/control-plane&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: &lt;span class="s2">&amp;#34;Equal&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> effect: &lt;span class="s2">&amp;#34;NoSchedule&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Helm deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">helm_enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Metrics Server deployment&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metrics_server_enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="修改mainyml">修改main.yml&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">主要修改內容如下：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">網路組件calico版本
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim roles/kubespray-defaults/vars/main.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico_min_version_required: &lt;span class="s2">&amp;#34;v3.26.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># cri-docker版本修改位置，有需要再改，這裡就依這個版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim roles/download/defaults/main/main.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cri_dockerd_version: 0.3.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># docker版本修改位置，有需要再改，這裡就依這個版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim roles/container-engine/docker/defaults/main.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker_version: &lt;span class="s1">&amp;#39;20.10&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="修改hostsyaml">修改hosts.yaml&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">主要修改內容如下：
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">依據現況去填寫
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube_control_plane -&amp;gt; master節點(會有不能調度污點)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube_node -&amp;gt; worker節點
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd -&amp;gt; 數據庫節點
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># cat inventory/mycluster/hosts.yaml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">all:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-master71u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ansible_host: k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: 192.168.1.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> access_ip: 192.168.1.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-master72u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ansible_host: k8s-master72u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: 192.168.1.72
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> access_ip: 192.168.1.72
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-master73u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ansible_host: k8s-master73u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: 192.168.1.73
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> access_ip: 192.168.1.73
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-node75u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ansible_host: k8s-node75u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: 192.168.1.75
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> access_ip: 192.168.1.75
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-node76u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ansible_host: k8s-node76u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip: 192.168.1.76
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> access_ip: 192.168.1.76
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> children:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kube_control_plane:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-master71u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-master72u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-master73u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kube_node:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-node75u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-node76u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> etcd:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-master71u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-master72u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s-master73u:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> k8s_cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> children:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kube_control_plane:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kube_node:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> calico_rr:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts: &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="安裝配置haproxykeepalived">安裝配置haproxy、keepalived&lt;/h2>
&lt;p>操作節點： 所有的master&lt;/p>
&lt;p>注意：如果有兩個集群，都在同一網段內，/etc/keepalived/keepalived.conf裡面的virtual_router_id 60記得要不一樣，不然/var/log/message會一直報錯。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# apt-get install keepalived haproxy -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 所有master節點執行,注意替換最後的master節點IP地址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat /etc/haproxy/haproxy.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">global
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> maxconn &lt;span class="m">2000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ulimit-n &lt;span class="m">16384&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log 127.0.0.1 local0 err
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stats timeout 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">defaults
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log global
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mode http
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option httplog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout connect &lt;span class="m">5000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout client &lt;span class="m">50000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout server &lt;span class="m">50000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout http-request 15s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout http-keep-alive 15s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">frontend monitor-in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">bind&lt;/span> *:33305
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mode http
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option httplog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> monitor-uri /monitor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">frontend k8s-master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">bind&lt;/span> 0.0.0.0:7443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">bind&lt;/span> 127.0.0.1:7443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mode tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option tcplog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tcp-request inspect-delay 5s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default_backend k8s-master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">backend k8s-master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mode tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option tcplog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option tcp-check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> balance roundrobin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default-server inter 10s downinter 5s rise &lt;span class="m">2&lt;/span> fall &lt;span class="m">2&lt;/span> slowstart 60s maxconn &lt;span class="m">250&lt;/span> maxqueue &lt;span class="m">256&lt;/span> weight &lt;span class="m">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server k8s-master71u 192.168.1.71:6443 check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server k8s-master72u 192.168.1.72:6443 check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server k8s-master73u 192.168.1.73:6443 check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 在k8s-master71u節點，注意mcast_src_ip換成實際的master1ip地址，virtual_ipaddress換成lb地址，interface要替換成主機IP使用的介面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat /etc/keepalived/keepalived.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">! Configuration File &lt;span class="k">for&lt;/span> keepalived
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">global_defs &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> router_id LVS_DEVEL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">script_user root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enable_script_security
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vrrp_script chk_apiserver &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> script &lt;span class="s2">&amp;#34;/etc/keepalived/check_apiserver.sh&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> interval &lt;span class="m">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> weight -5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fall &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rise &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vrrp_instance VI_1 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> state MASTER
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> interface ens160
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mcast_src_ip 192.168.1.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> virtual_router_id &lt;span class="m">64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> priority &lt;span class="m">101&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> advert_int &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> authentication &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> auth_type PASS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> auth_pass K8SHA_KA_AUTH
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> virtual_ipaddress &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 192.168.1.74
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> track_script &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> chk_apiserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 在k8s-master72u和k8s-master73u分別創建/etc/keepalived/keepalived.conf，注意修改mcast_src_ip和virtual_ipaddress&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#所有master節點配置KeepAlived健康檢查文件：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@ck8s-p-4faj09-24:~# vim /etc/keepalived/check_apiserver.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">err&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> k in &lt;span class="k">$(&lt;/span>seq &lt;span class="m">1&lt;/span> 3&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">check_code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>pgrep haproxy&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$check_code&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">err&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>expr &lt;span class="nv">$err&lt;/span> + 1&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">err&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$err&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;0&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;systemctl stop keepalived&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /usr/bin/systemctl stop keepalived
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 啟動haproxy和keepalived----&amp;gt;所有master節點&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# chmod +x /etc/keepalived/check_apiserver.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl &lt;span class="nb">enable&lt;/span> --now haproxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl &lt;span class="nb">enable&lt;/span> --now keepalived
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl restart haproxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl restart keepalived
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl status haproxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl status keepalived
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 測試lbip是否生效(從worker節點測試的)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# telnet 192.168.1.74 &lt;span class="m">7443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Trying 192.168.1.74...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connected to 192.168.1.74.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Escape character is &lt;span class="s1">&amp;#39;^]&amp;#39;&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connection closed by foreign host.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="佈屬主機etchosts填寫">佈屬主機/etc/hosts填寫&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># vim /etc/hosts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.71 k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.72 k8s-master72u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.73 k8s-master73u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.75 k8s-node75u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.76 k8s-node76u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>將key推送至要佈屬的主機&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># ssh-copy-id k8s-master71u&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># ssh-copy-id k8s-master72u&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># ssh-copy-id k8s-master73u&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># ssh-copy-id k8s-node75u&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># ssh-copy-id k8s-node76u&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="開始佈屬">開始佈屬&lt;/h2>
&lt;p>中間如果有突然報錯中斷，查看報錯訊息，調整一下，再次執行佈屬即可&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># ansible-playbook -i inventory/mycluster/hosts.yaml --become --become-user=root cluster.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PLAY RECAP *****************************************************************************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master71u : &lt;span class="nv">ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">746&lt;/span> &lt;span class="nv">changed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">145&lt;/span> &lt;span class="nv">unreachable&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">failed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">skipped&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1288&lt;/span> &lt;span class="nv">rescued&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ignored&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master72u : &lt;span class="nv">ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">643&lt;/span> &lt;span class="nv">changed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">130&lt;/span> &lt;span class="nv">unreachable&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">failed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">skipped&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1138&lt;/span> &lt;span class="nv">rescued&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ignored&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master73u : &lt;span class="nv">ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">645&lt;/span> &lt;span class="nv">changed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">131&lt;/span> &lt;span class="nv">unreachable&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">failed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">skipped&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1136&lt;/span> &lt;span class="nv">rescued&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ignored&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node75u : &lt;span class="nv">ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">467&lt;/span> &lt;span class="nv">changed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">79&lt;/span> &lt;span class="nv">unreachable&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">failed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">skipped&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">794&lt;/span> &lt;span class="nv">rescued&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ignored&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node76u : &lt;span class="nv">ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">467&lt;/span> &lt;span class="nv">changed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">79&lt;/span> &lt;span class="nv">unreachable&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">failed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">skipped&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">793&lt;/span> &lt;span class="nv">rescued&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ignored&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localhost : &lt;span class="nv">ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">3&lt;/span> &lt;span class="nv">changed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">unreachable&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">failed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">skipped&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">rescued&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ignored&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">週日 &lt;span class="m">03&lt;/span> 十二月 &lt;span class="m">2023&lt;/span> 22:56:39 +0800 &lt;span class="o">(&lt;/span>0:00:01.997&lt;span class="o">)&lt;/span> 0:44:07.257 ****************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">===============================================================================&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">download : Download_file &lt;span class="p">|&lt;/span> Download item -------------------------------------------------------------------------------------- 114.13s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">container-engine/docker : Ensure docker packages are installed ----------------------------------------------------------------- 80.93s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">download : Download_file &lt;span class="p">|&lt;/span> Download item --------------------------------------------------------------------------------------- 59.73s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">download : Download_container &lt;span class="p">|&lt;/span> Download image &lt;span class="k">if&lt;/span> required --------------------------------------------------------------------- 50.88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">download : Download_container &lt;span class="p">|&lt;/span> Download image &lt;span class="k">if&lt;/span> required --------------------------------------------------------------------- 47.73s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubernetes/preinstall : Preinstall &lt;span class="p">|&lt;/span> &lt;span class="nb">wait&lt;/span> &lt;span class="k">for&lt;/span> the apiserver to be running ------------------------------------------------------ 46.30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">download : Download_file &lt;span class="p">|&lt;/span> Download item --------------------------------------------------------------------------------------- 44.36s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">container-engine/crictl : Download_file &lt;span class="p">|&lt;/span> Download item ------------------------------------------------------------------------ 42.56s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubernetes/preinstall : Install packages requirements -------------------------------------------------------------------------- 37.19s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubernetes/control-plane : Joining control plane node to the cluster. ---------------------------------------------------------- 34.16s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">container-engine/cri-dockerd : Download_file &lt;span class="p">|&lt;/span> Download item ------------------------------------------------------------------- 31.95s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">download : Download_file &lt;span class="p">|&lt;/span> Download item --------------------------------------------------------------------------------------- 31.86s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">download : Download_container &lt;span class="p">|&lt;/span> Download image &lt;span class="k">if&lt;/span> required --------------------------------------------------------------------- 30.03s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">container-engine/validate-container-engine : Populate service facts ------------------------------------------------------------ 27.13s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubernetes/control-plane : Kubeadm &lt;span class="p">|&lt;/span> Initialize first master ------------------------------------------------------------------- 26.53s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">download : Download_container &lt;span class="p">|&lt;/span> Download image &lt;span class="k">if&lt;/span> required --------------------------------------------------------------------- 24.24s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">download : Download_file &lt;span class="p">|&lt;/span> Download item --------------------------------------------------------------------------------------- 23.99s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">download : Download_container &lt;span class="p">|&lt;/span> Download image &lt;span class="k">if&lt;/span> required --------------------------------------------------------------------- 23.34s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">download : Download_container &lt;span class="p">|&lt;/span> Download image &lt;span class="k">if&lt;/span> required --------------------------------------------------------------------- 21.88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubernetes/kubeadm : Join to cluster ------------------------------------------------------------------------------------------- 21.07s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="功能驗證">功能驗證&lt;/h2>
&lt;h3 id="命令補全">命令補全&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 命令補全&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;source &amp;lt;(kubectl completion bash)&amp;#34;&lt;/span> &amp;gt;&amp;gt; /etc/profile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">source&lt;/span> /etc/profile
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="etchosts">/etc/hosts&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1 localhost localhost.localdomain
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.1.1 k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The following lines are desirable for IPv6 capable hosts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">::1 ip6-localhost ip6-loopback localhost6 localhost6.localdomain
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fe00::0 ip6-localnet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ff00::0 ip6-mcastprefix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ff02::1 ip6-allnodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ff02::2 ip6-allrouters
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ansible inventory hosts BEGIN&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.71 k8s-master71u.cluster.local k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.72 k8s-master72u.cluster.local k8s-master72u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.73 k8s-master73u.cluster.local k8s-master73u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.75 k8s-node75u.cluster.local k8s-node75u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.76 k8s-node76u.cluster.local k8s-node76u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ansible inventory hosts END&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.74 k8s-apiserver-lb.jimmyhome.tw
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="連線配置文件config">連線配置文件(config)&lt;/h3>
&lt;p>可以看到，都是用VIP的domain name，
k8s-apiserver-lb.jimmyhome.tw&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat .kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusters:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> certificate-authority-data: &lt;span class="nv">LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMvakNDQWVhZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJek1USXdNekUwTkRVME9Wb1hEVE16TVRFek1ERTBORFUwT1Zvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTHovCmVJQmpqY2xCd3ZtTWV2YlhsaDV4ZW1HcjVxRlBlRkxsMGhQcERGaW1lcHFGREJkZWl0V0ppTmdGSUFVa3JzaE0KdkdtdXVjNy9mMGt5UUFGVFprTDBzUFI3QUlnbHlyeS9Hc0M1dzRZUEdYTHVpZmRoUGczM09QREdTSWNCejRYMAoyNU1aR1hEcWU2TzhTS2JyOFZidnpNVkxBK1JjbldQVTNIOGR2Znd6N2FxY0N3MlRwdFFxU1VnbVhzS1Z0ZTIzCmgrUGJDMW90OUU0UTYzYXFGQmRWei91aGJ4VHVFYm8wb1c5T3p3c2V1RTJLMzQ0RE1qZWxvZy9rMVdNeFA2OGwKYWRuOC9MbkdPNUJtTlp2UUZ6Q05kaXFkcm1YdXRubUk5N3BYY0dyN0tIdzYzYzZ2dTZ5aGZHMXNjRjg3WG40bQpLZmo5eDRDQ0cvVUJWc2RIV1lzQ0F3RUFBYU5aTUZjd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZFK0lJS2NBcTBLbVl3SUpFYjJDWER4VHFibXhNQlVHQTFVZEVRUU8KTUF5Q0NtdDFZbVZ5Ym1WMFpYTXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBRWF3SmEwaEVCZmJ5VG1UazlORQoweGZYUm12SnYrOGpZSlVIZExENmkvYXppQnpKMUNPUlRKKzUxbVYrWmNIZFJWbDE3UkNOZDY4MU9RMkRFWkhWCi83aVphSGxvYldNM3cvUjAxSzdXZm4yQUJsQ09lVkU3d3RKOUc0VEMzK2FVNEhaZFhsdlNLSkt6Y0oxbjZ2V04KMjErbUp1UHdLQXlJTVZEYVB6OGx2QVhxbDR2elBGWTRUd1k1OWlORVZYaFBuUHBiOWhiUGVxTUtSMG80UFBTMgp2YmNlOGw5R016aVpEaEQxb0RDSXBacGE5VzVneXFYdDBTbXk3RVJBWkx2V1N3ZHVrVnJoMXcrWVh3TEFzajF6CkZhNGJKWDExOGdQT3JUVi8rYTNXZXVpYk5JOFNNZm5KSXhHTVduUkpEemVwYW1oUUdiZmtFT3BzdHpRQms2ZGoKd0QwPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server: https://k8s-apiserver-lb.jimmyhome.tw:7443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: cluster.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">contexts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- context:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster: cluster.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> user: kubernetes-admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: kubernetes-admin@cluster.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">current-context: kubernetes-admin@cluster.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">preferences: &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">users:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- name: kubernetes-admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> user:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client-certificate-data: &lt;span class="nv">LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURJVENDQWdtZ0F3SUJBZ0lJSjc2UTFQWXh4Zm93RFFZSktvWklodmNOQVFFTEJRQXdGVEVUTUJFR0ExVUUKQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TXpFeU1ETXhORFExTkRsYUZ3MHlOREV5TURJeE5EUTFOVEphTURReApGekFWQmdOVkJBb1REbk41YzNSbGJUcHRZWE4wWlhKek1Sa3dGd1lEVlFRREV4QnJkV0psY201bGRHVnpMV0ZrCmJXbHVNSUlCSWpBTkJna3Foa2lHOXcwQkFRRUZBQU9DQVE4QU1JSUJDZ0tDQVFFQXVOK0pkMHE1T0xnWVlhaE0Kdnp4YTB0M2E5U2psdTZTZzFUWW5TbE5LRTBYeEQrOTErUmhpV0dUc2o3RlhhNmpLSkd2WE1FT1ZWUVN4UktrQQpwNE8ybDM5L3gyUDlPQ3dZWEovZEJCRFRIQUZBdWNzYWRoa0VjV3gvbnNVZWZQUE44cWxNV3YrN1B3clRzQUpFCmJBalZYSEVERVhDM3VVN2ZWM3lHaEJWVnRHZ29mOFdMdEluN3k3b2ozbnUxbldPY1ZVQ0dhQ09ncXNPdURERGQKVms0QUpyWnFWTWllUDAvWkk0YjhuMkJkZHREbUIyRVl5NmpsZ1M5eVIyYk5nVnNjaW0zMS9MTjQxWEI1YnViYQptbzAyWWIzcE5QN3VzYmtRZndNalhPZ1VrM3U2dks2Ky9hSzQ4WWhndUZvWi9wUVR2ejJtUUpKeldWU2dvYW9mCk5VTTdzUUlEQVFBQm8xWXdWREFPQmdOVkhROEJBZjhFQkFNQ0JhQXdFd1lEVlIwbEJBd3dDZ1lJS3dZQkJRVUgKQXdJd0RBWURWUjBUQVFIL0JBSXdBREFmQmdOVkhTTUVHREFXZ0JSUGlDQ25BS3RDcG1NQ0NSRzlnbHc4VTZtNQpzVEFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBbHQwNXJSVkhhc25GTjh6ZlJDUXVOT2hSKzhxNW5tRnNXU0pUCnFIeW92Uys2NFBkRzBJU21jSTYvanVhTmU1ZzhHdENkTlZoMmVSendLakxZZHc0RGZCUXBTTWh5UEYxZlFLYzEKMmthS2twTzh1MjQ4alZscitaQTV3Q2FaeWh3Qy8yTFFIdGxpdjZnWFNXTjZoNU5IUjNQdzhuWFBJMXQ5Q3JsegpUTCtQcFI3Ti9UUXczOWJqOUgrU0RuZTh2eVNoSVBCeXIzbzhSYXA4K3RMZVF6eVMwWWZNU1BTVnJKZjJMVFFwCnBhaWEyYVF5MVRUcXlicEQxODFsY2RzYzZxOU16cVlseE9zdE5QdG1ES3BTNFdsdFE3bDlLZVVLKzhtdmh0TWwKZXRVZ3lleXdPWmdIcUsrd0lLaC9aMzJScG1LODlub05vOHJWTHdvTGxkMjRFSXpDbmc9PQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client-key-data: &lt;span class="nv">LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFcEFJQkFBS0NBUUVBdU4rSmQwcTVPTGdZWWFoTXZ6eGEwdDNhOVNqbHU2U2cxVFluU2xOS0UwWHhEKzkxCitSaGlXR1RzajdGWGE2aktKR3ZYTUVPVlZRU3hSS2tBcDRPMmwzOS94MlA5T0N3WVhKL2RCQkRUSEFGQXVjc2EKZGhrRWNXeC9uc1VlZlBQTjhxbE1Xdis3UHdyVHNBSkViQWpWWEhFREVYQzN1VTdmVjN5R2hCVlZ0R2dvZjhXTAp0SW43eTdvajNudTFuV09jVlVDR2FDT2dxc091REREZFZrNEFKclpxVk1pZVAwL1pJNGI4bjJCZGR0RG1CMkVZCnk2amxnUzl5UjJiTmdWc2NpbTMxL0xONDFYQjVidWJhbW8wMlliM3BOUDd1c2JrUWZ3TWpYT2dVazN1NnZLNisKL2FLNDhZaGd1Rm9aL3BRVHZ6Mm1RSkp6V1ZTZ29hb2ZOVU03c1FJREFRQUJBb0lCQVFDY2J0SmtOYjk3SmhQRApkdVRTSU9EOWN5c1dyYStQVXVPZzVuemlvSTJhdDJFZXlkSjZuODUvMjQ1c25IUkxyZnkyU3VaQWViOS92RU8vCnhIM0FRV3ljenc4eGlnTTNwK0JKYUNCZGsxci9aSFAvZ3NQMlVINzQ5d1VhTk5QeWlWNm9TZWRKVFFHRmU4VGEKTjJEc1JhRTg0b2ZsRndydmE3VUMwMlVEbVFYM2E0YXBiMnVNRklMSnpHenJ4bmM0RDY1VHBwQUxwM2dYclo0YwpLRU5sU051dG03TVdza2JPUDB3UzJNNTk2U0R3LzNEQkQ5cVB4Y2ZsR0NyMGFDOFp6cGRUQnpiTjg4TzNORTVNClk3RFFsZHZaRHE0Q1h3QnhqSk9jN2Q1RE9VNWd2aHg5K1Y0NFZtWUNLMHV0UkFDaEliNC9lYlMweWw0U1ZMSnIKV0NUMDVwV1JBb0dCQU0xZEMzNkM5WVFZZDVDRng3Q2Q4TXlUUVY3NnppNXVlMUFiWmtPM1FRcmJ3QVR6UG9RdApsNm1vOUF6dVpHUnpreXVBU1AwRW5XbWQ1QWd3N3MybWphbTRDYndnK21xaFFpUHBYaTYyay8rVjlJdCtycDVVCjNyeldteGZxNnVWZ0lUREdBSloyckVpOVB4Q091RU1JdEw3VHJRbnBVTWVBZjZXbTdyb3VlVVQxQW9HQkFPWjEKR3ZHK0ZVVGxVL3d5WlJmOTRSOUlRQVBrM05tSHhua1JQUENtb2xXYUNNZWRmK2JvaVZlQnJka2NCQ2RRYW1TYwpReERBTW4wekVjMVQyT0E4d1BoTDJaYWd0L2FEU1dsS1RsdFF2SUNhUy94TUx3UmFGQXlJQkE3a3JOUk42TWdYCkViM093Z3FETmZkNXFIODRxMW1NbzVRVzBRVGNaL1VDb2ZLcEpNWk5Bb0dBVkJ1TWJwY0NLTVRBaTA5UE5yV28KL3BBODBNS1ZtUXlrc20xV1Y5dUE1d3FUUFRQR1llb3VXRTBiRHdTLzF5aENtU2xrTzBRZG1Ea1RRSXVSOG1ZSgpWUDVMOW1IblRhNlg0UTllQkhIQWNZZ2Y3TlhJZkk0ejMxRmhtYzBid1MrNnlEZi8yNS9rOWJHVVY1cXNPc0FoCkRwcXhId01RazNTOFVzTG91Ulg1a3RVQ2dZRUFrSGhCRitMTmVvODVBeFNrZzFISVdzLzBNWHk3WmpMVG5Qbk4KZGg5QURPR3ZOMVBvNWx4SUhPOVNpSlFqbG5HM0FMTms1NDlWRjE5NGZYdGVyZFBvTkw5My9CRnN3Y0N6dUttNApUVTVqblVzYzcyRGk2SnQvamd1R1g3L0RDS1IrbFZEQThuZzI5RmdrOEtyM2tpbDRZWDdrM09VZ3l5ZFFsQ3UrClVsenVqTkVDZ1lCZW1xaWowMjBXQVFkTWZnbnRtVk9keWVybC9IZmxhZDQwRkw2cU8wRytDRWtlSXdpZkRnVU8Kc3FIOWFRR1p3NzY4STZDUmJPYlhJMzZueHhtVXRQdFY0TllqTGFoU0lySGhEeVI5VGhvL2o3bnh3NnMyVXRwOQpLbVZlb1dtT3JGcS9LVGJHK055MU15dHpaUWhRYzJBV1oyamxDcDVaVm8ycGo0aWF1Q2I0K0E9PQotLS0tLUVORCBSU0EgUFJJVkFURSBLRVktLS0tLQo&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="節點ready">節點Ready&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get nodes -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION INTERNAL-IP EXTERNAL-IP OS-IMAGE KERNEL-VERSION CONTAINER-RUNTIME
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master71u Ready control-plane 12m v1.26.3 192.168.1.71 &amp;lt;none&amp;gt; Ubuntu 22.04.3 LTS 5.15.0-84-generic docker://20.10.20
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master72u Ready control-plane 12m v1.26.3 192.168.1.72 &amp;lt;none&amp;gt; Ubuntu 22.04.3 LTS 5.15.0-84-generic docker://20.10.20
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master73u Ready control-plane 12m v1.26.3 192.168.1.73 &amp;lt;none&amp;gt; Ubuntu 22.04.3 LTS 5.15.0-84-generic docker://20.10.20
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node75u Ready &amp;lt;none&amp;gt; 11m v1.26.3 192.168.1.75 &amp;lt;none&amp;gt; Ubuntu 22.04.3 LTS 5.15.0-84-generic docker://20.10.20
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node76u Ready &amp;lt;none&amp;gt; 10m v1.26.3 192.168.1.76 &amp;lt;none&amp;gt; Ubuntu 22.04.3 LTS 5.15.0-84-generic docker://20.10.20
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="master都有污點">master都有污點&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get nodes k8s-master71u -o yaml &lt;span class="p">|&lt;/span> grep -i -A &lt;span class="m">2&lt;/span> taint
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> taints:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: node-role.kubernetes.io/control-plane
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get nodes k8s-master72u -o yaml &lt;span class="p">|&lt;/span> grep -i -A &lt;span class="m">2&lt;/span> taint
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> taints:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: node-role.kubernetes.io/control-plane
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get nodes k8s-master73u -o yaml &lt;span class="p">|&lt;/span> grep -i -A &lt;span class="m">2&lt;/span> taint
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> taints:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: node-role.kubernetes.io/control-plane
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="helm有安裝">helm有安裝&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# helm version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version.BuildInfo&lt;span class="o">{&lt;/span>Version:&lt;span class="s2">&amp;#34;v3.13.1&amp;#34;&lt;/span>, GitCommit:&lt;span class="s2">&amp;#34;3547a4b5bf5edb5478ce352e18858d8a552a4110&amp;#34;&lt;/span>, GitTreeState:&lt;span class="s2">&amp;#34;clean&amp;#34;&lt;/span>, GoVersion:&lt;span class="s2">&amp;#34;go1.20.8&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="所有pod都running">所有POD都Running&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -A -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress-nginx ingress-nginx-controller-46rbx 1/1 Running &lt;span class="m">0&lt;/span> 8m16s 192.168.1.75 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress-nginx ingress-nginx-controller-7ccdp 1/1 Running &lt;span class="m">0&lt;/span> 8m16s 192.168.1.72 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress-nginx ingress-nginx-controller-fqvxb 1/1 Running &lt;span class="m">0&lt;/span> 8m16s 192.168.1.71 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress-nginx ingress-nginx-controller-hjbv7 1/1 Running &lt;span class="m">0&lt;/span> 8m16s 192.168.1.73 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress-nginx ingress-nginx-controller-hlkh8 1/1 Running &lt;span class="m">0&lt;/span> 8m16s 192.168.1.76 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system calico-kube-controllers-777ff6cddb-d4htx 1/1 Running &lt;span class="m">0&lt;/span> 8m31s 10.201.14.129 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system calico-node-4qhfj 1/1 Running &lt;span class="m">0&lt;/span> 9m56s 192.168.1.72 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system calico-node-9wrql 1/1 Running &lt;span class="m">0&lt;/span> 9m56s 192.168.1.76 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system calico-node-9xzmn 1/1 Running &lt;span class="m">0&lt;/span> 9m56s 192.168.1.75 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system calico-node-m975z 1/1 Running &lt;span class="m">0&lt;/span> 9m56s 192.168.1.73 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system calico-node-s9w4x 1/1 Running &lt;span class="m">0&lt;/span> 9m56s 192.168.1.71 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system coredns-57c7559cc8-sq8c4 1/1 Running &lt;span class="m">0&lt;/span> 7m39s 10.201.96.1 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system coredns-57c7559cc8-vrf7g 1/1 Running &lt;span class="m">0&lt;/span> 7m47s 10.201.133.1 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system dns-autoscaler-9875c9b44-9x7cg 1/1 Running &lt;span class="m">0&lt;/span> 7m43s 10.201.126.1 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-apiserver-k8s-master71u 1/1 Running &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>3m18s ago&lt;span class="o">)&lt;/span> 13m 192.168.1.71 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-apiserver-k8s-master72u 1/1 Running &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>3m18s ago&lt;span class="o">)&lt;/span> 12m 192.168.1.72 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-apiserver-k8s-master73u 1/1 Running &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>3m18s ago&lt;span class="o">)&lt;/span> 11m 192.168.1.73 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-controller-manager-k8s-master71u 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>3m49s ago&lt;span class="o">)&lt;/span> 13m 192.168.1.71 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-controller-manager-k8s-master72u 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>3m49s ago&lt;span class="o">)&lt;/span> 12m 192.168.1.72 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-controller-manager-k8s-master73u 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>3m49s ago&lt;span class="o">)&lt;/span> 12m 192.168.1.73 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-6rz9s 1/1 Running &lt;span class="m">0&lt;/span> 11m 192.168.1.76 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-jqvw9 1/1 Running &lt;span class="m">0&lt;/span> 11m 192.168.1.75 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-mtclv 1/1 Running &lt;span class="m">0&lt;/span> 11m 192.168.1.73 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-rsv52 1/1 Running &lt;span class="m">0&lt;/span> 11m 192.168.1.71 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-proxy-vmnwj 1/1 Running &lt;span class="m">0&lt;/span> 11m 192.168.1.72 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-scheduler-k8s-master71u 1/1 Running &lt;span class="m">1&lt;/span> 13m 192.168.1.71 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-scheduler-k8s-master72u 1/1 Running &lt;span class="m">1&lt;/span> 12m 192.168.1.72 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system kube-scheduler-k8s-master73u 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>3m34s ago&lt;span class="o">)&lt;/span> 11m 192.168.1.73 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system metrics-server-694db59894-4hfz5 1/1 Running &lt;span class="m">0&lt;/span> 6m19s 10.201.255.193 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system nodelocaldns-5kb8v 1/1 Running &lt;span class="m">0&lt;/span> 7m40s 192.168.1.72 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system nodelocaldns-894wn 1/1 Running &lt;span class="m">0&lt;/span> 7m40s 192.168.1.71 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system nodelocaldns-lkmlx 1/1 Running &lt;span class="m">0&lt;/span> 7m40s 192.168.1.75 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system nodelocaldns-q9q9s 1/1 Running &lt;span class="m">0&lt;/span> 7m40s 192.168.1.73 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system nodelocaldns-qgrqs 1/1 Running &lt;span class="m">0&lt;/span> 7m40s 192.168.1.76 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="佈屬kubernetes的yaml">佈屬kubernetes的yaml&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# ll /etc/kubernetes/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">412&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">5&lt;/span> kube root &lt;span class="m">4096&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 ./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">105&lt;/span> root root &lt;span class="m">8192&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:44 ../
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">4&lt;/span> root root &lt;span class="m">49&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:52 addons/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">5669&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 admin.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1290&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:49 calico-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">550&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:49 calico-crb.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">4227&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:49 calico-cr.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">159&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:49 calico-ipamconfig.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1581&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:50 calico-kube-controllers.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">301&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:50 calico-kube-crb.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1733&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:50 calico-kube-cr.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">107&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:50 calico-kube-sa.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">197&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:49 calico-node-sa.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">11091&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:49 calico-node.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">5701&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:47 controller-manager.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">5684&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 &lt;span class="s1">&amp;#39;controller-manager.conf.15377.2023-12-03@14:47:03~&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">451&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 coredns-clusterrolebinding.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">473&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 coredns-clusterrole.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">601&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 coredns-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">3130&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 coredns-deployment.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">190&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 coredns-sa.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">591&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 coredns-svc.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">959&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 dns-autoscaler-clusterrolebinding.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1150&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 dns-autoscaler-clusterrole.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">763&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 dns-autoscaler-sa.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">2569&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 dns-autoscaler.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">219969&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:49 kdd-crds.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r----- &lt;span class="m">1&lt;/span> root root &lt;span class="m">3906&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 kubeadm-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">469&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:26 kubeadm-images.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">2017&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:46 kubelet.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">793&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 kubelet-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">513&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:44 kubelet.env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">113&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:49 kubernetes-services-endpoint.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">199&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 kubescheduler-config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">2&lt;/span> kube root &lt;span class="m">96&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 manifests/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r----- &lt;span class="m">1&lt;/span> root root &lt;span class="m">408&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:47 node-crb.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1035&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 nodelocaldns-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">2661&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 nodelocaldns-daemonset.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">149&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 nodelocaldns-sa.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx &lt;span class="m">1&lt;/span> root root &lt;span class="m">19&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:14 pki -&amp;gt; /etc/kubernetes/ssl/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">5649&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:47 scheduler.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">5632&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 &lt;span class="s1">&amp;#39;scheduler.conf.15389.2023-12-03@14:47:04~&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">2&lt;/span> root root &lt;span class="m">4096&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 ssl/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="master組件yaml">master組件yaml&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# ll /etc/kubernetes/manifests/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">20&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">2&lt;/span> kube root &lt;span class="m">96&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 ./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">5&lt;/span> kube root &lt;span class="m">4096&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 ../
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">4727&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 kube-apiserver.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">3757&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 kube-controller-manager.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1698&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 kube-scheduler.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# calicoctl get ippool -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CIDR NAT IPIPMODE VXLANMODE DISABLED DISABLEBGPEXPORT SELECTOR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">default-pool 10.201.0.0/16 &lt;span class="nb">true&lt;/span> Never Always &lt;span class="nb">false&lt;/span> &lt;span class="nb">false&lt;/span> all&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="測試創建pod">測試創建POD&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl run test-nginx --image&lt;span class="o">=&lt;/span>nginx:alpine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/test-nginx created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">test-nginx 1/1 Running &lt;span class="m">0&lt;/span> 10s 10.201.14.130 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# curl 10.201.14.130
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;!DOCTYPE html&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;html&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;head&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;title&amp;gt;Welcome to nginx!&amp;lt;/title&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;style&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">html &lt;span class="o">{&lt;/span> color-scheme: light dark&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">body &lt;span class="o">{&lt;/span> width: 35em&lt;span class="p">;&lt;/span> margin: &lt;span class="m">0&lt;/span> auto&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">font-family: Tahoma, Verdana, Arial, sans-serif&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/style&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/head&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;body&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;h1&amp;gt;Welcome to nginx!&amp;lt;/h1&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;p&amp;gt;If you see this page, the nginx web server is successfully installed and
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">working. Further configuration is required.&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;p&amp;gt;For online documentation and support please refer to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;a &lt;span class="nv">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://nginx.org/&amp;#34;&lt;/span>&amp;gt;nginx.org&amp;lt;/a&amp;gt;.&amp;lt;br/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Commercial support is available at
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;a &lt;span class="nv">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://nginx.com/&amp;#34;&lt;/span>&amp;gt;nginx.com&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Thank you &lt;span class="k">for&lt;/span> using nginx.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/body&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/html&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="測試deploymentserviceingress">測試Deployment、Service、Ingress&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat deployment2.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: apps/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: web2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: web2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchLabels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: web2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: web2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - image: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl apply -f deployment2.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat service2.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: web2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: web2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - port: &lt;span class="m">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> protocol: TCP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> targetPort: &lt;span class="m">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: web2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: NodePort
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl apply -f service2.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat ingress.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: networking.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Ingress
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: web2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ingressClassName: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - host: web2.jimmyhome.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> http:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> paths:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - backend:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> service:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: web2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> number: &lt;span class="m">80&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pathType: Prefix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl apply -f ingress.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod,svc,ingress -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/test-nginx 1/1 Running &lt;span class="m">0&lt;/span> 3m1s 10.201.14.130 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/web2-5d48fb75c5-dt5xd 1/1 Running &lt;span class="m">0&lt;/span> 113s 10.201.255.195 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/web2-5d48fb75c5-ggmrz 1/1 Running &lt;span class="m">0&lt;/span> 113s 10.201.14.131 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/web2-5d48fb75c5-jsvck 1/1 Running &lt;span class="m">0&lt;/span> 113s 10.201.255.194 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE SELECTOR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/kubernetes ClusterIP 10.202.0.1 &amp;lt;none&amp;gt; 443/TCP 22m &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/web2 NodePort 10.202.72.45 &amp;lt;none&amp;gt; 80:31568/TCP 82s &lt;span class="nv">app&lt;/span>&lt;span class="o">=&lt;/span>web2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CLASS HOSTS ADDRESS PORTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress.networking.k8s.io/web2 nginx web2.jimmyhome.tw &lt;span class="m">80&lt;/span> 56s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>以下都可以訪問nodeport
http://192.168.1.71:31568/
http://192.168.1.72:31568/
http://192.168.1.73:31568/
http://192.168.1.74:31568/
http://192.168.1.75:31568/
http://192.168.1.76:31568/&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203230912.png"
width="811"
height="320"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203230912_hu7591cd073b9c65d38f1d9fab27b35a17_45566_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203230912_hu7591cd073b9c65d38f1d9fab27b35a17_45566_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="253"
data-flex-basis="608px"
>&lt;/p>
&lt;p>domain name也可以訪問，透過ingress-&amp;gt;service-&amp;gt;pod&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % sudo vim /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.75 web2.jimmyhome.tw
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203231115.png"
width="820"
height="311"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203231115_hu2f7b49825015a5877cf0de25ec8b551d_45442_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203231115_hu2f7b49825015a5877cf0de25ec8b551d_45442_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="263"
data-flex-basis="632px"
>&lt;/p>
&lt;h3 id="etcd服務">etcd服務&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl status etcd.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">● etcd.service - etcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Loaded: loaded &lt;span class="o">(&lt;/span>/etc/systemd/system/etcd.service&lt;span class="p">;&lt;/span> enabled&lt;span class="p">;&lt;/span> vendor preset: enabled&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active: active &lt;span class="o">(&lt;/span>running&lt;span class="o">)&lt;/span> since Sun 2023-12-03 14:43:39 UTC&lt;span class="p">;&lt;/span> 28min ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Main PID: &lt;span class="m">13409&lt;/span> &lt;span class="o">(&lt;/span>etcd&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Tasks: &lt;span class="m">14&lt;/span> &lt;span class="o">(&lt;/span>limit: 9387&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Memory: 117.0M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CPU: 51.716s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CGroup: /system.slice/etcd.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─13409 /usr/local/bin/etcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 14:55:55 k8s-master71u etcd&lt;span class="o">[&lt;/span>13409&lt;span class="o">]&lt;/span>: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;ts&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2023-12-03T14:55:55.63607Z&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;caller&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;mvcc/hash.go:137&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;storing new hash&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;hash&amp;#34;&lt;/span>:1201138327,&lt;span class="s2">&amp;#34;re&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 15:06:09 k8s-master71u etcd[13409]: {&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>info&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>ts&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2023-12-03T15:06:09.854317Z&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>caller&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>mvcc/index.go:214&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>msg&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>compact tree index&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>revision&lt;span class="s2">&amp;#34;:3724}
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 15:06:09 k8s-master71u etcd[13409]: {&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>info&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>ts&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2023-12-03T15:06:09.942986Z&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>caller&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>mvcc/kvstore_compaction.go:66&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>msg&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>finished scheduled compac&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 15:06:09 k8s-master71u etcd&lt;span class="o">[&lt;/span>13409&lt;span class="o">]&lt;/span>: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;ts&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2023-12-03T15:06:09.943036Z&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;caller&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;mvcc/hash.go:137&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;storing new hash&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;hash&amp;#34;&lt;/span>:2096861132,&lt;span class="s2">&amp;#34;r&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 15:07:01 k8s-master71u etcd[13409]: {&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>warn&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>ts&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2023-12-03T15:07:01.091549Z&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>caller&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>etcdserver/util.go:170&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>msg&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>apply request took too long&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>to&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 15:07:01 k8s-master71u etcd&lt;span class="o">[&lt;/span>13409&lt;span class="o">]&lt;/span>: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;ts&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2023-12-03T15:07:01.091613Z&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;caller&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;traceutil/trace.go:171&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;trace[2099372944] range&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;detail&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 15:07:02 k8s-master71u etcd[13409]: {&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>info&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>ts&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2023-12-03T15:07:02.663992Z&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>caller&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>traceutil/trace.go:171&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>msg&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>trace&lt;span class="o">[&lt;/span>1476779153&lt;span class="o">]&lt;/span> transaction&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 15:11:09 k8s-master71u etcd&lt;span class="o">[&lt;/span>13409&lt;span class="o">]&lt;/span>: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;ts&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2023-12-03T15:11:09.86509Z&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;caller&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;mvcc/index.go:214&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;compact tree index&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;revision&amp;#34;&lt;/span>:4506&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 15:11:09 k8s-master71u etcd&lt;span class="o">[&lt;/span>13409&lt;span class="o">]&lt;/span>: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;ts&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2023-12-03T15:11:09.890206Z&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;caller&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;mvcc/kvstore_compaction.go:66&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;finished scheduled compac&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 15:11:09 k8s-master71u etcd[13409]: {&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>info&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>ts&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2023-12-03T15:11:09.890258Z&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>caller&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>mvcc/hash.go:137&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>msg&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>storing new hash&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>hash&lt;span class="s2">&amp;#34;:2253005372,&amp;#34;&lt;/span>r&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="cri-dockerd服務">cri-dockerd服務&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl status cri-dockerd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">● cri-dockerd.service - CRI Interface &lt;span class="k">for&lt;/span> Docker Application Container Engine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Loaded: loaded &lt;span class="o">(&lt;/span>/etc/systemd/system/cri-dockerd.service&lt;span class="p">;&lt;/span> enabled&lt;span class="p">;&lt;/span> vendor preset: enabled&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active: active &lt;span class="o">(&lt;/span>running&lt;span class="o">)&lt;/span> since Sun 2023-12-03 14:25:01 UTC&lt;span class="p">;&lt;/span> 46min ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TriggeredBy: ● cri-dockerd.socket
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Docs: https://docs.mirantis.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Main PID: &lt;span class="m">8096&lt;/span> &lt;span class="o">(&lt;/span>cri-dockerd&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Tasks: &lt;span class="m">14&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Memory: 19.4M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CPU: 38.327s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CGroup: /system.slice/cri-dockerd.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─8096 /usr/local/bin/cri-dockerd --container-runtime-endpoint unix:///var/run/cri-dockerd.sock --cni-conf-dir&lt;span class="o">=&lt;/span>/etc/cni/net.d --cni-bin-dir&lt;span class="o">=&lt;/span>/opt/cni/bin -&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 14:51:41 k8s-master71u cri-dockerd&lt;span class="o">[&lt;/span>8096&lt;span class="o">]&lt;/span>: 2023-12-03 14:51:41.774 &lt;span class="o">[&lt;/span>INFO&lt;span class="o">][&lt;/span>21767&lt;span class="o">]&lt;/span> dataplane_linux.go 473: Disabling IPv4 forwarding &lt;span class="nv">ContainerID&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;b05ee1aac5d857271&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 14:51:41 k8s-master71u cri-dockerd[8096]: 2023-12-03 14:51:41.804 [INFO][21767] k8s.go 411: Added Mac, interface name, and active container ID to endpoint Conta&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 14:51:41 k8s-master71u cri-dockerd[8096]: 2023-12-03 14:51:41.825 [INFO][21767] k8s.go 489: Wrote updated endpoint to datastore ContainerID=&amp;#34;&lt;/span>b05ee1aac5d85727107&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 14:51:41 k8s-master71u cri-dockerd&lt;span class="o">[&lt;/span>8096&lt;span class="o">]&lt;/span>: &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2023-12-03T14:51:41Z&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Pulling image registry.k8s.io/ingress-nginx/controller:v1.9.4: 05535d57e64&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 14:51:51 k8s-master71u cri-dockerd[8096]: time=&amp;#34;&lt;/span>2023-12-03T14:51:51Z&lt;span class="s2">&amp;#34; level=info msg=&amp;#34;&lt;/span>Pulling image registry.k8s.io/ingress-nginx/controller:v1.9.4: 3da4cd537b4&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 14:51:52 k8s-master71u cri-dockerd&lt;span class="o">[&lt;/span>8096&lt;span class="o">]&lt;/span>: &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2023-12-03T14:51:52Z&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Will attempt to re-write config file /var/lib/docker/containers/e5ebeb0472&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 14:51:53 k8s-master71u cri-dockerd[8096]: time=&amp;#34;&lt;/span>2023-12-03T14:51:53Z&lt;span class="s2">&amp;#34; level=info msg=&amp;#34;&lt;/span>Stop pulling image registry.k8s.io/ingress-nginx/controller:v1.9.4: Status&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 14:55:33 k8s-master71u cri-dockerd&lt;span class="o">[&lt;/span>8096&lt;span class="o">]&lt;/span>: &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2023-12-03T14:55:33Z&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Docker cri received runtime config &amp;amp;RuntimeConfig{NetworkConfig:&amp;amp;NetworkCo&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 14:55:37 k8s-master71u cri-dockerd[8096]: time=&amp;#34;&lt;/span>2023-12-03T14:55:37Z&lt;span class="s2">&amp;#34; level=info msg=&amp;#34;&lt;/span>Will attempt to re-write config file /var/lib/docker/containers/f23d464928&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 14:56:08 k8s-master71u cri-dockerd&lt;span class="o">[&lt;/span>8096&lt;span class="o">]&lt;/span>: &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2023-12-03T14:56:08Z&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Will attempt to re-write config file /var/lib/docker/containers/651f69131d&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="kubelet服務">kubelet服務&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl status kubelet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">● kubelet.service - Kubernetes Kubelet Server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Loaded: loaded &lt;span class="o">(&lt;/span>/etc/systemd/system/kubelet.service&lt;span class="p">;&lt;/span> enabled&lt;span class="p">;&lt;/span> vendor preset: enabled&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active: active &lt;span class="o">(&lt;/span>running&lt;span class="o">)&lt;/span> since Sun 2023-12-03 14:55:33 UTC&lt;span class="p">;&lt;/span> 16min ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Docs: https://github.com/GoogleCloudPlatform/kubernetes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Main PID: &lt;span class="m">27162&lt;/span> &lt;span class="o">(&lt;/span>kubelet&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Tasks: &lt;span class="m">16&lt;/span> &lt;span class="o">(&lt;/span>limit: 9387&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Memory: 42.9M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CPU: 23.201s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CGroup: /system.slice/kubelet.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─27162 /usr/local/bin/kubelet --v&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span> --node-ip&lt;span class="o">=&lt;/span>192.168.1.71 --hostname-override&lt;span class="o">=&lt;/span>k8s-master71u --bootstrap-kubeconfig&lt;span class="o">=&lt;/span>/etc/kubernetes/bootstrap-kubelet.con&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 15:11:31 k8s-master71u kubelet&lt;span class="o">[&lt;/span>27162&lt;span class="o">]&lt;/span>: E1203 15:11:31.892549 &lt;span class="m">27162&lt;/span> cri_stats_provider.go:643&lt;span class="o">]&lt;/span> &lt;span class="s2">&amp;#34;Unable to fetch container log stats&amp;#34;&lt;/span> &lt;span class="nv">err&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;failed to get fsstats&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 15:11:33 k8s-master71u kubelet[27162]: I1203 15:11:33.187859 27162 kubelet_getters.go:182] &amp;#34;&lt;/span>Pod status updated&lt;span class="s2">&amp;#34; pod=&amp;#34;&lt;/span>kube-system/kube-apiserver-k8s-master71u&lt;span class="s2">&amp;#34;&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 15:11:33 k8s-master71u kubelet[27162]: I1203 15:11:33.187909 27162 kubelet_getters.go:182] &amp;#34;&lt;/span>Pod status updated&lt;span class="s2">&amp;#34; pod=&amp;#34;&lt;/span>kube-system/kube-controller-manager-k8s-m&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 15:11:33 k8s-master71u kubelet&lt;span class="o">[&lt;/span>27162&lt;span class="o">]&lt;/span>: I1203 15:11:33.187921 &lt;span class="m">27162&lt;/span> kubelet_getters.go:182&lt;span class="o">]&lt;/span> &lt;span class="s2">&amp;#34;Pod status updated&amp;#34;&lt;/span> &lt;span class="nv">pod&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;kube-system/kube-scheduler-k8s-master71u&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 15:11:42 k8s-master71u kubelet&lt;span class="o">[&lt;/span>27162&lt;span class="o">]&lt;/span>: E1203 15:11:42.968925 &lt;span class="m">27162&lt;/span> cri_stats_provider.go:643&lt;span class="o">]&lt;/span> &lt;span class="s2">&amp;#34;Unable to fetch container log stats&amp;#34;&lt;/span> &lt;span class="nv">err&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;failed to get fsstats&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 15:11:42 k8s-master71u kubelet[27162]: E1203 15:11:42.969222 27162 cri_stats_provider.go:643] &amp;#34;&lt;/span>Unable to fetch container log stats&lt;span class="s2">&amp;#34; err=&amp;#34;&lt;/span>failed to get fsstats&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 15:11:54 k8s-master71u kubelet&lt;span class="o">[&lt;/span>27162&lt;span class="o">]&lt;/span>: E1203 15:11:54.050355 &lt;span class="m">27162&lt;/span> cri_stats_provider.go:643&lt;span class="o">]&lt;/span> &lt;span class="s2">&amp;#34;Unable to fetch container log stats&amp;#34;&lt;/span> &lt;span class="nv">err&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;failed to get fsstats&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 15:11:54 k8s-master71u kubelet[27162]: E1203 15:11:54.050462 27162 cri_stats_provider.go:643] &amp;#34;&lt;/span>Unable to fetch container log stats&lt;span class="s2">&amp;#34; err=&amp;#34;&lt;/span>failed to get fsstats&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">03&lt;/span> 15:12:05 k8s-master71u kubelet&lt;span class="o">[&lt;/span>27162&lt;span class="o">]&lt;/span>: E1203 15:12:05.124399 &lt;span class="m">27162&lt;/span> cri_stats_provider.go:643&lt;span class="o">]&lt;/span> &lt;span class="s2">&amp;#34;Unable to fetch container log stats&amp;#34;&lt;/span> &lt;span class="nv">err&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;failed to get fsstats&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 03 15:12:05 k8s-master71u kubelet[27162]: E1203 15:12:05.124943 27162 cri_stats_provider.go:643] &amp;#34;&lt;/span>Unable to fetch container log stats&lt;span class="s2">&amp;#34; err=&amp;#34;&lt;/span>failed to get fsstats&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="憑證與金鑰">憑證與金鑰&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">cd&lt;/span> /etc/kubernetes/pki
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki# ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">56&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">2&lt;/span> root root &lt;span class="m">4096&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 ./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">5&lt;/span> kube root &lt;span class="m">4096&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:51 ../
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1428&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 apiserver.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1679&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 apiserver.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1164&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 apiserver-kubelet-client.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1679&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 apiserver-kubelet-client.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1099&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1675&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 ca.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1115&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 front-proxy-ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1675&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 front-proxy-ca.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1119&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 front-proxy-client.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1675&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 front-proxy-client.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1679&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 sa.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> root root &lt;span class="m">451&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:45 sa.pub
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki# &lt;span class="k">for&lt;/span> i in &lt;span class="k">$(&lt;/span>ls *.crt&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;===== &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2"> =====&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> openssl x509 -in &lt;span class="nv">$i&lt;/span> -text -noout &lt;span class="p">|&lt;/span> grep -A &lt;span class="m">3&lt;/span> &lt;span class="s1">&amp;#39;Validity&amp;#39;&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> apiserver.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:45:49 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Dec &lt;span class="m">2&lt;/span> 14:45:50 &lt;span class="m">2024&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> kube-apiserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> apiserver-kubelet-client.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:45:49 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Dec &lt;span class="m">2&lt;/span> 14:45:50 &lt;span class="m">2024&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">O&lt;/span> &lt;span class="o">=&lt;/span> system:masters, &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> kube-apiserver-kubelet-client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> ca.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:45:49 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">30&lt;/span> 14:45:49 &lt;span class="m">2033&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">kubernetes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> front-proxy-ca.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:45:50 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">30&lt;/span> 14:45:50 &lt;span class="m">2033&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> front-proxy-ca
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> front-proxy-client.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:45:50 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Dec &lt;span class="m">2&lt;/span> 14:45:51 &lt;span class="m">2024&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> front-proxy-client
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="etcd憑證與金鑰">etcd憑證與金鑰&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki# &lt;span class="nb">cd&lt;/span> /etc/ssl/etcd/ssl/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/ssl/etcd/ssl# ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">84&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwx------ &lt;span class="m">2&lt;/span> etcd root &lt;span class="m">4096&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 ./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwx------ &lt;span class="m">3&lt;/span> etcd root &lt;span class="m">37&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 ../
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1704&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 admin-k8s-master71u-key.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1476&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 admin-k8s-master71u.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1704&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 admin-k8s-master72u-key.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1476&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 admin-k8s-master72u.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1708&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 admin-k8s-master73u-key.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1476&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 admin-k8s-master73u.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1704&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 ca-key.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1111&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 ca.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1704&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 member-k8s-master71u-key.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1480&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 member-k8s-master71u.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1704&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 member-k8s-master72u-key.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1480&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 member-k8s-master72u.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1704&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 member-k8s-master73u-key.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1480&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 member-k8s-master73u.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1704&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 node-k8s-master71u-key.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1476&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 node-k8s-master71u.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1704&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 node-k8s-master72u-key.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1476&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 node-k8s-master72u.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1704&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 node-k8s-master73u-key.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwx------ &lt;span class="m">1&lt;/span> etcd root &lt;span class="m">1476&lt;/span> Dec &lt;span class="m">3&lt;/span> 14:42 node-k8s-master73u.pem*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/ssl/etcd/ssl# &lt;span class="k">for&lt;/span> i in &lt;span class="k">$(&lt;/span>ls *.pem &lt;span class="p">|&lt;/span> egrep -v &lt;span class="s2">&amp;#34;key&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;===== &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2"> =====&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> openssl x509 -in &lt;span class="nv">$i&lt;/span> -text -noout &lt;span class="p">|&lt;/span> grep -A &lt;span class="m">3&lt;/span> &lt;span class="s1">&amp;#39;Validity&amp;#39;&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> admin-k8s-master71u.pem &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:42:05 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">9&lt;/span> 14:42:05 &lt;span class="m">2123&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> etcd-admin-k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> admin-k8s-master72u.pem &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:42:06 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">9&lt;/span> 14:42:06 &lt;span class="m">2123&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> etcd-admin-k8s-master72u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> admin-k8s-master73u.pem &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:42:07 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">9&lt;/span> 14:42:07 &lt;span class="m">2123&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> etcd-admin-k8s-master73u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> ca.pem &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:42:05 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">9&lt;/span> 14:42:05 &lt;span class="m">2123&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> etcd-ca
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> member-k8s-master71u.pem &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:42:05 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">9&lt;/span> 14:42:05 &lt;span class="m">2123&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> etcd-member-k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> member-k8s-master72u.pem &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:42:06 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">9&lt;/span> 14:42:06 &lt;span class="m">2123&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> etcd-member-k8s-master72u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> member-k8s-master73u.pem &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:42:06 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">9&lt;/span> 14:42:06 &lt;span class="m">2123&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> etcd-member-k8s-master73u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> node-k8s-master71u.pem &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:42:07 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">9&lt;/span> 14:42:07 &lt;span class="m">2123&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> etcd-node-k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> node-k8s-master72u.pem &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:42:07 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">9&lt;/span> 14:42:07 &lt;span class="m">2123&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> etcd-node-k8s-master72u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> node-k8s-master73u.pem &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Dec &lt;span class="m">3&lt;/span> 14:42:07 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Nov &lt;span class="m">9&lt;/span> 14:42:07 &lt;span class="m">2123&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> etcd-node-k8s-master73u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="安裝rancher管理平台高可用">安裝rancher管理平台(高可用)&lt;/h3>
&lt;p>詳細操作可以參考我這篇：
&lt;a class="link" href="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/" target="_blank" rel="noopener"
>https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/&lt;/a>&lt;/p>
&lt;h4 id="一添加-helm-chart-倉庫">一、添加 Helm Chart 倉庫&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# helm repo add rancher-stable https://releases.rancher.com/server-charts/stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;rancher-stable&amp;#34;&lt;/span> has been added to your repositories
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="二為-rancher-建立命名空間">二、為 Rancher 建立命名空間&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl create namespace cattle-system
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="三選擇-ssl-配置">三、選擇 SSL 配置&lt;/h4>
&lt;p>Rancher 產生的憑證（預設）
需要 cert-manager&lt;/p>
&lt;h4 id="四安裝-cert-manager">四、安裝 cert-manager&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 如果你手動安裝了CRD，而不是在 Helm 安裝命令中添加了 &amp;#39;--set installCRDs=true&amp;#39; 選項，你應該在升級 Helm Chart 之前升級 CRD 資源。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.11.0/cert-manager.crds.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 添加 Jetstack Helm 倉庫&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# helm repo add jetstack https://charts.jetstack.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 更新本地 Helm Chart 倉庫緩存&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# helm repo update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hang tight &lt;span class="k">while&lt;/span> we grab the latest from your chart repositories...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...Successfully got an update from the &lt;span class="s2">&amp;#34;jetstack&amp;#34;&lt;/span> chart repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...Successfully got an update from the &lt;span class="s2">&amp;#34;rancher-stable&amp;#34;&lt;/span> chart repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Update Complete. ⎈Happy Helming!⎈
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安裝 cert-manager Helm Chart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# helm install cert-manager jetstack/cert-manager &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --namespace cert-manager &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --create-namespace &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --version v1.11.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安裝完 cert-manager 后，你可以通過檢查 cert-manager 命名空間中正在運行的 Pod 來驗證它是否已正確部署&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pods --namespace cert-manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager-64f9f45d6f-vklzz 1/1 Running &lt;span class="m">0&lt;/span> 37s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager-cainjector-56bbdd5c47-wv2l7 1/1 Running &lt;span class="m">0&lt;/span> 37s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager-webhook-d4f4545d7-pw2cp 1/1 Running &lt;span class="m">0&lt;/span> 37s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="五根據你選擇的證書選項通過-helm-安裝-rancher">五、根據你選擇的證書選項，通過 Helm 安裝 Rancher&lt;/h4>
&lt;p>採Rancher 生成的證書方式&lt;/p>
&lt;p>Rancher Helm Chart 選項：
&lt;a class="link" href="https://ranchermanager.docs.rancher.com/zh/getting-started/installation-and-upgrade/installation-references/helm-chart-options" target="_blank" rel="noopener"
>https://ranchermanager.docs.rancher.com/zh/getting-started/installation-and-upgrade/installation-references/helm-chart-options&lt;/a>&lt;/p>
&lt;p>&lt;font color=red>需多指定ingressClassName為nginx&lt;/font>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# helm install rancher rancher-stable/rancher &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --namespace cattle-system &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --set &lt;span class="nv">hostname&lt;/span>&lt;span class="o">=&lt;/span>rancher.jimmyhome.tw &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --set &lt;span class="nv">bootstrapPassword&lt;/span>&lt;span class="o">=&lt;/span>admin &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --set ingress.ingressClassName&lt;span class="o">=&lt;/span>nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Sun Dec &lt;span class="m">3&lt;/span> 15:40:43 &lt;span class="m">2023&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTES:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Rancher Server has been installed.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTE: Rancher may take several minutes to fully initialize. Please standby &lt;span class="k">while&lt;/span> Certificates are being issued, Containers are started and the Ingress rule comes up.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Check out our docs at https://rancher.com/docs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If you provided your own bootstrap password during installation, browse to https://rancher.jimmyhome.tw to get started.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If this is the first &lt;span class="nb">time&lt;/span> you installed Rancher, get started by running this &lt;span class="nb">command&lt;/span> and clicking the URL it generates:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> https://rancher.jimmyhome.tw/dashboard/?setup&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>kubectl get secret --namespace cattle-system bootstrap-secret -o go-template&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{{.data.bootstrapPassword|base64decode}}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To get just the bootstrap password on its own, run:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl get secret --namespace cattle-system bootstrap-secret -o go-template&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{{.data.bootstrapPassword|base64decode}}{{ &amp;#34;\n&amp;#34; }}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Happy Containering!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 等待 Rancher 運行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl -n cattle-system rollout status deploy/rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting &lt;span class="k">for&lt;/span> deployment &lt;span class="s2">&amp;#34;rancher&amp;#34;&lt;/span> rollout to finish: &lt;span class="m">0&lt;/span> of &lt;span class="m">3&lt;/span> updated replicas are available...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting &lt;span class="k">for&lt;/span> deployment &lt;span class="s2">&amp;#34;rancher&amp;#34;&lt;/span> rollout to finish: &lt;span class="m">1&lt;/span> of &lt;span class="m">3&lt;/span> updated replicas are available...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting &lt;span class="k">for&lt;/span> deployment &lt;span class="s2">&amp;#34;rancher&amp;#34;&lt;/span> rollout to finish: &lt;span class="m">2&lt;/span> of &lt;span class="m">3&lt;/span> updated replicas are available...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;rancher&amp;#34;&lt;/span> successfully rolled out
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="六驗證-rancher-server-是否部署成功">六、驗證 Rancher Server 是否部署成功&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl -n cattle-system get deploy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher 3/3 &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> 5m2s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl -n cattle-system get pod -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">helm-operation-hpd69 2/2 Running &lt;span class="m">0&lt;/span> 40s 10.201.14.138 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-64cf6ddd96-pcfv5 1/1 Running &lt;span class="m">0&lt;/span> 5m11s 10.201.255.201 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-64cf6ddd96-q7dhp 1/1 Running &lt;span class="m">0&lt;/span> 5m11s 10.201.255.202 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-64cf6ddd96-rr28z 1/1 Running &lt;span class="m">0&lt;/span> 5m11s 10.201.14.137 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl -n cattle-system get ingress
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CLASS HOSTS ADDRESS PORTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher nginx rancher.jimmyhome.tw 80, &lt;span class="m">443&lt;/span> 5m35s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 我自己的筆電，先設定/etc/hosts測試網頁訪問&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 如是內部有dns server的，就到dns server設定a record解析&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % sudo vim /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.75 rancher.jimmyhome.tw
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>打 &lt;a class="link" href="https://rancher.jimmyhome.tw" target="_blank" rel="noopener"
>https://rancher.jimmyhome.tw&lt;/a> 可以看到網頁&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203234722.png"
width="736"
height="888"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203234722_hu9f8591ad2fe3fbf363ffc1cb19ed2d21_92259_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203234722_hu9f8591ad2fe3fbf363ffc1cb19ed2d21_92259_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="82"
data-flex-basis="198px"
>&lt;/p>
&lt;p>由上方helm install rancher完成時，可以看到以下兩個指令，可以獲取到預設admin帳號的密碼&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># If this is the first time you installed Rancher, get started by running this command and clicking the URL it generates&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">echo&lt;/span> https://rancher.jimmyhome.tw/dashboard/?setup&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>kubectl get secret --namespace cattle-system bootstrap-secret -o go-template&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{{.data.bootstrapPassword|base64decode}}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://rancher.jimmyhome.tw/dashboard/?setup&lt;span class="o">=&lt;/span>admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># To get just the bootstrap password on its own, run&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get secret --namespace cattle-system bootstrap-secret -o go-template&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{{.data.bootstrapPassword|base64decode}}{{ &amp;#34;\n&amp;#34; }}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">admin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>重設admin帳號的密碼&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235051.png"
width="731"
height="884"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235051_hua6360dfab544f9999a49df0589cd0443_92979_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235051_hua6360dfab544f9999a49df0589cd0443_92979_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="82"
data-flex-basis="198px"
>&lt;/p>
&lt;p>可以看到集群資訊，state為Active
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235121.png"
width="1450"
height="729"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235121_hu401a3e7c37472f45bfde9274f3bd039b_101794_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235121_hu401a3e7c37472f45bfde9274f3bd039b_101794_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="198"
data-flex-basis="477px"
>&lt;/p>
&lt;p>進入集群，可以看到集群詳細訊息
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235142.png"
width="1447"
height="950"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235142_hua7e0a667bc875e78714de1963785d3b9_157686_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235142_hua7e0a667bc875e78714de1963785d3b9_157686_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="152"
data-flex-basis="365px"
>&lt;/p>
&lt;p>也可以使用dashboard shell去管理集群
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235210.png"
width="1448"
height="711"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235210_hu6ce9521b1728d3371090b514716574af_135543_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203235210_hu6ce9521b1728d3371090b514716574af_135543_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="203"
data-flex-basis="488px"
>&lt;/p>
&lt;h3 id="安裝rook-ceph分布式存儲系統">安裝rook-ceph分布式存儲系統&lt;/h3>
&lt;p>詳細操作可以參考我這篇：
&lt;a class="link" href="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/" target="_blank" rel="noopener"
>https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# lsblk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop0 7:0 &lt;span class="m">0&lt;/span> 63.4M &lt;span class="m">1&lt;/span> loop /snap/core20/1974
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop1 7:1 &lt;span class="m">0&lt;/span> 63.5M &lt;span class="m">1&lt;/span> loop /snap/core20/2015
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop2 7:2 &lt;span class="m">0&lt;/span> 111.9M &lt;span class="m">1&lt;/span> loop /snap/lxd/24322
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop3 7:3 &lt;span class="m">0&lt;/span> 40.8M &lt;span class="m">1&lt;/span> loop /snap/snapd/20092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop4 7:4 &lt;span class="m">0&lt;/span> 40.9M &lt;span class="m">1&lt;/span> loop /snap/snapd/20290
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sda 8:0 &lt;span class="m">0&lt;/span> 50G &lt;span class="m">0&lt;/span> disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda1 8:1 &lt;span class="m">0&lt;/span> 1M &lt;span class="m">0&lt;/span> part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda2 8:2 &lt;span class="m">0&lt;/span> 2G &lt;span class="m">0&lt;/span> part /boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─sda3 8:3 &lt;span class="m">0&lt;/span> 48G &lt;span class="m">0&lt;/span> part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─ubuntu--vg-root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 253:0 &lt;span class="m">0&lt;/span> 48G &lt;span class="m">0&lt;/span> lvm /var/lib/kubelet/pods/ce7174f8-ad8f-4f42-8e58-2abca8c91424/volume-subpaths/tigera-ca-bundle/calico-node/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sdb 8:16 &lt;span class="m">0&lt;/span> 16G &lt;span class="m">0&lt;/span> disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sr0 11:0 &lt;span class="m">1&lt;/span> 1024M &lt;span class="m">0&lt;/span> rom
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# lsblk -f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME FSTYPE FSVER LABEL UUID FSAVAIL FSUSE% MOUNTPOINTS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squash 4.0 &lt;span class="m">0&lt;/span> 100% /snap/core20/1974
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squash 4.0 &lt;span class="m">0&lt;/span> 100% /snap/core20/2015
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squash 4.0 &lt;span class="m">0&lt;/span> 100% /snap/lxd/24322
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squash 4.0 &lt;span class="m">0&lt;/span> 100% /snap/snapd/20092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squash 4.0 &lt;span class="m">0&lt;/span> 100% /snap/snapd/20290
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sda
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ xfs f681192a-1cf2-4362-a74c-745374011700 1.8G 9% /boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─sda3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LVM2_m LVM2 JEduSv-mV9g-tzdJ-sYEc-6piR-6nAo-48Srdh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─ubuntu--vg-root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> xfs 19cd87ec-9741-4295-9762-e87fb4f472c8 37.9G 21% /var/lib/kubelet/pods/ce7174f8-ad8f-4f42-8e58-2abca8c91424/volume-subpaths/tigera-ca-bundle/calico-node/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# lsblk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop0 7:0 &lt;span class="m">0&lt;/span> 63.4M &lt;span class="m">1&lt;/span> loop /snap/core20/1974
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop1 7:1 &lt;span class="m">0&lt;/span> 63.5M &lt;span class="m">1&lt;/span> loop /snap/core20/2015
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop2 7:2 &lt;span class="m">0&lt;/span> 111.9M &lt;span class="m">1&lt;/span> loop /snap/lxd/24322
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop3 7:3 &lt;span class="m">0&lt;/span> 40.8M &lt;span class="m">1&lt;/span> loop /snap/snapd/20092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop4 7:4 &lt;span class="m">0&lt;/span> 40.9M &lt;span class="m">1&lt;/span> loop /snap/snapd/20290
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sda 8:0 &lt;span class="m">0&lt;/span> 50G &lt;span class="m">0&lt;/span> disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda1 8:1 &lt;span class="m">0&lt;/span> 1M &lt;span class="m">0&lt;/span> part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda2 8:2 &lt;span class="m">0&lt;/span> 2G &lt;span class="m">0&lt;/span> part /boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─sda3 8:3 &lt;span class="m">0&lt;/span> 48G &lt;span class="m">0&lt;/span> part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─ubuntu--vg-root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 253:0 &lt;span class="m">0&lt;/span> 48G &lt;span class="m">0&lt;/span> lvm /var/lib/kubelet/pods/ce7174f8-ad8f-4f42-8e58-2abca8c91424/volume-subpaths/tigera-ca-bundle/calico-node/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sdb 8:16 &lt;span class="m">0&lt;/span> 16G &lt;span class="m">0&lt;/span> disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sr0 11:0 &lt;span class="m">1&lt;/span> 1024M &lt;span class="m">0&lt;/span> rom
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# git clone --single-branch --branch v1.12.8 https://github.com/rook/rook.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">cd&lt;/span> rook/deploy/examples
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f crds.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephblockpoolradosnamespaces.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephblockpools.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephbucketnotifications.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephbuckettopics.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephclients.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephclusters.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephcosidrivers.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephfilesystemmirrors.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephfilesystems.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephfilesystemsubvolumegroups.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephnfses.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephobjectrealms.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephobjectstores.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephobjectstoreusers.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephobjectzonegroups.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephobjectzones.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/cephrbdmirrors.ceph.rook.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/objectbucketclaims.objectbucket.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">customresourcedefinition.apiextensions.k8s.io/objectbuckets.objectbucket.io created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f common.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">namespace/rook-ceph created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/cephfs-csi-nodeplugin created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/cephfs-external-provisioner-runner created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/objectstorage-provisioner-role created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/rbd-csi-nodeplugin created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/rbd-external-provisioner-runner created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/rook-ceph-cluster-mgmt created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/rook-ceph-global created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/rook-ceph-mgr-cluster created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/rook-ceph-mgr-system created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/rook-ceph-object-bucket created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/rook-ceph-osd created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrole.rbac.authorization.k8s.io/rook-ceph-system created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/cephfs-csi-nodeplugin-role created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/cephfs-csi-provisioner-role created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/objectstorage-provisioner-role-binding created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/rbd-csi-nodeplugin created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/rbd-csi-provisioner-role created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/rook-ceph-global created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/rook-ceph-mgr-cluster created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/rook-ceph-object-bucket created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/rook-ceph-osd created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterrolebinding.rbac.authorization.k8s.io/rook-ceph-system created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">role.rbac.authorization.k8s.io/cephfs-external-provisioner-cfg created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">role.rbac.authorization.k8s.io/rbd-csi-nodeplugin created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">role.rbac.authorization.k8s.io/rbd-external-provisioner-cfg created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">role.rbac.authorization.k8s.io/rook-ceph-cmd-reporter created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">role.rbac.authorization.k8s.io/rook-ceph-mgr created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">role.rbac.authorization.k8s.io/rook-ceph-osd created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">role.rbac.authorization.k8s.io/rook-ceph-purge-osd created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">role.rbac.authorization.k8s.io/rook-ceph-rgw created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">role.rbac.authorization.k8s.io/rook-ceph-system created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/cephfs-csi-provisioner-role-cfg created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/rbd-csi-nodeplugin-role-cfg created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/rbd-csi-provisioner-role-cfg created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/rook-ceph-cluster-mgmt created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/rook-ceph-cmd-reporter created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/rook-ceph-mgr created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/rook-ceph-mgr-system created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/rook-ceph-osd created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/rook-ceph-purge-osd created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/rook-ceph-rgw created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rolebinding.rbac.authorization.k8s.io/rook-ceph-system created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/objectstorage-provisioner created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/rook-ceph-cmd-reporter created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/rook-ceph-mgr created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/rook-ceph-osd created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/rook-ceph-purge-osd created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/rook-ceph-rgw created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/rook-ceph-system created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/rook-csi-cephfs-plugin-sa created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/rook-csi-cephfs-provisioner-sa created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/rook-csi-rbd-plugin-sa created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">serviceaccount/rook-csi-rbd-provisioner-sa created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f operator.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">configmap/rook-ceph-operator-config created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/rook-ceph-operator created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get deployments.apps -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-operator 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 22s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get pod -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-operator-58775c8bdf-vmdkn 1/1 Running &lt;span class="m">0&lt;/span> 39s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# vim cluster.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 角色調度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> placement:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelectorTerms:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ceph-mon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelectorTerms:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ceph-mgr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelectorTerms:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ceph-osd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prepareosd:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelectorTerms:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ceph-osd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 角色資源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> limits:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;2048Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;2048Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> limits:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;1024Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;1024Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> limits:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;2048Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;2048Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 磁碟調度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;k8s-master71u&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;sdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storeType: bluestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> journalSizeMB: &lt;span class="s2">&amp;#34;4096&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;k8s-master72u&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;sdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storeType: bluestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> journalSizeMB: &lt;span class="s2">&amp;#34;4096&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;k8s-master73u&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;sdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storeType: bluestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> journalSizeMB: &lt;span class="s2">&amp;#34;4096&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;k8s-node75u&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;sdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storeType: bluestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> journalSizeMB: &lt;span class="s2">&amp;#34;4096&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;k8s-node76u&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;sdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storeType: bluestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> journalSizeMB: &lt;span class="s2">&amp;#34;4096&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 關閉磁碟自動全部調度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage: &lt;span class="c1"># cluster level storage configuration and selection&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#設置磁碟的參數，調整為false，方便後面訂製&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> useAllNodes: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> useAllDevices: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master71u ceph-mon&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/k8s-master71u labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master72u ceph-mon&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/k8s-master72u labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master73u ceph-mon&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/k8s-master73u labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master71u ceph-mgr&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/k8s-master71u labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master72u ceph-mgr&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/k8s-master72u labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master73u ceph-mgr&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/k8s-master73u labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master71u ceph-osd&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/k8s-master71u labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master72u ceph-osd&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/k8s-master72u labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master73u ceph-osd&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/k8s-master73u labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-node75u ceph-osd&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/k8s-node75u labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-node76u ceph-osd&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node/k8s-node76u labeled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f cluster.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cephcluster.ceph.rook.io/rook-ceph created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get pod -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-nttgx 2/2 Running &lt;span class="m">0&lt;/span> 9m33s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-provisioner-668dfcf95b-dsxdk 5/5 Running &lt;span class="m">0&lt;/span> 9m33s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-provisioner-668dfcf95b-rgfv6 5/5 Running &lt;span class="m">0&lt;/span> 9m33s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-s6sc9 2/2 Running &lt;span class="m">0&lt;/span> 9m33s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-bjv2p 2/2 Running &lt;span class="m">0&lt;/span> 9m33s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-provisioner-5b78f67bbb-8ts8q 5/5 Running &lt;span class="m">0&lt;/span> 9m33s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-provisioner-5b78f67bbb-rr5tn 5/5 Running &lt;span class="m">0&lt;/span> 9m33s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-xb99w 2/2 Running &lt;span class="m">0&lt;/span> 9m33s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-crashcollector-k8s-master71u-55fcdbd66c-plz8m 1/1 Running &lt;span class="m">0&lt;/span> 2m57s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-crashcollector-k8s-master72u-675646bf64-8tl2q 1/1 Running &lt;span class="m">0&lt;/span> 3m18s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-crashcollector-k8s-master73u-84fdc469f7-9fkgh 1/1 Running &lt;span class="m">0&lt;/span> 2m56s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-crashcollector-k8s-node75u-bbc794dd9-rv4pw 1/1 Running &lt;span class="m">0&lt;/span> 11s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-crashcollector-k8s-node76u-5fd59cd68b-wljnj 1/1 Running &lt;span class="m">0&lt;/span> 73s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-a-59f556dbc9-695bv 3/3 Running &lt;span class="m">0&lt;/span> 3m33s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-b-f4c7855d-j69fj 3/3 Running &lt;span class="m">0&lt;/span> 3m33s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-a-b657589fb-c7c4f 2/2 Running &lt;span class="m">0&lt;/span> 8m2s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-b-6bdf47675f-tbhg8 2/2 Running &lt;span class="m">0&lt;/span> 3m59s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-c-5dcbc556d7-9zmmn 2/2 Running &lt;span class="m">0&lt;/span> 3m48s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-operator-58775c8bdf-m29b4 1/1 Running &lt;span class="m">0&lt;/span> 14m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-0-5b8dfc978f-fwlsv 2/2 Running &lt;span class="m">0&lt;/span> 2m58s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-1-c9544b764-gzcmd 2/2 Running &lt;span class="m">0&lt;/span> 2m57s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-2-897687cc9-mrntq 2/2 Running &lt;span class="m">0&lt;/span> 2m56s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-3-6c7c659454-9wk9z 2/2 Running &lt;span class="m">0&lt;/span> 73s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-4-68dcf49f6-vcpsj 1/2 Running &lt;span class="m">0&lt;/span> 12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-prepare-k8s-master71u-6fjrl 0/1 Completed &lt;span class="m">0&lt;/span> 3m11s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-prepare-k8s-master72u-5mcbk 0/1 Completed &lt;span class="m">0&lt;/span> 3m10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-prepare-k8s-master73u-cjklw 0/1 Completed &lt;span class="m">0&lt;/span> 3m9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-prepare-k8s-node75u-tk24w 0/1 Completed &lt;span class="m">0&lt;/span> 3m8s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-prepare-k8s-node76u-7hqrg 0/1 Completed &lt;span class="m">0&lt;/span> 3m8s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f toolbox.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/rook-ceph-tools created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get pod -n rook-ceph &lt;span class="p">|&lt;/span> grep -i tool
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-tools-7cd4cd9c9c-54zk2 1/1 Running &lt;span class="m">0&lt;/span> 34s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl &lt;span class="nb">exec&lt;/span> -it rook-ceph-tools-7cd4cd9c9c-54zk2 -n rook-ceph -- /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ ceph -s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: 9da44d3d-58d1-402d-8f8b-66bd89a869a4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> health: HEALTH_OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon: &lt;span class="m">3&lt;/span> daemons, quorum a,b,c &lt;span class="o">(&lt;/span>age 5m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr: a&lt;span class="o">(&lt;/span>active, starting, since 11s&lt;span class="o">)&lt;/span>, standbys: b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd: &lt;span class="m">5&lt;/span> osds: &lt;span class="m">5&lt;/span> up &lt;span class="o">(&lt;/span>since 93s&lt;span class="o">)&lt;/span>, &lt;span class="m">5&lt;/span> in &lt;span class="o">(&lt;/span>since 117s&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pools: &lt;span class="m">1&lt;/span> pools, &lt;span class="m">1&lt;/span> pgs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> objects: &lt;span class="m">2&lt;/span> objects, &lt;span class="m">449&lt;/span> KiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usage: &lt;span class="m">41&lt;/span> MiB used, &lt;span class="m">80&lt;/span> GiB / &lt;span class="m">80&lt;/span> GiB avail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pgs: &lt;span class="m">1&lt;/span> active+clean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ ceph status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: 9da44d3d-58d1-402d-8f8b-66bd89a869a4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> health: HEALTH_OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon: &lt;span class="m">3&lt;/span> daemons, quorum a,b,c &lt;span class="o">(&lt;/span>age 5m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr: a&lt;span class="o">(&lt;/span>active, since 10s&lt;span class="o">)&lt;/span>, standbys: b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd: &lt;span class="m">5&lt;/span> osds: &lt;span class="m">5&lt;/span> up &lt;span class="o">(&lt;/span>since 104s&lt;span class="o">)&lt;/span>, &lt;span class="m">5&lt;/span> in &lt;span class="o">(&lt;/span>since 2m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pools: &lt;span class="m">1&lt;/span> pools, &lt;span class="m">1&lt;/span> pgs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> objects: &lt;span class="m">2&lt;/span> objects, &lt;span class="m">449&lt;/span> KiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usage: &lt;span class="m">41&lt;/span> MiB used, &lt;span class="m">80&lt;/span> GiB / &lt;span class="m">80&lt;/span> GiB avail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pgs: &lt;span class="m">1&lt;/span> active+clean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ ceph osd status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ID HOST USED AVAIL WR OPS WR DATA RD OPS RD DATA STATE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">0&lt;/span> k8s-master71u 8788k 15.9G &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> exists,up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> k8s-master72u 8272k 15.9G &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> exists,up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">2&lt;/span> k8s-master73u 8788k 15.9G &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> exists,up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">3&lt;/span> k8s-node76u 8404k 15.9G &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> exists,up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">4&lt;/span> k8s-node75u 7888k 15.9G &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> exists,up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ ceph df
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- RAW STORAGE ---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CLASS SIZE AVAIL USED RAW USED %RAW USED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssd &lt;span class="m">80&lt;/span> GiB &lt;span class="m">80&lt;/span> GiB &lt;span class="m">41&lt;/span> MiB &lt;span class="m">41&lt;/span> MiB 0.05
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TOTAL &lt;span class="m">80&lt;/span> GiB &lt;span class="m">80&lt;/span> GiB &lt;span class="m">41&lt;/span> MiB &lt;span class="m">41&lt;/span> MiB 0.05
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- POOLS ---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">POOL ID PGS STORED OBJECTS USED %USED MAX AVAIL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.mgr &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">449&lt;/span> KiB &lt;span class="m">2&lt;/span> &lt;span class="m">449&lt;/span> KiB &lt;span class="m">0&lt;/span> &lt;span class="m">25&lt;/span> GiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ rados df
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">POOL_NAME USED OBJECTS CLONES COPIES MISSING_ON_PRIMARY UNFOUND DEGRADED RD_OPS RD WR_OPS WR USED COMPR UNDER COMPR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.mgr &lt;span class="m">449&lt;/span> KiB &lt;span class="m">2&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">6&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">288&lt;/span> &lt;span class="m">494&lt;/span> KiB &lt;span class="m">153&lt;/span> 1.3 MiB &lt;span class="m">0&lt;/span> B &lt;span class="m">0&lt;/span> B
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total_objects &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total_used &lt;span class="m">41&lt;/span> MiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total_avail &lt;span class="m">80&lt;/span> GiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total_space &lt;span class="m">80&lt;/span> GiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ cat /etc/ceph/ceph.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>global&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">mon_host&lt;/span> &lt;span class="o">=&lt;/span> 10.202.156.149:6789,10.202.75.120:6789,10.202.62.213:6789
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>client.admin&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">keyring&lt;/span> &lt;span class="o">=&lt;/span> /etc/ceph/keyring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ cat /etc/ceph/keyring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>client.admin&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">AQCtp2xlw3soGRAAVvoyqWe8wzvkkt26JQEGtQ&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# apt install ceph-common
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# vim /etc/ceph/ceph.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>global&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">mon_host&lt;/span> &lt;span class="o">=&lt;/span> 10.202.156.149:6789,10.202.75.120:6789,10.202.62.213:6789
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>client.admin&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">keyring&lt;/span> &lt;span class="o">=&lt;/span> /etc/ceph/keyring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# vim /etc/ceph/keyring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>client.admin&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">AQCtp2xlw3soGRAAVvoyqWe8wzvkkt26JQEGtQ&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph -s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: 9da44d3d-58d1-402d-8f8b-66bd89a869a4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> health: HEALTH_OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon: &lt;span class="m">3&lt;/span> daemons, quorum a,b,c &lt;span class="o">(&lt;/span>age 9m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr: a&lt;span class="o">(&lt;/span>active, since 4m&lt;span class="o">)&lt;/span>, standbys: b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd: &lt;span class="m">5&lt;/span> osds: &lt;span class="m">5&lt;/span> up &lt;span class="o">(&lt;/span>since 6m&lt;span class="o">)&lt;/span>, &lt;span class="m">5&lt;/span> in &lt;span class="o">(&lt;/span>since 6m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pools: &lt;span class="m">1&lt;/span> pools, &lt;span class="m">1&lt;/span> pgs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> objects: &lt;span class="m">2&lt;/span> objects, &lt;span class="m">449&lt;/span> KiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usage: &lt;span class="m">41&lt;/span> MiB used, &lt;span class="m">80&lt;/span> GiB / &lt;span class="m">80&lt;/span> GiB avail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pgs: &lt;span class="m">1&lt;/span> active+clean
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="cephfs">cephfs&lt;/h5>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master71u ceph-mds&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master72u ceph-mds&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master73u ceph-mds&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-node75u ceph-mds&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-node76u ceph-mds&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# vim filesystem.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> activeCount: &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> placement:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelectorTerms:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ceph-mds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> podAntiAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - labelSelector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - rook-ceph-mds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> topologyKey: kubernetes.io/hostname
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> preferredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - weight: &lt;span class="m">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> podAffinityTerm:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labelSelector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - rook-ceph-mds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> topologyKey: topology.kubernetes.io/zone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f filesystem.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get pod -n rook-ceph -o wide &lt;span class="p">|&lt;/span> grep -i rook-ceph-mds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mds-myfs-a-fcf6b94fb-wskkq 2/2 Running &lt;span class="m">0&lt;/span> 18s 10.201.126.14 k8s-master72u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mds-myfs-b-55d97767d4-z872h 2/2 Running &lt;span class="m">0&lt;/span> 16s 10.201.255.227 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mds-myfs-c-5c9c94fbfb-chfnv 2/2 Running &lt;span class="m">0&lt;/span> 13s 10.201.14.164 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mds-myfs-d-69cc457f9b-hq7vv 2/2 Running &lt;span class="m">0&lt;/span> 10s 10.201.133.13 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph -s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: 9da44d3d-58d1-402d-8f8b-66bd89a869a4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> health: HEALTH_OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon: &lt;span class="m">3&lt;/span> daemons, quorum a,b,c &lt;span class="o">(&lt;/span>age 13m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr: a&lt;span class="o">(&lt;/span>active, since 8m&lt;span class="o">)&lt;/span>, standbys: b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mds: 2/2 daemons up, &lt;span class="m">2&lt;/span> hot standby
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd: &lt;span class="m">5&lt;/span> osds: &lt;span class="m">5&lt;/span> up &lt;span class="o">(&lt;/span>since 9m&lt;span class="o">)&lt;/span>, &lt;span class="m">5&lt;/span> in &lt;span class="o">(&lt;/span>since 10m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes: 1/1 healthy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pools: &lt;span class="m">3&lt;/span> pools, &lt;span class="m">3&lt;/span> pgs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> objects: &lt;span class="m">41&lt;/span> objects, &lt;span class="m">452&lt;/span> KiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usage: &lt;span class="m">43&lt;/span> MiB used, &lt;span class="m">80&lt;/span> GiB / &lt;span class="m">80&lt;/span> GiB avail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pgs: &lt;span class="m">3&lt;/span> active+clean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> io:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client: 2.2 KiB/s rd, 2.4 KiB/s wr, &lt;span class="m">2&lt;/span> op/s rd, &lt;span class="m">8&lt;/span> op/s wr
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# &lt;span class="nb">cd&lt;/span> csi/cephfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/csi/cephfs# kubectl create -f storageclass.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">storageclass.storage.k8s.io/rook-cephfs created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/csi/cephfs# kubectl get storageclasses.storage.k8s.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME PROVISIONER RECLAIMPOLICY VOLUMEBINDINGMODE ALLOWVOLUMEEXPANSION AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-cephfs rook-ceph.cephfs.csi.ceph.com Delete Immediate &lt;span class="nb">true&lt;/span> 5s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/csi/cephfs# ceph fs ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: myfs, metadata pool: myfs-metadata, data pools: &lt;span class="o">[&lt;/span>myfs-replicated &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>驗證pvc,pc使用storageClassName: &amp;ldquo;rook-cephfs&amp;quot;自動生成&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat sc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: apps/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: web-sc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchLabels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumeMounts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: wwwroot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mountPath: /usr/share/nginx/html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: wwwroot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> persistentVolumeClaim:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> claimName: web-sc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: PersistentVolumeClaim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: web-sc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageClassName: &lt;span class="s2">&amp;#34;rook-cephfs&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> accessModes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ReadWriteMany
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage: 5Gi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl create -f sc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod,pvc,pv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/test-nginx 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>33m ago&lt;span class="o">)&lt;/span> 81m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/web-sc-7b6c54fbb9-55rtb 1/1 Running &lt;span class="m">0&lt;/span> 34s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/web-sc-7b6c54fbb9-fxx6r 1/1 Running &lt;span class="m">0&lt;/span> 34s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/web-sc-7b6c54fbb9-vlpwm 1/1 Running &lt;span class="m">0&lt;/span> 34s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/web2-5d48fb75c5-dt5xd 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>33m ago&lt;span class="o">)&lt;/span> 80m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/web2-5d48fb75c5-ggmrz 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>33m ago&lt;span class="o">)&lt;/span> 80m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/web2-5d48fb75c5-jsvck 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>33m ago&lt;span class="o">)&lt;/span> 80m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/web-sc Bound pvc-ec58bbde-7e2c-4cc4-be13-223d10de5d99 5Gi RWX rook-cephfs 34s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolume/pvc-ec58bbde-7e2c-4cc4-be13-223d10de5d99 5Gi RWX Delete Bound default/web-sc rook-cephfs 34s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl &lt;span class="nb">exec&lt;/span> -ti web-sc-7b6c54fbb9-55rtb -- /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-55rtb:/#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-55rtb:/# df -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Filesystem Size Used Avail Use% Mounted on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">overlay 48G 20G 29G 41% /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 64M &lt;span class="m">0&lt;/span> 64M 0% /dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/mapper/ubuntu--vg-root 48G 20G 29G 41% /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shm 64M &lt;span class="m">0&lt;/span> 64M 0% /dev/shm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.202.75.120:6789,10.202.62.213:6789,10.202.156.149:6789:/volumes/csi/csi-vol-39f4781c-a08b-4b30-a2f9-5d244cd4f7af/58cdd551-8197-41f0-875b-a050fb0135aa 5.0G &lt;span class="m">0&lt;/span> 5.0G 0% /usr/share/nginx/html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 7.7G 12K 7.7G 1% /run/secrets/kubernetes.io/serviceaccount
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 3.9G &lt;span class="m">0&lt;/span> 3.9G 0% /proc/acpi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 3.9G &lt;span class="m">0&lt;/span> 3.9G 0% /proc/scsi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 3.9G &lt;span class="m">0&lt;/span> 3.9G 0% /sys/firmware
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-55rtb:/#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-55rtb:/# &lt;span class="nb">cd&lt;/span> /usr/share/nginx/html/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-55rtb:/usr/share/nginx/html# touch &lt;span class="m">123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-55rtb:/usr/share/nginx/html# ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-55rtb:/usr/share/nginx/html# &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl &lt;span class="nb">exec&lt;/span> -ti web-sc-7b6c54fbb9-fxx6r -- /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-fxx6r:/#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-fxx6r:/# df -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Filesystem Size Used Avail Use% Mounted on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">overlay 48G 20G 29G 41% /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 64M &lt;span class="m">0&lt;/span> 64M 0% /dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/dev/mapper/ubuntu--vg-root 48G 20G 29G 41% /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shm 64M &lt;span class="m">0&lt;/span> 64M 0% /dev/shm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.202.75.120:6789,10.202.62.213:6789,10.202.156.149:6789:/volumes/csi/csi-vol-39f4781c-a08b-4b30-a2f9-5d244cd4f7af/58cdd551-8197-41f0-875b-a050fb0135aa 5.0G &lt;span class="m">0&lt;/span> 5.0G 0% /usr/share/nginx/html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 7.7G 12K 7.7G 1% /run/secrets/kubernetes.io/serviceaccount
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 3.9G &lt;span class="m">0&lt;/span> 3.9G 0% /proc/acpi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 3.9G &lt;span class="m">0&lt;/span> 3.9G 0% /proc/scsi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tmpfs 3.9G &lt;span class="m">0&lt;/span> 3.9G 0% /sys/firmware
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-fxx6r:/#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-fxx6r:/# &lt;span class="nb">cd&lt;/span> /usr/share/nginx/html/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-fxx6r:/usr/share/nginx/html# ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-fxx6r:/usr/share/nginx/html# &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get services -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr ClusterIP 10.202.138.211 &amp;lt;none&amp;gt; 9283/TCP 19m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-dashboard ClusterIP 10.202.204.184 &amp;lt;none&amp;gt; 8443/TCP 19m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-a ClusterIP 10.202.156.149 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 24m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-b ClusterIP 10.202.75.120 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 20m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-c ClusterIP 10.202.62.213 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 20m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f dashboard-external-https.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get services -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr ClusterIP 10.202.138.211 &amp;lt;none&amp;gt; 9283/TCP 21m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-dashboard ClusterIP 10.202.204.184 &amp;lt;none&amp;gt; 8443/TCP 21m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-dashboard-external-https NodePort 10.202.5.199 &amp;lt;none&amp;gt; 8443:30125/TCP 10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-a ClusterIP 10.202.156.149 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 26m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-b ClusterIP 10.202.75.120 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 21m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-c ClusterIP 10.202.62.213 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 21m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>以下網址，都可以訪問nodeport
https://192.168.1.71:30125/#/login?returnUrl=%2Fdashboard
https://192.168.1.72:30125/#/login?returnUrl=%2Fdashboard
https://192.168.1.73:30125/#/login?returnUrl=%2Fdashboard
https://192.168.1.74:30125/#/login?returnUrl=%2Fdashboard
https://192.168.1.75:30125/#/login?returnUrl=%2Fdashboard
https://192.168.1.76:30125/#/login?returnUrl=%2Fdashboard&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003829.png"
width="1449"
height="638"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003829_huafbab9b6fca60d5feecc2c3cae03c81b_153524_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003829_huafbab9b6fca60d5feecc2c3cae03c81b_153524_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="227"
data-flex-basis="545px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get secrets -n rook-ceph rook-ceph-dashboard-password -o yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: &lt;span class="nv">KF1hVHhQTSc0NjpnYjBYL2NENig&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Secret
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> creationTimestamp: &lt;span class="s2">&amp;#34;2023-12-03T16:12:13Z&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: rook-ceph-dashboard-password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ownerReferences:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - apiVersion: ceph.rook.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> blockOwnerDeletion: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> controller: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kind: CephCluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uid: 93039daa-6f89-447a-81c7-89d387c1350b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resourceVersion: &lt;span class="s2">&amp;#34;25904&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> uid: b2396e15-0674-4a9d-982b-25d03916a553
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">type: kubernetes.io/rook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;KF1hVHhQTSc0NjpnYjBYL2NENig=&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> base64 -d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(]&lt;/span>aTxPM&lt;span class="err">&amp;#39;&lt;/span>46:gb0X/cD6&lt;span class="o">(&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003900.png"
width="1449"
height="637"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003900_hu9ed0a3b4e2c1fe4993f9af7dd7c653c3_154845_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003900_hu9ed0a3b4e2c1fe4993f9af7dd7c653c3_154845_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="227"
data-flex-basis="545px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003915.png"
width="1448"
height="947"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003915_hu887debf3ed1d1e248adb7cdce041c86a_174758_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003915_hu887debf3ed1d1e248adb7cdce041c86a_174758_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="152"
data-flex-basis="366px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003943.png"
width="858"
height="523"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003943_hu003fb5008293d0a4ff521d9d07b54da3_64523_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204003943_hu003fb5008293d0a4ff521d9d07b54da3_64523_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="164"
data-flex-basis="393px"
>&lt;/p>
&lt;p>一直報這個錯誤，導致集群檢查不健康&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph mgr module ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MODULE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">balancer on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">crash on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devicehealth on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">orchestrator on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pg_autoscaler on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">progress on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rbd_support on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">status on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">telemetry on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">volumes on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dashboard on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iostat on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nfs on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">restful on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alerts -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cephadm -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">diskprediction_local -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">influx -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">insights -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8sevents -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localpool -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mds_autoscaler -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mirroring -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">osd_perf_query -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">osd_support -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">selftest -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">snap_schedule -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stats -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">telegraf -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">test_orchestrator -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zabbix -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph mgr module &lt;span class="nb">enable&lt;/span> rook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph mgr module ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MODULE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">balancer on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">crash on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devicehealth on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">orchestrator on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pg_autoscaler on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">progress on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rbd_support on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">status on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">telemetry on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">volumes on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dashboard on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iostat on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nfs on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">restful on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alerts -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cephadm -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">diskprediction_local -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">influx -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">insights -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8sevents -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localpool -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mds_autoscaler -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mirroring -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">osd_perf_query -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">osd_support -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">selftest -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">snap_schedule -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stats -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">telegraf -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">test_orchestrator -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zabbix -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f bundle.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl get pod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus-rook-prometheus-0 2/2 Running &lt;span class="m">0&lt;/span> 48s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f prometheus.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f prometheus-service.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f service-monitor.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f grafana-all.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl get pod,svc -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/grafana-654886fbff-czjvf 1/1 Running &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>76s ago&lt;span class="o">)&lt;/span> 2m2s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/prometheus-rook-prometheus-0 2/2 Running &lt;span class="m">0&lt;/span> 3m42s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/grafana NodePort 10.202.70.24 &amp;lt;none&amp;gt; 3000:31782/TCP 2m2s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/prometheus-operated ClusterIP None &amp;lt;none&amp;gt; 9090/TCP 3m42s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>以下網址，都可以訪問nodeport&lt;/p>
&lt;p>http://192.168.1.71:31782/login
http://192.168.1.72:31782/login
http://192.168.1.73:31782/login
http://192.168.1.74:31782/login
http://192.168.1.75:31782/login&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011532.png"
width="983"
height="727"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011532_huf5f1c0df9977db9c6a994dd9bbfbfd68_401802_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011532_huf5f1c0df9977db9c6a994dd9bbfbfd68_401802_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="135"
data-flex-basis="324px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011610.png"
width="981"
height="760"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011610_hu6c3aa08ff1aa99d5a8ac6dc009800516_409848_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011610_hu6c3aa08ff1aa99d5a8ac6dc009800516_409848_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="129"
data-flex-basis="309px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011643.png"
width="1448"
height="627"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011643_hufa48ffd4c7b2b6ef3e9dcef6c2ca3dff_113862_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011643_hufa48ffd4c7b2b6ef3e9dcef6c2ca3dff_113862_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="230"
data-flex-basis="554px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl get svc -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grafana NodePort 10.202.70.24 &amp;lt;none&amp;gt; 3000:31782/TCP 5m59s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus-operated ClusterIP None &amp;lt;none&amp;gt; 9090/TCP 7m39s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr ClusterIP 10.202.138.211 &amp;lt;none&amp;gt; 9283/TCP 65m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-dashboard ClusterIP 10.202.204.184 &amp;lt;none&amp;gt; 8443/TCP 65m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-dashboard-external-https NodePort 10.202.5.199 &amp;lt;none&amp;gt; 8443:30125/TCP 44m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-a ClusterIP 10.202.156.149 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 70m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-b ClusterIP 10.202.75.120 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 66m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-c ClusterIP 10.202.62.213 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 65m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-prometheus NodePort 10.202.7.217 &amp;lt;none&amp;gt; 9090:30900/TCP 7m34s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011803.png"
width="1448"
height="759"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011803_hu1f870e18f0c64574d02f17997d4471a8_125039_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011803_hu1f870e18f0c64574d02f17997d4471a8_125039_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="190"
data-flex-basis="457px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011815.png"
width="1441"
height="939"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011815_hu82d59408d9432528e72ef95a24dc46c3_125001_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011815_hu82d59408d9432528e72ef95a24dc46c3_125001_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="153"
data-flex-basis="368px"
>&lt;/p>
&lt;p>&lt;a class="link" href="https://grafana.com/grafana/dashboards/2842-ceph-cluster/" target="_blank" rel="noopener"
>https://grafana.com/grafana/dashboards/2842-ceph-cluster/&lt;/a>
&lt;a class="link" href="https://grafana.com/grafana/dashboards/5336-ceph-osd-single/" target="_blank" rel="noopener"
>https://grafana.com/grafana/dashboards/5336-ceph-osd-single/&lt;/a>
&lt;a class="link" href="https://grafana.com/grafana/dashboards/5342-ceph-pools/" target="_blank" rel="noopener"
>https://grafana.com/grafana/dashboards/5342-ceph-pools/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011903.png"
width="1446"
height="634"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011903_hu31a26029c3bc67d7e7bd77aeff889e53_65602_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011903_hu31a26029c3bc67d7e7bd77aeff889e53_65602_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="228"
data-flex-basis="547px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011931.png"
width="923"
height="713"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011931_hu400745370edec892cf9b4934df1195c3_87309_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011931_hu400745370edec892cf9b4934df1195c3_87309_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="129"
data-flex-basis="310px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011947.png"
width="1449"
height="943"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011947_hua1b1196a501c1b4022290a8f10af4d50_244881_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204011947_hua1b1196a501c1b4022290a8f10af4d50_244881_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="153"
data-flex-basis="368px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012015.png"
width="960"
height="723"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012015_hu0d0f75c205a22f750016276011675d24_88153_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012015_hu0d0f75c205a22f750016276011675d24_88153_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="132"
data-flex-basis="318px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012038.png"
width="1450"
height="942"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012038_hu2638f959af8827f3999ab44a7316741c_154257_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012038_hu2638f959af8827f3999ab44a7316741c_154257_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="153"
data-flex-basis="369px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012115.png"
width="967"
height="712"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012115_hub942493ce7f2b712a3e500db4f71c6fa_86962_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012115_hub942493ce7f2b712a3e500db4f71c6fa_86962_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="135"
data-flex-basis="325px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012129.png"
width="1449"
height="947"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012129_hu57c2dc771d5ccb64aacf6b6a965ee662_168596_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231204012129_hu57c2dc771d5ccb64aacf6b6a965ee662_168596_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="153"
data-flex-basis="367px"
>&lt;/p>
&lt;h2 id="reset清除集群設定">reset清除集群設定&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 全部清除，包含所有創建目錄，systemd服務，/etc/hosts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">(&lt;/span>kubespray-venv&lt;span class="o">)&lt;/span> &lt;span class="o">[&lt;/span>root@ansible kubespray&lt;span class="o">]&lt;/span>&lt;span class="c1"># ansible-playbook -i inventory/mycluster/hosts.yaml --become --become-user=root reset.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 流程進行，會再次確認您是否要reset，要輸入yes，ansible才會開始繼續進行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PLAY &lt;span class="o">[&lt;/span>Reset cluster&lt;span class="o">]&lt;/span> *******************************************************************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">週日 &lt;span class="m">03&lt;/span> 十二月 &lt;span class="m">2023&lt;/span> 14:43:01 +0800 &lt;span class="o">(&lt;/span>0:00:02.729&lt;span class="o">)&lt;/span> 0:00:44.278 ****************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Reset Confirmation&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Are you sure you want to reset cluster state? Type &lt;span class="s1">&amp;#39;yes&amp;#39;&lt;/span> to reset your cluster.:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 清除完畢之後，主機要systemctl daemon-reload，不然會被判斷還有etcd服務，導致無法佈屬&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 以上執行完畢，重開機，即可重新再佈屬&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:~# systemctl status etcd.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Warning: The unit file, &lt;span class="nb">source&lt;/span> configuration file or drop-ins of etcd.service changed on disk. Run &lt;span class="s1">&amp;#39;systemctl daemon-reload&amp;#39;&lt;/span> to reload units.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">○ etcd.service - etcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Loaded: loaded &lt;span class="o">(&lt;/span>/etc/systemd/system/etcd.service&lt;span class="p">;&lt;/span> enabled&lt;span class="p">;&lt;/span> vendor preset: enabled&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active: inactive &lt;span class="o">(&lt;/span>dead&lt;span class="o">)&lt;/span> since Mon 2023-12-04 17:46:25 UTC&lt;span class="p">;&lt;/span> 1min 34s ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Process: &lt;span class="m">906&lt;/span> &lt;span class="nv">ExecStart&lt;/span>&lt;span class="o">=&lt;/span>/usr/local/bin/etcd &lt;span class="o">(&lt;/span>&lt;span class="nv">code&lt;/span>&lt;span class="o">=&lt;/span>killed, &lt;span class="nv">signal&lt;/span>&lt;span class="o">=&lt;/span>TERM&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Main PID: &lt;span class="m">906&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nv">code&lt;/span>&lt;span class="o">=&lt;/span>killed, &lt;span class="nv">signal&lt;/span>&lt;span class="o">=&lt;/span>TERM&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CPU: 6min 4.994s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">04&lt;/span> 17:46:24 k8s-master72u etcd&lt;span class="o">[&lt;/span>906&lt;span class="o">]&lt;/span>: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;ts&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2023-12-04T17:46:24.978391Z&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;caller&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;rafthttp/pipeline.go:85&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;stopped HTTP pipelining with remot&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 04 17:46:24 k8s-master72u etcd[906]: {&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>info&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>ts&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2023-12-04T17:46:24.978409Z&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>caller&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>rafthttp/stream.go:442&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>msg&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>stopped stream reader with remote p&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">04&lt;/span> 17:46:24 k8s-master72u etcd&lt;span class="o">[&lt;/span>906&lt;span class="o">]&lt;/span>: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;level&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;info&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;ts&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;2023-12-04T17:46:24.97843Z&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;caller&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;rafthttp/stream.go:442&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;msg&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;stopped stream reader with remote pe&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 04 17:46:24 k8s-master72u etcd[906]: {&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>info&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>ts&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2023-12-04T17:46:24.97845Z&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>caller&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>rafthttp/peer.go:335&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>msg&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>stopped remote peer&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>remote-peer-id&lt;span class="s2">&amp;#34;:&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 04 17:46:24 k8s-master72u etcd[906]: {&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>info&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>ts&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2023-12-04T17:46:24.98816Z&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>caller&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>embed/etcd.go:579&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>msg&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>stopping serving peer traffic&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>address&lt;span class="s2">&amp;#34;:&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 04 17:46:24 k8s-master72u etcd[906]: {&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>info&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>ts&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2023-12-04T17:46:24.988259Z&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>caller&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>embed/etcd.go:584&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>msg&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>stopped serving peer traffic&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>address&lt;span class="s2">&amp;#34;:&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Dec 04 17:46:24 k8s-master72u etcd[906]: {&amp;#34;&lt;/span>level&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>info&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>ts&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>2023-12-04T17:46:24.988274Z&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>caller&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>embed/etcd.go:378&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>msg&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>closed etcd server&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>name&lt;span class="s2">&amp;#34;:&amp;#34;&lt;/span>etcd2&lt;span class="s2">&amp;#34;,&amp;#34;&lt;/span>data&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">04&lt;/span> 17:46:25 k8s-master72u systemd&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>: etcd.service: Deactivated successfully.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">04&lt;/span> 17:46:25 k8s-master72u systemd&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>: Stopped etcd.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Dec &lt;span class="m">04&lt;/span> 17:46:25 k8s-master72u systemd&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>: etcd.service: Consumed 6min 4.994s CPU time.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="如果沒外部vipworker-node透過nginx-proxy反代理訪問master-node的kube-apiserver">如果沒外部VIP，worker node透過nginx proxy反代理，訪問master node的kube-apiserver&lt;/h2>
&lt;p>worker node透過nginx proxy反代理，訪問master node的kube-apiserver，每一個worker node都會有一個nginx pod
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203004609.png"
width="914"
height="674"
srcset="https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203004609_hu3312105d17ebb25db3905d7f10fea4ea_51982_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/ansible-deploy-kubernetes-cluster-use-kubespray-haproxy-keepalived/media/Pasted-image-20231203004609_hu3312105d17ebb25db3905d7f10fea4ea_51982_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="135"
data-flex-basis="325px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -A -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system nginx-proxy-node4 1/1 Running &lt;span class="m">0&lt;/span> 5m14s 192.168.1.75 node4 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-system nginx-proxy-node5 1/1 Running &lt;span class="m">0&lt;/span> 5m2s 192.168.1.76 node5 &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>使用Rook在Kubernetes安裝與管理Ceph分布式存儲系統</title><link>https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/</link><pubDate>Mon, 27 Nov 2023 21:13:16 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231205214201.png" alt="Featured image of post 使用Rook在Kubernetes安裝與管理Ceph分布式存儲系統" />&lt;p>&lt;a class="link" href="https://rook.io/docs/rook/latest-release/Getting-Started/intro/" target="_blank" rel="noopener"
>https://rook.io/docs/rook/latest-release/Getting-Started/intro/&lt;/a>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>節點名稱&lt;/th>
&lt;th>IP&lt;/th>
&lt;th>K8S角色&lt;/th>
&lt;th>組件&lt;/th>
&lt;th>磁碟 16G&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>k8s-master71u&lt;/td>
&lt;td>192.168.1.71&lt;/td>
&lt;td>master&lt;/td>
&lt;td>mon mgr osd mds mds&lt;/td>
&lt;td>/dev/sdb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-master72u&lt;/td>
&lt;td>192.168.1.72&lt;/td>
&lt;td>master&lt;/td>
&lt;td>mon mgr osd mds&lt;/td>
&lt;td>/dev/sdb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-master73u&lt;/td>
&lt;td>192.168.1.73&lt;/td>
&lt;td>master&lt;/td>
&lt;td>mon osd mds&lt;/td>
&lt;td>/dev/sdb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-node75u&lt;/td>
&lt;td>192.168.1.75&lt;/td>
&lt;td>worker&lt;/td>
&lt;td>osd mds&lt;/td>
&lt;td>/dev/sdb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-node76u&lt;/td>
&lt;td>192.168.1.76&lt;/td>
&lt;td>worker&lt;/td>
&lt;td>osd&lt;/td>
&lt;td>/dev/sdb&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="確認磁碟無格式化過">確認磁碟無格式化過&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# lsblk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop0 7:0 &lt;span class="m">0&lt;/span> 63.4M &lt;span class="m">1&lt;/span> loop /snap/core20/1974
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop1 7:1 &lt;span class="m">0&lt;/span> 63.5M &lt;span class="m">1&lt;/span> loop /snap/core20/2015
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop2 7:2 &lt;span class="m">0&lt;/span> 111.9M &lt;span class="m">1&lt;/span> loop /snap/lxd/24322
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop3 7:3 &lt;span class="m">0&lt;/span> 40.8M &lt;span class="m">1&lt;/span> loop /snap/snapd/20092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop4 7:4 &lt;span class="m">0&lt;/span> 40.9M &lt;span class="m">1&lt;/span> loop /snap/snapd/20290
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sda 8:0 &lt;span class="m">0&lt;/span> 50G &lt;span class="m">0&lt;/span> disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda1 8:1 &lt;span class="m">0&lt;/span> 1M &lt;span class="m">0&lt;/span> part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda2 8:2 &lt;span class="m">0&lt;/span> 2G &lt;span class="m">0&lt;/span> part /boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─sda3 8:3 &lt;span class="m">0&lt;/span> 48G &lt;span class="m">0&lt;/span> part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─ubuntu--vg-root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 253:0 &lt;span class="m">0&lt;/span> 48G &lt;span class="m">0&lt;/span> lvm /var/lib/kubelet/pods/ce7174f8-ad8f-4f42-8e58-2abca8c91424/volume-subpaths/tigera-ca-bundle/calico-node/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sdb 8:16 &lt;span class="m">0&lt;/span> 16G &lt;span class="m">0&lt;/span> disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sr0 11:0 &lt;span class="m">1&lt;/span> 1024M &lt;span class="m">0&lt;/span> rom
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# lsblk -f
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME FSTYPE FSVER LABEL UUID FSAVAIL FSUSE% MOUNTPOINTS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squash 4.0 &lt;span class="m">0&lt;/span> 100% /snap/core20/1974
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squash 4.0 &lt;span class="m">0&lt;/span> 100% /snap/core20/2015
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squash 4.0 &lt;span class="m">0&lt;/span> 100% /snap/lxd/24322
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squash 4.0 &lt;span class="m">0&lt;/span> 100% /snap/snapd/20092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> squash 4.0 &lt;span class="m">0&lt;/span> 100% /snap/snapd/20290
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sda
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ xfs f681192a-1cf2-4362-a74c-745374011700 1.8G 9% /boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─sda3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LVM2_m LVM2 JEduSv-mV9g-tzdJ-sYEc-6piR-6nAo-48Srdh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─ubuntu--vg-root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> xfs 19cd87ec-9741-4295-9762-e87fb4f472c8 37.9G 21% /var/lib/kubelet/pods/ce7174f8-ad8f-4f42-8e58-2abca8c91424/volume-subpaths/tigera-ca-bundle/calico-node/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sdb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# lsblk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME MAJ:MIN RM SIZE RO TYPE MOUNTPOINTS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop0 7:0 &lt;span class="m">0&lt;/span> 63.4M &lt;span class="m">1&lt;/span> loop /snap/core20/1974
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop1 7:1 &lt;span class="m">0&lt;/span> 63.5M &lt;span class="m">1&lt;/span> loop /snap/core20/2015
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop2 7:2 &lt;span class="m">0&lt;/span> 111.9M &lt;span class="m">1&lt;/span> loop /snap/lxd/24322
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop3 7:3 &lt;span class="m">0&lt;/span> 40.8M &lt;span class="m">1&lt;/span> loop /snap/snapd/20092
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">loop4 7:4 &lt;span class="m">0&lt;/span> 40.9M &lt;span class="m">1&lt;/span> loop /snap/snapd/20290
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sda 8:0 &lt;span class="m">0&lt;/span> 50G &lt;span class="m">0&lt;/span> disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda1 8:1 &lt;span class="m">0&lt;/span> 1M &lt;span class="m">0&lt;/span> part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├─sda2 8:2 &lt;span class="m">0&lt;/span> 2G &lt;span class="m">0&lt;/span> part /boot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└─sda3 8:3 &lt;span class="m">0&lt;/span> 48G &lt;span class="m">0&lt;/span> part
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─ubuntu--vg-root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 253:0 &lt;span class="m">0&lt;/span> 48G &lt;span class="m">0&lt;/span> lvm /var/lib/kubelet/pods/ce7174f8-ad8f-4f42-8e58-2abca8c91424/volume-subpaths/tigera-ca-bundle/calico-node/1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sdb 8:16 &lt;span class="m">0&lt;/span> 16G &lt;span class="m">0&lt;/span> disk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sr0 11:0 &lt;span class="m">1&lt;/span> 1024M &lt;span class="m">0&lt;/span> rom
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ceph-cluster佈屬">ceph cluster佈屬&lt;/h2>
&lt;h3 id="依序執行三個yaml">依序執行三個yaml&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rook/deploy/examples/crds.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook/deploy/examples/common.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook/deploy/examples/operator.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# git clone --single-branch --branch v1.12.8 https://github.com/rook/rook.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">cd&lt;/span> rook/deploy/examples
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f crds.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f common.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f operator.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 確認 rook-ceph-operator pod啟動完成&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get deployments.apps -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-operator 1/1 &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> 22s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get pod -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-operator-58775c8bdf-vmdkn 1/1 Running &lt;span class="m">0&lt;/span> 39s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="執行clusteryaml">執行cluster.yaml&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">cluster.yaml 分別調整
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 調度(使用節點親和性調度)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 角色資源
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 磁碟調度
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 關閉磁碟自動全部調度
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# vim cluster.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 角色調度(使用節點親和性調度)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> placement:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelectorTerms:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ceph-mon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelectorTerms:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ceph-mgr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelectorTerms:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ceph-osd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> prepareosd:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelectorTerms:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ceph-osd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 角色資源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> limits:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;2048Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;2048Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> limits:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;1024Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;1024Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> limits:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;2048Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: &lt;span class="s2">&amp;#34;1000m&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: &lt;span class="s2">&amp;#34;2048Mi&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 磁碟調度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;k8s-master71u&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;sdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storeType: bluestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> journalSizeMB: &lt;span class="s2">&amp;#34;4096&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;k8s-master72u&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;sdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storeType: bluestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> journalSizeMB: &lt;span class="s2">&amp;#34;4096&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;k8s-master73u&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;sdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storeType: bluestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> journalSizeMB: &lt;span class="s2">&amp;#34;4096&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;k8s-node75u&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;sdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storeType: bluestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> journalSizeMB: &lt;span class="s2">&amp;#34;4096&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;k8s-node76u&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> devices:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: &lt;span class="s2">&amp;#34;sdb&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> config:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storeType: bluestore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> journalSizeMB: &lt;span class="s2">&amp;#34;4096&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 關閉磁碟自動全部調度&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage: &lt;span class="c1"># cluster level storage configuration and selection&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#設置磁碟的參數，調整為false，方便後面訂製&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> useAllNodes: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> useAllDevices: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="主機打標籤">主機打標籤&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master71u ceph-mon&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master72u ceph-mon&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master73u ceph-mon&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master71u ceph-mgr&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master72u ceph-mgr&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master73u ceph-mgr&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master71u ceph-osd&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master72u ceph-osd&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master73u ceph-osd&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-node75u ceph-osd&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-node76u ceph-osd&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f cluster.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cephcluster.ceph.rook.io/rook-ceph created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="確認佈屬結果pending狀況發生">確認佈屬結果(Pending狀況發生)&lt;/h3>
&lt;p>&lt;font color=red>全部節點重開機就可以&lt;/font>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get pod -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-dfz59 2/2 Running &lt;span class="m">0&lt;/span> 17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-provisioner-668dfcf95b-dgs5l 5/5 Running &lt;span class="m">0&lt;/span> 17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-provisioner-668dfcf95b-wlz6r 5/5 Running &lt;span class="m">0&lt;/span> 17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-xqdvc 2/2 Running &lt;span class="m">0&lt;/span> 17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-l294v 2/2 Running &lt;span class="m">0&lt;/span> 17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-lts27 2/2 Running &lt;span class="m">0&lt;/span> 17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-provisioner-5b78f67bbb-7gz4x 5/5 Running &lt;span class="m">0&lt;/span> 17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-provisioner-5b78f67bbb-8w47k 5/5 Running &lt;span class="m">0&lt;/span> 17s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-csi-detect-version-tg598 0/1 Completed &lt;span class="m">0&lt;/span> 20s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-detect-version-z52cj 0/1 Completed &lt;span class="m">0&lt;/span> 20s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-a-6b8f546466-h5rp2 0/2 Pending &lt;span class="m">0&lt;/span> 9s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-a-canary-5554b85b75-wf78h 2/2 Running &lt;span class="m">0&lt;/span> 12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-b-canary-7569748cf6-cr59z 2/2 Running &lt;span class="m">0&lt;/span> 12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-c-canary-85d88b48d5-649pv 2/2 Running &lt;span class="m">0&lt;/span> 12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-operator-6bfb456b57-297f8 1/1 Running &lt;span class="m">0&lt;/span> 31s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>無法調度&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl describe pod rook-ceph-mon-a-6b8f546466-h5rp2 -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Node-Selectors: kubernetes.io/hostname&lt;span class="o">=&lt;/span>k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Tolerations: :NoSchedule &lt;span class="nv">op&lt;/span>&lt;span class="o">=&lt;/span>Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node.kubernetes.io/not-ready:NoExecute &lt;span class="nv">op&lt;/span>&lt;span class="o">=&lt;/span>Exists &lt;span class="k">for&lt;/span> 300s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node.kubernetes.io/unreachable:NoExecute &lt;span class="nv">op&lt;/span>&lt;span class="o">=&lt;/span>Exists &lt;span class="k">for&lt;/span> 300s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Events:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Type Reason Age From Message
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ---- ------ ---- ---- -------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Warning FailedScheduling 81s default-scheduler 0/5 nodes are available: &lt;span class="m">1&lt;/span> node&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> didn&lt;span class="s1">&amp;#39;t satisfy existing pods anti-affinity rules, 4 node(s) didn&amp;#39;&lt;/span>t match Pod&lt;span class="err">&amp;#39;&lt;/span>s node affinity/selector. preemption: 0/5 nodes are available: &lt;span class="m">1&lt;/span> No preemption victims found &lt;span class="k">for&lt;/span> incoming pod, &lt;span class="m">4&lt;/span> Preemption is not helpful &lt;span class="k">for&lt;/span> scheduling..
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-bk8gt 2/2 Running &lt;span class="m">4&lt;/span> &lt;span class="o">(&lt;/span>5m36s ago&lt;span class="o">)&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-provisioner-668dfcf95b-858rd 5/5 Running &lt;span class="m">10&lt;/span> &lt;span class="o">(&lt;/span>5m37s ago&lt;span class="o">)&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-provisioner-668dfcf95b-n4wdx 5/5 Running &lt;span class="m">10&lt;/span> &lt;span class="o">(&lt;/span>5m36s ago&lt;span class="o">)&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-cephfsplugin-rp5nh 2/2 Running &lt;span class="m">4&lt;/span> &lt;span class="o">(&lt;/span>5m37s ago&lt;span class="o">)&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-provisioner-5b78f67bbb-4vrtb 5/5 Running &lt;span class="m">10&lt;/span> &lt;span class="o">(&lt;/span>5m36s ago&lt;span class="o">)&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-provisioner-5b78f67bbb-m5789 5/5 Running &lt;span class="m">10&lt;/span> &lt;span class="o">(&lt;/span>5m36s ago&lt;span class="o">)&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-qfrtk 2/2 Running &lt;span class="m">4&lt;/span> &lt;span class="o">(&lt;/span>5m36s ago&lt;span class="o">)&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-rbdplugin-z68hx 2/2 Running &lt;span class="m">4&lt;/span> &lt;span class="o">(&lt;/span>5m36s ago&lt;span class="o">)&lt;/span> 18m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-crashcollector-k8s-master71u-55fcdbd66c-k6pkj 1/1 Running &lt;span class="m">0&lt;/span> 2m13s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-crashcollector-k8s-master72u-675646bf64-hnpw9 1/1 Running &lt;span class="m">0&lt;/span> 2m12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-crashcollector-k8s-master73u-84fdc469f7-6khkr 1/1 Running &lt;span class="m">0&lt;/span> 2m42s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-crashcollector-k8s-node75u-bbc794dd9-5zbhs 1/1 Running &lt;span class="m">0&lt;/span> 15s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-crashcollector-k8s-node76u-5fd59cd68b-b9pxq 1/1 Running &lt;span class="m">0&lt;/span> 24s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-csi-detect-version-pqgj7 0/1 Completed &lt;span class="m">0&lt;/span> 3m52s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-detect-version-rtgsq 0/1 Completed &lt;span class="m">0&lt;/span> 13s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-a-767b9fc956-xm4ns 3/3 Running &lt;span class="m">0&lt;/span> 2m49s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-b-8956fb9c-rvjff 3/3 Running &lt;span class="m">0&lt;/span> 2m48s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-a-769fd77b5b-trw4f 2/2 Running &lt;span class="m">0&lt;/span> 9m7s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-b-65cf769696-7dncd 2/2 Running &lt;span class="m">0&lt;/span> 3m14s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-c-58664986b-vqrzw 2/2 Running &lt;span class="m">0&lt;/span> 3m2s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-operator-58775c8bdf-mfp6n 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>5m36s ago&lt;span class="o">)&lt;/span> 23m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-0-55f6d9b-xrjb6 2/2 Running &lt;span class="m">0&lt;/span> 2m13s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-1-7db86764b-2fn48 2/2 Running &lt;span class="m">0&lt;/span> 2m12s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-2-84cd64ffcb-nxrkx 2/2 Running &lt;span class="m">0&lt;/span> 2m10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-3-748c78f4dd-whsxk 2/2 Running &lt;span class="m">0&lt;/span> 24s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-4-65c79df6dd-2w7z9 1/2 Running &lt;span class="m">0&lt;/span> 15s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-prepare-k8s-master71u-shwfs 0/1 Completed &lt;span class="m">0&lt;/span> 2m26s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-prepare-k8s-master72u-z4vbt 0/1 Completed &lt;span class="m">0&lt;/span> 2m26s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-prepare-k8s-master73u-rgxtn 0/1 Completed &lt;span class="m">0&lt;/span> 2m25s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-prepare-k8s-node75u-sdm5n 0/1 Completed &lt;span class="m">0&lt;/span> 2m24s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-osd-prepare-k8s-node76u-l8dlp 0/1 Completed &lt;span class="m">0&lt;/span> 2m23s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="執行toolboxyaml">執行toolbox.yaml&lt;/h3>
&lt;p>創建工具POD&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f toolbox.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment.apps/rook-ceph-tools created
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>可以看到ceph集群狀況&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl &lt;span class="nb">exec&lt;/span> -it rook-ceph-tools-7cd4cd9c9c-kd8pf -n rook-ceph -- /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ ceph -s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: b5e028e3-725d-4a26-8a14-17fe4dead850
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> health: HEALTH_OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon: &lt;span class="m">3&lt;/span> daemons, quorum a,b,c &lt;span class="o">(&lt;/span>age 5m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr: a&lt;span class="o">(&lt;/span>active, since 86s&lt;span class="o">)&lt;/span>, standbys: b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd: &lt;span class="m">5&lt;/span> osds: &lt;span class="m">5&lt;/span> up &lt;span class="o">(&lt;/span>since 2m&lt;span class="o">)&lt;/span>, &lt;span class="m">5&lt;/span> in &lt;span class="o">(&lt;/span>since 3m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pools: &lt;span class="m">1&lt;/span> pools, &lt;span class="m">1&lt;/span> pgs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> objects: &lt;span class="m">2&lt;/span> objects, &lt;span class="m">449&lt;/span> KiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usage: &lt;span class="m">41&lt;/span> MiB used, &lt;span class="m">80&lt;/span> GiB / &lt;span class="m">80&lt;/span> GiB avail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pgs: &lt;span class="m">1&lt;/span> active+clean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ ceph status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: b5e028e3-725d-4a26-8a14-17fe4dead850
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> health: HEALTH_OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon: &lt;span class="m">3&lt;/span> daemons, quorum a,b,c &lt;span class="o">(&lt;/span>age 6m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr: a&lt;span class="o">(&lt;/span>active, since 116s&lt;span class="o">)&lt;/span>, standbys: b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd: &lt;span class="m">5&lt;/span> osds: &lt;span class="m">5&lt;/span> up &lt;span class="o">(&lt;/span>since 3m&lt;span class="o">)&lt;/span>, &lt;span class="m">5&lt;/span> in &lt;span class="o">(&lt;/span>since 3m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pools: &lt;span class="m">1&lt;/span> pools, &lt;span class="m">1&lt;/span> pgs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> objects: &lt;span class="m">2&lt;/span> objects, &lt;span class="m">449&lt;/span> KiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usage: &lt;span class="m">41&lt;/span> MiB used, &lt;span class="m">80&lt;/span> GiB / &lt;span class="m">80&lt;/span> GiB avail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pgs: &lt;span class="m">1&lt;/span> active+clean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ ceph osd status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ID HOST USED AVAIL WR OPS WR DATA RD OPS RD DATA STATE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">0&lt;/span> k8s-master71u 8368k 15.9G &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> exists,up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> k8s-master72u 8820k 15.9G &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> exists,up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">2&lt;/span> k8s-master73u 8820k 15.9G &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> exists,up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">3&lt;/span> k8s-node76u 8432k 15.9G &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> exists,up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">4&lt;/span> k8s-node75u 7920k 15.9G &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> exists,up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ ceph df
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- RAW STORAGE ---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CLASS SIZE AVAIL USED RAW USED %RAW USED
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssd &lt;span class="m">80&lt;/span> GiB &lt;span class="m">80&lt;/span> GiB &lt;span class="m">41&lt;/span> MiB &lt;span class="m">41&lt;/span> MiB 0.05
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TOTAL &lt;span class="m">80&lt;/span> GiB &lt;span class="m">80&lt;/span> GiB &lt;span class="m">41&lt;/span> MiB &lt;span class="m">41&lt;/span> MiB 0.05
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--- POOLS ---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">POOL ID PGS STORED OBJECTS USED %USED MAX AVAIL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.mgr &lt;span class="m">1&lt;/span> &lt;span class="m">1&lt;/span> &lt;span class="m">449&lt;/span> KiB &lt;span class="m">2&lt;/span> &lt;span class="m">449&lt;/span> KiB &lt;span class="m">0&lt;/span> &lt;span class="m">25&lt;/span> GiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ rados df
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">POOL_NAME USED OBJECTS CLONES COPIES MISSING_ON_PRIMARY UNFOUND DEGRADED RD_OPS RD WR_OPS WR USED COMPR UNDER COMPR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.mgr &lt;span class="m">449&lt;/span> KiB &lt;span class="m">2&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">6&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">0&lt;/span> &lt;span class="m">288&lt;/span> &lt;span class="m">494&lt;/span> KiB &lt;span class="m">153&lt;/span> 1.3 MiB &lt;span class="m">0&lt;/span> B &lt;span class="m">0&lt;/span> B
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total_objects &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total_used &lt;span class="m">41&lt;/span> MiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total_avail &lt;span class="m">80&lt;/span> GiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total_space &lt;span class="m">80&lt;/span> GiB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="主機直接查看cephceph-common安裝">主機直接查看ceph(ceph-common安裝)&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安裝ceph client工具&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# apt install ceph-common
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 將連線設定，複製出來&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl &lt;span class="nb">exec&lt;/span> -it rook-ceph-tools-7cd4cd9c9c-kd8pf -n rook-ceph -- /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ cat /etc/ceph/ceph.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>global&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">mon_host&lt;/span> &lt;span class="o">=&lt;/span> 10.245.146.85:6789,10.245.203.29:6789,10.245.216.126:6789
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>client.admin&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">keyring&lt;/span> &lt;span class="o">=&lt;/span> /etc/ceph/keyring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bash-4.4$ cat /etc/ceph/keyring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>client.admin&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">AQA8LmZlDA21GhAAvgMoEOkXur9olDYtGkF8kQ&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 主機創建連線設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# vim /etc/ceph/ceph.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>global&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">mon_host&lt;/span> &lt;span class="o">=&lt;/span> 10.245.146.85:6789,10.245.203.29:6789,10.245.216.126:6789
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>client.admin&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">keyring&lt;/span> &lt;span class="o">=&lt;/span> /etc/ceph/keyring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# vim /etc/ceph/keyring
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>client.admin&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">key&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">AQA8LmZlDA21GhAAvgMoEOkXur9olDYtGkF8kQ&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 主機直接連接ceph管理&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# ceph -s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: b5e028e3-725d-4a26-8a14-17fe4dead850
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> health: HEALTH_OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon: &lt;span class="m">3&lt;/span> daemons, quorum a,b,c &lt;span class="o">(&lt;/span>age 2m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr: a&lt;span class="o">(&lt;/span>active, since 2m&lt;span class="o">)&lt;/span>, standbys: b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd: &lt;span class="m">5&lt;/span> osds: &lt;span class="m">5&lt;/span> up &lt;span class="o">(&lt;/span>since 2m&lt;span class="o">)&lt;/span>, &lt;span class="m">5&lt;/span> in &lt;span class="o">(&lt;/span>since 10m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pools: &lt;span class="m">1&lt;/span> pools, &lt;span class="m">1&lt;/span> pgs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> objects: &lt;span class="m">2&lt;/span> objects, &lt;span class="m">449&lt;/span> KiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usage: &lt;span class="m">39&lt;/span> MiB used, &lt;span class="m">80&lt;/span> GiB / &lt;span class="m">80&lt;/span> GiB avail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pgs: &lt;span class="m">1&lt;/span> active+clean
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="cephfs佈屬">cephfs佈屬&lt;/h2>
&lt;h3 id="主機打標籤-1">主機打標籤&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master71u ceph-mds&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master72u ceph-mds&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-master73u ceph-mds&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-node75u ceph-mds&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl label node k8s-node76u ceph-mds&lt;span class="o">=&lt;/span>enabled
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="執行filesystemyaml">執行filesystem.yaml&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">filesystem.yaml 分別調整
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># activeCount: 2 (2 active、2 stanby)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 調度(使用節點親和性調度) -&amp;gt; nodeAffinity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># POD反親和性 -&amp;gt; podAntiAffinity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 防止同一台主機上，有兩個mds
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# vim filesystem.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> activeCount: &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> placement:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelectorTerms:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: ceph-mds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tolerations:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: Exists
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> podAntiAffinity:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requiredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - labelSelector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - rook-ceph-mds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> topologyKey: kubernetes.io/hostname
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> preferredDuringSchedulingIgnoredDuringExecution:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - weight: &lt;span class="m">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> podAffinityTerm:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labelSelector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchExpressions:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - key: app
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> operator: In
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> values:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - rook-ceph-mds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> topologyKey: topology.kubernetes.io/zone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f filesystem.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="確認佈屬結果">確認佈屬結果&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get pod -n rook-ceph -o wide &lt;span class="p">|&lt;/span> grep -i rook-ceph-mds
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mds-myfs-a-656c99cf6b-mp7bq 2/2 Running &lt;span class="m">0&lt;/span> 2m37s 10.244.96.33 k8s-master73u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mds-myfs-b-65bf4fdbcd-j9gzt 2/2 Running &lt;span class="m">0&lt;/span> 2m36s 10.244.14.186 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mds-myfs-c-b7bd7658-tt845 2/2 Running &lt;span class="m">0&lt;/span> 2m34s 10.244.255.213 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mds-myfs-d-dff64fb98-zb4rv 2/2 Running &lt;span class="m">0&lt;/span> 2m31s 10.244.133.17 k8s-master71u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph -s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: b5e028e3-725d-4a26-8a14-17fe4dead850
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> health: HEALTH_OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mon: &lt;span class="m">3&lt;/span> daemons, quorum a,b,c &lt;span class="o">(&lt;/span>age 11m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mgr: a&lt;span class="o">(&lt;/span>active, since 12m&lt;span class="o">)&lt;/span>, standbys: b
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mds: 2/2 daemons up, &lt;span class="m">2&lt;/span> hot standby
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> osd: &lt;span class="m">5&lt;/span> osds: &lt;span class="m">5&lt;/span> up &lt;span class="o">(&lt;/span>since 12m&lt;span class="o">)&lt;/span>, &lt;span class="m">5&lt;/span> in &lt;span class="o">(&lt;/span>since 19m&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes: 1/1 healthy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pools: &lt;span class="m">3&lt;/span> pools, &lt;span class="m">49&lt;/span> pgs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> objects: &lt;span class="m">45&lt;/span> objects, &lt;span class="m">452&lt;/span> KiB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usage: &lt;span class="m">46&lt;/span> MiB used, &lt;span class="m">80&lt;/span> GiB / &lt;span class="m">80&lt;/span> GiB avail
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pgs: 2.041% pgs not active
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">48&lt;/span> active+clean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="m">1&lt;/span> peering
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> io:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> client: 1.5 KiB/s rd, &lt;span class="m">3&lt;/span> op/s rd, &lt;span class="m">0&lt;/span> op/s wr
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> recovery: &lt;span class="m">95&lt;/span> B/s, &lt;span class="m">0&lt;/span> objects/s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="創建storageclassstorageclassyaml">創建storageclass(storageclass.yaml)&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/csi/cephfs# kubectl create -f storageclass.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/csi/cephfs# kubectl get storageclasses.storage.k8s.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME PROVISIONER RECLAIMPOLICY VOLUMEBINDINGMODE ALLOWVOLUMEEXPANSION AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-cephfs rook-ceph.cephfs.csi.ceph.com Delete Immediate &lt;span class="nb">true&lt;/span> 8s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/csi/cephfs# ceph fs ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: myfs, metadata pool: myfs-metadata, data pools: &lt;span class="o">[&lt;/span>myfs-replicated &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="測試storageclassnamerook-cephfs">測試storageClassName(rook-cephfs)&lt;/h3>
&lt;p>申請PVC，指定storageClassName: &amp;ldquo;rook-cephfs&amp;rdquo;&lt;/p>
&lt;p>實現自動提供掛載空間&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat sc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: apps/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: web-sc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchLabels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replicas: &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumeMounts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: wwwroot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mountPath: /usr/share/nginx/html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: wwwroot
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> persistentVolumeClaim:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> claimName: web-sc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: PersistentVolumeClaim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: web-sc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageClassName: &lt;span class="s2">&amp;#34;rook-cephfs&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> accessModes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ReadWriteMany
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage: 5Gi
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl create -f sc.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">test-nginx 1/1 Running &lt;span class="m">5&lt;/span> &lt;span class="o">(&lt;/span>33m ago&lt;span class="o">)&lt;/span> 69d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web-sc-7b6c54fbb9-8q254 1/1 Running &lt;span class="m">0&lt;/span> 46s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web-sc-7b6c54fbb9-hkw2z 1/1 Running &lt;span class="m">0&lt;/span> 46s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web-sc-7b6c54fbb9-m4qlf 1/1 Running &lt;span class="m">0&lt;/span> 46s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CAPACITY ACCESS MODES RECLAIM POLICY STATUS CLAIM STORAGECLASS REASON AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pvc-ea9ac011-5fd5-4436-ad61-468e9ce95239 5Gi RWX Delete Bound default/web-sc rook-cephfs 51s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pvc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">web-sc Bound pvc-ea9ac011-5fd5-4436-ad61-468e9ce95239 5Gi RWX rook-cephfs 54s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>測試兩個POD確實掛載了相同位置&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl &lt;span class="nb">exec&lt;/span> -ti web-sc-7b6c54fbb9-8q254 -- /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-8q254:/#
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-8q254:/# df -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Filesystem Size Used Avail Use% Mounted on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.245.146.85:6789,10.245.203.29:6789,10.245.216.126:6789:/volumes/csi/csi-vol-d7642fd0-5da4-4599-b69e-bc0c1b948ded/dccf324f-8ad6-40f3-9e99-6186a32d3faf 5.0G &lt;span class="m">0&lt;/span> 5.0G 0% /usr/share/nginx/html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-8q254:/# &lt;span class="nb">cd&lt;/span> /usr/share/nginx/html/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-8q254:/usr/share/nginx/html# touch &lt;span class="m">123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-8q254:/usr/share/nginx/html# ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-8q254:/usr/share/nginx/html# &lt;span class="nb">exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl &lt;span class="nb">exec&lt;/span> -ti web-sc-7b6c54fbb9-hkw2z -- /bin/bash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-hkw2z:/# df -h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Filesystem Size Used Avail Use% Mounted on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">10.245.146.85:6789,10.245.203.29:6789,10.245.216.126:6789:/volumes/csi/csi-vol-d7642fd0-5da4-4599-b69e-bc0c1b948ded/dccf324f-8ad6-40f3-9e99-6186a32d3faf 5.0G &lt;span class="m">0&lt;/span> 5.0G 0% /usr/share/nginx/html
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-hkw2z:/# &lt;span class="nb">cd&lt;/span> /usr/share/nginx/html/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@web-sc-7b6c54fbb9-hkw2z:/usr/share/nginx/html# ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="m">123&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ceph管理平台">Ceph管理平台&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get services -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr ClusterIP 10.245.33.129 &amp;lt;none&amp;gt; 9283/TCP 34m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-dashboard ClusterIP 10.245.17.131 &amp;lt;none&amp;gt; 7000/TCP 34m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-a ClusterIP 10.245.146.85 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 41m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-b ClusterIP 10.245.203.29 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 35m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-c ClusterIP 10.245.216.126 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 35m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl create -f dashboard-external-https.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get services -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr ClusterIP 10.245.33.129 &amp;lt;none&amp;gt; 9283/TCP 36m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-dashboard ClusterIP 10.245.17.131 &amp;lt;none&amp;gt; 7000/TCP 36m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-dashboard-external-https NodePort 10.245.106.246 &amp;lt;none&amp;gt; 8443:30901/TCP 10s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-a ClusterIP 10.245.146.85 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 43m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-b ClusterIP 10.245.203.29 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 37m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-c ClusterIP 10.245.216.126 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 37m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>https://192.168.1.75:30901/#/login?returnUrl=%2Fdashboard&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129030025.png"
width="895"
height="556"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129030025_hufe507121e66ab48a7e7cb9da2387980a_27937_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129030025_hufe507121e66ab48a7e7cb9da2387980a_27937_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="160"
data-flex-basis="386px"
>&lt;/p>
&lt;p>獲取密碼&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# kubectl get secrets -n rook-ceph rook-ceph-dashboard-password -o yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">data:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> password: &lt;span class="nv">Y0w5bG1Vb0QlTCpQViM2RFB3U3k&lt;/span>&lt;span class="o">=&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;Y0w5bG1Vb0QlTCpQViM2RFB3U3k=&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> base64 -d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cL9lmUoD%L*PV#6DPwSy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129030211.png"
width="770"
height="579"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129030211_hu5cc736b502bda6979ebd445587d015ee_25678_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129030211_hu5cc736b502bda6979ebd445587d015ee_25678_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="132"
data-flex-basis="319px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129035101.png"
width="1448"
height="551"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129035101_hu902dc51f2cb745e9a49fdfbb29fe9200_92494_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129035101_hu902dc51f2cb745e9a49fdfbb29fe9200_92494_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="262"
data-flex-basis="630px"
>&lt;/p>
&lt;p>更改密碼
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231130001900.png"
width="840"
height="484"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231130001900_hu1ffbcc6acbf3c769c46025e1fc48d4c4_60177_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231130001900_hu1ffbcc6acbf3c769c46025e1fc48d4c4_60177_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="416px"
>&lt;/p>
&lt;p>一直報這個錯誤，導致集群檢查不健康
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231130010912.png"
width="1112"
height="261"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231130010912_huca94f267da5be9db3bd5e717b7a2fdc1_41768_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231130010912_huca94f267da5be9db3bd5e717b7a2fdc1_41768_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="426"
data-flex-basis="1022px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">overall HEALTH_WARN &lt;span class="m">1&lt;/span> mgr modules have recently crashed
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>查看報錯&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph crash ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ID ENTITY NEW
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023-11-28T19:02:15.741903Z_cff323ca-e2d5-415c-b5e6-e518a4a2e892 mgr.a *
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph crash info 2023-11-28T19:02:15.741903Z_cff323ca-e2d5-415c-b5e6-e518a4a2e892
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;backtrace&amp;#34;&lt;/span>: &lt;span class="o">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34; File \&amp;#34;/usr/share/ceph/mgr/nfs/module.py\&amp;#34;, line 169, in cluster_ls\n return available_clusters(self)&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34; File \&amp;#34;/usr/share/ceph/mgr/nfs/utils.py\&amp;#34;, line 38, in available_clusters\n completion = mgr.describe_service(service_type=&amp;#39;nfs&amp;#39;)&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34; File \&amp;#34;/usr/share/ceph/mgr/orchestrator/_interface.py\&amp;#34;, line 1488, in inner\n completion = self._oremote(method_name, args, kwargs)&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34; File \&amp;#34;/usr/share/ceph/mgr/orchestrator/_interface.py\&amp;#34;, line 1555, in _oremote\n raise NoOrchestrator()&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;orchestrator._interface.NoOrchestrator: No orchestrator configured (try `ceph orch set backend`)&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;ceph_version&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;17.2.6&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;crash_id&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;2023-11-28T19:02:15.741903Z_cff323ca-e2d5-415c-b5e6-e518a4a2e892&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;entity_name&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;mgr.a&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;mgr_module&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;nfs&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;mgr_module_caller&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;ActivePyModule::dispatch_remote cluster_ls&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;mgr_python_exception&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;NoOrchestrator&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;os_id&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;centos&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;os_name&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;CentOS Stream&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;os_version&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;8&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;os_version_id&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;8&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;process_name&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;ceph-mgr&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;stack_sig&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;b01db59d356dd52f69bfb0b128a216e7606f54a60674c3c82711c23cf64832ce&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;timestamp&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;2023-11-28T19:02:15.741903Z&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;utsname_hostname&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;rook-ceph-mgr-a-767b9fc956-xm4ns&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;utsname_machine&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;x86_64&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;utsname_release&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;5.15.0-84-generic&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;utsname_sysname&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;Linux&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;utsname_version&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;#93-Ubuntu SMP Tue Sep 5 17:16:10 UTC 2023&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>需啟用mgr rook的modules&lt;/p>
&lt;p>參考網址： &lt;a class="link" href="https://github.com/rook/rook/issues/11316" target="_blank" rel="noopener"
>https://github.com/rook/rook/issues/11316&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 預設rook沒有啟用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph mgr module ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph mgr module &lt;span class="nb">enable&lt;/span> rook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph mgr module ls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">MODULE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">balancer on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">crash on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">devicehealth on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">orchestrator on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pg_autoscaler on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">progress on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rbd_support on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">status on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">telemetry on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">volumes on &lt;span class="o">(&lt;/span>always on&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dashboard on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iostat on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nfs on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">restful on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook on
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples# ceph crash archive 2023-11-28T19:02:15.741903Z_cff323ca-e2d5-415c-b5e6-e518a4a2e892
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>這樣集群檢查就會顯示健康&lt;/p>
&lt;h3 id="查看mgr暴露的metric監控指標">查看mgr暴露的metric監控指標&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 服務改成 NodePort&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl edit services rook-ceph-mgr -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: NodePort
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl get svc -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr NodePort 10.245.33.129 &amp;lt;none&amp;gt; 9283:30602/TCP 48m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 可以看到監控指標&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# curl http://10.245.33.129:9283/metrics
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># HELP ceph_purge_queue_pq_item_in_journal Purge item left in journal&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># TYPE ceph_purge_queue_pq_item_in_journal gauge&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ceph_purge_queue_pq_item_in_journal&lt;span class="o">{&lt;/span>&lt;span class="nv">ceph_daemon&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;mds.myfs-d&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span> 0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ceph_purge_queue_pq_item_in_journal&lt;span class="o">{&lt;/span>&lt;span class="nv">ceph_daemon&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;mds.myfs-a&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span> 0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ceph_purge_queue_pq_item_in_journal&lt;span class="o">{&lt;/span>&lt;span class="nv">ceph_daemon&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;mds.myfs-b&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span> 0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ceph_purge_queue_pq_item_in_journal&lt;span class="o">{&lt;/span>&lt;span class="nv">ceph_daemon&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;mds.myfs-c&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span> 0.0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>http://192.168.1.75:30602/metrics&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129031249.png"
width="1442"
height="674"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129031249_hu5e187ea5f63f89641c7771755bc26dad_274456_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129031249_hu5e187ea5f63f89641c7771755bc26dad_274456_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="213"
data-flex-basis="513px"
>&lt;/p>
&lt;h2 id="安裝prometheus收集指標">安裝Prometheus收集指標&lt;/h2>
&lt;h4 id="安裝prometheus-operator">安裝prometheus-operator&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# wget https://raw.githubusercontent.com/coreos/prometheus-operator/v0.70.0/bundle.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f bundle.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl get pod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus-operator-754cf6c978-wgn4w 1/1 Running &lt;span class="m">0&lt;/span> 23s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus-operator-847b56864c-6gp95 1/1 Running &lt;span class="m">0&lt;/span> 5m55s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="安裝prometheus-server">安裝prometheus server&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f prometheus.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f prometheus-service.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f service-monitor.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl get pod -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus-rook-prometheus-0 2/2 Running &lt;span class="m">0&lt;/span> 63s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl get services -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus-operated ClusterIP None &amp;lt;none&amp;gt; 9090/TCP 88s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr NodePort 10.245.33.129 &amp;lt;none&amp;gt; 9283:30602/TCP 53m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-dashboard ClusterIP 10.245.17.131 &amp;lt;none&amp;gt; 7000/TCP 53m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mgr-dashboard-external-https NodePort 10.245.106.246 &amp;lt;none&amp;gt; 8443:30901/TCP 17m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-a ClusterIP 10.245.146.85 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 60m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-b ClusterIP 10.245.203.29 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 54m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-ceph-mon-c ClusterIP 10.245.216.126 &amp;lt;none&amp;gt; 6789/TCP,3300/TCP 54m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rook-prometheus NodePort 10.245.174.189 &amp;lt;none&amp;gt; 9090:30900/TCP 77s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>http://192.168.1.75:30900/graph&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129031704.png"
width="737"
height="504"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129031704_hu3d3d66b2b74cd2c013d9b7d93aea72d6_46635_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129031704_hu3d3d66b2b74cd2c013d9b7d93aea72d6_46635_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="146"
data-flex-basis="350px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129031715.png"
width="1092"
height="538"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129031715_hu6e6c777882a0e2051f1fc5a866fb2514_82515_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129031715_hu6e6c777882a0e2051f1fc5a866fb2514_82515_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="202"
data-flex-basis="487px"
>&lt;/p>
&lt;h2 id="安裝grafana展示圖表">安裝Grafana展示圖表&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# vim grafana-all.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: PersistentVolumeClaim
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> accessModes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ReadWriteOnce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storageClassName: rook-cephfs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> storage: 100Gi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: apps/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Deployment
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchLabels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> persistentVolumeClaim:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> claimName: grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> securityContext:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> runAsUser: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> image: grafana/grafana:9.5.14
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> imagePullPolicy: IfNotPresent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - containerPort: &lt;span class="m">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> env:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: GF_SECURITY_ADMIN_USER
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: GF_SECURITY_ADMIN_PASSWORD
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> readinessProbe:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> failureThreshold: &lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> httpGet:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: /api/health
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: &lt;span class="m">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scheme: HTTP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> initialDelaySeconds: &lt;span class="m">60&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> periodSeconds: &lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> successThreshold: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeoutSeconds: &lt;span class="m">30&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> livenessProbe:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> failureThreshold: &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> httpGet:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> path: /api/health
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port: &lt;span class="m">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> scheme: HTTP
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> periodSeconds: &lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> successThreshold: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeoutSeconds: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> resources:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> limits:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: 150m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: 512Mi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> requests:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cpu: 150m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> memory: 512Mi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumeMounts:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - mountPath: /var/lib/grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: storage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: NodePort
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - port: &lt;span class="m">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app: grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: networking.k8s.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Ingress
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ingressClassName: nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rules:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - host: grafana.jimmyhome.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> http:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> paths:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - path: /
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> pathType: Prefix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> backend:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> service:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> port:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> number: &lt;span class="m">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl create -f grafana-all.yaml
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl get pod -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grafana-654886fbff-wzx9n 0/1 Running &lt;span class="m">0&lt;/span> 42s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/rook/deploy/examples/monitoring# kubectl get svc,pvc -n rook-ceph
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME TYPE CLUSTER-IP EXTERNAL-IP PORT&lt;span class="o">(&lt;/span>S&lt;span class="o">)&lt;/span> AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">service/grafana NodePort 10.245.92.95 &amp;lt;none&amp;gt; 3000:31348/TCP 68s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS VOLUME CAPACITY ACCESS MODES STORAGECLASS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">persistentvolumeclaim/grafana Bound pvc-75e0cc6e-5130-4ab6-b447-0d19d95880f3 200Gi RWO rook-cephfs 69s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>http://192.168.1.75:31348/login&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032738.png"
width="1043"
height="755"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032738_hudda5a2b7780cac5e07b36804ae763151_429646_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032738_hudda5a2b7780cac5e07b36804ae763151_429646_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="138"
data-flex-basis="331px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032828.png"
width="1041"
height="815"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032828_hu3e30c24a2138532c17c5d5d206eeb5f9_106197_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032828_hu3e30c24a2138532c17c5d5d206eeb5f9_106197_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="127"
data-flex-basis="306px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032923.png"
width="1054"
height="646"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032923_hu120378f266eaff630516552849427be9_66205_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032923_hu120378f266eaff630516552849427be9_66205_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="163"
data-flex-basis="391px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032945.png"
width="1442"
height="669"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032945_hu5d0c8a00be6c0591a620efba06e3e206_110994_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129032945_hu5d0c8a00be6c0591a620efba06e3e206_110994_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="215"
data-flex-basis="517px"
>&lt;/p>
&lt;p>填寫Prometheus service ip
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033201.png"
width="977"
height="933"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033201_hu5e056007209b8a60982c4deeb9023e90_114179_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033201_hu5e056007209b8a60982c4deeb9023e90_114179_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="104"
data-flex-basis="251px"
>&lt;/p>
&lt;p>連線成功
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033216.png"
width="965"
height="931"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033216_hu68e031f3409d496c5c0e74e866f39174_98080_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033216_hu68e031f3409d496c5c0e74e866f39174_98080_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="103"
data-flex-basis="248px"
>&lt;/p>
&lt;p>Dashboard導入&lt;/p>
&lt;p>&lt;a class="link" href="https://grafana.com/grafana/dashboards/2842-ceph-cluster/" target="_blank" rel="noopener"
>https://grafana.com/grafana/dashboards/2842-ceph-cluster/&lt;/a>
&lt;a class="link" href="https://grafana.com/grafana/dashboards/5336-ceph-osd-single/" target="_blank" rel="noopener"
>https://grafana.com/grafana/dashboards/5336-ceph-osd-single/&lt;/a>
&lt;a class="link" href="https://grafana.com/grafana/dashboards/5342-ceph-pools/" target="_blank" rel="noopener"
>https://grafana.com/grafana/dashboards/5342-ceph-pools/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033454.png"
width="944"
height="662"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033454_hufc14a3eb5fdd28879fee795a8c8a1ae4_84558_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033454_hufc14a3eb5fdd28879fee795a8c8a1ae4_84558_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="142"
data-flex-basis="342px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033528.png"
width="1444"
height="952"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033528_huc2735031242b707af4c1b9b365618eef_238113_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033528_huc2735031242b707af4c1b9b365618eef_238113_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="151"
data-flex-basis="364px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033556.png"
width="938"
height="692"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033556_hu3753b8992440733a08d09a641a826f9d_85471_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033556_hu3753b8992440733a08d09a641a826f9d_85471_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="135"
data-flex-basis="325px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033610.png"
width="1445"
height="935"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033610_hu1758e4ffe16c9e0a29ee87f12fcf0052_147630_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033610_hu1758e4ffe16c9e0a29ee87f12fcf0052_147630_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="154"
data-flex-basis="370px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033640.png"
width="918"
height="683"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033640_hu9ef17ef25dce363feba9835b84028665_84160_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033640_hu9ef17ef25dce363feba9835b84028665_84160_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="134"
data-flex-basis="322px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033654.png"
width="1443"
height="944"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033654_hu0975ae701899ae8815b97f0fddb79516_161344_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-rook-ceph/media/Pasted-image-20231129033654_hu0975ae701899ae8815b97f0fddb79516_161344_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="152"
data-flex-basis="366px"
>&lt;/p></description></item><item><title>精準用腦:提升大腦效能、杜絕失誤的科學開光術 - Summary02 - 改變「輸入」方法，就能將注意力發揮到極限</title><link>https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/</link><pubDate>Sat, 25 Nov 2023 03:52:03 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/media/Pasted-image-20231124211906.png" alt="Featured image of post 精準用腦:提升大腦效能、杜絕失誤的科學開光術 - Summary02 - 改變「輸入」方法，就能將注意力發揮到極限" />&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/media/Pasted-image-20231124211906.png"
width="628"
height="777"
srcset="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/media/Pasted-image-20231124211906_hud8fd17581fe14af381e745166bf6c077_304607_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/media/Pasted-image-20231124211906_hud8fd17581fe14af381e745166bf6c077_304607_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="80"
data-flex-basis="193px"
>&lt;/p>
&lt;h2 id="font-colorblue我的感想與收穫font">&lt;font color=blue>我的感想與收穫&lt;/font>&lt;/h2>
&lt;p>&lt;font color=red>以下是我從書中提取出來，對我來說，是不錯的句子。
出自《精準用腦》https://readmoo.com/book/210093852000101&lt;/font>&lt;/p>
&lt;h1 id="part-1-改變輸入方法就能將注意力發揮到極限">PART 1 改變「輸入」方法，就能將注意力發揮到極限&lt;/h1>
&lt;h2 id="熟練地使用工作記憶">熟練地使用「工作記憶」&lt;/h2>
&lt;h3 id="大腦的作業區域掌握出錯的關鍵">大腦的作業區域掌握出錯的關鍵&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>所謂的工作記憶，就是「大腦的作業區域」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>工作記憶的容量越多，越能快速又準確地處理資訊。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>工作記憶越多，處理資訊的速度就越快，可以迅速有效地處理工作。結果就是，處理工作的流程變快，出錯的情況也變少。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="工作記憶的容量">工作記憶的容量&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>根據最近的研究，據說工作記憶的容量在「３」左右。到「３」為止，幾乎所有人都可以確實記得，不過一旦超過「５」，記憶就會變得不確定，也有人大腦變成一片空白。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>簡單地整理一下，狀態絕佳→４台、健康→３台、大腦疲勞→2台、憂鬱症→１台，就是這樣的感覺。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="9個鍛鍊工作記憶的方法">9個鍛鍊工作記憶的方法&lt;/h2>
&lt;h3 id="1睡眠">（1）睡眠&lt;/h3>
&lt;ul>
&lt;li>為了讓自己擁有的工作記憶發揮出百分之分的能力，必須確實睡足需要的睡眠時間（超過７小時）。&lt;/li>
&lt;/ul>
&lt;h3 id="2運動">（2）運動&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>運動會加強工作記憶，不只是工作記憶，還可以讓注意力、專注力、記憶力、學習力等眾多大腦的運作更加有活力，以預防失智症。也就是說，運動可說是「最強的大腦訓練活動」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>當中最為推薦的是慢跑，或是快步走。為了讓大腦更有活力，建議每週最少做2小時的有氧運動。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="3親近大自然">（3）親近大自然&lt;/h3>
&lt;ul>
&lt;li>在運動的時候，同時思考或判斷，可以讓大腦更加活化。&lt;/li>
&lt;/ul>
&lt;h3 id="4閱讀">（4）閱讀&lt;/h3>
&lt;ul>
&lt;li>從以前就有人提出「閱讀就能鍛鍊工作記憶」的說法，從這個研究可以更加明確地知道，實際上工作記憶與解讀能力相關，只要閱讀文章書籍，鍛鍊解讀能力，就可以鍛鍊工作記憶。&lt;/li>
&lt;/ul>
&lt;h3 id="5使用記憶力">（5）使用記憶力&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>要有意識地背誦某些東西。使用「記憶力」，就會訓練工作記憶。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>因此最重要的是，要自己積極主動地參加資格考試、晉級考試，或者接受某項興趣的「檢定」，長大成人之後也要繼續學習才行。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="6心算">（6）心算&lt;/h3>
&lt;h3 id="7棋盤遊戲">（7）棋盤遊戲&lt;/h3>
&lt;ul>
&lt;li>西洋棋、將棋、圍棋等棋盤遊戲，是非常有效的認知訓練。也有研究顯示，棋盤遊戲不但可以有效訓練工作記憶，也可以有效預防失智症。&lt;/li>
&lt;/ul>
&lt;h3 id="8烹飪">（8）烹飪&lt;/h3>
&lt;ul>
&lt;li>烹飪好像很簡單，作業「流程」卻很複雜，所以烹飪本身就是大腦的訓練。&lt;/li>
&lt;/ul>
&lt;h3 id="9正念療法">（9）正念療法&lt;/h3>
&lt;ul>
&lt;li>關於正念療法，也有報告顯示，有抑制壓力荷爾蒙、活化前額葉，以及活化腦內物質血清素等功效。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/media/Pasted%20image%2020231124225524.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/media/Pasted%20image%2020231124225524_hu1ac36bb7ff099a3c195ff19893d62412_333610_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/media/Pasted%20image%2020231124225524_hu1ac36bb7ff099a3c195ff19893d62412_333610_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;h3 id="單工術1-專注於一點的單工術">單工術1 專注於一點的單工術&lt;/h3>
&lt;h4 id="同時進行是錯誤發生的根源">「同時進行」是錯誤發生的根源&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>目前要如何有效率地使用自己現在的工作記憶，是減少輸入錯誤的重要課題。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>重要的是不要「多工處理」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>想一次處理好幾件事，大腦的處理速度就會變慢，不只是多花更多作業時間，工作量超過大腦最大資訊處理度的瞬間，就會出現錯誤。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>根據最近大腦科學的研究顯示，「人類的大腦無法多工」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如果身體長期大量分泌壓力荷爾蒙，會使得海馬迴產生萎縮。而且，一旦壓力荷爾蒙增加，也會造成專注力不足或是猛然想不起來的情況。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>此外根據其他研究可知，如果沒辦法集中精神處理一個課題，結束那個課題所花的時間會增加50%，而且產生錯誤的機率最多也會提升50%。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>也有研究報告指出，如果同時進行兩個相似的任務，效率低落不只50%，甚至會下降80︱95%。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>多工處理會比分別執行兩項任務還要花更多時間。而且，弄錯或出錯的機率也會往上攀升1.5倍。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>對大腦造成負擔的多工處理，其本身就是引起錯誤的巨大原因，同時也會讓身體分泌壓力荷爾蒙，造成大腦疲勞。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="一聽音樂工作就進展得很順利">一聽音樂，工作就進展得很順利？&lt;/h4>
&lt;ul>
&lt;li>音樂對「學習」、「記憶」、「閱讀能力」之類的事有負面效果，對「作業」、「運動」有正面的效果。依照工作內容的不同，音樂效用也會跟著改變。&lt;/li>
&lt;/ul>
&lt;h4 id="利用雙重課題提升效能">利用雙重課題提升效能&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>「有氧運動」與「訓練大腦」一起進行的「雙重課題」，訓練大腦的功效極高&lt;/p>
&lt;/li>
&lt;li>
&lt;p>結果是，「運動＋使用大腦」這一組不只可以預防大腦萎縮，而且記憶力還變得更好了。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>也就是說，進行「運動」＋「認知課題」這種雙重課題，額葉的血流就會增加。所謂的額葉，是與注意力、專注力，以及前述工作記憶有關的大腦部位。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>雙重課題訓練，不只是對已經罹患失智症或有輕度認知障礙的人有效，對於健康的上班族來說也是一種有效的大腦訓練。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>比如說，在健身房使用跑步機跑步的人當中，很多都會用智慧型手機聽音樂，或是看電視，但如果想要更進一步地訓練大腦，就要「聽英文會話的語音」比較好。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>單純只是運動就可以獲得訓練大腦的功效，但是如果再加上「使用大腦（認知課題）」，可以更加提升「訓練大腦」的功效，怎麼能不用雙重課題訓練呢？&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="單工術2-不記憶的筆記術">單工術2 不「記憶」的筆記術&lt;/h3>
&lt;h4 id="書寫可以活化大腦的司令臺">書寫可以活化大腦的司令臺&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>在聽到的那一瞬間，就正確地「記錄」下來。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>「只要立刻寫下記錄，之就可以重新審視確認。」的確是這樣沒錯，但是立刻寫下來其實還有另一個重要的功效。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>立刻寫下記錄，可以提高專注力，減少那一瞬間「聽錯」的可能性。而且也可以提高記憶力，到最後就算不看記錄，長時間記得寫下之內容的機率也會提升。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>光是「書寫」就可以提升專注力或記錄力，所以輸入錯誤也會減少。正因為如此，要養成找出「重要事項」、「不能弄錯的事項」、「不能忘記的事項」，立刻寫下筆記的習慣。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="分輕重緩急寫下記錄">分輕重緩急寫下記錄&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>寫筆記的時候，最重要的是「找出重點寫下來」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>千萬不要事無大小，都想要寫進筆記裡。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="用數位不如選類比">用「數位」，不如選「類比」&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>用「書寫」來提高專注力，讓自己更容易記住。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>「手寫」與用電腦「打字」比起來，手寫更能活化大腦，也有很好的增強記憶功效。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="用一元化輸出">用一元化輸出&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>只有一條鐵則希望各位可以遵守。那就是：「不要把各種資訊，分散輸入在各個不同的地方。」&lt;/p>
&lt;/li>
&lt;li>
&lt;p>用紙本的手冊或行程管理軟體都沒關係，最重要的是集中在一個地方，讓輸入一元化，以管理備忘錄或行程表。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="資訊收集術3-時間管理資訊收集術">資訊收集術3 時間管理資訊收集術&lt;/h3>
&lt;h4 id="用手機查到的資訊不會留在記憶當中">用手機查到的資訊不會留在記憶當中&lt;/h4>
&lt;ul>
&lt;li>很多人認為「智慧型手機是有益的資訊收集工具」，但除非是非常巧妙地在使用，否則手機就只能成為「白白浪費時間的工具」。&lt;/li>
&lt;/ul>
&lt;h4 id="小心讓大腦疲憊的手機痴呆症">小心讓大腦疲憊的「手機痴呆症」&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>過度使用智慧型手機是「大腦疲勞」的一大原因。換言之，就是「越常使用智慧型手機越容易出錯」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>所謂的「手機痴呆症」，指的是因為輸入過多資訊，而使得大腦內部陷入資訊無法順利取出的狀態，就像是大腦內部「堆滿了垃圾資訊」一樣。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>而且，因為用手機搜尋一下就什麼都能查到，所以不用自己思考，也不用倚靠大腦的記憶了。也就是說，大腦的「思考功能」或「記憶功能」將會退化。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>過度使用智慧型手機而引發「專注力低落」、「工作記憶不足」、「大腦疲勞」、「罹患失智症」等各式各樣的惡劣情況，結果衍生出錯的四大原因，對一切都造成不良的影響。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="過度使用智慧型手機頭腦會變笨">過度使用智慧型手機，頭腦會變笨&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>根據日本仙台市教育委員會與東北大學的「學習意願科學性研究相關計劃」研究結果顯示，使用智慧型手機的時間每增加一小時，數學、算數的成績就會減少約5分。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>即使是學習時間超過２小時的小組，只要用LINE超過４小時，成績就會顯著下降。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>簡單來說，只要長時間使用智慧型手機或社群網站，再怎麼學習，成績都會下降。這表示，長時間使用智慧型手機或社群網站，會讓特地花時間學習的效果完全喪失掉。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="決定使用時間再收集資訊">決定使用時間再收集資訊&lt;/h4>
&lt;ul>
&lt;li>智慧型手機只要決定要使用多久再好好地運用，就能減少作業時間或讓工作更有效率。使用的時間，大概是以「不超過一小時」為標準。&lt;/li>
&lt;/ul>
&lt;h3 id="學習法4-學習時不要貪心的剪舌麻雀學習法">學習法4 ①學習時不要貪心的「剪舌麻雀學習法」&lt;/h3>
&lt;h4 id="越是狂做筆記理解得越少">越是「狂做筆記」，理解得越少&lt;/h4>
&lt;ul>
&lt;li>明明已經輸入了，卻沒辦法記住；明明已經輸入了，卻理解錯誤，只有理解表面，沒有理解本質，這是輸入錯誤經常會出現的模式。&lt;/li>
&lt;/ul>
&lt;h4 id="輸入不要太貪心">輸入不要太貪心&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>那是因為集中精神在「書寫」。也就是說，大腦的容量幾乎都用在「寫」了，沒有多餘的心力去「理解」或「思考」。只不過是變成，把演講內容「寫」下來的筆記機器而已。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>越是貪心地想學，「想一字不漏地將所有內容全部寫下來」，學到的東西就越少。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>「一字一句全都不要聽漏！」越是如此奮發向上，大腦的交通堵塞就會越嚴重，陷入什麼都沒辦法學到的狀態。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="學習法4-3重點學習法">學習法4 ②3重點學習法&lt;/h3>
&lt;h4 id="心裡想著3讓學習發揮到極限">心裡想著「3」，讓學習發揮到極限&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>研討會或演講也是如此，讓聽眾自己整理出「3重點」，學習吸收的效率也會最高。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>把只有「3個重點」的想法記在腦中聆聽演講，就大腦科學來說，可說是最合理的方法。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>「只帶3個發現回去」，這可說是將學習的效率發揮到極限，讓大腦的輸入不堵塞，防止「聽漏」、「輸入錯誤」的學習法。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="學習法4-提供給成年人的大腦活性化學習法">學習法4 ③提供給成年人的「大腦活性化學習法」&lt;/h3>
&lt;h4 id="用證照考試讓大腦迅速變清晰">用證照考試讓大腦迅速變清晰&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>如果上班族想養成讓大腦全速運轉的習慣，或是想鍛鍊工作記憶、記憶力、專注力，強烈建議使用的方法是「考證照」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>大腦的轉速變快，集中精神的持續時間也比以前長，頭腦變得清晰明白一直到現在。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>確實感受到，就算那個「證照」本身完全沒辦法運用在生活上，利用證照考試訓練大腦的功效，可以劇烈地活化大腦。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="用背誦降低罹患失智症的風險">用背誦降低罹患失智症的風險&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>成人的學習可以訓練工作記憶。其中特別是語言學習之類的，要記的東西非常多，像是背單字等，會很需要工作記憶，可以好好地訓練工作記憶。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>「接受學校教育的年限越短，罹患阿茲海默症或其他失智症的風險越高」。反過來說，也就是「受教育的年限越長，罹患失智症的風險越低」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>成年出了社會也好好地學習，提升「認知的儲備能力」，就算超過一百歲，也能讓大腦保持朝氣蓬勃的狀態。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/media/Pasted%20image%2020231124231847.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/media/Pasted%20image%2020231124231847_hu2285ea9d63703ece6d24149d4a45ea65_370740_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary02/media/Pasted%20image%2020231124231847_hu2285ea9d63703ece6d24149d4a45ea65_370740_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p></description></item><item><title>精準用腦:提升大腦效能、杜絕失誤的科學開光術 - Summary01 - 大腦百分之百會出錯 不出錯的大腦基本原則</title><link>https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/</link><pubDate>Fri, 24 Nov 2023 21:14:18 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted-image-20231124211906.png" alt="Featured image of post 精準用腦:提升大腦效能、杜絕失誤的科學開光術 - Summary01 - 大腦百分之百會出錯 不出錯的大腦基本原則" />&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted-image-20231124211906.png"
width="628"
height="777"
srcset="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted-image-20231124211906_hud8fd17581fe14af381e745166bf6c077_304607_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted-image-20231124211906_hud8fd17581fe14af381e745166bf6c077_304607_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="80"
data-flex-basis="193px"
>&lt;/p>
&lt;h2 id="font-colorblue我的感想與收穫font">&lt;font color=blue>我的感想與收穫&lt;/font>&lt;/h2>
&lt;p>&lt;font color=red>以下是我從書中提取出來，對我來說，是不錯的句子。
出自《精準用腦》https://readmoo.com/book/210093852000101&lt;/font>&lt;/p>
&lt;h1 id="序">序&lt;/h1>
&lt;h2 id="引發錯誤的大腦機制">引發「錯誤」的「大腦」機制」&lt;/h2>
&lt;ul>
&lt;li>本書，是以我到目前為止所研究的腦科學證據為基礎，列舉出錯的「４大原因」：
&lt;ul>
&lt;li>專注力不足&lt;/li>
&lt;li>大腦暫時儲存記憶的「工作記憶」功能低落&lt;/li>
&lt;li>大腦疲勞（大腦處於疲倦的狀態）&lt;/li>
&lt;li>年紀增長所造成的大腦老化」&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124212246.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124212246_hu7e785a58a707002c8d138157d7626935_442439_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124212246_hu7e785a58a707002c8d138157d7626935_442439_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;h2 id="輸入輸出思考整理只要改變大腦就能解決出錯的問題">「輸入」、「輸出」、「思考」、「整理」──只要改變大腦就能解決出錯的問題&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124212329.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124212329_hubc1834449ed1a94ef4e4fc009df91c80_314543_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124212329_hubc1834449ed1a94ef4e4fc009df91c80_314543_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;h1 id="introduction-大腦百分之百會出錯-不出錯的大腦基本原則">INTRODUCTION 大腦百分之百會出錯 不出錯的大腦基本原則&lt;/h1>
&lt;h2 id="出錯的4大原因">出錯的「4大原因」&lt;/h2>
&lt;h3 id="出錯的原因1-專注力不足">出錯的原因1 專注力不足&lt;/h3>
&lt;h4 id="出錯必定與不注意有關">「出錯」必定與不注意有關&lt;/h4>
&lt;h4 id="只要根據腦科學的知識就能防止注意力渙散">只要根據腦科學的知識，就能防止注意力渙散&lt;/h4>
&lt;h5 id="1一天的節奏">（1）一天的節奏&lt;/h5>
&lt;ul>
&lt;li>所以「容易出錯的工作」要在注意力集中的時間執行。光是這樣，就能大幅減少出錯的機率。&lt;/li>
&lt;/ul>
&lt;h5 id="2慢性疲勞壓力">（2）慢性疲勞、壓力&lt;/h5>
&lt;ul>
&lt;li>為了防止慢性疲勞或壓力，重要的是讓自己更敏銳一點，趁還沒有太過嚴重之前就先發現「自己累了」這件事，處理造成壓力的原因。必須儘早研究對策，確實整頓壓力。&lt;/li>
&lt;/ul>
&lt;h5 id="3額葉去甲腎上腺素">（3）額葉、去甲腎上腺素&lt;/h5>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213102.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213102_hue40ee449589f82a22d16150d2a9bf18b_266138_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213102_hue40ee449589f82a22d16150d2a9bf18b_266138_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;h5 id="4工作記憶不足">（4）工作記憶不足&lt;/h5>
&lt;h5 id="5大腦老化">（5）大腦老化&lt;/h5>
&lt;h3 id="出錯的原因2-工作記憶不足">出錯的原因2 工作記憶不足&lt;/h3>
&lt;h4 id="猛然想不起來的真正原因">「猛然想不起來」的真正原因&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>大腦超載，可說就是「猛然想不起來」的原因。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>用電腦來比喻的話，如果「長期記憶」是硬碟（ＨＤＤ），那工作記憶就相當於記憶體（ＲＡＭ）。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="緊張焦慮就容易出錯的理由">「緊張焦慮」就容易出錯的理由&lt;/h4>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213353.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213353_huc1fee4ebd87fe74a855795003b31c89d_349579_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213353_huc1fee4ebd87fe74a855795003b31c89d_349579_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;h4 id="針對出錯增加的時期分別採取不同對策">針對出錯增加的時期，分別採取不同對策&lt;/h4>
&lt;ul>
&lt;li>無論是誰、無論從幾歲開始，都可以鍛鍊工作記憶。&lt;/li>
&lt;/ul>
&lt;h3 id="出錯的原因3-大腦疲勞">出錯的原因3 大腦疲勞&lt;/h3>
&lt;h4 id="在未病的階段就想辦法解決">在「未病」的階段就想辦法解決」&lt;/h4>
&lt;ul>
&lt;li>「以前明明不會犯這種錯誤的，最近卻常常出錯。」這樣的人，就是大腦已經感到疲憊了。&lt;/li>
&lt;/ul>
&lt;h4 id="別再用健康與生病的二分法來辨別身體狀況">別再用「健康」與「生病」的二分法來辨別身體狀況&lt;/h4>
&lt;ul>
&lt;li>各位應該要捨棄「健康」或「生病」這種二選一的思考方式。因為這兩種分類法，沒辦法預防疾病產生。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213624.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213624_hu2a71d44e9c9a9885a69cf8cddc036289_276136_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213624_hu2a71d44e9c9a9885a69cf8cddc036289_276136_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213645.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213645_hudb255a19df0c74f74210203f3112226a_305584_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/accurate-use-of-brain-summary01/media/Pasted%20image%2020231124213645_hudb255a19df0c74f74210203f3112226a_305584_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>從身體不適的狀態開始，依序有「生病」、「未病」、「健康」、「絕佳」這４種狀態存在。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>因此，不要訂立「維持健康」這種消極的目標，而是要以超越「健康」的「絕佳」狀態為目標，調整生活習慣和自己的狀態，最重要的是要有這樣的心理準備。只要能維持在「絕佳」的狀態，就可以讓出錯的可能性趨近於零。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>也就是說，「大腦疲勞」的人要以「健康」為目標；「健康」的人要以「狀態絕佳」為目標。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="大腦疲勞會造成注意力專注力渙散的理由">大腦疲勞會造成注意力、專注力渙散的理由&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>腦內物質有超過50種，其中有兩個代表性的腦內物質，是造成我們出錯的主要原因。那就是「去甲腎上腺素」和「血清素」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>用腦科學的方式說明「憂鬱症」的話，就是去甲腎上腺素和血清素低落，那指的是一種無法輕易恢復的狀態。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>去甲腎上腺素，是一種為了對外來壓力做出防禦反應而分泌的腦內物質，與我們的注意力或專注力有極深的關聯。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>血清素，是一種對我們的精神面有巨大影響，與身心穩定或內心的平和有關的腦內物質。肩負著控制、調整其他腦內物質，或人體甦醒節奏等職責。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="頻頻出錯是大腦在亮黃燈">頻頻出錯是大腦在「亮黃燈」&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>憂鬱症的病患幾乎毫無例外地，在初期階段都有「出錯頻率增加」的情況。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>生於這個壓力過多的現代社會，即使我們還沒嚴重到罹患「憂鬱症」，但是誰都有可能陷入差一步就罹病的「未病（尚未達到已病）」＝「腦疲勞」狀態。然後，如果就那樣置之不理，最慘還會演變為「憂鬱症」或其他精神疾病。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="正因為未病才能想辦法解決">正因為「未病」，才能想辦法解決&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>一種像魔法般的治療法，可以在極短時間內，將各位的「身體不適」、「感覺不適」、「情緒不適」、「疼痛」等完全治好，而且沒有後遺症。那就是「趁未病之時治療」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>用專業用語來說就是，「未病」可逆，「生病」卻是不可逆。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如果是在未病的狀態，只要多多休養生息或改善生活習慣，就可以恢復「健康」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>不過，一旦進入「生病」的狀態，不到醫院接受藥物或外科治療，就不容易痊癒。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>最重要的是提高「自我察覺能力」，留意「警告症狀」。要能敏銳地察覺「經常出錯」這個狀況，並針對這個情況加以處置，研究對策。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="出錯的原因4-大腦老化">出錯的原因4 大腦老化&lt;/h3>
&lt;h4 id="年紀越大越容易健忘的理由">年紀越大越容易健忘的理由&lt;/h4>
&lt;ul>
&lt;li>大腦老化，是犯下重大錯誤的原因。&lt;/li>
&lt;/ul>
&lt;h4 id="讓大腦維持年輕的祕訣">讓大腦維持年輕的祕訣&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>腦細胞一天不會死到10萬個。而且，雖然以前都說「腦細胞不會增加」，但是目前已經發現，海馬迴的顆粒細胞會增生。不只如此，隨著ＭＲＩ（磁振造影）的影像診斷技術進步，也因此可以輕易地觀察到「大腦容積會增加」的這個現象。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>大腦的機能會隨著年齡增長而變差，但那是「不使用大腦的人才會」。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="無論到幾歲大腦都會持續成長">無論到幾歲，大腦都會持續成長&lt;/h4>
&lt;ul>
&lt;li>
&lt;p>「長大成人之後，大腦就不會成長。只會因為老化而逐漸喪失功能。」現在的大腦科學已經完全否定了這個看法。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>只要好好運用大腦，讓突觸連接的數量增加，就可以阻止大腦老化、提高記憶力，讓大腦永遠都在有活力的狀態下活動。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="頻頻出錯的4種狀況">頻頻出錯的4種狀況&lt;/h2>
&lt;h3 id="出錯是大腦的輸入與輸出障礙">出錯是大腦的「輸入」與「輸出」障礙&lt;/h3>
&lt;ul>
&lt;li>但實際上引發錯誤的是傳遞資訊到大腦＝「輸入（input）」，或是從大腦向外界傳遞資訊＝「輸出（output）」的過程。&lt;/li>
&lt;/ul>
&lt;h3 id="思考與整理出錯有多可怕">「思考」與「整理」出錯有多可怕&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>也就是說，「懶得確認」所引發的錯誤，這可以說是「思考」的錯誤。如果平常就有養成確認重要事情的習慣，就算發生輸入錯誤，也可以訂正過來。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>為了不要出錯，重要的是從平常就養成「整理」的習慣。而這不只是物品的整理、桌面附近的整理之類的器物整理，將壓力或情感整理好，也是維持品質良好的狀態所不可或缺的。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>「輸入」、「輸出」、「思考」、「整理」。對於容易引發錯誤的４種情況，每種都要從平常就預先擬定對策。讓不易引發錯誤的程序變習慣，這樣就能讓出錯的情況趨近於零。&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Lesson025 - 什麼是地震？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson025/</link><pubDate>Thu, 23 Nov 2023 22:56:11 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson025/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson025/media/Pasted-image-20231123230021.png" alt="Featured image of post Lesson025 - 什麼是地震？" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/dJpIU1rSOFY" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">earthquake
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 地震
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">surface
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 表面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">approximately
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adv. 大約
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">form
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 形成
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shake
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 搖動
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stressed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 緊張
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">scientist
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 科學家
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">occur
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 發生
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">whenever
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">conj. 無論何時
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reach
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 到達
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>被動語態&lt;/p>
&lt;p>The Passive Voice&lt;/p>
&lt;/blockquote>
&lt;p>這堂課和大家介紹被動語態，句型為 be V+ Vpp（be動詞 + 過去分詞）。如本課所提 A tsunami is caused when earthquakes occur under water.（海底發生地震時造成海嘯。）講者用 is 和過去分詞 caused 形成被動語態，因為海嘯不是自己造成，是其他東西造成海嘯的。這句的 caused 是過去分詞，跟過去式沒有關係。 另外一個被動語態的例句為 The surface where these plates slip is called the fault or the fault plane.（這些板塊滑動的表面被稱為「斷層」或「斷層面」。）此句中 is called 是被動語態，因為這表面是「被稱作」斷層，而不是這個表面自己做出這個動作。這裡的 called 一樣跟過去式沒有關係，而是過去分詞。 這裡一再強調的是被動句的過去分詞與過去時態沒有關係，雖然許多動詞的過去分詞與過去式同形（如 call 的過去分詞及過去式都是 called），但兩者並不相同，也與句子的時間點無關。句子的時態不會用過去分詞來表示，而是以 be 動詞來表示。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- English is spoken in so many countries.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">很多國家的人都說英文。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The desks and chairs are sanitized every day.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">桌椅每天都會消毒。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Julian was rejected by his crush.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Julian 被他的暗戀對象拒絕了。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson024 - 為什麼飛機起降時要關燈呢？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson024/</link><pubDate>Thu, 23 Nov 2023 22:52:22 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson024/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson024/media/Pasted-image-20231123225519.png" alt="Featured image of post Lesson024 - 為什麼飛機起降時要關燈呢？" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/zkFYb6Kcu5I" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">routine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 慣例，常規；例行公事
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fasten
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 扣緊；繫牢；紮好；關緊
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cabin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. （飛機）座艙；船艙
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">commercial
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 商業的；商務的；貿易的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">industry
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 工業；產業；生產製造
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">device
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 器械；裝置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">initial
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 開始的，最初的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emergency
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 緊急情況
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prior to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">conj. 在…之前
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">examination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 檢查；審查；調查
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>第二類條件句&lt;/p>
&lt;p>The Second Conditional&lt;/p>
&lt;/blockquote>
&lt;p>第二類條件句用於描述現在或未來不太可能發生、與當下事實相反，或婉轉的忠告。它是一種非真的、假的、想像的、不可能的假設語氣。文法結構為從屬子子句 If 子句中使用過去簡單式，主要子句則會出現助動詞 would/ should/ could 外加動詞原型。如本課例句 If an emergency during take-off or landing caused the lights to suddenly go out, no one&amp;rsquo;s eyes would be adjusted making it harder to evacuate, especially in 90 seconds。這句屬想像的假設，因為 if 子句跟現在的事實是不符合的，沒有真正的緊急事件發生。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- If you were nicer to him, he might lend you the money.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果你對他好些，她可能會借給你錢。(事實上你對他不好，他不太可能會借你)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- If I were a guy, I swear I&amp;#39;d be a better man.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">如果我是男生，我發誓我會當個更好的男人。(說明此句的人是女生，這就是與事實相反的假設)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- If I won the lottery, I would buy a big house. (I probably won&amp;#39;t win the lottery)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">假如我中樂透，我就會買個大房子。(實際上就是你沒有中樂透，也不太可能買大房子）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson023 - 全球最帥醫師 Dr. Mike 教你如何保持居家清潔遠離病毒</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson023/</link><pubDate>Thu, 23 Nov 2023 22:49:07 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson023/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson023/media/Pasted-image-20231123225134.png" alt="Featured image of post Lesson023 - 全球最帥醫師 Dr. Mike 教你如何保持居家清潔遠離病毒" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/kT-oQXt-iJA" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">disinfect
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 將……消毒 (或殺菌)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">release
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 公佈；發表
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carrier
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 帶原者
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">temperature
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 溫度
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">virus
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 病毒
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">evidence
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 證據
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">surface
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 表面
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bleach
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 漂白；漂白劑
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>介系詞 - With&lt;/p>
&lt;p>Prepositions - With&lt;/p>
&lt;/blockquote>
&lt;p>今天要跟大家介紹 with 的兩種用法。With有「有著」的意思，後面可以接名詞。如果是接人，可以代表「跟 誰」（例如影片中的：Also because my &amp;ldquo;coworkers&amp;rdquo; like to&amp;hellip;interact with me. 也是因為我的「同事們」喜歡……跟我交流。）；如果是接物品，則可以代表「擁有…」、「配戴…」，或是「使用…」等意思。 除了後面加上實體的人或物，with的後面還可以接抽象的情況，表達「狀態」。此時，with的後面可以加上 受詞+分詞（現在分詞Ving/過去分詞Vpp）至於是加哪一種分詞就是看句意是否是被動的意涵。如果不是的話，動詞會是現在分詞的形式；如果是的話，就會是過去分詞的型態。（例如影片中的： But with so much misinformation floating around about what works and what doesn&amp;rsquo;t, what can you do? 不過現今錯誤訊息到處流傳，告訴你什麼東西有用、什麼沒用，你該怎麼辦呢？）此時在翻譯英文的時候，with常常不會翻出來。 以下再提供更多例句：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Cassandra has left with her boyfriend.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cassandra 已經跟她男朋友走了。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Ella is that girl with blonde hair.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Ella 就是那個有一頭金髮的女孩。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- It’s really hard to concentrate with the baby crying.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">有嬰兒在哭的情況下真的很難專心。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson022 - 看起來超可口！食物模型有多逼真？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson022/</link><pubDate>Thu, 23 Nov 2023 22:43:30 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson022/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson022/media/Pasted-image-20231123224436.png" alt="Featured image of post Lesson022 - 看起來超可口！食物模型有多逼真？" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/eemkTcS0zsM" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">prop
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 道具
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">melt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 融化
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swollen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 腫大的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">duplicate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 複製
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">canvas
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 畫布
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">foam
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 泡棉
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dough
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 麵團
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">excess
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 多餘的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">patch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 修補
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">preserve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 保存
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>轉承詞&lt;/p>
&lt;p>Transition words&lt;/p>
&lt;/blockquote>
&lt;p>本課出現轉承詞 while，是「儘管、然而、但是、卻」的意思，有「對比」兩件事、指出兩件事差異的意味。 如本課例句 While the details may vary based on the artist, the creation process is pretty standard. 這句話的前段為 the details may vary based on the artist「每一位藝術家注重的細節不同」，後段為 the creation process is pretty standard 「模型製作流程相當一致」，這兩段以轉承詞 while 連接，產生語氣上的轉折。 另外一句 While these items might make your mouth water, they&amp;rsquo;re only a feast for your eyes. 這句話的前段為 these items might make your mouth water「這些食物模型看起來很可口」，後段為 they&amp;rsquo;re only a feast for your eyes 「它們只能用眼睛觀賞」，這兩段以 while 連接，同樣強調轉折的語氣。 我們來看看更多 while 的例句：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I try to fix this problem, while you just sit back and relax.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我試著解決問題，可是你只是袖手旁觀。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I want to go to a baseball game, while my sister wants to go to the mall.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我想去看場棒球賽，可是我妹妹想去購物中心。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- While the price of tomatoes has stayed the same, lettuce gets more expensive.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">番茄的價格不變，可是生菜變貴了。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson021 - 【BBC】人生就該被規劃？每個人都該有生命清單嗎？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson021/</link><pubDate>Thu, 23 Nov 2023 22:39:09 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson021/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson021/media/Pasted-image-20231123224113.png" alt="Featured image of post Lesson021 - 【BBC】人生就該被規劃？每個人都該有生命清單嗎？" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/Nb7wVCJ68YY" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">bucket list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 遺願清單
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dolphin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 海豚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">goal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 目標
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">penguin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 企鵝
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">unknown
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 未知事物
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ability
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 能力
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">convinced
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 確信的
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>反身代名詞&lt;/p>
&lt;p>Reflexive Pronouns&lt;/p>
&lt;/blockquote>
&lt;p>反身代名詞是用來說明動作的主體所進行的行為結果，不是施加影響在其他對象上，而是反過來作用在自己身上的時候。反身代名詞多以 -self 結尾，像是 yourself, myself, himself, herself, itself；複數為 ourselves, yourselves, themselves。反身代名詞可以放在及物動詞後作受詞使用，例如：Most of all, you&amp;rsquo;re kind of fooling yourself with a bucket list. （首先，你有點像是利用遺願清單愚弄自己。） 以下再提供例句：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- She made herself a cup of tea and sat down in front of the television.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">她幫自己泡了杯茶，然後就在電視機前坐下。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Patricia looks at herself in the mirror.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Patricia 看著鏡子裡的自己。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Stop it! You are making a fool of yourself.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">停下來！你在出洋相。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>使用Github Gist將Google Colab嵌入網頁顯示</title><link>https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/</link><pubDate>Sun, 19 Nov 2023 18:11:15 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/</guid><description>&lt;h2 id="google雲端硬碟中創建colab">Google雲端硬碟中，創建Colab&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119181713.png"
width="1115"
height="705"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119181713_hu7b4c378e97cd6b9b0a6b6de4db3b2f82_137363_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119181713_hu7b4c378e97cd6b9b0a6b6de4db3b2f82_137363_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="158"
data-flex-basis="379px"
>&lt;/p>
&lt;h2 id="更改檔名不要打中文">更改檔名，不要打中文&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182133.png"
width="875"
height="506"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182133_hu8c58aaa774c32e83cdca5b41f304955e_50886_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182133_hu8c58aaa774c32e83cdca5b41f304955e_50886_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="172"
data-flex-basis="415px"
>&lt;/p>
&lt;h2 id="將副本另存為github-gist">將副本另存為GitHub Gist&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182302.png"
width="658"
height="627"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182302_hu4208548b043a2741a56f175c771abf85_65822_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182302_hu4208548b043a2741a56f175c771abf85_65822_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="104"
data-flex-basis="251px"
>&lt;/p>
&lt;p>&lt;font color=red>圖像要顯示為GitHub&lt;/font>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182341.png"
width="550"
height="393"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182341_huf355b30da34502b95ca48721791e6ac3_36842_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182341_huf355b30da34502b95ca48721791e6ac3_36842_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="335px"
>&lt;/p>
&lt;h2 id="前往github-查看">前往GitHub 查看&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182524.png"
width="581"
height="614"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182524_hu6bf428ab3145bbcb20e3086f1697c946_67756_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182524_hu6bf428ab3145bbcb20e3086f1697c946_67756_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="94"
data-flex-basis="227px"
>&lt;/p>
&lt;h2 id="複製embed-js">複製Embed Js&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182628.png"
width="1337"
height="812"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182628_hu07ce1abe2442f9535724419478f656f7_87807_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182628_hu07ce1abe2442f9535724419478f656f7_87807_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="164"
data-flex-basis="395px"
>&lt;/p>
&lt;h2 id="貼至blog或網站html內">貼至Blog或網站html內&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182938.png"
width="704"
height="115"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182938_huda0fd293b1c53c3d9bb12ae570e80eb9_20913_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119182938_huda0fd293b1c53c3d9bb12ae570e80eb9_20913_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="612"
data-flex-basis="1469px"
>&lt;/p>
&lt;p>以下就是貼上js顯示的內容&lt;/p>
&lt;script src="https://gist.github.com/chingtsechen/56410513abd31b9c080be807b139c159.js">&lt;/script>
&lt;h2 id="blog查看內容">Blog查看內容&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119183939.png"
width="1425"
height="948"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119183939_huffb220bba4b14f28c7e7ef16c3a0cf0e_142487_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119183939_huffb220bba4b14f28c7e7ef16c3a0cf0e_142487_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p>
&lt;h2 id="後續修改">後續修改&lt;/h2>
&lt;p>只要在Colab中繼續編輯(存在GitHub Gist的，不是在Google雲端硬碟中的喔)，存檔，網頁就會自動渲染出來內容&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119184219.png"
width="758"
height="525"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119184219_hu21b0babafa41cb72cc9e5a6402e5a4f6_53169_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119184219_hu21b0babafa41cb72cc9e5a6402e5a4f6_53169_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="144"
data-flex-basis="346px"
>&lt;/p>
&lt;h2 id="blog查看修改後內容">Blog查看修改後內容&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119184609.png"
width="1359"
height="934"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119184609_hu67b700b526d54a81de21893589d85b57_145233_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-colab-embed-blog-js/media/Pasted-image-20231119184609_hu67b700b526d54a81de21893589d85b57_145233_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="349px"
>&lt;/p></description></item><item><title>Day05 - 垃圾回收機制、流程控制理論、流程控制必備知識、分支結構、循環結構</title><link>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day05/</link><pubDate>Sun, 19 Nov 2023 14:44:37 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day05/</guid><description>&lt;h2 id="垃圾回收機制">垃圾回收機制&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">有一些語言 記憶體空間的申請和釋放都需要程式設計師自己寫程式碼才可以完成
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">但是python卻不需要 通過垃圾回收機制自動管理
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">引用計數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span> &lt;span class="n">數據值jimmy身上的引用計數為1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">name&lt;/span> &lt;span class="n">數據值jimmy身上的引用計數加一&lt;/span> &lt;span class="n">為2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">del&lt;/span> &lt;span class="n">name1&lt;/span> &lt;span class="n">數據值jimmy身上的引用計數減一&lt;/span> &lt;span class="n">為1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">當數據值身上的引用計數為0的時候&lt;/span> &lt;span class="n">就會被垃圾回收機制當做垃圾回收掉&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">當數據值身上的引用計數不為0的時候&lt;/span> &lt;span class="n">永遠不會被垃圾回收機制回收&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">標記清除&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">主要針對循環引用問題&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># 引用計數為1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">33&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">44&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># 引用計數為1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l2&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># l1 = [11, 22, l2列表] 引用計數為2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">append&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># l2 = [33, 44, l1列表] 引用計數為2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">del&lt;/span> &lt;span class="n">l1&lt;/span> &lt;span class="c1"># 斷開變數名l1與列表的綁定關係 引用計數為1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">del&lt;/span> &lt;span class="n">l2&lt;/span> &lt;span class="c1"># 斷開變數名l2與列表的綁定關係 引用計數為1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">當記憶體占用達到臨界值的時候&lt;/span> &lt;span class="n">程序會自動停止&lt;/span> &lt;span class="n">然後掃描程序中所有的數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">並給只產生循環引用的數據打上標記&lt;/span> &lt;span class="n">之後一次性清除&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">分代回收&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">垃圾回收機制的頻繁運行也會損耗各項資源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">新生代&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">青春代&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">老年代&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">越往下檢測頻率越低&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="流程控制理論">流程控制理論&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">流程控制&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">控制事物的執行流程&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">事物執行流程總共可以分為三種&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">順序結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">從上往下依次執行&lt;/span> &lt;span class="n">之前所編寫的代碼都屬於該結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">分支結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">事物的執行會根據條件的不同做出不同的執行策略&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">循環結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">事物的執行會根據某個條件出現重複&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">在代碼的世界裡&lt;/span> &lt;span class="n">很多時候可能會出現三者混合&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">提示&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">作為小白&lt;/span> &lt;span class="n">在學習流程控制的時候&lt;/span> &lt;span class="n">建議做到代碼和圖形的結合&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="流程控制必備知識">流程控制必備知識&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">python中使用代碼的縮進來表示代碼的從屬關係&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">從屬關係&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">縮進的代碼&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">子代碼&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">是否執行取決於上面沒有縮進的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">並不是所有的代碼都可以擁有縮進的代碼&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">子代碼&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">if關鍵字&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">如果有多行子代碼屬於同一個父代碼&lt;/span> &lt;span class="n">那麼這些子代碼需要保證相同的縮進量&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">python中針對縮進量沒有具體的要求&lt;/span> &lt;span class="n">但是推薦使用四個空格&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">windows中tab鍵&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">5.&lt;/span>&lt;span class="n">當某一行程式碼需要編寫子代碼的時候&lt;/span> &lt;span class="n">那麼這一行程式碼的結尾肯定需要冒號&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">6.&lt;/span>&lt;span class="n">相同縮進量的代碼彼此之間平起平坐&lt;/span> &lt;span class="n">按照順序結構依次執行&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="分支結構">分支結構&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">單if分支結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">條件&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">條件成立之後才會執行的代碼塊&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">單if可以借助於流程圖理解&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;老師好&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="k">else&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="n">分支結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">條件&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">條件成立之後執行的子代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">條件不成立執行的子代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;老師好&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;你不是jimmy&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="k">if&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="k">elif&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="n">else分支結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">條件1&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">條件1成立之後執行的子代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">條件2&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">條件1不成立&lt;/span> &lt;span class="n">條件2成立執行的子代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">條件3&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">條件1和2都不成立&lt;/span> &lt;span class="n">條件3成立執行的子代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">上述條件都不成立&lt;/span> &lt;span class="n">執行的子代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">中間的elif可以寫多個&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">上述子代碼永遠只會走一個&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">score&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入學生成績&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">score&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">score&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 將字串的整數轉換成整型的整數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">score&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">90&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;優秀&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">score&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">80&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;良好&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">score&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">70&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;一般&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">score&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="mi">60&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;及格&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;重修&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">if的嵌套使用&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">有點難&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">28&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">height&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">170&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">weight&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">110&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">is_beautiful&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">is_success&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;tony看到喜歡的女生&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">age&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">30&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">height&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">160&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">weight&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">150&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">is_beautiful&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;可以加您ig嗎&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">is_success&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;逛街去&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;不好意思，我有男朋友&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;不喜歡&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;不是tony&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="循環結構">循環結構&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">就是想讓一些程式碼反覆的執行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="n">條件&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">條件成立之後執行的子代碼&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">循環體代碼&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">先判斷條件是否成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">如果成立則執行循環體代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">循環體代碼執行完畢後再次回到條件判斷處&lt;/span> &lt;span class="n">判斷條件是否成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">如果成立&lt;/span> &lt;span class="n">則繼續執行循環體代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">5.&lt;/span>&lt;span class="n">按照上述規律依次執行&lt;/span> &lt;span class="n">直到條件不成立才會結束循環體代碼的執行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># count = 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># while count &amp;lt; 5:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;hello world&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># count += 1 # count = count + 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;想不想吃飯?&amp;#39;)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">break&lt;/span> &lt;span class="c1"># 強行結束循環體&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">while循環體代碼一旦執行到break會直接結束循環&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">continue&lt;/span> &lt;span class="c1"># 直接跳到條件判斷處&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">while循環體代碼一旦執行到continue會結束本次循環&lt;/span> &lt;span class="n">開始下一次循環&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">while&lt;/span> &lt;span class="n">條件&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">循環體代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">循環體代碼沒有被強制結束的情況下&lt;/span> &lt;span class="n">執行完畢就會執行else子代碼&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="作業講解">作業講解&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">根據用戶輸入內容列印其權限&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> jimmy --&amp;gt; 超級管理員
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> tom --&amp;gt; 普通管理員
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> jack,rain --&amp;gt; 業務主管
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> 其他 --&amp;gt; 普通用戶
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.獲取用戶輸入的使用者名稱&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入您的使用者名稱&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.判斷使用者名稱 列印不同的提示&amp;gt;&amp;gt;&amp;gt;:不同的條件執行不同的代碼 那麼需要使用分支結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;超級管理員&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;tom&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;普通管理員&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># elif username == &amp;#39;jack&amp;#39; or &amp;#39;rain&amp;#39;: # 錯誤寫法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># elif username == &amp;#39;jack&amp;#39; or username == &amp;#39;rain&amp;#39;: # 正確寫法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jack&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;rain&amp;#39;&lt;/span>&lt;span class="p">]:&lt;/span> &lt;span class="c1"># 正確寫法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;業務主管&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;普通用戶&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">編寫用戶登錄程序&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">要求&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">有用戶黑名單&lt;/span> &lt;span class="n">如果使用者名稱在黑名單內&lt;/span> &lt;span class="n">則拒絕登錄&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">eg&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">black_user_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">如果使用者名稱是黑名單以外的用戶則允許登錄&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">判斷使用者名稱和密碼&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">自訂&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">eg&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">oscar&lt;/span> &lt;span class="mi">123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 提前定義好黑名單用戶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">black_user_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jerry&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.先獲取用戶輸入的用戶名和密碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入您的用戶名&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3.先判斷用戶名是否是黑名單用戶&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">black_user_list&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;您已經被封鎖了 無法登入&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入您的密碼&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.判斷用戶名和密碼是否正確&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">password&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;123&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;登入成功&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;用戶名或密碼錯誤&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">編寫用戶登錄程序&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">用戶如果登錄失敗&lt;/span> &lt;span class="n">則只能嘗試三次&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">用戶如果登錄成功&lt;/span> &lt;span class="n">則直接結束程式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 4.定義一個計數器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 6.先判斷當前嘗試了幾次&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">count_num&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;很抱歉 您已經嘗試了三次&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.獲取用戶數據&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">password&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;password&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.校驗數據是否正確&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">username&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="n">password&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;123&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;登錄成功&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span> &lt;span class="c1"># 3.結束循環體代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;使用者名稱或密碼錯誤&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 5.每錯誤一次就讓計數器自增1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count_num&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">猜年齡的遊戲&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">假設用戶的真實年齡是18&lt;/span> &lt;span class="n">編寫一個猜年齡的遊戲&lt;/span> &lt;span class="n">獲取用戶猜測的年齡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">基本要求&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">可以無限制猜測&lt;/span> &lt;span class="n">每次猜錯給出提示&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">猜大了&lt;/span> &lt;span class="n">猜小了&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">猜對則結束程式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">拔高練習&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">每次猜測只有三次機會&lt;/span> &lt;span class="n">一旦用完則提示用戶是否繼續嘗試&lt;/span> &lt;span class="n">用戶透過輸入n或者y來表示是否繼續嘗試&lt;/span> &lt;span class="n">如果是y則繼續給用戶三次猜測機會&lt;/span> &lt;span class="n">否則結束程式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.先定義用戶的真實年齡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">real_age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">18&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 8.定義計數器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 6.添加循環結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">while&lt;/span> &lt;span class="kc">True&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 10.判斷當前嘗試的次數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">count_num&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">choice&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;您已經嘗試了三次 是否繼續嘗試(n/y)&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 11.判斷用戶輸入的選擇&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">choice&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s1">&amp;#39;y&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 12.重設計數器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count_num&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;下次再來玩&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.獲取用戶猜測的年齡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">guess_age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;猜一猜我的年齡&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3.由於一會需要比較大小 所以要將用戶輸入的字串年齡轉成整型的年齡&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">guess_age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">int&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">guess_age&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 有小bug 暫時不考慮&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 4.判斷年齡是否猜測正確&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="n">guess_age&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="n">real_age&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;有那麼大嗎&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 猜測錯了 計時器加一&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count_num&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">elif&lt;/span> &lt;span class="n">guess_age&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="n">real_age&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;有那麼小嗎&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 猜測錯了 計時器加一&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">count_num&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;你真棒 猜對了&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 7.猜對了 直接結束循環&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">1.先寫注釋(思維邏輯和想法)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">2.先考慮主題功能 再考慮附加功能
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="google-colab代碼練習">Google Colab代碼練習&lt;/h2>
&lt;script src="https://gist.github.com/chingtsechen/8b449d1f58e25004c69bfef9c1515d43.js">&lt;/script></description></item><item><title>Thanos部署Prometheus高可用(docker-compose) + redis_exporter(docker-compose)</title><link>https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/</link><pubDate>Wed, 15 Nov 2023 22:26:25 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/</guid><description>&lt;h3 id="前情提要與架構規劃">前情提要與架構規劃&lt;/h3>
&lt;p>官方Github: &lt;a class="link" href="https://github.com/thanos-io/thanos" target="_blank" rel="noopener"
>https://github.com/thanos-io/thanos&lt;/a>&lt;/p>
&lt;p>參考專案:  &lt;a class="link" href="https://github.com/thanos-community/thanos-docker-compose" target="_blank" rel="noopener"
>https://github.com/thanos-community/thanos-docker-compose&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">由於此專案演示的，是將所有角色在單機上佈屬，
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">然後我這裡是要示範，如何在跨節點主機上，去佈屬各項角色，達到角色拆分。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>主機規劃，與角色分配&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主機名稱&lt;/th>
&lt;th>主機IP&lt;/th>
&lt;th>主機效能&lt;/th>
&lt;th>共用角色&lt;/th>
&lt;th>單獨角色&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>k8s-master71u&lt;/td>
&lt;td>192.168.1.71&lt;/td>
&lt;td>8core 8g&lt;/td>
&lt;td>prometheus1,sidecar1,alertmanager1,query1,storer1&lt;/td>
&lt;td>minio,grafana&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-master72u&lt;/td>
&lt;td>192.168.1.72&lt;/td>
&lt;td>8core 8g&lt;/td>
&lt;td>prometheus2,sidecar2,alertmanager2,query2,storer2&lt;/td>
&lt;td>compactor,bucket web,ruler&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-master73u&lt;/td>
&lt;td>192.168.1.73&lt;/td>
&lt;td>8core 8g&lt;/td>
&lt;td>prometheus3,sidecar3,alertmanager3,query3,storer3&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115133740.png"
width="960"
height="720"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115133740_hu757edf21e52cda660a8a165c6ed85868_183556_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115133740_hu757edf21e52cda660a8a165c6ed85868_183556_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116021916.png"
width="1895"
height="1197"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116021916_hu43535528a3b38c9d5fce51acba8b85b1_280276_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116021916_hu43535528a3b38c9d5fce51acba8b85b1_280276_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="158"
data-flex-basis="379px"
>&lt;/p>
&lt;h3 id="step0-整體專案目錄架構">step0 整體專案目錄架構&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# tree -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 目錄結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── alertmanager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── alertmanager.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── email.tmpl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── .gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── template
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── docker-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── etc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── localtime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── timezone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── prometheus
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── prometheus.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── rules
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ │ └── alert.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── sd_config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── t1zone-redis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ │ └── web-front.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── t2zone-redis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── search.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── .gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── thanos
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── compact_data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ └── .gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├── bucket_config.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├── query.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ └── store.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── rule_data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── .gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── rules
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="docker-composeyml">docker-compose.yml&lt;/h4>
&lt;p>docker-compose.yml需依照環境修改部分：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># 1. thanos_sidecar_one 填寫當下安裝prometheus的主機IP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="s2">&amp;#34;--prometheus.url=http://192.168.1.71:9090&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># 2. thanos_rule 依據當下安裝prometheus的external_labels填寫，每一台prometheus的replica名稱一定要不一樣&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--label=region=\&amp;#34;JIMMYHOME\&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--label=replica=\&amp;#34;A\&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c"># 3. alertmanager 填寫當下安裝alertmanager的主機IP&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--cluster.peer=192.168.1.7:9094&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--cluster.peer=192.168.1.8:9094&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--cluster.peer=192.168.1.9:9094&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-YAML" data-lang="YAML">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;3.2&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">minio&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">minio/minio&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">minio&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./minio/data:/data/minio/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./minio/config:/root/.minio&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9000:9000&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9001:9001&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">MINIO_PROMETHEUS_AUTH_TYPE&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">public&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">MINIO_ROOT_USER&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">admin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">MINIO_ROOT_PASSWORD&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">admin123456&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">server /data/minio/data --console-address &amp;#34;:9001&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">healthcheck&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">test&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s2">&amp;#34;CMD&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;curl&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;-f&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;http://localhost:9001/minio/health/live&amp;#34;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">30s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">timeout&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">20s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">retries&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">prometheus_one&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prom/prometheus:v2.47.2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus_one&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/conf/prometheus.yml:/etc/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/conf/rules:/etc/prometheus/rules&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/conf/sd_config:/etc/prometheus/sd_config&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/data:/data/prometheus/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--web.read-timeout=5m&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--config.file=/etc/prometheus/prometheus.yml&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--storage.tsdb.path=/data/prometheus/data&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--web.max-connections=512&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--storage.tsdb.retention=30d&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--query.timeout=2m&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--web.enable-lifecycle&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--web.listen-address=:9090&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--web.enable-admin-api&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--storage.tsdb.min-block-duration=2h&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--storage.tsdb.max-block-duration=2h&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">expose&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">9090&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9090:9090&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># prometheus_two:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># image: prom/prometheus:v2.21.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># container_name: prometheus_two&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># user: root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># volumes:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - ./prometheus:/etc/config/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - ./data/prometheus/two:/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># command:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#39;--config.file=/etc/config/prometheus_two.yml&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#39;--storage.tsdb.path=/data&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#39;--web.console.libraries=/etc/prometheus/console_libraries&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#39;--web.console.templates=/etc/prometheus/consoles&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#39;--storage.tsdb.retention.time=2h&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#39;--web.enable-lifecycle&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#39;--web.enable-admin-api&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#39;--web.listen-address=:9002&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#39;--storage.tsdb.min-block-duration=5m&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#39;--storage.tsdb.max-block-duration=5m&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># restart: unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># expose:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - 9002&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">alertmanager&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prom/alertmanager:v0.26.0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">alertmanager&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./alertmanager/conf/:/etc/alertmanager/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./alertmanager/data:/alertmanager&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--config.file=/etc/alertmanager/alertmanager.yml&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--cluster.listen-address=0.0.0.0:9094&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--cluster.peer=192.168.1.71:9094&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--cluster.peer=192.168.1.72:9094&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--cluster.peer=192.168.1.73:9094&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">expose&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">9093&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">9094&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9093:9093&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9094:9094&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">thanos_sidecar_one&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanosio/thanos:v0.32.5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanos_sidecar_one&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/conf/prometheus.yml:/etc/prometheus/prometheus.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./prometheus/data:/data/prometheus/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./thanos/conf/bucket_config.yaml:/bucket_config.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;sidecar&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--log.level=debug&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--tsdb.path=/data/prometheus/data&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--reloader.config-file=/etc/prometheus/prometheus.yml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--prometheus.url=http://192.168.1.71:9090&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--objstore.config-file=/bucket_config.yaml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--http-address=0.0.0.0:19191&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--grpc-address=0.0.0.0:19090&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">network_mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;host&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">expose&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">19191&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">19090&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># depends_on:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - minio&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># thanos_sidecar_two:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># build:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># context: ./thanos&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># dockerfile: Dockerfile.thanos&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># container_name: thanos_sidecar_two&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># user: root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># volumes:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - ./prometheus:/etc/config/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - ./data/prometheus/two:/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># command:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;/wait-for-it.sh&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;prometheus_two:9002&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;/thanos&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;sidecar&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--log.level=debug&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--tsdb.path=/data&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--prometheus.url=http://prometheus_two:9002&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--reloader.config-file=/etc/config/prometheus_two.yml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - |&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># --objstore.config=type: S3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># config:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># bucket: thanos-data-bucket&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># access_key: myaccesskey&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># secret_key: mysecretkey&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># endpoint: minio:9000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># insecure: true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># expose:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - 10902&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - 10901&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># depends_on:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - minio&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">thanos_querier&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanosio/thanos:v0.32.5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanos_querier&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./thanos/conf/store.yaml:/store.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;query&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--http-address=0.0.0.0:19192&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--store.sd-files=/store.yaml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--query.replica-label=replica&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--log.level=debug&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--log.format=logfmt&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">expose&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">19192&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;19192:19192&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># depends_on:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - minio&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">thanos_store&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanosio/thanos:v0.32.5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanos_store&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./thanos/conf/bucket_config.yaml:/bucket_config.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;store&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--data-dir=/var/thanos/store&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--objstore.config-file=/bucket_config.yaml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--http-address=0.0.0.0:19191&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--grpc-address=0.0.0.0:19090&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--log.level=debug&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--log.format=logfmt&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--index-cache-size=1GB&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--chunk-pool-size=8GB&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">expose&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">29191&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">29090&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># depends_on:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - minio&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;29191:19191&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;29090:19090&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">grafana&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grafana/grafana:9.0.3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grafana&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./grafana/data:/var/lib/grafana&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">TZ=&amp;#34;Asia/Taipei&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">GF_SECURITY_ADMIN_PASSWORD=admin123456&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;3000:3000&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">thanos_compactor&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanosio/thanos:v0.32.5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanos_compactor&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./thanos/conf/bucket_config.yaml:/bucket_config.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./thanos/compact_data:/var/thanos/compact&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;compact&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--log.level=debug&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--log.format=logfmt&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--data-dir=/var/thanos/compact&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--objstore.config-file=/bucket_config.yaml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--http-address=0.0.0.0:19191&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--wait&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># depends_on:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - minio&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">bucket_web&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanosio/thanos:v0.32.5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bucket_web&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./thanos/conf/bucket_config.yaml:/bucket_config.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;tools&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;bucket&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;web&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--objstore.config-file=/bucket_config.yaml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--http-address=0.0.0.0:19194&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">expose&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">19194&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;19194:19194&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">thanos_rule&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanosio/thanos:v0.32.5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanos_rule&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">user&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./thanos/rule_data/data:/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./thanos/rule_data/rules:/rules&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./thanos/conf/bucket_config.yaml:/bucket_config.yaml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./thanos/rule_data/conf/:/conf/&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;rule&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--grpc-address=0.0.0.0:10905&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--http-address=0.0.0.0:19193&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--data-dir=/data&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--eval-interval=30s&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--rule-file=/rules/*.yml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--query.sd-files=/conf/query.yml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--objstore.config-file=/bucket_config.yaml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--alertmanagers.url=http://192.168.1.71:9093&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--alertmanagers.url=http://192.168.1.72:9093&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--alertmanagers.url=http://192.168.1.73:9093&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--label=region=\&amp;#34;JIMMYHOME\&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--label=replica=\&amp;#34;A\&amp;#34;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--alert.label-drop=replica&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--log.level=debug&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;--log.format=logfmt&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">expose&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">10905&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">19193&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># depends_on:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - minio&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;10905:10905&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;19193:19193&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># thanos_query_frontend:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># build:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># context: ./thanos&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># dockerfile: Dockerfile.thanos&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># container_name: thanos_query_frontend&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># user: root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># command:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;/wait-for-it.sh&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;thanos_querier:10901&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;/thanos&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;query-frontend&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--log.level=debug&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--log.format=logfmt&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--http-address=0.0.0.0:19090&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--query-frontend.compress-responses&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--query-range.partial-response&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--query-frontend.downstream-url=http://thanos_querier:10902&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--query-range.split-interval=24h&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--query-range.max-retries-per-request=5&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--query-frontend.log-queries-longer-than=5s&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;--cache-compression-type=snappy&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># ports:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;19090:19090&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># depends_on:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - thanos_querier&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># debug:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># build:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># context: thanos&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># dockerfile: Dockerfile.debug&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># container_name: debug&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># user: root&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># stdin_open: true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># tty: true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># expose:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - 10902&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - 10901&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># ports:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;10902:10902&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="step1-minio">step1 minio&lt;/h3>
&lt;p>主機: k8s-master71u (192.168.1.71)&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir -p ./minio/&lt;span class="o">{&lt;/span>data,config&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod -R &lt;span class="m">777&lt;/span> ./minio/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose up -d minio
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">minio /usr/bin/docker-entrypoint ... Up &lt;span class="o">(&lt;/span>health: starting&lt;span class="o">)&lt;/span> 0.0.0.0:9000-&amp;gt;9000/tcp,:::9000-&amp;gt;9000/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:9001-&amp;gt;9001/tcp,:::9001-&amp;gt;9001/tcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225531.png"
width="1436"
height="639"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225531_huafb9453cb376c68654ad1ae6aa372bdd_135771_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225531_huafb9453cb376c68654ad1ae6aa372bdd_135771_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="224"
data-flex-basis="539px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225624.png"
width="1509"
height="506"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225624_hu592ad725398f058d6d990556cd1624d2_137410_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225624_hu592ad725398f058d6d990556cd1624d2_137410_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="298"
data-flex-basis="715px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225707.png"
width="759"
height="408"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225707_hue47f143ccdae2500de978c9e44e4bb2d_27930_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225707_hue47f143ccdae2500de978c9e44e4bb2d_27930_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="186"
data-flex-basis="446px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225755.png"
width="630"
height="325"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225755_hu61eb9d7b0d10e79b968da74c5138072f_22565_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115225755_hu61eb9d7b0d10e79b968da74c5138072f_22565_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="193"
data-flex-basis="465px"
>&lt;/p>
&lt;h3 id="step2-prometheus-alertmanager">step2 prometheus alertmanager&lt;/h3>
&lt;p>&lt;strong>主機: k8s-master71u (192.168.1.71)、k8s-master72u (192.168.1.72)、k8s-master73u (192.168.1.73)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir -p ./prometheus/&lt;span class="o">{&lt;/span>data,conf,conf/rules,conf/sd_config&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R 65534:65534 ./prometheus/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod -R &lt;span class="m">777&lt;/span> ./prometheus/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p ./alertmanager/&lt;span class="o">{&lt;/span>conf,template,data&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chown -R 65534:65534 ./alertmanager/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod -R &lt;span class="m">777&lt;/span> ./alertmanager/data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="prometheus設定檔">prometheus設定檔&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-YAML" data-lang="YAML">&lt;span class="line">&lt;span class="cl">&lt;span class="l">cat &amp;gt; ./prometheus/conf/prometheus.yml &amp;lt;&amp;lt; &amp;#39;EOF&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">global&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">scrape_interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">1s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">evaluation_interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">1s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#scrape_timeout: 10s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#以下external_labels，不同的prometheus有不同的值，否則會導致安裝失敗&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">external_labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">region&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">JIMMYHOME&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">replica&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">A&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">#加載警報規則&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">rule_files&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/etc/prometheus/rules/*.yml&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">#集成alertmanager高可用&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">alerting&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">alertmanagers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">static_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">targets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.71&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">9093&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.72&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">9093&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.73&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">9093&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">timeout&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">10s&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">scrape_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#promethes自身的監控&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">job_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">metrics_path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;/metrics&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#默認&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">scheme&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;http&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#默認&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">scrape_interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">1s &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#覆蓋全局&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">static_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">targets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;localhost:9090&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">instance&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#有安裝grafana才用&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">job_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">grafana&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">metrics_path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/metrics&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">static_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">targets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.71&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">3000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">job_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">thanos_sidecar&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">static_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">targets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.71&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">19191&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.72&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">19191&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.73&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">19191&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">cat &amp;gt;./prometheus/conf/rules/alert.yml&amp;lt;&amp;lt; &amp;#39;EOF&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">groups&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">rules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">alert&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">prometheus節點UP狀態&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">expr&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">sum(up{job=&amp;#34;prometheus&amp;#34;})==0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">for&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">1m&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">labels&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">severity&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">嚴重&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">team&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">node-prometheus&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">annotations&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">summary&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{{ $labels.job }} 已停止運作超過 1分鐘！&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">description&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{{ $labels.instance }} 異常停止,請盡快處理！&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">value&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;{{ $value }}&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="alertmanager設定檔">alertmanager設定檔&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-YAML" data-lang="YAML">&lt;span class="line">&lt;span class="cl">&lt;span class="l">cat &amp;gt; ./alertmanager/conf/alertmanager.yml &amp;lt;&amp;lt; &amp;#39;EOF&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">global&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">resolve_timeout&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">5m&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 郵件服務器&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">smtp_smarthost&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;192.168.1.74:25&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">smtp_from&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;jimmyhome@jimmyhome.tw&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#smtp_auth_username: &amp;#39;baojingtongzhi@163.com&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#smtp_auth_password: &amp;#39;xxx&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">smtp_require_tls&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">false&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">templates&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;/etc/alertmanager/email.tmpl&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#郵件模板文件，容器內的路徑&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">route&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group_by&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;alertname&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 根據告警規則组名進行分組&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group_wait&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">1m&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 分组内第一個告警等待時間，10s内如有第二個告警會合併一個告警&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group_interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">1m&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 發送新告警間隔時間&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">repeat_interval&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">5m&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 重複告警間隔發送時間&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#receiver: &amp;#39;web.hook&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">receiver&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;mail&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">receivers&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#- name: &amp;#39;web.hook&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># webhook_configs:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - url: &amp;#39;http://127.0.0.1:5001/&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;mail&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">email_configs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">to&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;jimmyhome@jimmyhome.tw&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">inhibit_rules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">source_match&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">level&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;high&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#指定告警級別&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">target_match&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">level&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;warning&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c">#指定抑制告警級別&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">equal&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;alertname&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;instance&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">cat &amp;gt; ./alertmanager/conf/email.tmpl&amp;lt;&amp;lt; &amp;#39;EOF&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">define &amp;#34;email.jwolf.html&amp;#34; }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">range $i ,$alert := .Alerts }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">=========start==========&amp;lt;br&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">告警級別&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">$alert.Labels.severity }} &amp;lt;br&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">告警類型&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">$alert.Labels.alertname }} &amp;lt;br&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">故警主機&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">$alert.Labels.instance }} &amp;lt;br&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">告警主體&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">$alert.Annotations.summary }} &amp;lt;br&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">告警詳情&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">$alert.Annotations.description }} &amp;lt;br&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">告警閥值&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">$alert.Annotations.value }} &amp;lt;br&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">觸發時間&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">$alert.StartsAt }} &amp;lt;br&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">=========end==========&amp;lt;br&amp;gt;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">end }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>{{&lt;span class="w"> &lt;/span>&lt;span class="l">end }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="啟動prometheus-alertmanager">啟動prometheus alertmanager&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose up -d prometheus_one
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/thanos-docker-compose# docker-compose up -d prometheus_one
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/thanos-docker-compose# docker-compose up -d prometheus_one
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose up -d alertmanager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/thanos-docker-compose# docker-compose up -d alertmanager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/thanos-docker-compose# docker-compose up -d alertmanager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager /bin/alertmanager --config ... Up 0.0.0.0:9093-&amp;gt;9093/tcp,:::9093-&amp;gt;9093/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:9094-&amp;gt;9094/tcp,:::9094-&amp;gt;9094/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">minio /usr/bin/docker-entrypoint ... Up &lt;span class="o">(&lt;/span>unhealthy&lt;span class="o">)&lt;/span> 0.0.0.0:9000-&amp;gt;9000/tcp,:::9000-&amp;gt;9000/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:9001-&amp;gt;9001/tcp,:::9001-&amp;gt;9001/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus_one /bin/prometheus --web.read ... Up 0.0.0.0:9090-&amp;gt;9090/tcp,:::9090-&amp;gt;9090/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/thanos-docker-compose# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------------------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager /bin/alertmanager --config ... Up 0.0.0.0:9093-&amp;gt;9093/tcp,:::9093-&amp;gt;9093/tcp, 0.0.0.0:9094-&amp;gt;9094/tcp,:::9094-&amp;gt;9094/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus_one /bin/prometheus --web.read ... Up 0.0.0.0:9090-&amp;gt;9090/tcp,:::9090-&amp;gt;9090/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/thanos-docker-compose# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">--------------------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager /bin/alertmanager --config ... Up 0.0.0.0:9093-&amp;gt;9093/tcp,:::9093-&amp;gt;9093/tcp, 0.0.0.0:9094-&amp;gt;9094/tcp,:::9094-&amp;gt;9094/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus_one /bin/prometheus --web.read ... Up 0.0.0.0:9090-&amp;gt;9090/tcp,:::9090-&amp;gt;9090/tcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="測試">測試&lt;/h4>
&lt;p>http://192.168.1.71:9090/graph?g0.expr=&amp;amp;g0.tab=1&amp;amp;g0.stacked=0&amp;amp;g0.show_exemplars=0&amp;amp;g0.range_input=1h&lt;/p>
&lt;p>http://192.168.1.72:9090/graph?g0.expr=&amp;amp;g0.tab=1&amp;amp;g0.stacked=0&amp;amp;g0.show_exemplars=0&amp;amp;g0.range_input=1h&lt;/p>
&lt;p>http://192.168.1.73:9090/graph?g0.expr=&amp;amp;g0.tab=1&amp;amp;g0.stacked=0&amp;amp;g0.show_exemplars=0&amp;amp;g0.range_input=1h&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232340.png"
width="658"
height="525"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232340_huf11065ff99b1bb8e0eb987b34bdd4b51_57558_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232340_huf11065ff99b1bb8e0eb987b34bdd4b51_57558_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="125"
data-flex-basis="300px"
>
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232431.png"
width="1143"
height="438"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232431_hu30aa4888662f6c222635e5931466f6d9_58205_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232431_hu30aa4888662f6c222635e5931466f6d9_58205_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="260"
data-flex-basis="626px"
>&lt;/p>
&lt;p>&lt;a class="link" href="http://192.168.1.71:9093/#/alerts" target="_blank" rel="noopener"
>http://192.168.1.71:9093/#/alerts&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://192.168.1.72:9093/#/alerts" target="_blank" rel="noopener"
>http://192.168.1.72:9093/#/alerts&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://192.168.1.73:9093/#/alerts" target="_blank" rel="noopener"
>http://192.168.1.73:9093/#/alerts&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232524.png"
width="1032"
height="557"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232524_hu0459bc0c406a5d347e4d3a78a12aa32a_49727_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232524_hu0459bc0c406a5d347e4d3a78a12aa32a_49727_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="185"
data-flex-basis="444px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232611.png"
width="1036"
height="600"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232611_hu242ff09c4d7aa3f187831f4b7c3668ef_93346_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115232611_hu242ff09c4d7aa3f187831f4b7c3668ef_93346_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="172"
data-flex-basis="414px"
>&lt;/p>
&lt;h3 id="step3-thanos_sidecarthanos_querierthanos_storer">step3 thanos_sidecar、thanos_querier、thanos_storer&lt;/h3>
&lt;p>&lt;strong>主機: k8s-master71u (192.168.1.71)、k8s-master72u (192.168.1.72)、k8s-master73u (192.168.1.73)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir -p ./thanos/conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="thanos-bucketquerystore設定檔">thanos bucket、query、store設定檔&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-YAML" data-lang="YAML">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># bucket只有在192.168.1.71，所以每一台的設定都一樣&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">cat &amp;gt; ./thanos/conf/bucket_config.yaml &amp;lt;&amp;lt; &amp;#39;EOF&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">S3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">config&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">bucket&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;thanos&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">endpoint&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;192.168.1.71:9000&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">access_key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;admin&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">secret_key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;admin123456&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">insecure&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">cat &amp;gt; ./thanos/conf/query.yaml &amp;lt;&amp;lt; &amp;#39;EOF&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">#所有querier節點&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">targets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.71&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">19192&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.72&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">19192&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.73&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">19192&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">cat &amp;gt; ./thanos/conf/store.yaml &amp;lt;&amp;lt; &amp;#39;EOF&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">#所有sidecar節點和store節點&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">targets&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#sidecar節點&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.71&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">19090&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.72&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">19090&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.73&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">19090&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#store節點&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.71&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">29090&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.72&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">29090&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">192.168.1.73&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">29090&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="l">EOF&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="啟動thanos_sidecarthanos_querierthanos_storer">啟動thanos_sidecar、thanos_querier、thanos_storer&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose up -d thanos_sidecar_one
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/thanos-docker-compose# docker-compose up -d thanos_sidecar_one
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/thanos-docker-compose# docker-compose up -d thanos_sidecar_one
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose up -d thanos_querier
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/thanos-docker-compose# docker-compose up -d thanos_querier
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/thanos-docker-compose# docker-compose up -d thanos_querier
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose up -d thanos_store
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/thanos-docker-compose# docker-compose up -d thanos_store
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/thanos-docker-compose# docker-compose up -d thanos_store
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager /bin/alertmanager --config ... Up 0.0.0.0:9093-&amp;gt;9093/tcp,:::9093-&amp;gt;9093/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:9094-&amp;gt;9094/tcp,:::9094-&amp;gt;9094/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">minio /usr/bin/docker-entrypoint ... Up &lt;span class="o">(&lt;/span>unhealthy&lt;span class="o">)&lt;/span> 0.0.0.0:9000-&amp;gt;9000/tcp,:::9000-&amp;gt;9000/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:9001-&amp;gt;9001/tcp,:::9001-&amp;gt;9001/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus_one /bin/prometheus --web.read ... Up 0.0.0.0:9090-&amp;gt;9090/tcp,:::9090-&amp;gt;9090/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_querier /bin/thanos query --http-a ... Up 0.0.0.0:19192-&amp;gt;19192/tcp,:::19192-&amp;gt;19192/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_sidecar_one /bin/thanos sidecar --log. ... Up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_store /bin/thanos store --data-d ... Up 0.0.0.0:29090-&amp;gt;19090/tcp,:::29090-&amp;gt;19090/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:29191-&amp;gt;19191/tcp,:::29191-&amp;gt;19191/tcp, 29090/tcp, 29191/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/thanos-docker-compose# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager /bin/alertmanager --config ... Up 0.0.0.0:9093-&amp;gt;9093/tcp,:::9093-&amp;gt;9093/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:9094-&amp;gt;9094/tcp,:::9094-&amp;gt;9094/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus_one /bin/prometheus --web.read ... Up 0.0.0.0:9090-&amp;gt;9090/tcp,:::9090-&amp;gt;9090/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_querier /bin/thanos query --http-a ... Up 0.0.0.0:19192-&amp;gt;19192/tcp,:::19192-&amp;gt;19192/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_sidecar_one /bin/thanos sidecar --log. ... Up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_store /bin/thanos store --data-d ... Up 0.0.0.0:29090-&amp;gt;19090/tcp,:::29090-&amp;gt;19090/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:29191-&amp;gt;19191/tcp,:::29191-&amp;gt;19191/tcp, 29090/tcp, 29191/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/thanos-docker-compose# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager /bin/alertmanager --config ... Up 0.0.0.0:9093-&amp;gt;9093/tcp,:::9093-&amp;gt;9093/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:9094-&amp;gt;9094/tcp,:::9094-&amp;gt;9094/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus_one /bin/prometheus --web.read ... Up 0.0.0.0:9090-&amp;gt;9090/tcp,:::9090-&amp;gt;9090/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_querier /bin/thanos query --http-a ... Up 0.0.0.0:19192-&amp;gt;19192/tcp,:::19192-&amp;gt;19192/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_sidecar_one /bin/thanos sidecar --log. ... Up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_store /bin/thanos store --data-d ... Up 0.0.0.0:29090-&amp;gt;19090/tcp,:::29090-&amp;gt;19090/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:29191-&amp;gt;19191/tcp,:::29191-&amp;gt;19191/tcp, 29090/tcp, 29191/tcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="測試-1">測試&lt;/h4>
&lt;p>&lt;a class="link" href="http://192.168.1.71:19192/graph" target="_blank" rel="noopener"
>http://192.168.1.71:19192/graph&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://192.168.1.72:19192/graph" target="_blank" rel="noopener"
>http://192.168.1.72:19192/graph&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="http://192.168.1.73:19192/graph" target="_blank" rel="noopener"
>http://192.168.1.73:19192/graph&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115233316.png"
width="1141"
height="564"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115233316_hu5671a3ba33d63b54a99a1fd2c9bf32e5_78774_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115233316_hu5671a3ba33d63b54a99a1fd2c9bf32e5_78774_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="202"
data-flex-basis="485px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115233420.png"
width="1166"
height="944"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115233420_huf5887f6f33d9072256298a5b68738de8_165694_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115233420_huf5887f6f33d9072256298a5b68738de8_165694_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="123"
data-flex-basis="296px"
>&lt;/p>
&lt;h3 id="step4-grafana">step4 grafana&lt;/h3>
&lt;p>&lt;strong>主機: k8s-master71u (192.168.1.71)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir -p ./grafana/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod -R &lt;span class="m">777&lt;/span> ./grafana/data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="啟動grafana">啟動grafana&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose up -d grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager /bin/alertmanager --config ... Up 0.0.0.0:9093-&amp;gt;9093/tcp,:::9093-&amp;gt;9093/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:9094-&amp;gt;9094/tcp,:::9094-&amp;gt;9094/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grafana /run.sh Up 0.0.0.0:3000-&amp;gt;3000/tcp,:::3000-&amp;gt;3000/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">minio /usr/bin/docker-entrypoint ... Up &lt;span class="o">(&lt;/span>unhealthy&lt;span class="o">)&lt;/span> 0.0.0.0:9000-&amp;gt;9000/tcp,:::9000-&amp;gt;9000/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:9001-&amp;gt;9001/tcp,:::9001-&amp;gt;9001/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus_one /bin/prometheus --web.read ... Up 0.0.0.0:9090-&amp;gt;9090/tcp,:::9090-&amp;gt;9090/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_querier /bin/thanos query --http-a ... Up 0.0.0.0:19192-&amp;gt;19192/tcp,:::19192-&amp;gt;19192/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_sidecar_one /bin/thanos sidecar --log. ... Up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_store /bin/thanos store --data-d ... Up 0.0.0.0:29090-&amp;gt;19090/tcp,:::29090-&amp;gt;19090/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:29191-&amp;gt;19191/tcp,:::29191-&amp;gt;19191/tcp, 29090/tcp, 29191/tcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="安裝plugins">安裝plugins&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker ps &lt;span class="p">|&lt;/span> grep -i grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">b31f88d7fc08 grafana/grafana:9.0.3 &lt;span class="s2">&amp;#34;/run.sh&amp;#34;&lt;/span> &lt;span class="m">34&lt;/span> seconds ago Up &lt;span class="m">30&lt;/span> seconds 0.0.0.0:3000-&amp;gt;3000/tcp, :::3000-&amp;gt;3000/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker &lt;span class="nb">exec&lt;/span> -ti b31f88d7fc08 sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安裝plugins&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/share/grafana &lt;span class="c1"># grafana-cli plugins install grafana-clock-panel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✔ Downloaded grafana-clock-panel v2.1.3 zip successfully
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please restart Grafana after installing plugins. Refer to Grafana documentation &lt;span class="k">for&lt;/span> instructions &lt;span class="k">if&lt;/span> necessary.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/share/grafana &lt;span class="c1"># grafana-cli plugins install grafana-simple-json-datasource&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✔ Downloaded grafana-simple-json-datasource v1.4.2 zip successfully
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please restart Grafana after installing plugins. Refer to Grafana documentation &lt;span class="k">for&lt;/span> instructions &lt;span class="k">if&lt;/span> necessary.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/share/grafana &lt;span class="c1"># grafana-cli plugins install grafana-piechart-panel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">✔ Downloaded grafana-piechart-panel v1.6.4 zip successfully
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please restart Grafana after installing plugins. Refer to Grafana documentation &lt;span class="k">for&lt;/span> instructions &lt;span class="k">if&lt;/span> necessary.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/share/grafana &lt;span class="c1"># exit&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker restart b31f88d7fc08
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">b31f88d7fc08
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker ps &lt;span class="p">|&lt;/span> grep -i grafana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">b31f88d7fc08 grafana/grafana:9.0.3 &lt;span class="s2">&amp;#34;/run.sh&amp;#34;&lt;/span> &lt;span class="m">2&lt;/span> minutes ago Up &lt;span class="m">17&lt;/span> seconds 0.0.0.0:3000-&amp;gt;3000/tcp, :::3000-&amp;gt;3000/tcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="測試-2">測試&lt;/h4>
&lt;p>&lt;a class="link" href="http://192.168.1.71:3000/login" target="_blank" rel="noopener"
>http://192.168.1.71:3000/login&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115233926.png"
width="1398"
height="781"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115233926_hucc3239766fad917df61cb0e0fd3f810f_547938_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115233926_hucc3239766fad917df61cb0e0fd3f810f_547938_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="179"
data-flex-basis="429px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234011.png"
width="1043"
height="939"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234011_hu1cee1e4250ba6bfd68a024c5bc7620e7_131304_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234011_hu1cee1e4250ba6bfd68a024c5bc7620e7_131304_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="111"
data-flex-basis="266px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234117.png"
width="924"
height="817"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234117_huc63a0cd5bf8666c8e34573a916e646f4_71404_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234117_huc63a0cd5bf8666c8e34573a916e646f4_71404_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="113"
data-flex-basis="271px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234232.png"
width="742"
height="844"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234232_hu759bca3b8078cbd899419ac7e9c310a8_91295_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234232_hu759bca3b8078cbd899419ac7e9c310a8_91295_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="87"
data-flex-basis="210px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234335.png"
width="734"
height="869"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234335_hu307d417dcbe2537818a9011d39b84d00_71050_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234335_hu307d417dcbe2537818a9011d39b84d00_71050_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="84"
data-flex-basis="202px"
>&lt;/p>
&lt;p>添加Dashboard&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;__inputs&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;DS_PROMETHEUS&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;label&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Prometheus&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;__elements&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;__requires&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;grafana&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;grafana&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Grafana&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;panel&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Graph (old)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;1.0.0&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;panel&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;annotations&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;list&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;builtIn&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;grafana&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;enable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;iconColor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;rgba(0, 211, 255, 1)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Annotations &amp;amp; Alerts&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;limit&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">100&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matchAny&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tags&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;dashboard&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;dashboard&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Redis Dashboard for Prometheus Redis Exporter 1.x&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fiscalYearStartMonth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gnetId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">763&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;graphTooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">null&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;iteration&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1699347258536&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;liveNow&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;panels&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fieldConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;defaults&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;thresholds&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;custom&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;center&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;displayMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;filterable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;inspect&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mappings&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;absolute&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steps&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;unit&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;none&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;overrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;總CPU&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">53&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;總內存&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">87&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;名稱&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;類型&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">143&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;到期日&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">70&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;實例&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">154&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byRegexp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/總.*/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.displayMode&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color-background&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fixedColor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;blue&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;fixed&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byRegexp&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;/.*%/&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;unit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;percent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;continuous-GrYlRd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.displayMode&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;gradient-gauge&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;CPU%&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">98&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;unit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;percent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;continuous-GrYlRd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.displayMode&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;gradient-gauge&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;内存%&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;連接數&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">117&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;absolute&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steps&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#EAB839&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.displayMode&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color-background&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;版本&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">23&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;操作数/s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">85&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.displayMode&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color-background&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;absolute&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steps&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#EAB839&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;啟動&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;unit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">119&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;實例ID&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;命中率&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">163&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;unit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;percentunit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;continuous-RdYlGr&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.displayMode&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;gradient-gauge&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;總Keys&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">94&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;流入&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">101&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;unit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;binBps&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;absolute&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steps&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#EAB839&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3000000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10000000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.displayMode&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color-background&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;流出&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">103&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;unit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;binBps&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.displayMode&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color-background&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;absolute&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steps&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#EAB839&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3000000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10000000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;操作數/s&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">110&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;absolute&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steps&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#EAB839&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">15000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">20000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.displayMode&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color-background&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;env&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">122&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;內存%&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">172&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;主機&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">203&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;function&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">142&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;記憶體%&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">176&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;unit&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;percent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;continuous-GrYlRd&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.displayMode&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;gradient-gauge&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;matcher&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;byName&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;慢日誌&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;properties&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.width&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">113&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;absolute&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steps&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;green&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">null&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#EAB839&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;color&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;red&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;custom.displayMode&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;color-background&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">24&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">40&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;footer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fields&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Value #B&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Value #C&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Value #L&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Value #H&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Value #I&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Value #M&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Value #N&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Value #J&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;Value #K&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;reducer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;sum&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;showHeader&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sortBy&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;desc&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;displayName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;CPU%&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_up{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instant&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;__auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(redis_connected_clients{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;})by(instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instant&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;__auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;D&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(irate(redis_commands_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;} [2m]))by(instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instant&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;__auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;E&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_uptime_in_seconds{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;} - 0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instant&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;__auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;F&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;avg(irate(redis_keyspace_hits_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;}[2m]) / (irate(redis_keyspace_misses_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;}[1m]) + irate(redis_keyspace_hits_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;}[2m]))) by (instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instant&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;__auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;G&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum (redis_db_keys{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;}) by (instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instant&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;__auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;H&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(irate(redis_net_input_bytes_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;}[2m])) by (instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instant&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;__auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;I&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(irate(redis_net_output_bytes_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;}[2m])) by (instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instant&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;__auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;J&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;(100 * (redis_memory_used_bytes{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;} / redis_memory_max_bytes{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;}))&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instant&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;__auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;irate(redis_cpu_sys_seconds_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;}[2s])*100&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instant&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;__auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;C&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(redis_slowlog_length{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;}) by (instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instant&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;__auto&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;K&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;REDIS資源總覽表【$env：$function】&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;transformations&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;merge&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;organize&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;excludeByName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Time&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #A&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;__name__&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;account&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;env&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;function&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;group&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;iaccount&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;igroup&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;iname&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instance&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;job&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;origin_prometheus&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;region&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;vendor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;indexByName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Time&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #A&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #B&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #C&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #D&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #E&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #F&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #G&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #H&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #I&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #J&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #K&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">14&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;__name__&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;env&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;function&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instance&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;job&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">15&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renameByName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #B&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;記憶體%&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #C&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;CPU%&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #D&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;連接數&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #E&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;操作數/s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #F&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;啟動&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #G&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;命中率&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #H&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;總Keys&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #I&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;流入&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #J&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;流出&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Value #K&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;慢日誌&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;account&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;賬號&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;cpu&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;總CPU&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;disk&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;總磁盤&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exp&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;到期日&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;group&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;分組&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;iaccount&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;iid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;實例ID&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;instance&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;主機&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;itype&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;類型&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mem&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;總內存&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;名稱&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;region&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;vendor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;ver&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;版本&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;table&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">14&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sortDesc&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;irate(redis_commands_processed_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2s])&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;每秒操作數(總和)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cumulative&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:489&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:490&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;decimals&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Total Commands / sec&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fieldConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;defaults&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;overrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">14&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">38&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideEmpty&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideZero&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sortDesc&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;null as zero&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(irate(redis_commands_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;} [2s])) by (cmd) &amp;gt;1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{{ cmd }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_command_calls_total&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;每秒操作數(命令)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;individual&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:706&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;none&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:707&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">18&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum (redis_db_keys{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}) by (instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum.key: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Key總數&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;individual&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:388&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;none&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:389&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum (redis_db_keys{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}) by (db)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{{ db }} &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;各DB KEY分布&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;individual&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:558&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;none&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:559&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#BF1B00&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">34&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideEmpty&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideZero&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;null as zero&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_memory_used_bytes{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;} &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;used: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_memory_max_bytes{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;} &amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;max: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;記憶體使用量&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cumulative&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:433&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;bytes&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:434&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">34&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sortDesc&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;irate(redis_cpu_sys_seconds_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2s])*100&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sys: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;irate(redis_cpu_user_seconds_total{instance=~\&amp;#34;$instance\&amp;#34;}[2s])*100&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;user: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;CPU使用率&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cumulative&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:377&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;percent&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:378&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;evicts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#890F02&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;memcached_items_evicted_total{instance=\&amp;#34;172.17.0.1:9150\&amp;#34;,job=\&amp;#34;prometheus\&amp;#34;}&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#890F02&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;reclaims&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#3F6833&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">44&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">16&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sortDesc&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:251&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alias&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;reclaims&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_slowlog_length{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_slowlog: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;慢日誌&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cumulative&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:258&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:259&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Connected/Blocked Clients&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fieldConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;defaults&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;overrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">44&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">42&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;null&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_connected_clients{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_blocked_clients{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;blocked: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;連接與拒絕的客戶端&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;individual&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:1676&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:1677&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#BF1B00&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">54&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideEmpty&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideZero&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;null as zero&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;(redis_memory_used_bytes{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;} / redis_memory_max_bytes{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;})*100&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;used: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;記憶體使用率&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cumulative&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:433&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;percent&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:434&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;label&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;decimals&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">54&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">24&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;irate(redis_keyspace_hits_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2s])&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;hits: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;irate(redis_keyspace_misses_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2s])&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;misses: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;每秒命中和未命中數量&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;individual&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:164&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;label&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:165&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;irate(redis_net_input_bytes_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2s])&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;input: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;irate(redis_net_output_bytes_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2s])&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;output: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;每秒網路流量&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cumulative&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:377&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;bytes&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:378&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;decimals&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">64&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;irate(redis_keyspace_hits_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2s])/(irate(redis_keyspace_hits_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2s])+irate(redis_keyspace_misses_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2s]))*100&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Hits%: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;C&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;命中率&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;individual&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:164&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;label&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:165&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Total Time Spent by Command / sec&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fieldConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;defaults&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;overrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">74&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">46&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideEmpty&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideZero&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sortDesc&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;null as zero&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(irate(redis_commands_duration_seconds_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2m])) by (cmd) != 0&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{{ cmd }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_command_calls_total&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;每秒命令花費的總時長&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;individual&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:1761&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:1762&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Average Time Spent by Command / sec&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fieldConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;defaults&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;overrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">74&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">44&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideEmpty&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideZero&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sortDesc&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(irate(redis_commands_duration_seconds_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2m])) by (cmd)\n /\nsum(irate(redis_commands_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2m])) by (cmd)\n&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{{ cmd }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_command_calls_total&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;命令執行平均耗時&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;individual&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:1589&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:1590&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">7&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">83&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">13&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum (redis_db_keys{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}) - sum (redis_db_keys_expiring{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}) by (instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;not expiring: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum (redis_db_keys_expiring{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}) by (instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;expiring: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;過期與未過期的Keys&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;individual&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:171&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:172&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;description&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;This metric will only be non-zero if the instance is a master&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fieldConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;defaults&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;overrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">83&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">48&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;null&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(redis_connected_slaves{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}) by (instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;被連接的Slave數量&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;individual&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:2097&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;decimals&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;label&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:2098&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#BF1B00&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">92&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">26&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideEmpty&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hideZero&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;null as zero&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_mem_fragmentation_bytes{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;used: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;破碎記憶體使用&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cumulative&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:433&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;bytes&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:434&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;evicts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#890F02&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;memcached_items_evicted_total{instance=\&amp;#34;172.17.0.1:9150\&amp;#34;,job=\&amp;#34;prometheus\&amp;#34;}&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#890F02&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;reclaims&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;#3F6833&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">9&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">92&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:314&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alias&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;reclaims&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(rate(redis_expired_keys_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2s])) by (instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;expired: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;target&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(rate(redis_evicted_keys_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;}[2s])) by (instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;evicted: {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;B&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;過期與驅逐的Keys&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cumulative&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:321&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:322&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;aliasColors&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;bars&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;dashes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;error&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fill&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;fillGradient&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;grid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;gridPos&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;h&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;w&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">12&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;x&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;y&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">101&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hiddenSeries&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;id&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">36&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;isNew&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legend&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alignAsTable&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;avg&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;max&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;min&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;rightSide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;total&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;lines&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;linewidth&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;links&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;nullPointMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;connected&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;alertThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;percentage&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pluginVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;9.0.3&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;pointradius&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;points&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;renderer&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;flot&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;seriesOverrides&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;spaceLength&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">10&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;stack&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;steppedLine&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;targets&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;editorMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;code&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;exemplar&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;expr&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;sum(irate(redis_commands_total{env=~\&amp;#34;$env\&amp;#34;,function=~\&amp;#34;$function\&amp;#34;,instance=~\&amp;#34;$instance\&amp;#34;,cmd=~\&amp;#34;.*get.*\&amp;#34;}[2s])) by (cmd , instance) &amp;gt; 1&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time_series&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;interval&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;intervalFactor&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;legendFormat&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;{{ cmd }} {{ instance }}&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;metric&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;redis_command_calls_total&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;range&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;A&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;step&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">240&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;thresholds&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timeRegions&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;每秒操作數(GET.*)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tooltip&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;msResolution&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;shared&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;value_type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;cumulative&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;graph&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;xaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;mode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;values&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxes&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:3400&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;$$hashKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;object:3401&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;format&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;short&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;logBase&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;show&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;yaxis&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;align&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refresh&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;schemaVersion&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">36&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;style&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;dark&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tags&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;redis&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;templating&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;list&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;definition&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;label_values(redis_up,env)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;includeAll&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;label&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;env&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;multi&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;env&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;query&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;query&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;label_values(redis_up,env)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;StandardVariableQuery&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refresh&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;regex&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;skipUrlSync&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;query&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;definition&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;label_values(redis_up{env=\&amp;#34;$env\&amp;#34;},function)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;includeAll&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;label&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;function&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;multi&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;function&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;query&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;query&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;label_values(redis_up{env=\&amp;#34;$env\&amp;#34;},function)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;StandardVariableQuery&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refresh&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;regex&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;skipUrlSync&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;query&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;current&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;${DS_PROMETHEUS}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;definition&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;label_values(redis_up{env=\&amp;#34;$env\&amp;#34;,function=\&amp;#34;$function\&amp;#34;}, instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;includeAll&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;label&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Instance&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;multi&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">true&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;instance&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;query&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;query&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;label_values(redis_up{env=\&amp;#34;$env\&amp;#34;,function=\&amp;#34;$function\&amp;#34;}, instance)&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refId&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;StandardVariableQuery&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refresh&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;regex&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;skipUrlSync&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;sort&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tagValuesQuery&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;tagsQuery&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;query&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;useTags&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;datasource&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;prometheus&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;372QZZR4k&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;filters&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;hide&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;label&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;name&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Filters&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;skipUrlSync&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;adhoc&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;time&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;from&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;now-1h&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;to&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;now&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timepicker&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;refresh_intervals&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;5s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;10s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;30s&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;1m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;5m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;15m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;30m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;1h&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;2h&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;1d&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">],&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;time_options&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;5m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;15m&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;1h&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;6h&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;12h&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;24h&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;2d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;7d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;30d&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;timezone&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;browser&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;title&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Redis Dashboard for Prometheus Redis Exporter 1.x&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;uid&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;OHW0aysnk&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;version&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">125&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;weekStart&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234958.png"
width="1510"
height="482"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234958_hu8e2901d9f73e5c497745e9b303cd4050_63362_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234958_hu8e2901d9f73e5c497745e9b303cd4050_63362_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="313"
data-flex-basis="751px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234903.png"
width="748"
height="588"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234903_hue5de0274ecd50a252d831531ab9e1554_59620_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115234903_hue5de0274ecd50a252d831531ab9e1554_59620_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="127"
data-flex-basis="305px"
>&lt;/p>
&lt;p>目前不會有值，因為還沒有開始監控Redis
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115235058.png"
width="1509"
height="932"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115235058_hufeecf602b7b32d5f82b9401bce4c95b8_79508_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115235058_hufeecf602b7b32d5f82b9401bce4c95b8_79508_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="161"
data-flex-basis="388px"
>&lt;/p>
&lt;h3 id="step5-thanos_compactorthanos_bucketthanos_rule">step5 thanos_compactor、thanos_bucket、thanos_rule&lt;/h3>
&lt;p>&lt;strong>主機: k8s-master72u (192.168.1.72)&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">mkdir -p ./thanos/compact_data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod -R &lt;span class="m">777&lt;/span> ./thanos/compact_data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mkdir -p ./thanos/rule_data/&lt;span class="o">{&lt;/span>data,rules,conf&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chmod -R &lt;span class="m">777&lt;/span> ./thanos/rule_data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="啟動thanos_compactorthanos_bucketthanos_rule">啟動thanos_compactor、thanos_bucket、thanos_rule&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/thanos-docker-compose# docker-compose up -d bucket_web
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/thanos-docker-compose# docker-compose up -d thanos_compactor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/thanos-docker-compose# docker-compose up -d thanos_rule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/thanos-docker-compose# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------------------------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">alertmanager /bin/alertmanager --config ... Up 0.0.0.0:9093-&amp;gt;9093/tcp,:::9093-&amp;gt;9093/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:9094-&amp;gt;9094/tcp,:::9094-&amp;gt;9094/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bucket_web /bin/thanos tools bucket w ... Up 0.0.0.0:19194-&amp;gt;19194/tcp,:::19194-&amp;gt;19194/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prometheus_one /bin/prometheus --web.read ... Up 0.0.0.0:9090-&amp;gt;9090/tcp,:::9090-&amp;gt;9090/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_compactor /bin/thanos compact --log. ... Up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_querier /bin/thanos query --http-a ... Up 0.0.0.0:19192-&amp;gt;19192/tcp,:::19192-&amp;gt;19192/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_rule /bin/thanos rule --grpc-ad ... Up 0.0.0.0:10905-&amp;gt;10905/tcp,:::10905-&amp;gt;10905/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:19193-&amp;gt;19193/tcp,:::19193-&amp;gt;19193/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_sidecar_one /bin/thanos sidecar --log. ... Up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thanos_store /bin/thanos store --data-d ... Up 0.0.0.0:29090-&amp;gt;19090/tcp,:::29090-&amp;gt;19090/tcp,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0.0.0.0:29191-&amp;gt;19191/tcp,:::29191-&amp;gt;19191/tcp, 29090/tcp, 29191/tcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h4 id="測試-3">測試&lt;/h4>
&lt;p>&lt;a class="link" href="http://192.168.1.72:19194/blocks" target="_blank" rel="noopener"
>http://192.168.1.72:19194/blocks&lt;/a>&lt;/p>
&lt;p>要minio有bucket時，這裡才會有數據顯示
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115235346.png"
width="1508"
height="424"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115235346_huab3adfe7155d15889121fc94a4e15e3d_46950_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231115235346_huab3adfe7155d15889121fc94a4e15e3d_46950_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="355"
data-flex-basis="853px"
>&lt;/p>
&lt;h3 id="step6-redis_exporter">step6 redis_exporter&lt;/h3>
&lt;h4 id="docker-compose方式安裝redis_exporter">docker-compose方式安裝redis_exporter:&lt;/h4>
&lt;p>&lt;strong>主機: k8s-master71u (192.168.1.71)、k8s-master72u (192.168.1.72)、k8s-master73u (192.168.1.73)&lt;/strong>&lt;/p>
&lt;h5 id="目錄架構">目錄架構&lt;/h5>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── .env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── docker-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── etc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── localtime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── timezone
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="docker-composeyml-1">docker-compose.yml&lt;/h5>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-YAML" data-lang="YAML">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;3.2&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 帶帳號密碼&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">redis_exporter_one&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">oliver006/redis_exporter&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redis_exporter_one&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--redis.addr=${REDIS_EXPORTER_IP}:6379&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--redis.user=${REDIS_USER}&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--redis.password=${REDIS_PASSWORD}&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--include-system-metrics=true&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">expose&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">9121&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9121:9121&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 不帶帳號密碼&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">redis_exporter_two&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">oliver006/redis_exporter&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redis_exporter_two&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/localtime:/etc/localtime&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">./etc/timezone:/etc/timezone&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--redis.addr=${REDIS_EXPORTER_IP}:6379&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s1">&amp;#39;--include-system-metrics=true&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">unless-stopped&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">expose&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">9122&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;9122:9121&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>.env需依照環境修改部分：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1. REDIS_EXPORTER_IP 填寫當下安裝redis_exporter的主機IP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2. REDIS_USER 填寫redis_exporter連線redis使用的帳號&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3. REDIS_PASSWORD 填寫redis_exporter連線redis使用的密碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/redis_exporter# cat .env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">REDIS_EXPORTER_IP&lt;/span>&lt;span class="o">=&lt;/span>192.168.1.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">REDIS_USER&lt;/span>&lt;span class="o">=&lt;/span>prometheus-user
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">REDIS_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1234&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="啟動redis_exporter">啟動redis_exporter&lt;/h5>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/redis-exporter# docker-compose up -d redis_exporter_one
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/redis-exporter# docker-compose up -d redis_exporter_one
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/redis-exporter# docker-compose up -d redis_exporter_one
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/redis-exporter# docker-compose up -d redis_exporter_two
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/redis-exporter# docker-compose up -d redis_exporter_two
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/redis-exporter# docker-compose up -d redis_exporter_two
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/redis_exporter# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis_exporter_one /redis_exporter REDIS_ADDR ... Up 0.0.0.0:9121-&amp;gt;9121/tcp,:::9121-&amp;gt;9121/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis_exporter_two /redis_exporter REDIS_ADDR ... Up 0.0.0.0:9122-&amp;gt;9121/tcp,:::9122-&amp;gt;9121/tcp, 9122/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/redis_exporter# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis_exporter_one /redis_exporter REDIS_ADDR ... Up 0.0.0.0:9121-&amp;gt;9121/tcp,:::9121-&amp;gt;9121/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis_exporter_two /redis_exporter REDIS_ADDR ... Up 0.0.0.0:9122-&amp;gt;9121/tcp,:::9122-&amp;gt;9121/tcp, 9122/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/redis_exporter# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">----------------------------------------------------------------------------------------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis_exporter_one /redis_exporter REDIS_ADDR ... Up 0.0.0.0:9121-&amp;gt;9121/tcp,:::9121-&amp;gt;9121/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis_exporter_two /redis_exporter REDIS_ADDR ... Up 0.0.0.0:9122-&amp;gt;9121/tcp,:::9122-&amp;gt;9121/tcp, 9122/tcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="prometheus添加監控並重啟">prometheus添加監控，並重啟&lt;/h5>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# vim prometheus/conf/sd_config/t1zone-redis/web-front.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;targets&amp;#34;&lt;/span>: &lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;redis://192.168.1.11:6379&amp;#34;&lt;/span>, &lt;span class="s2">&amp;#34;redis://192.168.1.12:6379&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;labels&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;env&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;t1zone&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;function&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;web-front&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# vim prometheus/conf/sd_config/t2zone-redis/search.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;targets&amp;#34;&lt;/span>: &lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;redis://192.168.1.13:6379&amp;#34;&lt;/span>, &lt;span class="s2">&amp;#34;redis://192.168.1.14:6379&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;labels&amp;#34;&lt;/span>: &lt;span class="o">{&lt;/span>&lt;span class="s2">&amp;#34;env&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;t2zone&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;function&amp;#34;&lt;/span>:&lt;span class="s2">&amp;#34;search&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# vim prometheus/conf/prometheus.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#redis自動發現&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - job_name: &lt;span class="s1">&amp;#39;t1zone-Redis-web-front&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> file_sd_configs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - files:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - /etc/prometheus/sd_config/t1zone-redis/web-front.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metrics_path: /scrape
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> relabel_configs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - source_labels: &lt;span class="o">[&lt;/span>__address__&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> target_label: __param_target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - source_labels: &lt;span class="o">[&lt;/span>__param_target&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> target_label: instance
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - target_label: __address__
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replacement: 192.168.1.71:9121
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - job_name: &lt;span class="s1">&amp;#39;t2zone-Redis-search&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> file_sd_configs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - files:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - /etc/prometheus/sd_config/t2zone-redis/search.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metrics_path: /scrape
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> relabel_configs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - source_labels: &lt;span class="o">[&lt;/span>__address__&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> target_label: __param_target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - source_labels: &lt;span class="o">[&lt;/span>__param_target&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> target_label: instance
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - target_label: __address__
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> replacement: 192.168.1.71:9122
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/thanos-docker-compose# docker-compose restart prometheus_one
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h5 id="測試-4">測試&lt;/h5>
&lt;p>&lt;a class="link" href="http://192.168.1.71:19192/targets" target="_blank" rel="noopener"
>http://192.168.1.71:19192/targets&lt;/a>&lt;/p>
&lt;p>Target有偵測到了&lt;/p>
&lt;p>有帳號密碼的&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012554.png"
width="1168"
height="793"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012554_huaac78e7ccbd6514c239fd999dd2408f7_113867_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012554_huaac78e7ccbd6514c239fd999dd2408f7_113867_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="147"
data-flex-basis="353px"
>&lt;/p>
&lt;p>沒帳號密碼的&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012639.png"
width="1177"
height="751"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012639_hu05347438df37b029e2a17609aaa6dda8_111808_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012639_hu05347438df37b029e2a17609aaa6dda8_111808_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="156"
data-flex-basis="376px"
>
也有收集到redis指標&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012746.png"
width="1510"
height="623"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012746_hu629965b89bc915c02a3807f3b03d2748_146815_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012746_hu629965b89bc915c02a3807f3b03d2748_146815_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="242"
data-flex-basis="581px"
>&lt;/p>
&lt;p>grafana也可以看到redis監控資訊&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012900.png"
width="1509"
height="981"
srcset="https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012900_hu3a572e78e0497c1d857336ac0cd10e1d_182173_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/thanos-docker-compose-multinodes/media/Pasted-image-20231116012900_hu3a572e78e0497c1d857336ac0cd10e1d_182173_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="153"
data-flex-basis="369px"
>&lt;/p>
&lt;h4 id="二進制方式安裝redis_exporter">二進制方式安裝redis_exporter:&lt;/h4>
&lt;blockquote>
&lt;p>起兩個redis_exporter服務，因為&lt;/p>
&lt;p>redis5.x版的，沒有acl可以設定帳號和密碼，用redis_exporter2來監控&lt;/p>
&lt;p>redis6.x版的，有acl可以設定帳號和密碼，用redis_exporter來監控，帳號prometheus-user，-redis.password XXXX，XXXX依現況修改&lt;/p>
&lt;p>redis所有主機，都要先新增prometheus-user帳號，權限，-@all +info +get +config|get +client +xinfo +xlen +scard +latency +llen +pfcount +strlen +type +cluster|info +memory +ping +scan +zcard +eval +slowlog +hlen +select&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> ~
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget https://github.com/oliver006/redis_exporter/releases/download/v1.52.0/redis_exporter-v1.52.0.linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tar xzvf redis_exporter-v1.52.0.linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mv redis_exporter-v1.52.0.linux-amd64 /usr/local/redis_exporter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data# vim /etc/systemd/system/redis_exporter.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Unit&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Description&lt;/span>&lt;span class="o">=&lt;/span>redis_exporter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Documentation&lt;/span>&lt;span class="o">=&lt;/span>https://github.com/oliver006/redis_exporter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">After&lt;/span>&lt;span class="o">=&lt;/span>network.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Service&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Type&lt;/span>&lt;span class="o">=&lt;/span>simple
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ExecStart&lt;/span>&lt;span class="o">=&lt;/span>/usr/local/redis_exporter/redis_exporter -redis.addr 10.90.87.240:6379 -redis.user prometheus-user -redis.password XXXX -web.listen-address&lt;span class="o">=&lt;/span>:9121
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Restart&lt;/span>&lt;span class="o">=&lt;/span>on-failure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Install&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">WantedBy&lt;/span>&lt;span class="o">=&lt;/span>multi-user.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data# vim /etc/systemd/system/redis_exporter2.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Unit&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Description&lt;/span>&lt;span class="o">=&lt;/span>redis_exporter2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Documentation&lt;/span>&lt;span class="o">=&lt;/span>https://github.com/oliver006/redis_exporter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">After&lt;/span>&lt;span class="o">=&lt;/span>network.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Service&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Type&lt;/span>&lt;span class="o">=&lt;/span>simple
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ExecStart&lt;/span>&lt;span class="o">=&lt;/span>/usr/local/redis_exporter/redis_exporter -redis.addr 10.90.87.240:6380 -web.listen-address&lt;span class="o">=&lt;/span>:9122
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">Restart&lt;/span>&lt;span class="o">=&lt;/span>on-failure
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Install&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">WantedBy&lt;/span>&lt;span class="o">=&lt;/span>multi-user.target
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data# systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data# systemctl start redis_exporter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data# systemctl start redis_exporter2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data# systemctl &lt;span class="nb">enable&lt;/span> redis_exporter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data# systemctl &lt;span class="nb">enable&lt;/span> redis_exporter2
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data# systemctl status redis_exporter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data# systemctl status redis_exporter2
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>ExecStart=/usr/local/redis_exporter/redis_exporter -redis.addr 10.90.87.240:6379 -redis.user prometheus-user -redis.password XXXX -web.listen-address=:9121 &lt;/p>
&lt;p>#10.90.87.240:6379 搭配 -web.listen-address=:9121 &lt;/p>
&lt;p>ExecStart=/usr/local/redis_exporter/redis_exporter -redis.addr 10.90.87.240:6380 -web.listen-address=:9122&lt;/p>
&lt;p>#10.90.87.240:6380 搭配 -web.listen-address=:9122&lt;/p>
&lt;/blockquote></description></item><item><title>Github push main error push失敗解決(報錯原因error: src refspec main does not match any)</title><link>https://blog.goldfishbrain-fighting.com/2023/github-push-main-error/</link><pubDate>Wed, 15 Nov 2023 16:36:52 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/github-push-main-error/</guid><description>&lt;p>報錯訊息&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# git push -u origin main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">error: src refspec main does not match any
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">error: failed to push some refs to &lt;span class="s1">&amp;#39;https://github.com/chingtsechen/docker-elk.git&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>解決方式: 修改master為main&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# git init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 這裡需要修改master為main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# git branch -m master main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# git commit -m &lt;span class="s2">&amp;#34;first commit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# git branch -M main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# git remote add origin https://github.com/chingtsechen/docker-elk.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# git push -u origin main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Username &lt;span class="k">for&lt;/span> &lt;span class="s1">&amp;#39;https://github.com&amp;#39;&lt;/span>: chingtsechen
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password &lt;span class="k">for&lt;/span> &lt;span class="s1">&amp;#39;https://chingtsechen@github.com&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enumerating objects: 85, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Counting objects: 100% &lt;span class="o">(&lt;/span>85/85&lt;span class="o">)&lt;/span>, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Delta compression using up to &lt;span class="m">8&lt;/span> threads
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Compressing objects: 100% &lt;span class="o">(&lt;/span>74/74&lt;span class="o">)&lt;/span>, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Writing objects: 100% &lt;span class="o">(&lt;/span>85/85&lt;span class="o">)&lt;/span>, 34.36 KiB &lt;span class="p">|&lt;/span> 3.12 MiB/s, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Total &lt;span class="m">85&lt;/span> &lt;span class="o">(&lt;/span>delta 11&lt;span class="o">)&lt;/span>, reused &lt;span class="m">0&lt;/span> &lt;span class="o">(&lt;/span>delta 0&lt;span class="o">)&lt;/span>, pack-reused &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">remote: Resolving deltas: 100% &lt;span class="o">(&lt;/span>11/11&lt;span class="o">)&lt;/span>, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To https://github.com/chingtsechen/docker-elk.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">[&lt;/span>new branch&lt;span class="o">]&lt;/span> main -&amp;gt; main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Branch &lt;span class="s1">&amp;#39;main&amp;#39;&lt;/span> &lt;span class="nb">set&lt;/span> up to track remote branch &lt;span class="s1">&amp;#39;main&amp;#39;&lt;/span> from &lt;span class="s1">&amp;#39;origin&amp;#39;&lt;/span>.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson020 - 通勤再也不用心煩 Wheelzüs App</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson020/</link><pubDate>Tue, 14 Nov 2023 23:54:10 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson020/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson020/media/Pasted-image-20231114235610.png" alt="Featured image of post Lesson020 - 通勤再也不用心煩 Wheelzüs App" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/p8b8NYEn_1s" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">connect
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 串起，聯結
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">reduce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 減少，減小
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fare
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 車費，交通費
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">confirm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 確認，確定
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 全部的，總共的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">review
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 評價，評論
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">register
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 註冊，登記；表示
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">waste
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 浪費
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>分詞構句&lt;/p>
&lt;p>Participle Clauses&lt;/p>
&lt;/blockquote>
&lt;p>有時候，我們可以將副詞子句簡化，以表達更清楚的意思，也讓句子聽起來更自然。這些被簡化的副詞子句又稱作「修飾性的副詞片語」。我們可以簡化表示時間 (when, while, before, after)、因果關係 (because, since)、對比 (although, though) 以及條件 (if) 的副詞子句；然而，只有在副詞子句和主要子句的主詞相同的時候，才可以進行簡化的動作。 將副詞子句簡化為修飾性的副詞片語的方法為： 1. 移除連接詞； 2. 假如有 be 動詞，則移除副詞子句的主詞和 be 動詞； 3. 假如沒有 be 動詞，則移除副詞子句的主詞，並將動詞改為 -ing 形式（現在分詞）。 例句如下： - While Dad was eating breakfast, he read the newspaper. = Eating breakfast, Dad read the newspaper. （當爸爸吃早餐時，他讀了報紙。） - Because Amy was hit by her brother, she cried loudly. = Hit by her brother, Amy cried loudly. (past participle, passive voice) （因為愛咪被哥哥打，於是她嚎啕大哭。） - Though he stayed up late last night, he still got up early this morning. = Staying up late last night, he still got up early this morning. （雖然他昨天晚上很晚睡，他今天早上還是很早起。）&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Finishing her homework, my sister went to bed right away.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">做完功課後，我姊立刻就去上床睡覺去了。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Locked out by himself accidentally, Warren called his landlord for help.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">因為 Warren 不小心把自己鎖在了門外，他打電話給房東求助。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Unable to afford a new car, we bought a used one.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">因為買不起新車，我們買了二手車。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Start-Up：我的新創時代</title><link>https://blog.goldfishbrain-fighting.com/2023/movie-start-up/</link><pubDate>Mon, 13 Nov 2023 19:41:53 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/movie-start-up/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/movie-start-up/media/Pasted-image-20231113194929.png" alt="Featured image of post Start-Up：我的新創時代" />&lt;h2 id="據述">據述&lt;/h2>
&lt;p>來源：Google Bard&lt;/p>
&lt;p>該劇講述了四位年輕人創業的故事。他們來自不同的背景，但都有著一個共同的夢想，那就是成功創業。&lt;/p>
&lt;h2 id="劇照">劇照&lt;/h2>
&lt;p>來源：&lt;/p>
&lt;p>&lt;a class="link" href="https://news.agentm.tw/145093/" target="_blank" rel="noopener"
>https://news.agentm.tw/145093/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/movie-start-up/media/Pasted-image-20231113194929.png"
width="750"
height="422"
srcset="https://blog.goldfishbrain-fighting.com/2023/movie-start-up/media/Pasted-image-20231113194929_hu277e65009fbe4d342f0377e2ba8a75fa_392382_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/movie-start-up/media/Pasted-image-20231113194929_hu277e65009fbe4d342f0377e2ba8a75fa_392382_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/movie-start-up/media/Pasted-image-20231113194844.png"
width="750"
height="422"
srcset="https://blog.goldfishbrain-fighting.com/2023/movie-start-up/media/Pasted-image-20231113194844_hu0e426d004d93c88fbd9ee41248a26793_502049_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/movie-start-up/media/Pasted-image-20231113194844_hu0e426d004d93c88fbd9ee41248a26793_502049_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/movie-start-up/media/Pasted-image-20231113195017.png"
width="750"
height="500"
srcset="https://blog.goldfishbrain-fighting.com/2023/movie-start-up/media/Pasted-image-20231113195017_hu7703f2fc346155842908d2fc5031d9bb_643805_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/movie-start-up/media/Pasted-image-20231113195017_hu7703f2fc346155842908d2fc5031d9bb_643805_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p></description></item><item><title>Lesson018 - 東京旅遊新去處！帶你一窺 Snoopy 博物館！</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson018/</link><pubDate>Mon, 13 Nov 2023 16:08:26 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson018/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson018/media/Pasted-image-20231113193906.png" alt="Featured image of post Lesson018 - 東京旅遊新去處！帶你一窺 Snoopy 博物館！" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/3Frl7m7ZDa8" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
## 單字
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">originally
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adv. 原本
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">absolute
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 絕對的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">admission
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 入場費，門票費
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">purchase
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 購買
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">character
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. （電影、戲劇或故事中的）人物
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">imitate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 模仿
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">stationery
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 文具
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>一般副詞&lt;/p>
&lt;p>Adverbs&lt;/p>
&lt;/blockquote>
&lt;p>副詞和形容詞都有修飾的功能。形容詞修飾名詞，而副詞則可以修飾動詞、形容詞、介係詞片語，或子句等。使用副詞，可以強化表達動作的狀態和程度。許多形容詞都可以透過＋ly（有些字尾須稍作變化）來形成副詞。 例如，影片中 However, we strongly recommend that you purchase advance tickets through E+ on the museum&amp;rsquo;s official website. （我們強力推薦你先去 Eplus 上的官方網站購買預售票。）就是透過把形容詞strong變為副詞，以修飾「推薦」。 或是：Normally themed cafes at restaurants serve average dishes at best just with jacked up prices and shaped like Mickey Mouse or something. （一般主題咖啡廳都會特別將餐點製作成米奇等其他模樣，美味程度普通，但價格卻很高。）就是用Normally來修飾接續的一整段句子。 以下再補充不同種類的副詞與例句：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- How soon can we sign the contract?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我們多快可以簽合約？（時間副詞）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- We sat around the table.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我們圍著桌子坐下。（地方副詞）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Could you please speak more slowly?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">你能講慢一點嗎？（情態副詞 ）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson019 - 科學證實：喝杯咖啡再打個小盹，比只喝咖啡或只睡午覺還有效！</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson019/</link><pubDate>Mon, 13 Nov 2023 15:43:41 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson019/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson019/media/Pasted-image-20231113160652.png" alt="Featured image of post Lesson019 - 科學證實：喝杯咖啡再打個小盹，比只喝咖啡或只睡午覺還有效！" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/CaI5LWj6ams" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">effective
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.有效的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">caffeine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n.咖啡因
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">unconscious
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.無意識的；不省人事的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">brake
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n.煞車
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">evidence
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n.證據，證明
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">error
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n.錯誤，差錯
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">consistently
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adv.一貫地
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">challenge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n.挑戰；難題；考驗
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cell
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n.細胞
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>程度副詞&lt;/p>
&lt;p>Adverbs of Degree&lt;/p>
&lt;/blockquote>
&lt;p>本堂課中我們認識了兩個可用來修飾動作、狀態的程度副詞：a whole lot 以及 much。這兩個副詞（片語）常被用來修飾「形容詞比較級」，用來表示「更大程度上的&amp;hellip;」。看看以下的例句你們就會更清楚唷。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I&amp;#39;m feeling a whole lot better now. Thanks for coming to check on me.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我感覺好很多了。謝謝你過來看我。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The exam was much easier than I had expected.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">考試比我預期的簡單很多。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Things are about to get a whole lot worse.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">事情即將變得更加糟糕。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson017 - 建築大師帶你參觀巴黎新地標：LV 美術館</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson017/</link><pubDate>Thu, 09 Nov 2023 23:11:44 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson017/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson017/media/Pasted-image-20231109231601.png" alt="Featured image of post Lesson017 - 建築大師帶你參觀巴黎新地標：LV 美術館" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;p>YouTube影片連結： &lt;a class="link" href="https://www.youtube.com/watch?v=v98ahM6mr-w" target="_blank" rel="noopener"
>https://www.youtube.com/watch?v=v98ahM6mr-w&lt;/a>&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/v98ahM6mr-w" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">signature
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 簽名
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aesthetic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 審美觀
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">architect
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 建築師
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">blurred
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 模糊的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shelter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 遮蔽處
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">component
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 成分
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">disturbing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 讓人心煩的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">intuitive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 直覺的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">paradigm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 範例，示例
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 靜態的
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>名詞子句&lt;/p>
&lt;p>Noun Clause&lt;/p>
&lt;/blockquote>
&lt;p>「名詞子句」是指能扮演名詞角色的子句，可以做為主詞、補語、受詞使用，由 that, if, whether, where, when, how 等等開頭，如本課的例句 I don&amp;rsquo;t know why I said it. 其中以 why 開頭的名詞子句 why I said it ，並不是講者提出疑問，想問觀眾「為什麼？」，而是說明「我那麼說的『原因』」。另外一句 That&amp;rsquo;s how I got to this freedom of expression. 其中以 how 開頭的名詞子句 how I got to this freedom of expression，也不是講者要問觀眾「如何？」，而是說明「我到達這種表達自由的境界的方式」。我們來看看更多名詞子句的例子：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- He doesn&amp;#39;t know that I broke his phone.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">他不知道我弄壞他的手機。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I&amp;#39;d like to demonstrate how to use the printer.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我想示範如何使用影印機。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The counselor will show you where your cabin is.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">輔導員會告訴你你的小木屋在哪。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>安娜</title><link>https://blog.goldfishbrain-fighting.com/2023/movie-anna/</link><pubDate>Thu, 09 Nov 2023 00:22:14 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/movie-anna/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/movie-anna/media/Pasted-image-20231109003826.png" alt="Featured image of post 安娜" />&lt;h2 id="據述">據述&lt;/h2>
&lt;p>來源：Google Bard&lt;/p>
&lt;p>該劇講述了患上雷普利症候群的女人李由美，為了滿足虛榮心而不惜編造家世、造假學歷，後來更偷了老闆千金李安娜的身分不斷往上爬，並且逆襲嫁入豪門的故事。&lt;/p>
&lt;p>裴智秀在劇中飾演李由美/李安娜，她在劇中的表現非常出色，獲得了觀眾的一致好評。她把李由美/李安娜這個複雜的角色演繹得非常生動，讓人看到了她內心深處的掙扎和痛苦。&lt;/p>
&lt;p>《安娜》是一部非常精彩的懸疑犯罪劇，它不僅探討了人性中的虛榮和欲望，也展現了社會中階層固化的現實。如果你喜歡裴智秀的演技，那麼我相信你也會喜歡這部劇。&lt;/p>
&lt;h2 id="劇照">劇照&lt;/h2>
&lt;p>來源：
&lt;a class="link" href="https://www.koreastardaily.com/sc/news/142228" target="_blank" rel="noopener"
>https://www.koreastardaily.com/sc/news/142228&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/movie-anna/media/Pasted-image-20231109003728.png"
width="480"
height="688"
srcset="https://blog.goldfishbrain-fighting.com/2023/movie-anna/media/Pasted-image-20231109003728_hu9569d116bdd3966f02af288a4b42eba3_428758_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/movie-anna/media/Pasted-image-20231109003728_hu9569d116bdd3966f02af288a4b42eba3_428758_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="69"
data-flex-basis="167px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/movie-anna/media/Pasted-image-20231109004208.png"
width="480"
height="480"
srcset="https://blog.goldfishbrain-fighting.com/2023/movie-anna/media/Pasted-image-20231109004208_hu2466587fa4608e8f9e678b3a72e4dfe8_296645_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/movie-anna/media/Pasted-image-20231109004208_hu2466587fa4608e8f9e678b3a72e4dfe8_296645_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="100"
data-flex-basis="240px"
>&lt;/p></description></item><item><title>我的女神室友斗娜</title><link>https://blog.goldfishbrain-fighting.com/2023/movie-doona/</link><pubDate>Thu, 09 Nov 2023 00:10:14 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/movie-doona/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/movie-doona/media/netflixtw-1697709622-3216943925512570895-3089327343-65374f73625db.jpg" alt="Featured image of post 我的女神室友斗娜" />&lt;h2 id="據述">據述&lt;/h2>
&lt;p>來源：Google Bard&lt;/p>
&lt;p>它是一部改編自閔宋雅的網路漫畫《愛上姐姐的理由》的浪漫愛情劇，由裴秀智和梁世宗主演。&lt;/p>
&lt;p>該劇講述了一位平凡的大學男生李元峻（梁世宗飾演）在Share House與華麗但已隱退的K-POP偶像李斗娜（裴秀智飾演）相遇後，展開了即使承諾不談戀愛卻又情不自禁愛上對方的浪漫愛情故事。&lt;/p>
&lt;p>《我的女神室友斗娜》於2023年10月20日在Netflix上線，共8集。該劇在播出後獲得了觀眾的一致好評，裴秀智和梁世宗的演技也得到了肯定。&lt;/p>
&lt;h2 id="劇照">劇照&lt;/h2>
&lt;p>來源：&lt;/p>
&lt;p>&lt;a class="link" href="https://mintnews.tw/Entertainment/Drama/content-36951.html" target="_blank" rel="noopener"
>https://mintnews.tw/Entertainment/Drama/content-36951.html&lt;/a>&lt;/p>
&lt;p>&lt;a class="link" href="https://www.cosmopolitan.com/tw/entertainment/movies/g45621420/doona-quote/" target="_blank" rel="noopener"
>https://www.cosmopolitan.com/tw/entertainment/movies/g45621420/doona-quote/&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/movie-doona/media/Pasted-image-20231109003042.png"
width="1280"
height="720"
srcset="https://blog.goldfishbrain-fighting.com/2023/movie-doona/media/Pasted-image-20231109003042_hudb26483b6ab8aa3fc4fc52ee61661752_1316861_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/movie-doona/media/Pasted-image-20231109003042_hudb26483b6ab8aa3fc4fc52ee61661752_1316861_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="426px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/movie-doona/media/Pasted-image-20231109002428.png"
width="980"
height="653"
srcset="https://blog.goldfishbrain-fighting.com/2023/movie-doona/media/Pasted-image-20231109002428_hu504b8f451bc1d7ced87215ba9487cb4d_1023854_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/movie-doona/media/Pasted-image-20231109002428_hu504b8f451bc1d7ced87215ba9487cb4d_1023854_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/movie-doona/media/Pasted-image-20231109002502.png"
width="980"
height="653"
srcset="https://blog.goldfishbrain-fighting.com/2023/movie-doona/media/Pasted-image-20231109002502_hu88efbde9d816d259b4a0ae84ebcf4369_593926_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/movie-doona/media/Pasted-image-20231109002502_hu88efbde9d816d259b4a0ae84ebcf4369_593926_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p></description></item><item><title>Lesson016 - 鱷魚來了！水雉爸爸如何保護雛鳥安全？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson016/</link><pubDate>Wed, 08 Nov 2023 23:55:53 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson016/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson016/media/Pasted-image-20231109005157.png" alt="Featured image of post Lesson016 - 鱷魚來了！水雉爸爸如何保護雛鳥安全？" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/Vzi1qNykIu0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">oversized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 特大號的；碩大的；太大的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">specialty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 專長
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ounce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 盎司（重量單位，1盎司約等於28克）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">beneath
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prep. 在...下方
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wander
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 漫步
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">abandon
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 離棄
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">suspicious
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 可疑的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chirp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. （尤指鳥）唧唧叫
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">crocodile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 鱷魚
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tuck
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 把…夾入；把…藏入；把…塞入
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>分詞構句&lt;/p>
&lt;p>Participle Clauses&lt;/p>
&lt;/blockquote>
&lt;p>今天要來和大家介紹的是分詞構句。所謂分詞，共分為現在分詞（Ving）與過去分詞（Vpp）。分詞構句的使用時機是，當重複的主詞省略，並在動詞做出變化。 例如，The father has his own flotation issues to deal with, but he keeps up with them, watching for anything suspicious in the water.（水稚爸爸有自己的漂浮問題要擔心，但牠也隨時注意孩子們的安危，注意水裡是否有可疑的東西。） 該句原句應為：The father has his own flotation issues to deal with, but he keeps up with them, and he watches for anything suspicious in the water. 由於不想讓 he 再重複一次，所以使用分詞構句的文法。將主詞 he 去掉，並把watches這個動詞改成「現在分詞」watching，形成「分詞構句」。 關於動詞在變化時，該改成「現在分詞」或「過去分詞」，取決於主詞是「主動執行」該動作，還是「被動接受」該動作。詳見以下例句：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Seeing the police coming, the thief quickly ran away.(= The thief saw the police coming, and the thief quickly ran away.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">看到警察來了，小偷就快速地跑了。主詞 the thief 重複，故省略其中一個。當省略的是前半句的主詞時，saw 要改成分詞。「看到」是小偷做出的動作，所以改成現在分詞 seeing。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The thief is running on the street, chased by policemen. (= The thief is running on the street, and the thief was chased by policemen.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">小偷在街上跑，被警察追著。主詞 the thief 重複，故省略其中一個。當省略的是後半句的主詞時，was chased 把動詞 was 省略，留下分詞。小偷是「被追」，所以留下過去分詞 chased。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Hearing her fans shouting out her name, the actress rolled down the car window to say hi. (= The actress heard her fans shouting out her name, so she rolled down the car window to say hi.)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">演員聽到粉絲呼喊她的名字，搖下車窗打招呼。主詞 the actress 重複，故省略其中一個。當省略的是前半句的主詞時，heard 要改成分詞。「聽到」是演員做出的動作，所以改成現在分詞 hearing。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson015 - 你的時間有限，所以不要浪費時間過別人的生活。</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson015/</link><pubDate>Wed, 08 Nov 2023 23:50:53 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson015/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson015/media/Pasted-image-20231109004617.png" alt="Featured image of post Lesson015 - 你的時間有限，所以不要浪費時間過別人的生活。" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/43EwWd-r40k" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">rebel
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 叛逆者
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">respect
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 重視；敬意
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">disagree
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 反對
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">backwards
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adv. 向後
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">connect
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 連接
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">trust
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 相信
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">limited
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 有限的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">inner
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 內心的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">courage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 勇氣
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">trap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 限制
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>名詞子句&lt;/p>
&lt;p>Noun Clause&lt;/p>
&lt;/blockquote>
&lt;p>「名詞子句」是指能扮演名詞角色的子句，可以做為主詞、補語、受詞使用，由 that、if、whether、where、when、how 等字開頭，例如影片中講者說 You have to trust that the dots will somehow connect in your future.（你要相信在未來，這些點會以某種方式連接起來。）一句中，that the dots will somehow connect in your future 為名詞子句，作為動詞 trust 的受詞。如果 that 開頭的名詞子句作為受詞，that 可以省略，所以說 you have to trust the dots will somehow connect in your future，動詞 trust 後方沒有 that 文法上是正確的。 我們來看另一個例子：They (your heart and intuition) somehow already know what you truly want to become.（你的內心和直覺在某種程度上已經知道你真正想成為什麼。）這裡 what you truly want to become 也是名詞子句，作為動詞 know 的受詞。雖然以疑問詞 what 開頭，講者並不是在問問題。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- What Lily&amp;#39;s teacher said to her upset her a lot.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Lily 老師和她說的事讓她很難過。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I don&amp;#39;t believe (that) there&amp;#39;s nothing we can do.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我不相信我們無能為力了。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The only thing I learned today is how to beat an egg.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我今天學到的只有怎麼打蛋。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>獲取Youtube影片，封面照</title><link>https://blog.goldfishbrain-fighting.com/2023/youtube-cover-photo/</link><pubDate>Mon, 06 Nov 2023 11:43:35 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/youtube-cover-photo/</guid><description>&lt;h2 id="獲取影片idvid">獲取影片ID，v=ID&lt;/h2>
&lt;p>影片連結：https://www.youtube.com/watch?v=KJM7Nj1DCwk&lt;/p>
&lt;p>影片ID：KJM7Nj1DCwk
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/youtube-cover-photo/media/Pasted-image-20231106114606.png"
width="647"
height="306"
srcset="https://blog.goldfishbrain-fighting.com/2023/youtube-cover-photo/media/Pasted-image-20231106114606_hu2bbf4bc42d91aad5bb283ea728c64ab5_93620_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/youtube-cover-photo/media/Pasted-image-20231106114606_hu2bbf4bc42d91aad5bb283ea728c64ab5_93620_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="211"
data-flex-basis="507px"
>&lt;/p>
&lt;h2 id="結合以下網址就可以獲取封面照">結合以下網址就可以獲取封面照&lt;/h2>
&lt;p>將影片ID換成您的影片ID&lt;/p>
&lt;ul>
&lt;li>&lt;strong>高解析度大圖（1280 × 720）&lt;/strong>&lt;br>
&lt;a class="link" href="http://img.youtube.com/vi/KJM7Nj1DCwk/maxresdefault.jpg" target="_blank" rel="noopener"
>http://img.youtube.com/vi/KJM7Nj1DCwk/maxresdefault.jpg&lt;/a>&lt;/li>
&lt;li>&lt;strong>標準清晰圖 （640 × 480）&lt;/strong>&lt;br>
&lt;a class="link" href="http://img.youtube.com/vi/KJM7Nj1DCwk/sddefault.jpg" target="_blank" rel="noopener"
>http://img.youtube.com/vi/KJM7Nj1DCwk/sddefault.jpg&lt;/a>&lt;/li>
&lt;li>&lt;strong>高品質縮圖（480×360）&lt;/strong>&lt;br>
&lt;a class="link" href="https://img.youtube.com/vi/KJM7Nj1DCwk/hqdefault.jpg" target="_blank" rel="noopener"
>https://img.youtube.com/vi/KJM7Nj1DCwk/hqdefault.jpg&lt;/a>&lt;/li>
&lt;li>&lt;strong>播放器背景縮圖（480×360）&lt;/strong>&lt;br>
&lt;a class="link" href="http://img.youtube.com/vi/KJM7Nj1DCwk/0.jpg" target="_blank" rel="noopener"
>http://img.youtube.com/vi/KJM7Nj1DCwk/0.jpg&lt;/a>　&lt;/li>
&lt;li>&lt;strong>影片開始畫面縮圖（120×90）&lt;/strong>&lt;br>
&lt;a class="link" href="http://img.youtube.com/vi/KJM7Nj1DCwk/1.jpg" target="_blank" rel="noopener"
>http://img.youtube.com/vi/KJM7Nj1DCwk/1.jpg&lt;/a>&lt;/li>
&lt;li>&lt;strong>影片中間片段縮圖（120×90）&lt;/strong>&lt;br>
&lt;a class="link" href="http://img.youtube.com/vi/KJM7Nj1DCwk/2.jpg" target="_blank" rel="noopener"
>http://img.youtube.com/vi/KJM7Nj1DCwk/2.jpg&lt;/a>&lt;/li>
&lt;li>&lt;strong>影片結束縮圖（120×90）&lt;/strong>&lt;br>
&lt;a class="link" href="http://img.youtube.com/vi/KJM7Nj1DCwk/3.jpg" target="_blank" rel="noopener"
>http://img.youtube.com/vi/KJM7Nj1DCwk/3.jpg&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>參考網站：
&lt;a class="link" href="https://www.kocpc.com.tw/archives/273287" target="_blank" rel="noopener"
>https://www.kocpc.com.tw/archives/273287&lt;/a>&lt;/p></description></item><item><title>Lesson014 - 不節食與運動如何減肥？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson014/</link><pubDate>Mon, 06 Nov 2023 11:33:11 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson014/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson014/media/Pasted-image-20231106114200.png" alt="Featured image of post Lesson014 - 不節食與運動如何減肥？" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/PvuFDCNjFik" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">parade
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 整排
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cue
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 暗示；信號
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">grave
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 墳墓
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">snack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 點心
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">surrounding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 周圍環境
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tempt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 引誘
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sight
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 視線
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cupboard
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 櫥櫃
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sample
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 試吃
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">decorate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 裝飾
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>第二類條件句&lt;/p>
&lt;p>The Second Conditional&lt;/p>
&lt;/blockquote>
&lt;p>在本部影片中，我們學到了一種句型，它論及不可能或是假設性的情況，並帶出在這樣情況下可能會有的結果，而這類句子我們稱之為「第二類條件句」。在 if 引導的附屬子句 (條件子句) 中動詞是以過去式的型態出現，而主要子句 (結果句) 通常會出現 would 這個助動詞。第二類條件句的時間指的是現在或任何時候，而情況是假設的。本課的例句 &amp;ldquo;If I did buy any, I would keep them away in a cupboard.&amp;rdquo; 「假如我真的買了任何的某物，我會把它們放在櫥櫃裡。」這是一句與現在事實相反的假設。比較需要注意的是 were to 的用法，這種用法可以用於以下幾種情況。第一種是 were to 用於現在的情況，來強調此條件句所述的情況極不可能或完全不可能發生或非常可怕 (讓人不敢再想下去)。注意：這種特殊句型只用於 if 子句。例句：If I were to have no friends, who would I spend my time with? (如果我沒有朋友，我要跟誰消磨時間呢？) － 沒有朋友是個可怕的想法。無論人稱為何，都必須用 were。而第二種情況適用於未來的時間，來強調此條件句所述的情況極不可能或完全不可能發生，或非常可怕 (讓人不敢再想下去)。例如：If I were to lose my job next year, I would probably not find a new one quickly. (如果我明年失業，我可能不會很快找到新的工作) － 失業對我來說是很可怕的事。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- If I were you, I would definitely take the chance.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">假如我是你，我就會把握機會。 （但實際上我不可能是你。）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- If Keira were my supervisor, this job would be unbearable.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">要是Keira是我的主管，這工作就會變得叫人無法忍受。 (但實際上 Keira 不是我的主管。)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Imagine if Gabriel were to show up late; it would ruin the surprise.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">設想Gabriel若是遲到，就會破壞了驚喜。 (但事實上 Gabriel 沒有遲到。)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson013 - 為什麼「買一捐一」的 Toms 鞋概念幫不了任何人？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson013/</link><pubDate>Mon, 06 Nov 2023 11:29:49 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson013/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson013/media/Pasted-image-20231106114121.png" alt="Featured image of post Lesson013 - 為什麼「買一捐一」的 Toms 鞋概念幫不了任何人？" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/hX0g66MWbrk" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">valuable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 值錢的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">poverty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 貧窮
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">generous
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 慷慨的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">extreme
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 極端的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">donation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 捐贈
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">charity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 慈善事業
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">common
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 常見的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ad
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 廣告
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">plenty
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pron. 大量
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 當地的
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>名詞子句&lt;/p>
&lt;p>Noun Clause&lt;/p>
&lt;/blockquote>
&lt;p>「名詞子句」是指能扮演名詞角色的子句，可以做為主詞、補語、受詞使用，由 that, if, whether, where, when, how 等等開頭，比如影片中講者說 I don&amp;rsquo;t know how to talk to kids.「我不知道怎麼跟小孩講話。」此句 how to talk to kids 為名詞子句，雖然以疑問詞 how 開頭，講者並不是在問問題。 我們來看另一個例子：What it (the company) does is actually put people who are creating shoes right out of business.「這間公司做的其實是讓本地的製鞋商直接失業。」這裡 what it does 也是名詞子句，作為整句主詞。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I know what you did last summer.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我知道你去年夏天做了什麼事。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I&amp;#39;m not sure if she will be home by six.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我不確定她六點前會不會回家。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The teacher wanted us to tell her who broke her vase.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">老師要我們告訴她是誰打破花瓶的。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson012 - 拯救貧血的村落，全靠一隻幸運小魚</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson012/</link><pubDate>Mon, 06 Nov 2023 11:25:55 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson012/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson012/media/Pasted-image-20231106114029.png" alt="Featured image of post Lesson012 - 拯救貧血的村落，全靠一隻幸運小魚" />&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/KJM7Nj1DCwk" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">remedy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 補救 (辦法)，糾正 (辦法)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dizziness
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 眩暈
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">supplement
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 補充
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">affordable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 負擔得起的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">accessible
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 易取得的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hesitant
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 猶豫的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">belief
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 信仰；信念
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">land
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 得到、獲得
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">finding
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 調查結果
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">exceed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 超越
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>名詞子句&lt;/p>
&lt;p>Noun Clause&lt;/p>
&lt;/blockquote>
&lt;p>所謂的名詞子句，就是把一個句子當作名詞來用。很多名詞子句都會以 that、 how 或疑問詞（例如 what/who/which/when/where/why）開頭。名詞子句可以作為句子的主詞，也跟其它名詞一樣，名詞子句可以作為受詞，例如本課例句：I think I was a little bit shocked when I found out how positive the findings were.（當我發現效果非常正面時，我覺得我有點訝異。）在這個句子中 how positive the findings were 就是一個名詞子句。另一句例句 It has far exceeded what we had expected.（這遠遠超乎了我們原本的預期。）中的 what we had expected. 為名詞子句。 另外可以注意，驗證某個子句是名詞子句最好的辦法，就是拿一個代名詞 one/that/it/something 等來取代，假如取代了而不會影響句構本身的正確性，那就可以說這個子句是名詞子句。例如：I like that you come to visit me every now and then. 其中 that you come to visit me every now and then. 可以被 it/that 所取代變為 I like it./ I like that.，而句子結構文法上也沒有問題，這時我們就可以確定，that you come visit me every now and then. 是名詞子句唷！&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I know that my favorite team won the game.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我知道我的支持的那隊贏了比賽。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I know why you left the school.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我知道你為什麼離開了學校。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I want to know whether you like it or not.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我想知道你是否喜歡它。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Github-Pages deploy error 佈屬失敗解決(報錯原因Deployment request failed for xxx due to in progress，Please cancel xxxx first or wait for it to complete)</title><link>https://blog.goldfishbrain-fighting.com/2023/github-pages-deploy-error/</link><pubDate>Sun, 05 Nov 2023 16:32:52 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/github-pages-deploy-error/</guid><description>&lt;h2 id="報錯畫面">報錯畫面&lt;/h2>
&lt;p>突然開始，佈屬皆會報錯
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/github-pages-deploy-error/media/Pasted-image-20231105170143.png"
width="1314"
height="403"
srcset="https://blog.goldfishbrain-fighting.com/2023/github-pages-deploy-error/media/Pasted-image-20231105170143_hu6f1d37c78277579d54c2e637f5b0f0fd_83855_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/github-pages-deploy-error/media/Pasted-image-20231105170143_hu6f1d37c78277579d54c2e637f5b0f0fd_83855_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="326"
data-flex-basis="782px"
>&lt;/p>
&lt;p>報錯原因
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/github-pages-deploy-error/media/Pasted-image-20231105164043.png"
width="853"
height="63"
srcset="https://blog.goldfishbrain-fighting.com/2023/github-pages-deploy-error/media/Pasted-image-20231105164043_hua2a1e34c26f85ebf0d208d433f3ef6da_25548_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/github-pages-deploy-error/media/Pasted-image-20231105164043_hua2a1e34c26f85ebf0d208d433f3ef6da_25548_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="1353"
data-flex-basis="3249px"
>&lt;/p>
&lt;h2 id="打api查詢佈屬id">打API查詢佈屬ID&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># &amp;lt;TOKEN&amp;gt; 更換您的GITHUB TOKEN&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># grep id 更換成您報錯頁面提示的ID &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % curl -L &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -H &lt;span class="s2">&amp;#34;Accept: application/vnd.github+json&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -H &lt;span class="s2">&amp;#34;Authorization: Bearer &amp;lt;TOKEN&amp;gt;&amp;#34;&lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -H &lt;span class="s2">&amp;#34;X-GitHub-Api-Version: 2022-11-28&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> https://api.github.com/repos/chingtsechen/chingtsechen.github.io/deployments &lt;span class="p">|&lt;/span> grep -i -B &lt;span class="m">40&lt;/span> f011f3e1c2edc5fa42d95fe890265994405a045a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>就可以看到，佈屬IP&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;url&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;https://api.github.com/repos/chingtsechen/chingtsechen.github.io/deployments/1156464224&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;id&amp;#34;&lt;/span>: 1156464224,
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="先將佈屬id狀態設定為inactive">先將佈屬ID狀態設定為inactive&lt;/h2>
&lt;p>如果直接執行刪除，會出現以下報錯&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % curl -L &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -X DELETE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -H &lt;span class="s2">&amp;#34;Accept: application/vnd.github+json&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -H &lt;span class="s2">&amp;#34;Authorization: Bearer &amp;lt;TOKEN&amp;gt;&amp;#34;&lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -H &lt;span class="s2">&amp;#34;X-GitHub-Api-Version: 2022-11-28&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> https://api.github.com/repos/chingtsechen/chingtsechen.github.io/deployments/1156464224
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;message&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;Validation Failed&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;errors&amp;#34;&lt;/span>: &lt;span class="o">[&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;We cannot delete an active deployment unless it is the only deployment in a given environment.&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">]&lt;/span>,
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;documentation_url&amp;#34;&lt;/span>: &lt;span class="s2">&amp;#34;https://docs.github.com/rest/deployments/deployments#delete-a-deployment&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>所以需要先將佈屬ID狀態設定為inactive&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">curl https://api.github.com/repos/chingtsechen/chingtsechen.github.io/deployments/1156464224/statuses -X POST -d &lt;span class="s1">&amp;#39;{&amp;#34;state&amp;#34;:&amp;#34;inactive&amp;#34;}&amp;#39;&lt;/span> -H &lt;span class="s1">&amp;#39;accept: application/vnd.github.ant-man-preview+json&amp;#39;&lt;/span> -H &lt;span class="s2">&amp;#34;authorization: token &amp;lt;TOKEN&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="用api刪除佈屬id">用API刪除佈屬ID&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">curl -L &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -X DELETE &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -H &lt;span class="s2">&amp;#34;Accept: application/vnd.github+json&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -H &lt;span class="s2">&amp;#34;Authorization: Bearer &amp;lt;TOKEN&amp;gt;&amp;#34;&lt;/span>&lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -H &lt;span class="s2">&amp;#34;X-GitHub-Api-Version: 2022-11-28&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> https://api.github.com/repos/chingtsechen/chingtsechen.github.io/deployments/1156464224
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="可以成功繼續佈屬">可以成功繼續佈屬&lt;/h2>
&lt;p>可以看到，佈屬成功了
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/github-pages-deploy-error/media/Pasted-image-20231105170520.png"
width="1315"
height="467"
srcset="https://blog.goldfishbrain-fighting.com/2023/github-pages-deploy-error/media/Pasted-image-20231105170520_huec5175671014d87ca18ff8c6f0745df6_97123_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/github-pages-deploy-error/media/Pasted-image-20231105170520_huec5175671014d87ca18ff8c6f0745df6_97123_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="281"
data-flex-basis="675px"
>&lt;/p></description></item><item><title>蛤蟆先生去看心理師 - Summary - 我的感想與收穫</title><link>https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/</link><pubDate>Wed, 01 Nov 2023 21:09:57 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/counselling-for-toads.png" alt="Featured image of post 蛤蟆先生去看心理師 - Summary - 我的感想與收穫" />&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101211305.png"
width="676"
height="958"
srcset="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101211305_hu373f3e3cf23a48d387bc839ff822ad37_237023_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101211305_hu373f3e3cf23a48d387bc839ff822ad37_237023_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="70"
data-flex-basis="169px"
>&lt;/p>
&lt;h2 id="font-colorblue我的感想與收穫font">&lt;font color=blue>我的感想與收穫&lt;/font>&lt;/h2>
&lt;p>&lt;font color=red>以下是我從書中提取出來，對我來說，是不錯的句子。
出自《蛤蟆先生去看心理師（暢銷300萬冊！英國心理諮商經典）》https://readmoo.com/book/210214965000101&lt;/font>&lt;/p>
&lt;h2 id="chapter-5-成長的寓言">Chapter 5 成長的寓言&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted%20image%2020231101214721.png"
width="594"
height="708"
srcset="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted%20image%2020231101214721_hueb2ee0600e764232c146c68817f63ac0_159607_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted%20image%2020231101214721_hueb2ee0600e764232c146c68817f63ac0_159607_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="83"
data-flex-basis="201px"
>&lt;/p>
&lt;blockquote>
&lt;p>人們會進入兒童狀態，他們的感受與行為都與小時候的自己如出一轍，這與實際年齡無關。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>多數父母都是盡最大的努力來養育孩子，很少有父母要故意傷害自己的孩子。但父母也是人，不可避免地會將觀念與行為傳遞給下一代，就像他們必然會將自己的基因傳給子女一樣。所以子女要學會的是，如何因應與避免受到不好的影響。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>蛤蟆，了解你的童年就是了解你自己的關鍵線索，這將貫穿我們諮商的整個過程。就如同佛洛伊德所說：『凡是本我所在之處，自我必相隨。』&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>這個故事是關於嬰兒時期的寓言。從呱呱落地開始，我們的生命裡只和另外兩個人在一起，有時甚至只有一個人。他們比我們巨大很多，我們完全仰賴著這兩個人。既然無處逃脫，唯一能做的就是適應他們每一次的喜怒無常。我畫個簡單的圖來說明。」蒼鷺說完起身。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212134.png"
width="686"
height="758"
srcset="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212134_hue29bbc3bbc6bd2b50bfdc16f2def06a1_170823_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212134_hue29bbc3bbc6bd2b50bfdc16f2def06a1_170823_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="90"
data-flex-basis="217px"
>&lt;/p>
&lt;h2 id="chapter-9-秘密協議">Chapter 9 秘密協議&lt;/h2>
&lt;blockquote>
&lt;p>「就是『可憐的我』（Poor Little Old Me），這遊戲你每次都贏，或者也可以說是輸，取決於你從哪個角度去看。」&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>「就是達成一種祕密協議。我所謂的『共謀』是指你偷偷地或無意識地配合對方，來造成自己的不快樂。這就是在玩心理遊戲：輸家才是贏家。」蒼鷺的話聽起來有點難以理解。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>「這聽起來也許有些殘酷，蛤蟆，能幫助你的人是你自己，也只有你自己。有很多問題你需要對自己提問。舉例來說，你能停止審判自己嗎？你能對自己好一點嗎？也許最重要的問題是，你能開始愛自己嗎？」&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212207.png"
width="706"
height="803"
srcset="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212207_hudcf34dc2a8db8d09b93f48265e2d5599_237146_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212207_hudcf34dc2a8db8d09b93f48265e2d5599_237146_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="87"
data-flex-basis="211px"
>&lt;/p>
&lt;h2 id="chapter-11-蛤蟆先生的選擇">Chapter 11 蛤蟆先生的選擇&lt;/h2>
&lt;blockquote>
&lt;p>我們稱為成人狀態，加上它，這樣便構成完整的三種自我狀態：父母、成人、兒童，這三種狀態構成你的人格結構。我們可以簡單地畫出來。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>「成人自我狀態（Adult Ego State）指我們能以理性、不情緒化的方式，來處理當下發生的真實狀況。」蒼鷺回答。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>唯有在成人自我狀態下，我們才能對自己有新的了解。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212513.png"
width="383"
height="958"
srcset="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212513_hu4f107a76f706069e0d30d9b63bf15cda_140994_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212513_hu4f107a76f706069e0d30d9b63bf15cda_140994_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="39"
data-flex-basis="95px"
>&lt;/p>
&lt;h2 id="chapter-13-心裡遊戲">Chapter 13 心裡遊戲&lt;/h2>
&lt;blockquote>
&lt;p>親愛的蛤蟆，重點就在於這些是攸關一生的心理地位（life positions）。一旦我們在童年決定了何種態度，就會一輩子始終堅持自己的選擇。這些態度和觀點，變成我們存在的根本基礎。之後，我們建構的世界都是在印證與支持這些信念與預期。換句話說，我們將自己的人生變成自我實現的預言。&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212533.png"
width="664"
height="731"
srcset="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212533_hua2a73a82d839bf424cd4cad27932334f_172175_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101212533_hua2a73a82d839bf424cd4cad27932334f_172175_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="90"
data-flex-basis="218px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101213416.png"
width="808"
height="917"
srcset="https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101213416_hu0d4f5aa842c94d89341b35d0120eac3e_156002_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/counselling-for-toads-summary/media/Pasted-image-20231101213416_hu0d4f5aa842c94d89341b35d0120eac3e_156002_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="88"
data-flex-basis="211px"
>&lt;/p>
&lt;h2 id="chapter-14-贏了遊戲輸了自己">Chapter 14 贏了遊戲輸了自己&lt;/h2>
&lt;blockquote>
&lt;p>我不好，你好 (悲傷型兒童狀態)&lt;/p>
&lt;p>這代表一種人的行為態度，這種人對自己評價較低，認為別人都比自己好。&lt;/p>
&lt;p>遊戲1：「我是倒霉鬼」&lt;/p>
&lt;p>遊戲2：「PLOM 可憐的我」&lt;/p>
&lt;p>遊戲3：「無論我做什麼都要愛我」&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>我好，你不好 (挑剔型父母狀態)&lt;/p>
&lt;p>這種人必然自認比別人好，我想他們也會玩遊戲來強化這一點&lt;/p>
&lt;p>因為憤怒是抵抗沮喪的絕佳防衛。憤怒的人從來不會覺得愧疚，因為他們總是怪罪別人。&lt;/p>
&lt;p>遊戲1：「NIGYYSOB 我逮到你了，你這個壞蛋」&lt;/p>
&lt;p>遊戲2：「你為什麼總是讓我失望？」&lt;/p>
&lt;/blockquote>
&lt;h2 id="chapter-15-最後一次按門鈴">Chapter 15 最後一次按門鈴&lt;/h2>
&lt;blockquote>
&lt;p>我好，你也好&lt;/p>
&lt;p>心理地位是動態而非靜止的狀態&lt;/p>
&lt;p>當你認為自己好，也相信別人好，這需要透過行為與態度不斷地對自己與別人表現出這一點，而且這當然也無法保護你完全避開命運無情的矢石&lt;/p>
&lt;p>非常接近人道主義者（Humanist）的信念——相信自己，也相信別人，而不一定相信神或超自然的力量。&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>現在我明白了，你一直引導我自己回答自己的問題，讓我進入『成人狀態』&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>EQ還與了解別人有關。高EQ的人能了解別人的感受，這種能力稱為『同理心』。但EQ帶來的最大能力是能夠了解與處理別人的情緒，因而能與別人建立良好的關係&lt;/p>
&lt;/blockquote></description></item><item><title>2023/10 慢跑(100.8公里)</title><link>https://blog.goldfishbrain-fighting.com/2023/exercise-jogging-202310/</link><pubDate>Tue, 31 Oct 2023 12:18:36 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/exercise-jogging-202310/</guid><description>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/exercise-jogging-202310/media/IMG_26A918BEC33A-1.jpeg"
width="1170"
height="1844"
srcset="https://blog.goldfishbrain-fighting.com/2023/exercise-jogging-202310/media/IMG_26A918BEC33A-1_hu90409b2168dbf3bfe4d6ba973f62c3c8_389877_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/exercise-jogging-202310/media/IMG_26A918BEC33A-1_hu90409b2168dbf3bfe4d6ba973f62c3c8_389877_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="63"
data-flex-basis="152px"
>&lt;/p></description></item><item><title>Kubernetes Summit 2023</title><link>https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/</link><pubDate>Sun, 29 Oct 2023 18:37:28 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029184656.png" alt="Featured image of post Kubernetes Summit 2023" />&lt;h2 id="大會議程">大會議程&lt;/h2>
&lt;h3 id="1025">10/25&lt;/h3>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/agenda#day01" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/agenda#day01&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029184954.png"
width="1103"
height="788"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029184954_hu789cf0cffa7a927720910455bf1f3fda_131417_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029184954_hu789cf0cffa7a927720910455bf1f3fda_131417_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="335px"
>
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185027.png"
width="1064"
height="727"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185027_hue0ee08926733fc10385e501d9ee9b688_161689_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185027_hue0ee08926733fc10385e501d9ee9b688_161689_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="146"
data-flex-basis="351px"
>
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185042.png"
width="1060"
height="431"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185042_hu30403b9c23bceb5e4335092009919719_112702_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185042_hu30403b9c23bceb5e4335092009919719_112702_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="245"
data-flex-basis="590px"
>&lt;/p>
&lt;h3 id="1026">10/26&lt;/h3>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/agenda#day02" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/agenda#day02&lt;/a>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185219.png"
width="1097"
height="778"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185219_hu6f14276858f99f129e5aaba5372a986d_119601_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185219_hu6f14276858f99f129e5aaba5372a986d_119601_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="141"
data-flex-basis="338px"
>
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185306.png"
width="1099"
height="789"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185306_hu8f0023fb001c9dd10d86a2a1e9a29c02_176380_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185306_hu8f0023fb001c9dd10d86a2a1e9a29c02_176380_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="334px"
>
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185333.png"
width="1094"
height="588"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185333_hu57a7110ce0b1da3fef40856d8bdaa3ed_128581_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029185333_hu57a7110ce0b1da3fef40856d8bdaa3ed_128581_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="186"
data-flex-basis="446px"
>&lt;/p>
&lt;h2 id="我拍的照片">我拍的照片&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/900C265C-28CE-465E-80E3-867F1418DB8E_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/900C265C-28CE-465E-80E3-867F1418DB8E_1_105_c_hu0aa814a31a3b71e1d3641a7667c75fc0_318746_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/900C265C-28CE-465E-80E3-867F1418DB8E_1_105_c_hu0aa814a31a3b71e1d3641a7667c75fc0_318746_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/F92CB0CD-C30A-48AC-96D8-C08AE871F044_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/F92CB0CD-C30A-48AC-96D8-C08AE871F044_1_105_c_hu733febc7948f815e215421e7dc85ce6b_217937_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/F92CB0CD-C30A-48AC-96D8-C08AE871F044_1_105_c_hu733febc7948f815e215421e7dc85ce6b_217937_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/6984AAF0-C037-4091-A477-97E1EB6C29FF_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/6984AAF0-C037-4091-A477-97E1EB6C29FF_1_105_c_hu7b38d76b01a74ab8667ac604c60714f5_222196_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/6984AAF0-C037-4091-A477-97E1EB6C29FF_1_105_c_hu7b38d76b01a74ab8667ac604c60714f5_222196_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/254CAF44-653C-4824-AD01-D370B6566634_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/254CAF44-653C-4824-AD01-D370B6566634_1_105_c_hu592b45e3f325788d113073226f5ad04d_226110_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/254CAF44-653C-4824-AD01-D370B6566634_1_105_c_hu592b45e3f325788d113073226f5ad04d_226110_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/5865921B-7DD5-4B01-8964-75382259E708_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/5865921B-7DD5-4B01-8964-75382259E708_1_105_c_hu03dc406bb761b1e684cf563e3f3750b0_206164_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/5865921B-7DD5-4B01-8964-75382259E708_1_105_c_hu03dc406bb761b1e684cf563e3f3750b0_206164_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/1B6BD820-CA4E-4FEE-A420-B9D3BA22724E_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/1B6BD820-CA4E-4FEE-A420-B9D3BA22724E_1_105_c_hu0f7e806bb27f63510b878d1f683c4e15_254205_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/1B6BD820-CA4E-4FEE-A420-B9D3BA22724E_1_105_c_hu0f7e806bb27f63510b878d1f683c4e15_254205_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/8D906871-C37C-4DA9-9C70-14816C5601DA_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/8D906871-C37C-4DA9-9C70-14816C5601DA_1_105_c_hu776d8ee949699bda250a13b5c571ae5f_238598_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/8D906871-C37C-4DA9-9C70-14816C5601DA_1_105_c_hu776d8ee949699bda250a13b5c571ae5f_238598_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/B1F85081-0C02-4203-A322-902492E182FF_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/B1F85081-0C02-4203-A322-902492E182FF_1_105_c_hu9c82092b8c82a7aae84744544609739a_212735_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/B1F85081-0C02-4203-A322-902492E182FF_1_105_c_hu9c82092b8c82a7aae84744544609739a_212735_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/340FD391-C95E-4BA6-9385-B7F7F8BF8D74_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/340FD391-C95E-4BA6-9385-B7F7F8BF8D74_1_105_c_hu4334a25ed9c4f1e94764a162a3b41b7e_217642_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/340FD391-C95E-4BA6-9385-B7F7F8BF8D74_1_105_c_hu4334a25ed9c4f1e94764a162a3b41b7e_217642_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/94571335-4478-4096-BC55-66E458CCA863_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/94571335-4478-4096-BC55-66E458CCA863_1_105_c_hu5e2a7a4d167c1a270be2f54b27441f59_206945_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/94571335-4478-4096-BC55-66E458CCA863_1_105_c_hu5e2a7a4d167c1a270be2f54b27441f59_206945_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/EEC5A14E-7C74-4E9D-A709-BD499210A9E7_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/EEC5A14E-7C74-4E9D-A709-BD499210A9E7_1_105_c_hu766c583e394d7e17a3c15c7aee088414_190724_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/EEC5A14E-7C74-4E9D-A709-BD499210A9E7_1_105_c_hu766c583e394d7e17a3c15c7aee088414_190724_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/6D744DEE-A698-42B1-83B5-ED82073F3AA4_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/6D744DEE-A698-42B1-83B5-ED82073F3AA4_1_105_c_hua90f76b4c52ea22f7a5558f6df033c80_318527_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/6D744DEE-A698-42B1-83B5-ED82073F3AA4_1_105_c_hua90f76b4c52ea22f7a5558f6df033c80_318527_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/0857E6F4-3C85-41B0-9784-CE0F8068B2C1_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/0857E6F4-3C85-41B0-9784-CE0F8068B2C1_1_105_c_hucdb21c994a6fefe9bb7f315bc34c3f77_339154_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/0857E6F4-3C85-41B0-9784-CE0F8068B2C1_1_105_c_hucdb21c994a6fefe9bb7f315bc34c3f77_339154_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/B4169EF3-F3D0-4A02-A0E4-BA20C628D42C_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/B4169EF3-F3D0-4A02-A0E4-BA20C628D42C_1_105_c_hu850f2375f3fd56a481dbec66fc59c869_269975_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/B4169EF3-F3D0-4A02-A0E4-BA20C628D42C_1_105_c_hu850f2375f3fd56a481dbec66fc59c869_269975_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/29DA918C-6413-410E-AAFE-29CCB2D55649_1_105_c.jpeg"
width="768"
height="1024"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/29DA918C-6413-410E-AAFE-29CCB2D55649_1_105_c_huc9109aaca3490527c508592e03b6c70a_208841_480x0_resize_q75_box.jpeg 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/29DA918C-6413-410E-AAFE-29CCB2D55649_1_105_c_huc9109aaca3490527c508592e03b6c70a_208841_1024x0_resize_q75_box.jpeg 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="75"
data-flex-basis="180px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029201517.png"
width="595"
height="807"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029201517_hua893e301d11dc2358b761030eaec4916_809012_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029201517_hua893e301d11dc2358b761030eaec4916_809012_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="73"
data-flex-basis="176px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029210053.png"
width="1218"
height="715"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029210053_huac3f77c77e155f6b9eed6e5c1d97535c_1687183_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-summit-2023/media/Pasted-image-20231029210053_huac3f77c77e155f6b9eed6e5c1d97535c_1687183_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="408px"
>&lt;/p>
&lt;h2 id="我參加的議程">我參加的議程&lt;/h2>
&lt;h3 id="1025-1">10/25&lt;/h3>
&lt;h4 id="ㄧ大規模-kubernetes-運維甘苦談關於自建雲端和-cicd-的那些大小事">(ㄧ)大規模 Kubernetes 運維甘苦談：關於自建、雲端和 CI/CD 的那些大小事&lt;/h4>
&lt;p>本議程將分享趨勢科技實際進行大規模 Kubernetes 運維的經驗與踩過的雷。&lt;/p>
&lt;p>透過最初自建的背景介紹，經歷雲端半託管時期，一路到現在全雲端託管的 Kubernetes 叢集部署的策略演進（以 AWS EKS 為例），分享CI/CD的最佳實踐經驗，並帶各位了解大規模維運會碰到的挑戰，包含如何進行有效的資源管理與擴展、故障排除及監控等。&lt;/p>
&lt;p>希望這些辛酸血淚史能對有志管理大型 Kubernetes cluster的同路人有所幫助。&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2250" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2250&lt;/a>&lt;/p>
&lt;h4 id="二融合-ai-技術加速應用開發交付與優化">(二)融合 AI 技術，加速應用開發、交付與優化&lt;/h4>
&lt;p>應用現代化和多雲是數位化轉型的核心。研究顯示，超過 70% 的企業正在開發全新的雲原生應用，而專為多雲設計的現代化應用在企業中的使用率現已超過傳統應用 ; 因此，應用開發的敏捷性和上市速度對於企業能否在競爭中取得成功至關重要。本議程探討如何運用 VMware Tanzu 平台加速應用開發、交付和提供智能管理，藉以提升業務敏捷性與整合多雲應用。&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2317" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2317&lt;/a>&lt;/p>
&lt;h4 id="三google-重塑新一代-kubernetes-ops-與-ai-技術的致勝關鍵">(三)Google 重塑新一代 Kubernetes Ops 與 AI 技術的致勝關鍵&lt;/h4>
&lt;p>歡迎參加本議程活動，了解 Google 新一代 Kubernetes Ops 的最新消息與致勝關鍵，包括從容器至 AI 等主要議題。不論是透過雲端服務打造自己的平台，抑或是開發與管理應用程式，您將可透過本議程了解如何在每日 IT 維運任務中提升效率、可靠性及資安條件。您亦可了解業界頂尖公司如何運用具高度擴展性且自動化的 Kubernetes，迅速打造專屬自己的雲端致勝模式，並借助 AI 的力量邁向成功之路。&lt;/p>
&lt;p>Join this session to learn the latest and best from Google for Next Genereation Kubernetes Ops – from containers to AI. Whether you’re building your own platform or developing and managing applications using cloud services, learn how to improve efficiency, reliability, and security in your IT operations. You’ll also discover how leading companies use the most scalable and automated Kubernetes to build fast and harness AI in their IT operations.&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2318" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2318&lt;/a>&lt;/p>
&lt;h4 id="四how-to-link-k8s-to-business-讓主管們都聽得懂">(四)How to link K8s to Business 讓主管們都聽得懂&lt;/h4>
&lt;p>探討及分享雲架構平台跟業務的關係，從 CIO 角度看技術轉型。&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2319" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2319&lt;/a>&lt;/p>
&lt;h4 id="五從數據看台灣企業雲原生採用大趨勢">(五)從數據看台灣企業雲原生採用大趨勢&lt;/h4>
&lt;p>即將揭曉，敬請期待&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2356" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2356&lt;/a>&lt;/p>
&lt;h4 id="六resource-as-code-for-kubernetes-stop-kubectl-apply">(六)Resource as Code for Kubernetes: Stop kubectl apply&lt;/h4>
&lt;p>Infrastrure as Code (IaC) 與 PaC，在萬物都該 as Code 得時代，你還在不斷的 kubectl apply 嗎？&lt;/p>
&lt;p>手動 apply 的痛點：&lt;/p>
&lt;ul>
&lt;li>人就是會忘：是誰 apply 這個在 K8s 上的？是誰上次漏 apply 所以壞了？&lt;/li>
&lt;li>人就是會寫錯：能否 apply&lt;/li>
&lt;li>管理大量的 label, taint, annotation&lt;/li>
&lt;li>安全：apply 變更內容是否有經過資訊安全的 review&lt;/li>
&lt;li>多環境管理：多座 K8s 要如何管理 K8s resource&lt;/li>
&lt;/ul>
&lt;p>當服務的 app code base 都已經用 chart 打包，使用 vcs 管理後，為何依賴的 k8s resource (namespace, secret, label, crd, &amp;hellip;) 不需要推上 vcs 管理的？&lt;/p>
&lt;p>本次演講集合幾個管理 K8s 的範例，將 K8s resource 以 code 管理，推上 vcs，並使用 argoCD, secret operator, &amp;hellip; 等工具進行管理，來讓避免低級的人工操作錯誤，降低團隊整體失誤率，並降低 K8s admin 管理的成本，提高管理效率&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2331" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2331&lt;/a>&lt;/p>
&lt;h4 id="七kubernetes-資安攻防---採用機密運算與零信任策略守護您的應用">(七)Kubernetes 資安攻防 - 採用機密運算與零信任策略，守護您的應用&lt;/h4>
&lt;p>我們將探討如何使用機密運算和零信任方法在 Kubernetes 環境中保護應用程式和數據。Kubernetes 已經成為現代各大企業軟體開發和運營的必然趨勢，然而，與之相關的安全挑戰也成為現在大家關注的重點。在這個議程中，我們將深入探討您日常 Kubernetes 運營中可能面臨的潛在風險和安全挑戰。我們將透過實際案例和最佳實踐，與您分享如何有效應對這些挑戰，並強調採取相關進階措施的必要性。&lt;/p>
&lt;p>透過參加此議程，您將有機會深入了解如何運用機密運算和基於零信任的安全方法來保護您的 Kubernetes 環境。無論您是一名 Kubernetes 初學者還是資深專家，這個議程都將為您提供相關見解，以確保您的應用程式和數據得到最高水平的保護。&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2352" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2352&lt;/a>&lt;/p>
&lt;h4 id="八新世代的-service-mesh---istio-ambient-mesh">(八)新世代的 Service Mesh - Istio Ambient Mesh&lt;/h4>
&lt;p>在 Kubernetes 平台上開發應用程式時, 通常很容易會討論到是否要使用 Service Mesh。而 Service Mesh 中的代表性解決方案 Istio, 更是目前廣為採用的 Service Mesh 之一。Istio 能夠對服務的溝通，管理，乃至於監控, 提供一個強大的平台。但相對的，使用 Istio 的所需要付出的代價也相當不小，往往令許多人有心採用的人往而卻步。&lt;/p>
&lt;p>有鑑於此，Istio 在 2022 年的九月，發表了 Ambient Mesh, 一個全新的 Istio Data Plane Mode，旨在簡化操作，拓展應用成式兼容性，降低基礎架構所需成本。 Ambient Mesh 讓使用者不再需要使用之前的 Sidecar 模式，將 Data Plane 無縫地整合進 Kubernetes 基礎架構，同時還能保有 Istio 既有的零信任安全、觀測性和流量治理等核心特性。&lt;/p>
&lt;p>在 2023 三月, Ambient Mesh 進入了 Istio 開源專案的 main branch, 預計在 2023 年底會 production ready。這正是一個絕佳的時刻，讓大家能了解 Ambient Mesh 所帶來的新架構的優勢, 讓有心想要導入 Istio 的人能夠重新評估 Ambient Mesh 的可能性，對於 Sidecar &amp;amp; Sidecarless 的 Istio 應該如何選擇使用，進行一個深入淺出的探討。&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2326" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2326&lt;/a>&lt;/p>
&lt;h4 id="九通往-cloud-native-的神奇之旅自製-kubernetes-工具大揭秘">(九)通往 Cloud Native 的神奇之旅：自製 Kubernetes 工具大揭秘&lt;/h4>
&lt;p>透過這次的分享，我們將深入探討 LINE Pay Taiwan 是如何成功從傳統的 VM 基礎架構轉向高效的 Cluster-based Infrastructure 的過程。在這趟旅程中，我們將揭示自行開發的工具如何在這轉型過程中發揮關鍵作用，並怎樣迅速引入 Kubernetes 技術，實現卓越的效益與競爭優勢。&lt;/p>
&lt;p>&lt;strong>議程重點：&lt;/strong>&lt;/p>
&lt;p>&lt;strong>Why&lt;/strong>: 為何選擇 Cloud Native？&lt;/p>
&lt;ul>
&lt;li>探索導入 Kubernetes 背後的動機，以及如何解決LINE Pay Taiwan所面臨的實際挑戰&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>How&lt;/strong>: 落實 Cloud Native 轉型的實踐之道&lt;/p>
&lt;ul>
&lt;li>在有限資源下，我們如何革新現有的 CI/CD 流程，同時保持合規性。&lt;/li>
&lt;li>設計和改進 CI/CD 流程，以實現 Kubernetes 的順利導入。&lt;/li>
&lt;li>介紹我們如何使用 GoLang 開發自有 CLI 工具，協助工程師快速融入 Cloud Native 生態系統&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>What&lt;/strong>: 享受 Cloud Native 帶來的好處&lt;/p>
&lt;ul>
&lt;li>發現我們自行開發的工具如何帶來的優勢。&lt;/li>
&lt;li>洞察導入 Kubernetes 架構後，LINE Pay Taiwan的服務將獲得什麼樣的轉變&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Which&lt;/strong>: 系統性調整和未來優化之路&lt;/p>
&lt;ul>
&lt;li>窺探在架構轉型後，我們經歷了哪些系統性調整&lt;/li>
&lt;li>探討更多可持續優化的可能性&lt;/li>
&lt;/ul>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2353" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2353&lt;/a>&lt;/p>
&lt;h3 id="1026-1">10/26&lt;/h3>
&lt;h4 id="一kubernetes-apis-for-the-future-building-platforms-and-managing-everything">(一)Kubernetes APIs for the Future: Building Platforms and Managing Everything&lt;/h4>
&lt;p>Kubernetes is a powerful platform for building platforms. With CustomResourceDefinition (CRD), you can build the APIs you need to manage your applications and infrastructure. Kubernetes is becoming universal for everything, and you can use Kubernetes APIs to manage cloud resources, as well as applications and services.&lt;/p>
&lt;p>GitOps is a Git-based approach to managing infrastructure and applications. It removes toil and reduces the barrier for using Kubernetes, making it easier to be effective. With GitOps, you can build your platform using Kubernetes APIs easier, safer, and faster.&lt;/p>
&lt;p>This keynote speech is for anyone who wants to learn more about how to use Kubernetes to build and manage platforms, applications, and infrastructure. Whether you are a beginner or an expert, you will learn something new.&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2336" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2336&lt;/a>&lt;/p>
&lt;h4 id="二打造雲原生世界的資安堡壘">(二)打造雲原生世界的資安堡壘&lt;/h4>
&lt;p>成功的企業容器安全計劃必須要能從容器生命週期的建構、部署到運作的所有階段，以及底層的容器基礎架構中執行主要控制措施。&lt;/p>
&lt;p>不知從何著手嗎？本議程介紹 Red Hat 容器平台如何在雲原生世界提供完整的安全防護，為企業打造最堅實的現代化資安堡壘。&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2337" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2337&lt;/a>&lt;/p>
&lt;h4 id="三幫服務建立觀測性利用-itsm-與自動化完成數位企業最後一哩路">(三)幫服務建立觀測性，利用 ITSM 與自動化完成數位企業最後一哩路&lt;/h4>
&lt;p>企業熱衷於新技術導入，越來越多服務導入不同種新技術建立在不同的運作平台上，單純的服務監控已經不能滿足需求，需要建立觀測性(Observability)來協助我們更了解服務的運作狀態，尤其當容器化的世代來臨，更複雜的 IT 環境需要更好的工具協助我們觀測且協作，透過自動化工具，協助企業動態且快速建立服務所需要的資源；BMC 將分享關於如何建立服務觀測性，透過 AI/ML 工具有效將服務與 IT 整合起來，起到協同運作、共做共榮的使用情境，加速數位企業轉型，達成目標。&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2338" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2338&lt;/a>&lt;/p>
&lt;h4 id="四feature-toggle-makes-development-more-efficient">(四)Feature Toggle Makes Development more Efficient&lt;/h4>
&lt;p>在 Kubernetes 的部署中，經常會面臨一些挑戰。例如，新功能的部署可能會導致系統穩定性下降，甚至可能需要回朔上次部署，從而提高部署風險。此外，每次部署都需要全面的測試，這不僅增加了部署和測試的複雜性，也消耗了更多的時間。這可能會對用戶的使用體驗產生影響。透過這次的演講，我們將探討如何透過 Feature Toggle 來解決這些問題，並提升我們的部署與開發的效率和靈活性。&lt;/p>
&lt;p>因此，我們的議程將會包含以下的內容：&lt;/p>
&lt;ul>
&lt;li>Feature Toggle 的簡介：&lt;/li>
&lt;/ul>
&lt;p>我們將介紹什麼是 Feature Toggle，以及它的基本概念和工作原理。&lt;/p>
&lt;ul>
&lt;li>Feature Toggle 的應用場景：&lt;/li>
&lt;/ul>
&lt;p>我們將分享 Feature Toggle 的實際應用場景，包括 AB testing, Canary Release 等。&lt;/p>
&lt;ul>
&lt;li>LINE台灣在推動的工法：&lt;/li>
&lt;/ul>
&lt;p>我們將分享 LINE 台灣在推動 Feature Toggle 的經驗和工法。&lt;/p>
&lt;ul>
&lt;li>從 Feature Toggle 到 Kubernetes 的影響：&lt;/li>
&lt;/ul>
&lt;p>我們將探討 Feature Toggle 如何影響到開發流程和 CI/CD 在 Kubernetes 上的部署，並分享如何解決上述的痛點。&lt;/p>
&lt;ul>
&lt;li>如何持續地縮短 Release 週期與增進開發效率：&lt;/li>
&lt;/ul>
&lt;p>我們將分享如何透過 Feature Toggle 持續地縮短 Release 週期和提高開發效率。&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2339" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2339&lt;/a>&lt;/p>
&lt;h4 id="五on-premise-workload-遷移-kubernetes-心路歷程">(五)On-premise Workload 遷移 Kubernetes 心路歷程&lt;/h4>
&lt;p>往雲端 Kubernetes 遷移 workload 的過程，服務會同時並行於 on-premise 和雲端一段混合的過程，KKBOX 擁有超過千萬會員，首先面對的挑戰會是，要如何最小化遷移對使用者的影響，遷移邁入後期後，則需要持續優化營運成本。此次分享會對上述議題，分享 KKBOX 如何解決這些技術上的難題。&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2355" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2355&lt;/a>&lt;/p>
&lt;h4 id="六如何在銀行內部用-k8s-打造無伺服器批次運算平台">(六)如何在銀行內部用 K8s 打造無伺服器批次運算平台&lt;/h4>
&lt;p>過去企業需要考量著基礎設施的管理議題，但隨著近幾年無伺服器概念的推出，徹底的改變既有的思路，讓企業開發者能夠更專注在開發應用，而並非架構上，同時又能有效節省冗餘硬體資源並提升整體效益等優點。&lt;/p>
&lt;p>隨著 Google 將 Knative 專案貢獻給雲端原生運算基金會 (CNCF)，迅速帶起各大企業使用Serverless的浪潮，而玉山也乘著這波概念的浪潮，打造獨有的無伺服器批次運算平台，來強化玉山批次運行架構，以達對硬體資源使用、開發、維運整體效益整體的提升。&lt;/p>
&lt;p>本次演講會分享所謂 Serverless 概念及 Knative 的運作原理，並說明玉山銀行如何結合 Serverless，改造批次運行架構，提高硬體使用集縮比，以降低硬體資源成本。&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2347" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2347&lt;/a>&lt;/p>
&lt;h4 id="七聯邦學習在-k8s-上的實現與應用">(七)聯邦學習在 K8s 上的實現與應用&lt;/h4>
&lt;p>Machine learning 的模型建立時需要足夠的資料量與足夠的解釋力特徵，如欲建立機器學習模型時最重要的的任務即是蒐集足夠的資料量與特徵，但往往在企業上同一客戶的資料可能會分散在不同的子公司上，或是想統整運用不同子公司各自擁有的客戶群資料以提升模型準確性，基於隱私條款的限制，子公司間是無法直接進行資料交換來做使用。在資料量與特徵不足的情況下機器學習模型的整體效果就較難做進一步的提升。&lt;/p>
&lt;p>國泰資料科學團隊以 KubeFate 聯邦學習框架的基礎下開發名為 CaFe 的聯邦學習框架，使用 Helm 建立高效的聯邦學習架構，開發 Operator 用於同步不同 Namespaces 中的 ConfigMap 資料，藉由 webhook 實現自動掛載 ConfigMap 到相應的應用程式，使整個建置過程更加自動化和高效。子公司的使用者能在不交換實體資料的情況下於各自 K8S 環境共同訓練出效果比單一方自行訓練的模型效果更佳，進而提升整體模型效度。我們將與大家分享以下內容：&lt;/p>
&lt;ol>
&lt;li>聯邦學習簡介&lt;/li>
&lt;li>聯邦學習框架 KubeFate 使用評估&lt;/li>
&lt;li>CaFe 部署於 OKD 上與內部資料科學平台的結合&lt;/li>
&lt;li>POC 測試案&lt;/li>
&lt;/ol>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2350" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2350&lt;/a>&lt;/p>
&lt;h4 id="八cloud-native-messaging-service-by-nats">(八)Cloud-native messaging service by NATS&lt;/h4>
&lt;p>NATS 是一個 open source pub/sub messaging system，於 2018 年成為 CNCF 的 incubating project 後，歷經快速的發展，2019 年 NATS 2.0 增加了 supercluster、 leafnode 和 decentralized security 功能，2021 年 NATS2.2 將新的分散式儲存系統 JetStream 正式 GA 整合進 NATS，直到最近的 NATS2.9 持續提升穩定性，此議程想讓觀眾了解 NATS 的功能、最新的 NATS 發展與佈署 NATS 在 K8s 上維運的建議。&lt;/p>
&lt;ol>
&lt;li>NATS 的基本介紹，什麼是 NATS Core 和 JetStream，以 demo 形式讓觀眾快速了解&lt;/li>
&lt;li>NATS open source project 的發展現況&lt;/li>
&lt;li>NATS cluster 於 K8s 的佈署、維運、如何持續擴充&lt;/li>
&lt;li>導入 NATS 的建議流程&lt;/li>
&lt;li>目前有哪些 open source project 支援 NATS JetStream&lt;/li>
&lt;/ol>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2325" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2325&lt;/a>&lt;/p>
&lt;h4 id="九adopt-kubernetes-for-infrastructure-as-code-打造以-k8s-為底層的-iac-系統">(九)Adopt Kubernetes for Infrastructure as Code (打造以 K8S 為底層的 IaC 系統）&lt;/h4>
&lt;p>K8S 從開源以來，就以宣告式的方式，提供標準資源的自癒與擴充能力，在 1.13 後提供的客制資源 (CRD) 管理的擴充能力，延伸了 K8S 的宣告式平台。&lt;/p>
&lt;p>Google 在 GCP 上首先提出了 KCC (Kubernetes Config Connector) 的實作，通過 GKE 管理 GCP 各項 IT 資源的生命週期，Google 也進一步與開源社群 (Crossplane) 合作，將 KCC 的概念延伸到其他的基礎架構提供者中，打造新的 IaC 生命週期管理機制：Cloud Resource Accelerator。&lt;/p>
&lt;p>這個機制，通過 YAML 物件的解耦，有效的限制開發者與管理者對 IaC 的控制能力，同時通過 K8S 的宣告機制，讓部署出來的資源能受到 K8S 的完整保護，這些強化都有效的彌補現有 IaC CLI 的不足。&lt;/p>
&lt;p>&lt;font color=blue>官方網站連結：&lt;/font>
&lt;a class="link" href="https://k8s.ithome.com.tw/2023/session-page/2322" target="_blank" rel="noopener"
>https://k8s.ithome.com.tw/2023/session-page/2322&lt;/a>&lt;/p>
&lt;h2 id="心得與收穫">心得與收穫&lt;/h2>
&lt;p>由於去年參加過，今年參加Summit，我在議題上的選擇，著重於就比較往能協助公司導入Kubernetes的議題去參加，因為目前公司也是處於此階段，例如分享導入經驗與甘苦談的議題、導入有效管理工具使用的議題、最新Kubernetes技術分享的議題，像是一些公司新產品發表那些議題，我就沒去參加。&lt;/p>
&lt;p>至於印象比較深刻的議題如下：&lt;/p>
&lt;ol>
&lt;li>
&lt;p>是Google分享了他們目前看到的趨勢，預計到2027，企業將正式生產環境導入容器或Kubernetes會高達90%，也就是說，那時候，會將近有90%的企業，會使用容器或Kubernetes當作直接對外服務的主要環境。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>也是Google分享了istio在網路流量治理的變革，以前，要使用istio進行Kubernetes流量治理與管理，是採用sidecar的方式，也就是說，在Kubernetes平台中，每起一個Pod(服務)，都得伴隨著一個邊車容器Sidecar，每個Pod(服務)流量進出，都得經過Sidecar，對於整個Kubernetes平台，侵入性非常高，等於現在如果有100個Pod(服務)，就得起100個Sidecar容器，對於Kubernetes平台的資源消耗也非常高，變革後，採用Istio Ambient Mesh，不用每個Pod都得起一個Sidecar容器，現在是改在每個Node節點部屬流量治理，容器改連至那裡，進行流量治理與管理，大大了減少整體Kubernetes平台性能與資源消耗，並能針對L4層和L7層，分別進行流量管理與治理。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>兩天下來，幾乎8成的公司，都是採用GitOps的方式，進行Kubernetes的業務部屬和管理，看到最多的方式，就是採用Argocd開源專案。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>再來是中華開發金分享的，如何讓主管們都聽的懂Kubernetes，當然關係到此專案最終能否執行下去，一定還是成本考量，如果達不到省錢，要老闆掏錢出來，難上加難。基於這個點往前探討，如何讓業務和PM單位聽的懂，需將系統與業務上的關連和影響點出來，讓他們知道，有什麼益處，能幫助到他們什麼。再來如何讓資訊單位聽的懂，需將現況系統遇到的瓶頸與導入後的關連和影響點出來，並將系統高可用、高彈性、穩定&amp;hellip;等益處突顯出來。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>再來是Line Pay，太讓我驚訝了，還沒有用到GitOps方式，他們在Kubernetes DevOps這方面，還是用傳統的方式，寫一個模版，透過linux指令sed，去替換模版裡面的變數，去部屬服務，當然講者的說法是，他們還是求穩定，所以才採取這個方式，當然未來也不排除會導入Argocd這個專案，讓他們管理起來更有效率。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>再來是Suse分享的資安攻防，Suse Rancher NeuVector這項開源產品，我已經聽過第二次了，非常好的產品，能跟Rancher平台直接做結合，部屬起來，非常方便，功能也非常強大，鏡像掃描、異常流量阻斷&amp;hellip;等。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>再來是玉山銀行分享的如何在內部用 K8s 打造無伺服器批次運算平台，由於玉山銀行內部，有專門跑排程的主機，好幾百台，佔用了非常多伺服器資源，他們將跑排程的主機改用Kubernetes裡面的一個Pod功能叫Job，需要跑排程時，Kubernetes會起一個一次性任務的Pod，執行完任務，Pod就會自動刪除，讓他們大大節省了伺服器資源的使用。&lt;/p>
&lt;/li>
&lt;/ol></description></item><item><title>Lesson011 - 感受 Q 彈滋味！外國人第一次喝波霸奶茶</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson011/</link><pubDate>Sun, 29 Oct 2023 16:33:10 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson011/</guid><description>&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/F5IlK8y-_go" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">hesitant
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.猶豫的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pronounce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v.發音；讀音
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sealed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.密封的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chew
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v.咀嚼
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">taro
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n.芋頭
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">flavor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n.（食物或飲料的）風味；（某種）味道
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">honeydew
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n.蜜瓜
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sour
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.酸的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">powerful
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.強勁的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">swallow
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v.吞嚥
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>間接問句&lt;/p>
&lt;p>Indirect Questions&lt;/p>
&lt;/blockquote>
&lt;p>所謂間接問句，就是將一個問題嵌入一個句子之中，形成直述句。 例如影片中：I don&amp;rsquo;t know how I feel about chewing these weird gummy things. （我不知道我在咀嚼這些奇怪的、像軟糖的東西時有什麼感覺。） 這句就是把「我在咀嚼這些奇怪的、像軟糖的東西時有什麼感覺？」這個問句，嵌入另一個句子成為談話主題。因此，整個句子便不再是詢問答案的問句，而是陳述事實和感受的直述句。 倘若把此句還原成兩句，概念上是： 1. How do I feel about chewing these weird gummy things? 2. I don’t know the answer to the question. 又或是另一句：I don&amp;rsquo;t know whether to swallow them, or just like, let them hang out in my mouth. （我不知道應該要把它們吞下去，還是就讓它們在嘴巴裡。） 其中 “whether” 代表 「是否」之意，也可以用 “if” 來表達相同的概念。 倘若把此句還原成兩句，概念上是： 1. Should I swallow them, or just like, let them hang out in my mouth? 2. I don’t know the answer to the question. ☆須注意，一般來說，問句的動詞或助動詞會在主詞之前。不過，在與其他句子合併改寫為間接問句後，主詞需要在動詞或助動詞之前。 例如：How do I feel about chewing these weird gummy things? 此時的問句，助動詞do在主詞 I之前。 I don&amp;rsquo;t know how I feel about chewing these weird gummy things. 形成間接問句之後，助動詞去掉後，主詞I 在動詞feel之前。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I don’t know who the man is.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我不知道那個男人是誰。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I wonder why she can finish her homework so quickly.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我在想為什麼她作業可以那麼快寫完。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I’m not sure whether/if Tom ate my cake.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我不確定湯姆是否有吃我的蛋糕。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson010 - 為什麼我們喜歡聽到慘劇的新聞</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson010/</link><pubDate>Sat, 28 Oct 2023 21:46:30 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson010/</guid><description>&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/9hru-MCygDQ" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">incident
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. （不愉快或不尋常的）事件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">inhabitant
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 居民
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">distraction
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 消遣
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rubberneck
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 看熱鬧，管閒事
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fragile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 脆弱的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fierce
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 兇猛的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">evoke
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 喚起
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">disaster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 災難
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">priority
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 優先考慮的事
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>被動語態&lt;/p>
&lt;p>The Passive Voice&lt;/p>
&lt;/blockquote>
&lt;p>某些跟「情緒、情感」有關的動詞，較常以被動語態的形式出現，例如本課中的 &amp;ldquo;We&amp;rsquo;re fascinated by landslides&amp;rdquo; 就是將 &amp;ldquo;fascinate&amp;rdquo; 加上 &amp;ldquo;ed&amp;rdquo; 表示「山崩令我們著迷」，也就是「我們著迷於山崩」的意思。諸如 expose、dress、locate、make of、dedicate 等動詞，也時常會以被動方式出現。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The school was founded by Mr. Flemix.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">這間學校是由 Flemix 先生所創建的。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- This pair of earrings is made of gold.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">這對耳環是由黃金所製成的。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- My apartment is rented by a young couple.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我的公寓被一對年輕情侶所租。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>go介紹、安裝配置環境、寫第一個go程序、go基礎語法、變量、基本數據類型、運算符、輸入輸出函數</title><link>https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/</link><pubDate>Sat, 28 Oct 2023 09:31:05 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/</guid><description>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/golang.png" alt="Featured image of post go介紹、安裝配置環境、寫第一個go程序、go基礎語法、變量、基本數據類型、運算符、輸入輸出函數" />&lt;h2 id="go介紹">Go介紹&lt;/h2>
&lt;p>GOOGLE開發的&lt;/p>
&lt;p>PYTHON開發效率極高
C語言、C++極致運行性能&lt;/p>
&lt;p>GO開發效率與運行性能都能兼具&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028094205.png"
width="836"
height="283"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028094205_hu31645902e06ef25f56f31ce3d7610991_72496_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028094205_hu31645902e06ef25f56f31ce3d7610991_72496_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="295"
data-flex-basis="708px"
>&lt;/p>
&lt;h3 id="go語言的誕生">Go語言的誕生&lt;/h3>
&lt;p>三位創作者：
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028094400.png"
width="459"
height="217"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028094400_hu997198b53c7ce7eace5f5e656cd8a9d8_152859_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028094400_hu997198b53c7ce7eace5f5e656cd8a9d8_152859_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="211"
data-flex-basis="507px"
>&lt;/p>
&lt;p>中間：&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E7%BE%85%E5%8B%83%C2%B7%E6%B4%BE%E5%85%8B" target="_blank" rel="noopener"
>Rob Pike&lt;/a>
unix開發者
utf8開發者&lt;/p>
&lt;p>右邊：&lt;a class="link" href="https://zh.wikipedia.org/wiki/%E8%82%AF%C2%B7%E6%B1%A4%E6%99%AE%E9%80%8A" target="_blank" rel="noopener"
>Ken Thompson&lt;/a>
B語言開發者&lt;/p>
&lt;p>左邊：&lt;a class="link" href="https://en.wikipedia.org/wiki/Robert_Griesemer" title="en:Robert Griesemer"
target="_blank" rel="noopener"
>Robert Griesemer&lt;/a>&lt;/p>
&lt;p>三位本身都是用C++編程的&lt;/p>
&lt;h3 id="go語言的優勢">Go語言的優勢&lt;/h3>
&lt;blockquote>
&lt;p>優勢總結：&lt;/p>
&lt;ol>
&lt;li>開發效率高、運行性能好(均衡)&lt;/li>
&lt;li>高併發&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028095229.png"
width="840"
height="223"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028095229_hub545ca985306ed61e0a04b73ae95120e_104834_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028095229_hub545ca985306ed61e0a04b73ae95120e_104834_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="376"
data-flex-basis="904px"
>&lt;/p>
&lt;p>GO出現在雙核處理器後面，之前的語言都是基於單核，所以GO才能立足於高併發的優勢&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028095720.png"
width="835"
height="481"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028095720_hue38aa9d7728ce26d0b7e5bdd25c4fa46_299376_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028095720_hue38aa9d7728ce26d0b7e5bdd25c4fa46_299376_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="416px"
>&lt;/p>
&lt;h3 id="go語言的應用領域">Go語言的應用領域&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028095953.png"
width="836"
height="610"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028095953_hu85f21fd9a90d415a19836f9e30ec45b6_222425_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028095953_hu85f21fd9a90d415a19836f9e30ec45b6_222425_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="137"
data-flex-basis="328px"
>&lt;/p>
&lt;p>區塊鏈：Web3.0去中心化，Go就是在其中的語言&lt;/p>
&lt;p>GO主要就是在&amp;quot;網路併發層&amp;quot;發光發熱&lt;/p>
&lt;p>使用GO的大型網路公司：
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028100646.png"
width="596"
height="639"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028100646_hu4715a7d104df7580db4a85a370a0ef82_109114_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028100646_hu4715a7d104df7580db4a85a370a0ef82_109114_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="93"
data-flex-basis="223px"
>&lt;/p>
&lt;h2 id="計算機硬體組成">計算機硬體組成&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028102016.png"
width="837"
height="419"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028102016_hu4f48ca6cf2aaa2eb62bac6169da5fc42_179302_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028102016_hu4f48ca6cf2aaa2eb62bac6169da5fc42_179302_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="199"
data-flex-basis="479px"
>&lt;/p>
&lt;p>CPU：有兩個部分，運算器、控制器&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028102524.png"
width="412"
height="326"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028102524_hua3ace491c78f353d935912f091091977_14921_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231028102524_hua3ace491c78f353d935912f091091977_14921_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="126"
data-flex-basis="303px"
>&lt;/p>
&lt;h2 id="編程語言介紹">編程語言介紹&lt;/h2>
&lt;h3 id="什麼是編程語言">什麼是編程語言&lt;/h3>
&lt;p>人與計算機溝通的語言&lt;/p>
&lt;p>編程語言的發展經歷：&lt;/p>
&lt;p>機器語言(指令系統) =&amp;gt; 匯編語言 =&amp;gt; 高級語言 (C、java、Go等)&lt;/p>
&lt;blockquote>
&lt;p>匯編語言：指令符號化010010010101 =&amp;gt; ADD&lt;/p>
&lt;p>高級語言：多條指令合成一條指令&lt;/p>
&lt;/blockquote>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted%20image%2020231104142007.png"
width="466"
height="537"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted%20image%2020231104142007_hu9e3df888aa5789d1d262dcafcd3846c0_25963_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted%20image%2020231104142007_hu9e3df888aa5789d1d262dcafcd3846c0_25963_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="86"
data-flex-basis="208px"
>&lt;/p>
&lt;h3 id="編譯型語言與解釋型語言">編譯型語言與解釋型語言&lt;/h3>
&lt;p>編譯型：C++、C&lt;/p>
&lt;p>解釋型：python、js&lt;/p>
&lt;p>編譯型：
開發一個軟體，透過軟體(編譯器)，將程式語言，轉成可執行的二進制文件(EX: .exe)，調CPU執行這些程式的效果。&lt;/p>
&lt;ul>
&lt;li>優點：可執行的二進制文件，後續可一直覆用&lt;/li>
&lt;li>缺點：因為編譯是基於當下環境，產生可執行文件，跨平台性弱&lt;/li>
&lt;/ul>
&lt;p>解釋型：
逐行逐行執行，不會編譯成一個可執行文件&lt;/p>
&lt;ul>
&lt;li>優點：不生成執行文件，跨平台性就比較好&lt;/li>
&lt;li>缺點：每次要看結果，都要重新翻譯執行&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104143406.png"
width="828"
height="677"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104143406_hudd12040951bd168fbafbf2a09330a195_202291_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104143406_hudd12040951bd168fbafbf2a09330a195_202291_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="122"
data-flex-basis="293px"
>&lt;/p>
&lt;h2 id="go環境安裝">go環境安裝&lt;/h2>
&lt;p>官網： &lt;a class="link" href="https://go.dev/dl/" target="_blank" rel="noopener"
>https://go.dev/dl/&lt;/a>&lt;/p>
&lt;h3 id="linux系統">linux系統&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># sudo tar -C /usr/local -xzf go1.21.5.linux-amd64.tar.gz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># sudo vim /etc/profile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 加到最後面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$PATH&lt;/span>:/usr/local/go/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># source /etc/profile&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis91 ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># go version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go version go1.21.5 linux/amd64
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="mac系統">mac系統&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104144958.png"
width="1406"
height="663"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104144958_hud6f86177d1a39b25689b9f26a0ff78ae_137214_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104144958_hud6f86177d1a39b25689b9f26a0ff78ae_137214_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="212"
data-flex-basis="508px"
>&lt;/p>
&lt;p>這裡是顯示，我之前已經安裝過go了
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145100.png"
width="620"
height="444"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145100_hud223a01ebfb5382682db06a3674b80f0_75018_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145100_hud223a01ebfb5382682db06a3674b80f0_75018_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="335px"
>&lt;/p>
&lt;p>全程下一步就可以
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145236.png"
width="620"
height="444"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145236_hu66aa624296408fb64f8da8cc22c2af02_39141_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145236_hu66aa624296408fb64f8da8cc22c2af02_39141_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="139"
data-flex-basis="335px"
>&lt;/p>
&lt;p>安裝成功，檢查&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % go version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go version go1.21.1 darwin/arm64
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ %
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145504.png"
width="932"
height="142"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145504_hu27afa27ae7fea21379ca6934b213d31b_21618_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145504_hu27afa27ae7fea21379ca6934b213d31b_21618_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="656"
data-flex-basis="1575px"
>&lt;/p>
&lt;p>環境變數&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % go env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># go安裝的根目錄&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GOROOT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;/usr/local/go&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># go代碼放置處&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GOPATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;/Users/chenqingze/go&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># go代理位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GOPROXY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;https://proxy.golang.org,direct&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>GOROOT='/usr/local/go'&lt;/code>
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145739.png"
width="920"
height="436"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145739_hu2daf24caeb85f8b282b6ac35b5345a20_101972_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104145739_hu2daf24caeb85f8b282b6ac35b5345a20_101972_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="211"
data-flex-basis="506px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 放編譯器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go/bin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 放置依賴包&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">go/src
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>GOPATH='/Users/chenqingze/go'&lt;/code>
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104150106.png"
width="920"
height="436"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104150106_hu86afc9489a8e24f32cdef2d6ff9059ca_45698_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104150106_hu86afc9489a8e24f32cdef2d6ff9059ca_45698_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="211"
data-flex-basis="506px"
>&lt;/p>
&lt;h3 id="第一個go程序">第一個go程序&lt;/h3>
&lt;p>&lt;strong>先關閉MODULE&lt;/strong>
啟用 Go 模組系統。在這種模式下，Go 會忽略 GOPATH 環境變數和其他傳統 Go 程序搜索路徑，並且只在當前模組的 go.mod 文件中指定的模組路徑中查找包&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % go env -w &lt;span class="s2">&amp;#34;GO111MODULE=off&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 退出當前terminal再登入，查看環境變數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % go env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GO111MODULE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;off&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>最小寫程式單元，一定要創建目錄，再來寫代碼&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % &lt;span class="nb">cd&lt;/span> /Users/chenqingze/Desktop/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP Desktop % mkdir hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP Desktop % &lt;span class="nb">cd&lt;/span> hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP hello % ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">70&lt;/span> &lt;span class="m">11&lt;/span> &lt;span class="m">4&lt;/span> 15:16 main.go
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>main.go&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hello jimmy&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>直接執行編譯，並執行&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP hello % go run main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello jimmy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="生成可執行文件">生成可執行文件&lt;/h3>
&lt;p>配置GOPATH，將編程代碼都放置此處&lt;/p>
&lt;p>&lt;code>/Users/chenqingze/goWork&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 當前家目錄創建goWork目錄&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % mkdir goWork
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % &lt;span class="nb">cd&lt;/span> goWork
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP goWork % mkdir src
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 配置環境變數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % vim ~/.zprofile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">GOPATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">$HOME&lt;/span>/goWork
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 退出當前terminal再登入，查看環境變數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % go env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">GOPATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;/Users/chenqingze/goWork&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>先執行編譯產生可執行文件，再執行&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % &lt;span class="nb">cd&lt;/span> Desktop/hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP hello % ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">70&lt;/span> &lt;span class="m">11&lt;/span> &lt;span class="m">4&lt;/span> 15:16 main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 編譯產生可執行文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP hello % go build
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP hello % ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">3776&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x@ &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">1925602&lt;/span> &lt;span class="m">11&lt;/span> &lt;span class="m">4&lt;/span> 16:02 hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">70&lt;/span> &lt;span class="m">11&lt;/span> &lt;span class="m">4&lt;/span> 15:16 main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 執行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP hello % ./hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello jimmy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;font color=red>如果改源碼，需再執行編譯產生可執行文件，新代碼結果才會呈現&lt;/font>&lt;/p>
&lt;p>自定義執行文件檔名&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP hello % go build -o hi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP hello % ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">7544&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x@ &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">1925602&lt;/span> &lt;span class="m">11&lt;/span> &lt;span class="m">4&lt;/span> 16:02 hello
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x@ &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">1925602&lt;/span> &lt;span class="m">11&lt;/span> &lt;span class="m">4&lt;/span> 16:06 hi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">70&lt;/span> &lt;span class="m">11&lt;/span> &lt;span class="m">4&lt;/span> 15:16 main.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP hello % ./hi
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hello jimmy
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="小結">小結&lt;/h3>
&lt;ul>
&lt;li>go build [-o] 生成一個可執行文件&lt;/li>
&lt;li>go run 編譯並執行&lt;/li>
&lt;li>寫代碼流程，先創建文件夾，進入創建xxx.go程式，開始撰寫代碼&lt;/li>
&lt;/ul>
&lt;p>代碼解釋&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/* 主包 */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cm">/* 主程序入口 */&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">(){&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;hello jimmy&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="ide的安裝和使用">IDE的安裝和使用&lt;/h2>
&lt;p>安裝Goland或Vscode&lt;/p>
&lt;p>幫助快速開發&lt;/p>
&lt;h3 id="mac系統-1">mac系統&lt;/h3>
&lt;p>Goland官網： &lt;a class="link" href="https://www.jetbrains.com/go/download/#section=mac" target="_blank" rel="noopener"
>https://www.jetbrains.com/go/download/#section=mac&lt;/a>&lt;/p>
&lt;p>我選擇使用較舊的版本
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162220.png"
width="1337"
height="794"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162220_hua78aa1b6d846f49cb60573602d60d959_128496_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162220_hua78aa1b6d846f49cb60573602d60d959_128496_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="168"
data-flex-basis="404px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162329.png"
width="782"
height="354"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162329_hueaf1eb4a8662470ae38025b5d1b65a97_40350_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162329_hueaf1eb4a8662470ae38025b5d1b65a97_40350_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="220"
data-flex-basis="530px"
>&lt;/p>
&lt;p>第一次打開畫面，選擇New Project
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162530.png"
width="800"
height="600"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162530_huec606c859ef0a0c1ccc845900d27fa8d_65276_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162530_huec606c859ef0a0c1ccc845900d27fa8d_65276_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>目錄選擇
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162936.png"
width="800"
height="600"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162936_hu513d8d8debd333ea8993d3aac2ef480d_41436_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104162936_hu513d8d8debd333ea8993d3aac2ef480d_41436_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="320px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104163213.png"
width="1400"
height="954"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104163213_hu3111ca316a172a327c88b187db3db6cf_77522_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104163213_hu3111ca316a172a327c88b187db3db6cf_77522_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="146"
data-flex-basis="352px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104163125.png"
width="920"
height="436"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104163125_huc0571c5c01f0fa48a19305a9e27d98fc_51110_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104163125_huc0571c5c01f0fa48a19305a9e27d98fc_51110_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="211"
data-flex-basis="506px"
>&lt;/p>
&lt;h3 id="創建go程序">創建go程序&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164719.png"
width="539"
height="255"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164719_hu5ab07f2fce97fc891fdef7b7a9920720_41993_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164719_hu5ab07f2fce97fc891fdef7b7a9920720_41993_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="211"
data-flex-basis="507px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164246.png"
width="461"
height="240"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164246_hue124ba74138bcacf0bf71c5a0afe24af_17672_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164246_hue124ba74138bcacf0bf71c5a0afe24af_17672_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="192"
data-flex-basis="461px"
>&lt;/p>
&lt;h3 id="生成可執行文件-1">生成可執行文件&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164826.png"
width="738"
height="215"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164826_hu6b38bd098235b2a8607ee6fb10ad56f9_29029_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164826_hu6b38bd098235b2a8607ee6fb10ad56f9_29029_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="343"
data-flex-basis="823px"
>&lt;/p>
&lt;p>先關閉go module&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164935.png"
width="900"
height="700"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164935_hu9988cc539877e978fd28adeeb5428d87_56140_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104164935_hu9988cc539877e978fd28adeeb5428d87_56140_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="128"
data-flex-basis="308px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104165034.png"
width="626"
height="130"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104165034_hu852357d5c8837854028c5c86b1204a8c_20372_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104165034_hu852357d5c8837854028c5c86b1204a8c_20372_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="481"
data-flex-basis="1155px"
>&lt;/p>
&lt;h3 id="ide直接執行go-run">IDE直接執行go run&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104165200.png"
width="545"
height="474"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104165200_hu58012ea307ec68ffa010834ce62415de_50551_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104165200_hu58012ea307ec68ffa010834ce62415de_50551_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="114"
data-flex-basis="275px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104165252.png"
width="347"
height="211"
srcset="https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104165252_huef6c42f53d3d61a2b3fcc863258d6c26_26586_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/golang-self-learning-basic-introduction-golang001/media/Pasted-image-20231104165252_huef6c42f53d3d61a2b3fcc863258d6c26_26586_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="164"
data-flex-basis="394px"
>&lt;/p>
&lt;h2 id="基礎語法">基礎語法&lt;/h2>
&lt;h3 id="註釋">註釋&lt;/h3></description></item><item><title>Lesson009 - 中國 AI 科技進入校園！學生上課狀況一目了然！</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson009/</link><pubDate>Fri, 27 Oct 2023 21:46:23 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson009/</guid><description>&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/JMLsHI8aV0g" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">artificial
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 人工的；仿造的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cashless
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 不用現金的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">recognition
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 辨識；識別
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">analyze
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 分析
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">location
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 位置
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">boost
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 改善；提高；增強
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">disciplined
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 守紀律的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">enthusiastic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 熱衷的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">privacy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 隱私
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">consent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 同意；許可
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>名詞子句&lt;/p>
&lt;p>Noun Clause&lt;/p>
&lt;/blockquote>
&lt;p>所謂名詞子句，就是在句子當中嵌入一個地位形同名詞的子句。這些子句之前通常會由「連接詞（whether, if）」、「疑問詞（who, why, where, how 等）」或「關係代名詞（that, which, whom, whatever 等）」引導，其後結構為直述句（也就是 S+V）。以本支影片所出現的句子舉例，So while students are solving math problems, a teacher can quickly find out who&amp;rsquo;s paying attention and who&amp;rsquo;s not. 名詞子句便是who’s paying attention and who’s not，指稱「有專心和沒有專心的（學生）」。或是 We were curious if the headbands could actually measure concentration. 就是用 if（是否）帶出「這些頭帶是不是真的可以測量專注程度」這件事，此時 the headbands could actually measure concentration 既是有主詞（the headbands）有動詞（could (actually) measure）的子句，本身也是一個名詞。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I can get you whatever you want.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我可以給你你想要的任何東西。 （名詞子句為 whatever you want，你想要的任何東西）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I’m not sure whether I should tell her the truth.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我不確定要不要跟她說實話。 （名詞子句為 whether I should tell her the truth，要不要跟她說實話）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The little girl wonders how the magicians do their tricks.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">小女孩在想魔術師是怎麼辦到那些把戲的。 （名詞子句為 how the magicians do their tricks，魔術師是怎麼辦到那些把戲的）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson008 - 為什麼蒙娜麗莎的微笑如此聲名遠播？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson008/</link><pubDate>Thu, 26 Oct 2023 23:36:10 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson008/</guid><description>&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/A_DRNbpsU3Q" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">renowned
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 著名的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hang
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 懸掛
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">toss
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. (隨意地) 扔，擲，拋
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uproar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 騷動
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fever
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 狂熱
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">carpenter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 木匠
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">suspect
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 認為…有嫌疑
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>被動語態&lt;/p>
&lt;p>The Passive Voice&lt;/p>
&lt;/blockquote>
&lt;p>「Be 動詞＋過去分詞」就是被動語態。不過你有沒有發現，我們常常會省略被動語態後面的 by.. .呢？在主動語態的句子中，若主詞不是重點，或是個籠統的總稱時，在不影響句意的情況下，by&amp;hellip; 則會被省略，像是本課的 He was caught in Florence. （省略 by someone，因為誰逮到犯人不是重點）。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The popcorn maker was invented in 1885.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">爆米花機是在 1885 年發明的。 （省略 by someone，因發明的人不是重點）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The machine is maintained every three weeks.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">這部機器每三週會送修一次。 （省略 by someone，因送修的人不是重點）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The book was bought last week.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">這本書是上週買的。 （省略 by someone，因買書的人不是重點）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson007 - 夏天就是要吃冰啊！想知道怎麼自製冰淇淋嗎？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson007/</link><pubDate>Thu, 26 Oct 2023 23:30:50 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson007/</guid><description>&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/_Zt1EuIEhvw" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">completely
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adv. 完全地
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">transfer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 轉移
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">zipper
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 拉鍊、夾鏈
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spill
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 流出
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mixture
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 混合物
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">seal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 封
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">permit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 允許
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">temperature
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 溫度
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wrap
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 包
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shake
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 搖動
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>名詞子句&lt;/p>
&lt;p>Noun Clause&lt;/p>
&lt;/blockquote>
&lt;p>「名詞子句」是指能扮演名詞角色的子句，可以做為主詞、補語、受詞使用，由 that, if, whether, where, when, how 等等開頭，比如影片中講者說 I&amp;rsquo;m gonna show you how to make ice cream using ingredients you probably already have at home.「我要教你如何用家裡可能已經有的材料來製作冰淇淋。」此句中 how to make ice cream using ingredients you probably already have at home 為名詞子句，雖然以疑問詞 how 開頭，講者並不是在問觀眾問題，而是要講解你可以在家自己做冰淇淋的「方法」。 我們來看另一個例子：This (salt) is what&amp;rsquo;s gonna help bring the temperature down.「這（鹽巴）是用來幫忙降溫的。」這裡 what&amp;rsquo;s gonna help bring the temperature down 也是名詞子句，一樣不是問句，講者是在說明可以幫忙降溫的「事物」。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- What I want for dinner is a hamburger, not salad.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我晚餐想吃的是漢堡，才不是沙拉。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- My sister won&amp;#39;t tell me how she got into that trouble.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我妹妹不會跟我說她是怎麼惹上那種麻煩的。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- The question is how to define success and happiness.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">問題是要如何定義成功和幸福。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Iterm2常用快捷鍵</title><link>https://blog.goldfishbrain-fighting.com/2023/iterm2-command/</link><pubDate>Tue, 24 Oct 2023 21:33:34 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/iterm2-command/</guid><description>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">iTerm 常用快捷鍵
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⌘&lt;span class="o">(&lt;/span>&lt;span class="nb">command&lt;/span>&lt;span class="o">)&lt;/span> + ⇧&lt;span class="o">(&lt;/span>&lt;span class="nb">shift&lt;/span>&lt;span class="o">)&lt;/span> + i 當前窗口同時輸入指令
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⌘&lt;span class="o">(&lt;/span>&lt;span class="nb">command&lt;/span>&lt;span class="o">)&lt;/span> + t 新建tab頁
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⌘&lt;span class="o">(&lt;/span>&lt;span class="nb">command&lt;/span>&lt;span class="o">)&lt;/span> + d 水平分屏
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⌘&lt;span class="o">(&lt;/span>&lt;span class="nb">command&lt;/span>&lt;span class="o">)&lt;/span> + 左右方向鍵 切換標籤
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⌘&lt;span class="o">(&lt;/span>&lt;span class="nb">command&lt;/span>&lt;span class="o">)&lt;/span> + &lt;span class="p">;&lt;/span> 查看歷史命令
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⌘&lt;span class="o">(&lt;/span>&lt;span class="nb">command&lt;/span>&lt;span class="o">)&lt;/span> + ⇧&lt;span class="o">(&lt;/span>&lt;span class="nb">shift&lt;/span>&lt;span class="o">)&lt;/span> + d 垂直分屏
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⌘&lt;span class="o">(&lt;/span>&lt;span class="nb">command&lt;/span>&lt;span class="o">)&lt;/span> + ⇧&lt;span class="o">(&lt;/span>&lt;span class="nb">shift&lt;/span>&lt;span class="o">)&lt;/span> + e 顯示時間線
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">⌘&lt;span class="o">(&lt;/span>&lt;span class="nb">command&lt;/span>&lt;span class="o">)&lt;/span> + ⇧&lt;span class="o">(&lt;/span>&lt;span class="nb">shift&lt;/span>&lt;span class="o">)&lt;/span> + h 查看剪貼板歷史
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>ELK8.x 多節點集群佈署-啟用security(tls)登入驗證(Docker-Compose)</title><link>https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/</link><pubDate>Tue, 24 Oct 2023 06:52:48 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/</guid><description>&lt;h3 id="前情提要與架構規劃">前情提要與架構規劃&lt;/h3>
&lt;p>參考專案: &lt;a class="link" href="https://github.com/deviantony/docker-elk/tree/tls" target="_blank" rel="noopener"
>https://github.com/deviantony/docker-elk/tree/tls&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">由於此專案演示的，是將所有角色在單機上佈屬，
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">然後我這裡是要示範，如何在跨節點主機上，去佈屬各項角色，達到角色拆分。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>主機規劃，與角色分配&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主機名稱&lt;/th>
&lt;th>主機IP&lt;/th>
&lt;th>node.name&lt;/th>
&lt;th>角色&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>k8s-master71u&lt;/td>
&lt;td>192.168.1.71&lt;/td>
&lt;td>elasticsearch01&lt;/td>
&lt;td>elasticsearch&lt;br>&lt;br>kibana&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-master72u&lt;/td>
&lt;td>192.168.1.72&lt;/td>
&lt;td>elasticsearch02&lt;br>&lt;br>logstach02&lt;/td>
&lt;td>elasticsearch&lt;br>&lt;br>logstach&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-master73u&lt;/td>
&lt;td>192.168.1.73&lt;/td>
&lt;td>elasticsearch03&lt;br>&lt;br>logstach03&lt;/td>
&lt;td>elasticsearch&lt;br>&lt;br>logstach&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="目錄結構">目錄結構&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# tree -a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 目錄結構&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── docker-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── elasticsearch.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── .gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── logs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── .gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── .env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── etc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── localtime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── timezone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── extensions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── curator
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ │ ├── curator.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ │ └── delete_log_files_curator.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── curator-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── enterprise-search
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ │ └── enterprise-search.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── enterprise-search-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── filebeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ │ └── filebeat.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── filebeat-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── fleet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── agent-apmserver-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── fleet-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── heartbeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ │ └── heartbeat.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── heartbeat-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── logspout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── build.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── logspout-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── modules.go
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── metricbeat
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ │ └── metricbeat.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ ├── metricbeat-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── kibana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── kibana.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── LICENSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── logstash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ │ └── logstash.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── pipeline
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── logstash.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">├── setup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── entrypoint.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── lib.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── roles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── filebeat_writer.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── heartbeat_writer.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ ├── logstash_writer.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">│ └── metricbeat_writer.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">└── tls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├── apm-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ │ ├── apm-server.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ │ └── apm-server.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├── ca
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ │ ├── ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ │ └── ca.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├── elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ │ ├── elasticsearch.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ │ └── elasticsearch.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├── fleet-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ │ ├── fleet-server.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ │ └── fleet-server.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├── .gitignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ └── kibana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ ├── kibana.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> │ └── kibana.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── Dockerfile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── .dockerignore
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── entrypoint.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ├── instances.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └── README.md
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="clone代碼建立目錄">Clone代碼，建立目錄&lt;/h3>
&lt;p>&lt;strong>&lt;font color=red>每一台皆要執行&lt;/font>&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># git clone項目&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data# git clone --branch tls https://github.com/deviantony/docker-elk.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data# &lt;span class="nb">cd&lt;/span> docker-elk/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">48&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">10&lt;/span> root root &lt;span class="m">4096&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 ./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">3&lt;/span> root root &lt;span class="m">24&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 ../
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">5440&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 docker-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">3&lt;/span> root root &lt;span class="m">59&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 elasticsearch/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1502&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 .env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">9&lt;/span> root root &lt;span class="m">143&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 extensions/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">8&lt;/span> root root &lt;span class="m">163&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 .git/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">83&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 .gitattributes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">4&lt;/span> root root &lt;span class="m">45&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 .github/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">3&lt;/span> root root &lt;span class="m">59&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 kibana/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1082&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 LICENSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">4&lt;/span> root root &lt;span class="m">75&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 logstash/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">23158&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">3&lt;/span> root root &lt;span class="m">93&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 setup/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">3&lt;/span> root root &lt;span class="m">117&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:14 tls/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 建立共用檔案，放置目錄&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# mkdir etc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# &lt;span class="nb">cd&lt;/span> etc/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 將localtime、timezone，校時與時區檔案傳入&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# chmod &lt;span class="m">777&lt;/span> -R etc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# ll etc/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">12&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxrwxrwx &lt;span class="m">2&lt;/span> root root &lt;span class="m">39&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:17 ./
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x &lt;span class="m">11&lt;/span> root root &lt;span class="m">4096&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:15 ../
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxrwxrwx &lt;span class="m">1&lt;/span> root root &lt;span class="m">764&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:17 localtime*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxrwxrwx &lt;span class="m">1&lt;/span> root root &lt;span class="m">12&lt;/span> Oct &lt;span class="m">23&lt;/span> 23:17 timezone*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 建立各功能，所需目錄&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# mkdir elasticsearch/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# mkdir elasticsearch/logs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# chmod &lt;span class="m">777&lt;/span> -R elasticsearch/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# chmod &lt;span class="m">777&lt;/span> -R elasticsearch/logs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# mkdir kibana/data
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# chmod &lt;span class="m">777&lt;/span> -R kibana/data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="修改env設定">修改.env設定&lt;/h3>
&lt;p>&lt;strong>&lt;font color=red>每一台皆要執行，ELASTIC版本指定，ELASTIC密碼，LOGSTASH_INTERNAL密碼，KIBANA_SYSTEM密碼，依當下需求修改，每一台保持一樣即可&lt;/font>&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@b1-se-prometheus01:/data/docker-elk# cat .env
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ELASTIC_VERSION&lt;/span>&lt;span class="o">=&lt;/span>8.6.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Passwords for stack users&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># User &amp;#39;elastic&amp;#39; (built-in)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Superuser role, full access to cluster management and data indices.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://www.elastic.co/guide/en/elasticsearch/reference/current/built-in-users.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ELASTIC_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;changeme&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># User &amp;#39;logstash_internal&amp;#39; (custom)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The user Logstash uses to connect and send data to Elasticsearch.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://www.elastic.co/guide/en/logstash/current/ls-security.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LOGSTASH_INTERNAL_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;changeme&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># User &amp;#39;kibana_system&amp;#39; (built-in)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The user Kibana uses to connect and communicate with Elasticsearch.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://www.elastic.co/guide/en/elasticsearch/reference/current/built-in-users.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">KIBANA_SYSTEM_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;changeme&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Users &amp;#39;metricbeat_internal&amp;#39;, &amp;#39;filebeat_internal&amp;#39; and &amp;#39;heartbeat_internal&amp;#39; (custom)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The users Beats use to connect and send data to Elasticsearch.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://www.elastic.co/guide/en/beats/metricbeat/current/feature-roles.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">METRICBEAT_INTERNAL_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">FILEBEAT_INTERNAL_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">HEARTBEAT_INTERNAL_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># User &amp;#39;monitoring_internal&amp;#39; (custom)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The user Metricbeat uses to collect monitoring data from stack components.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://www.elastic.co/guide/en/elasticsearch/reference/current/how-monitoring-works.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">MONITORING_INTERNAL_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># User &amp;#39;beats_system&amp;#39; (built-in)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The user the Beats use when storing monitoring information in Elasticsearch.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># https://www.elastic.co/guide/en/elasticsearch/reference/current/built-in-users.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">BEATS_SYSTEM_PASSWORD&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="生成憑證">生成憑證&lt;/h3>
&lt;p>&lt;strong>&lt;font color=red>選一台執行，再將生成憑證拷貝至其他主機&lt;/font>&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 編寫instances主機資訊，要用來產生憑證&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# vim tls/instances.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This file is used by elasticsearch-certutil to generate X.509 certificates&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># for stack components.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Ref. https://www.elastic.co/guide/en/elasticsearch/reference/current/certutil.html#certutil-silent&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 多instance可以寫一起&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">instances:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- name: elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - elasticsearch01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - elasticsearch02
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - elasticsearch03
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - elasticsearch # Compose service, resolved by the embedded Docker DNS server name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - localhost # local connections&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 192.168.1.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 192.168.1.72
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 192.168.1.73
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - 127.0.0.1 # local connections&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - ::1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- name: kibana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dns:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - kibana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - kibana.127.0.0.1.nip.io # Examples of resolvable domains.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - kibana.127.0.0.1.sslip.io #&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - localhost&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ip:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 192.168.1.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - 127.0.0.1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># - ::1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 執行tls容器，產生憑證&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# docker-compose up tls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Attaching to docker-elk_tls_1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> CA certificate and key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ Created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ SHA256 fingerprint: 73cfd9c6c9220b46005ae2fcf0c0e1234093a70f4c62741ef9d701b192150a52
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/ca/ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/ca/ca.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Server certificates and keys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ Created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/elasticsearch/elasticsearch.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/elasticsearch/elasticsearch.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/kibana/kibana.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/kibana/kibana.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/fleet-server/fleet-server.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/fleet-server/fleet-server.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/apm-server/apm-server.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/apm-server/apm-server.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# scp -r tls/certs root@192.168.1.72:/data/docker-elk/tls/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# scp -r tls/certs root@192.168.1.73:/data/docker-elk/tls/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="修改docker-compose設定">修改docker-compose設定&lt;/h3>
&lt;p>&lt;strong>&lt;font color=red>每一台皆要執行&lt;/font>&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 佈署檔案docker-compose設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# vim docker-compose.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">version: &lt;span class="s1">&amp;#39;3.7&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">services:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># The &amp;#39;tls&amp;#39; service runs a one-off script which initializes TLS certificates and&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># private keys for all components of the stack inside the local tls/ directory.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># This task only needs to be performed once, *before* the first stack startup.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># By default, it is excluded from the services started by &amp;#39;docker compose up&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># due to the non-default profile it belongs to. To run it, either provide the&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># &amp;#39;--profile=setup&amp;#39; CLI flag to Compose commands, or &amp;#34;up&amp;#34; the service by name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># such as &amp;#39;docker compose up tls&amp;#39;.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tls:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> profiles:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - setup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> build:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> context: tls/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> args:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ELASTIC_VERSION: &lt;span class="si">${&lt;/span>&lt;span class="nv">ELASTIC_VERSION&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> user: root &lt;span class="c1"># ensures we can write to the local tls/ directory.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> init: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./tls/entrypoint.sh:/entrypoint.sh:ro,Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./tls/instances.yml:/usr/share/elasticsearch/tls/instances.yml:ro,Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./tls/certs:/usr/share/elasticsearch/tls/certs:z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># The &amp;#39;setup&amp;#39; service runs a one-off script which initializes users inside&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Elasticsearch — such as &amp;#39;logstash_internal&amp;#39; and &amp;#39;kibana_system&amp;#39; — with the&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># values of the passwords defined in the &amp;#39;.env&amp;#39; file. It also creates the&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># roles required by some of these users.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># This task only needs to be performed once, during the *initial* startup of&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># the stack. Any subsequent run will reset the passwords of existing users to&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># the values defined inside the &amp;#39;.env&amp;#39; file, and the built-in roles to their&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># default permissions.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># By default, it is excluded from the services started by &amp;#39;docker compose up&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># due to the non-default profile it belongs to. To run it, either provide the&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># &amp;#39;--profile=setup&amp;#39; CLI flag to Compose commands, or &amp;#34;up&amp;#34; the service by name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># such as &amp;#39;docker compose up setup&amp;#39;.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> setup:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> profiles:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - setup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> build:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> context: setup/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> args:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ELASTIC_VERSION: &lt;span class="si">${&lt;/span>&lt;span class="nv">ELASTIC_VERSION&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> init: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./setup/entrypoint.sh:/entrypoint.sh:ro,Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./setup/lib.sh:/lib.sh:ro,Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./setup/roles:/roles:ro,Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (!) CA certificate. Generate using the &amp;#39;tls&amp;#39; service.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./tls/certs/ca/ca.crt:/ca.crt:ro,z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> environment:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ELASTIC_PASSWORD: &lt;span class="si">${&lt;/span>&lt;span class="nv">ELASTIC_PASSWORD&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LOGSTASH_INTERNAL_PASSWORD: &lt;span class="si">${&lt;/span>&lt;span class="nv">LOGSTASH_INTERNAL_PASSWORD&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> KIBANA_SYSTEM_PASSWORD: &lt;span class="si">${&lt;/span>&lt;span class="nv">KIBANA_SYSTEM_PASSWORD&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> METRICBEAT_INTERNAL_PASSWORD: &lt;span class="si">${&lt;/span>&lt;span class="nv">METRICBEAT_INTERNAL_PASSWORD&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> FILEBEAT_INTERNAL_PASSWORD: &lt;span class="si">${&lt;/span>&lt;span class="nv">FILEBEAT_INTERNAL_PASSWORD&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> HEARTBEAT_INTERNAL_PASSWORD: &lt;span class="si">${&lt;/span>&lt;span class="nv">HEARTBEAT_INTERNAL_PASSWORD&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> MONITORING_INTERNAL_PASSWORD: &lt;span class="si">${&lt;/span>&lt;span class="nv">MONITORING_INTERNAL_PASSWORD&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> BEATS_SYSTEM_PASSWORD: &lt;span class="si">${&lt;/span>&lt;span class="nv">BEATS_SYSTEM_PASSWORD&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - elk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> depends_on:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elasticsearch:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> build:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> context: elasticsearch/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> args:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ELASTIC_VERSION: &lt;span class="si">${&lt;/span>&lt;span class="nv">ELASTIC_VERSION&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml:ro,Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># elasticsearch存放data與logs目錄，依需求自行定義&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./elasticsearch/data:/usr/share/elasticsearch/data:Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./elasticsearch/logs:/usr/share/elasticsearch/logs:Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (!) TLS certificates. Generate using the &amp;#39;tls&amp;#39; service.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./tls/certs/ca/ca.crt:/usr/share/elasticsearch/config/ca.crt:ro,z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./tls/certs/elasticsearch/elasticsearch.crt:/usr/share/elasticsearch/config/elasticsearch.crt:ro,z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./tls/certs/elasticsearch/elasticsearch.key:/usr/share/elasticsearch/config/elasticsearch.key:ro,z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 校時文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./etc/localtime:/etc/localtime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./etc/timezone:/etc/timezone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 9200:9200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 9300:9300
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> environment:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># node.name 每一台要不一樣&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> node.name: elasticsearch01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ES_JAVA_OPTS: -Xms512m -Xmx512m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Bootstrap password.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Used to initialize the keystore during the initial startup of&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Elasticsearch. Ignored on subsequent runs.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ELASTIC_PASSWORD: &lt;span class="si">${&lt;/span>&lt;span class="nv">ELASTIC_PASSWORD&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Use single node discovery in order to disable production mode and avoid bootstrap checks.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># see: https://www.elastic.co/guide/en/elasticsearch/reference/current/bootstrap-checks.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#discovery.type: single-node&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 主機IP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> network.publish_host: 192.168.1.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Use other cluster nodes for unicast discovery.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> discovery.seed_hosts: 192.168.1.71:9300,192.168.1.72:9300,192.168.1.73:9300
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Define initial masters, assuming a cluster size of at least 3.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cluster.initial_master_nodes: 192.168.1.71,192.168.1.72,192.168.1.73
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - elk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> restart: unless-stopped
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> logstash:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> build:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> context: logstash/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> args:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ELASTIC_VERSION: &lt;span class="si">${&lt;/span>&lt;span class="nv">ELASTIC_VERSION&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./logstash/config/logstash.yml:/usr/share/logstash/config/logstash.yml:ro,Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./logstash/pipeline:/usr/share/logstash/pipeline:ro,Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (!) CA certificate. Generate using the &amp;#39;tls&amp;#39; service.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./tls/certs/ca/ca.crt:/usr/share/logstash/config/ca.crt:ro,z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 校時文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./etc/localtime:/etc/localtime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./etc/timezone:/etc/timezone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 5044:5044
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 50000:50000/tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 50000:50000/udp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 9600:9600
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> environment:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LS_JAVA_OPTS: -Xms256m -Xmx256m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> LOGSTASH_INTERNAL_PASSWORD: &lt;span class="si">${&lt;/span>&lt;span class="nv">LOGSTASH_INTERNAL_PASSWORD&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - elk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> depends_on:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> restart: unless-stopped
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kibana:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> build:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> context: kibana/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> args:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ELASTIC_VERSION: &lt;span class="si">${&lt;/span>&lt;span class="nv">ELASTIC_VERSION&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./kibana/config/kibana.yml:/usr/share/kibana/config/kibana.yml:ro,Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># kibana存放data目錄，依需求自行定義&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./kibana/data:/usr/share/kibana/data:Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># (!) TLS certificates. Generate using the &amp;#39;tls&amp;#39; service.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./tls/certs/ca/ca.crt:/usr/share/kibana/config/ca.crt:ro,z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./tls/certs/kibana/kibana.crt:/usr/share/kibana/config/kibana.crt:ro,Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./tls/certs/kibana/kibana.key:/usr/share/kibana/config/kibana.key:ro,Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 校時文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./etc/localtime:/etc/localtime
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - ./etc/timezone:/etc/timezone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ports:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 5601:5601
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> environment:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> KIBANA_SYSTEM_PASSWORD: &lt;span class="si">${&lt;/span>&lt;span class="nv">KIBANA_SYSTEM_PASSWORD&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> networks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - elk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> depends_on:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> restart: unless-stopped
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">networks:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elk:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> driver: bridge
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">volumes:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elasticsearch:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="修改elasticsearch設定">修改elasticsearch設定&lt;/h3>
&lt;p>&lt;strong>&lt;font color=red>需要安裝elasticsearch的執行&lt;/font>&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># elasticsearch 設定檔設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# vim elasticsearch/config/elasticsearch.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Default Elasticsearch configuration from Elasticsearch base image.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## https://github.com/elastic/elasticsearch/blob/main/distribution/docker/src/docker/config/elasticsearch.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># cluster.name名稱，依需求自行定義&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cluster.name: elk-cluster
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">network.host: 0.0.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## X-Pack settings&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## see https://www.elastic.co/guide/en/elasticsearch/reference/current/security-settings.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 修改license，由trial改成basic&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.license.self_generated.type: basic
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## TLS configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## See instructions from README to enable.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Communications between nodes in a cluster&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## see https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-tls.html#tls-transport&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.verification_mode: certificate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.certificate_authorities: &lt;span class="o">[&lt;/span> ca.crt &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.certificate: elasticsearch.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.transport.ssl.key: elasticsearch.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## HTTP client communications&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## see https://www.elastic.co/guide/en/elasticsearch/reference/current/configuring-tls.html#tls-http&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.certificate_authorities: &lt;span class="o">[&lt;/span> ca.crt &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.certificate: elasticsearch.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.security.http.ssl.key: elasticsearch.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="修改kibana設定">修改kibana設定&lt;/h3>
&lt;p>&lt;strong>&lt;font color=red>需要安裝kibana的執行&lt;/font>&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># kibana 設定檔設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# vim kibana/config/kibana.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Default Kibana configuration from Kibana base image.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## https://github.com/elastic/kibana/blob/main/src/dev/build/tasks/os_packages/docker_generator/templates/kibana_yml.template.ts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server.name: kibana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server.host: 0.0.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 多節點elasticsearch，都寫上&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">elasticsearch.hosts: &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;https://192.168.1.71:9200&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;https://192.168.1.72:9200&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;https://192.168.1.73:9200&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">monitoring.ui.container.elasticsearch.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">monitoring.ui.container.logstash.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## X-Pack security credentials&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">elasticsearch.username: kibana_system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">elasticsearch.password: &lt;span class="si">${&lt;/span>&lt;span class="nv">KIBANA_SYSTEM_PASSWORD&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## TLS configuration&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## See instructions from README to enable.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Communications between Kibana and Elasticsearch&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## see https://www.elastic.co/guide/en/kibana/current/configuring-tls.html#configuring-tls-kib-es&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 寫上根憑證位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">elasticsearch.ssl.certificateAuthorities: &lt;span class="o">[&lt;/span> config/ca.crt &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Communications between web browsers and Kibana&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## see https://www.elastic.co/guide/en/kibana/current/configuring-tls.html#configuring-tls-browser-kib&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 開啟kibana ssl，填寫憑證位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server.ssl.enabled: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server.ssl.certificate: config/kibana.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">server.ssl.key: config/kibana.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Encryption keys (optional but highly recommended)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Generate with either&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## $ docker container run --rm docker.elastic.co/kibana/kibana:8.6.2 bin/kibana-encryption-keys generate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## $ openssl rand -hex 32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## https://www.elastic.co/guide/en/kibana/current/using-kibana-with-security.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## https://www.elastic.co/guide/en/kibana/current/kibana-encryption-keys.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#xpack.security.encryptionKey:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#xpack.encryptedSavedObjects.encryptionKey:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#xpack.reporting.encryptionKey:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Fleet&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## https://www.elastic.co/guide/en/kibana/current/fleet-settings-kb.html&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.fleet.agents.fleet_server.hosts: &lt;span class="o">[&lt;/span> https://fleet-server:8220 &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.fleet.outputs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - id: fleet-default-output
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> type: elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 多節點elasticsearch，都寫上&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hosts: &lt;span class="o">[&lt;/span> &lt;span class="s2">&amp;#34;https://192.168.1.71:9200&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;https://192.168.1.72:9200&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;https://192.168.1.73:9200&amp;#34;&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Set to output of &amp;#39;docker-compose up tls&amp;#39;. Example:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">#ca_trusted_fingerprint: 846637d1bb82209640d31b79869a370c8e47c2dc15c7eafd4f3d615e51e3d503&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> is_default: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> is_default_monitoring: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.fleet.packages:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: fleet_server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version: latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version: latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: elastic_agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version: latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: apm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> version: latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">xpack.fleet.agentPolicies:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: Fleet Server Policy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: fleet-server-policy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> description: Static agent policy &lt;span class="k">for&lt;/span> Fleet Server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> monitoring_enabled:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - logs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - metrics
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> package_policies:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: fleet_server-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> package:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: fleet_server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: system-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> package:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: elastic_agent-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> package:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: elastic_agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: Agent Policy APM Server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> id: agent-policy-apm-server
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> description: Static agent policy &lt;span class="k">for&lt;/span> the APM Server integration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> monitoring_enabled:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - logs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - metrics
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> package_policies:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: system-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> package:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: elastic_agent-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> package:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: elastic_agent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: apm-1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> package:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: apm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># See the APM package manifest for a list of possible inputs.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># https://github.com/elastic/apm-server/blob/v8.5.0/apmpackage/apm/manifest.yml#L41-L168&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> inputs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - type: apm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> vars:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: host
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: 0.0.0.0:8200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: url
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: https://apm-server:8200
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: tls_enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: tls_certificate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: /usr/share/elastic-agent/apm-server.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - name: tls_key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> value: /usr/share/elastic-agent/apm-server.key
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="修改logstash設定">修改logstash設定&lt;/h3>
&lt;p>&lt;strong>&lt;font color=red>需要安裝logstash的執行&lt;/font>&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># logstash 設定檔設定&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# vim logstash/config/logstash.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Default Logstash configuration from Logstash base image.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## https://github.com/elastic/logstash/blob/main/docker/data/logstash/config/logstash-full.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http.host: 0.0.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># node.name 每一台要不一樣&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">node.name: logstash02
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 測試抓容器內的log，發送到elasticsearch是否成功&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# vim logstash/pipeline/logstash.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">input &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> beats &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">port&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="m">5044&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tcp &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">port&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="m">50000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> file &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">path&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;/var/log/bootstrap.log&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">type&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="s2">&amp;#34;system&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">start_position&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="s2">&amp;#34;beginning&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## Add your filters / logstash plugins configuration here&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">output &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> elasticsearch &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">hosts&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;192.168.1.71:9200&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;192.168.1.72:9200&amp;#34;&lt;/span>,&lt;span class="s2">&amp;#34;192.168.1.73:9200&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">user&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="s2">&amp;#34;logstash_internal&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">password&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">LOGSTASH_INTERNAL_PASSWORD&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">ssl&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">cacert&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="s2">&amp;#34;config/ca.crt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">index&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="s2">&amp;#34;logstash-%{+YYYY.MM.dd}&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">codec&lt;/span> &lt;span class="o">=&lt;/span>&amp;gt; &lt;span class="s2">&amp;#34;rubydebug&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="啟動setup與elasticsearch">啟動setup與elasticsearch&lt;/h3>
&lt;p>&lt;strong>&lt;font color=red>需要安裝elasticsearch的執行&lt;/font>&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># setup腳本會帶憑證去判斷elasticsearch是否存活了，判斷存活才會設定elasticsearch所需要的帳號和密碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 所以將setup腳本中的環境變數elasticsearch:9200，替換成node.name名稱(前面有定義過)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# sed -i &lt;span class="s1">&amp;#39;s/elasticsearch:9200/elasticsearch01:9200/g&amp;#39;&lt;/span> setup/lib.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# sed -i &lt;span class="s1">&amp;#39;s/elasticsearch:9200/elasticsearch02:9200/g&amp;#39;&lt;/span> setup/lib.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/docker-elk# sed -i &lt;span class="s1">&amp;#39;s/elasticsearch:9200/elasticsearch03:9200/g&amp;#39;&lt;/span> setup/lib.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 添加hosts，node.name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# vim /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.71 elasticsearch01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.72 elasticsearch02
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.73 elasticsearch03
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# vim /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.71 elasticsearch01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.72 elasticsearch02
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.73 elasticsearch03
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/docker-elk# vim /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.71 elasticsearch01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.72 elasticsearch02
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.73 elasticsearch03
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>**&lt;font color=red>需要安裝elasticsearch的執行&lt;/font>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 執行setup容器，啟動elasticsearch，並設定elasticsearch所需要使用到的帳號和密碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# docker-compose up setup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# docker-compose up setup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/docker-elk# docker-compose up setup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 可以看到以下，就是elasticsearch成功啟動，且已設定elasticsearch所需要使用到的帳號和密碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# docker-compose up setup
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-elk_elasticsearch_1 is up-to-date
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Starting docker-elk_setup_1 ... &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Attaching to docker-elk_setup_1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Waiting &lt;span class="k">for&lt;/span> availability of Elasticsearch. This can take several minutes.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ Elasticsearch is running
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Waiting &lt;span class="k">for&lt;/span> initialization of built-in users
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ Built-in users were initialized
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Role &lt;span class="s1">&amp;#39;heartbeat_writer&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ Creating/updating
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Role &lt;span class="s1">&amp;#39;metricbeat_writer&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ Creating/updating
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Role &lt;span class="s1">&amp;#39;filebeat_writer&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ Creating/updating
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Role &lt;span class="s1">&amp;#39;logstash_writer&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ Creating/updating
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> User &lt;span class="s1">&amp;#39;filebeat_internal&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ No password defined, skipping
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> User &lt;span class="s1">&amp;#39;kibana_system&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ User exists, setting password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> User &lt;span class="s1">&amp;#39;logstash_internal&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ User exists, setting password
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> User &lt;span class="s1">&amp;#39;heartbeat_internal&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ No password defined, skipping
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> User &lt;span class="s1">&amp;#39;metricbeat_internal&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ No password defined, skipping
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> User &lt;span class="s1">&amp;#39;monitoring_internal&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ No password defined, skipping
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> User &lt;span class="s1">&amp;#39;beats_system&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">setup_1 &lt;span class="p">|&lt;/span> ⠿ No password defined, skipping
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-elk_setup_1 exited with code &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# docker ps &lt;span class="p">|&lt;/span> grep -i elk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">13130e0e2653 docker-elk_elasticsearch &lt;span class="s2">&amp;#34;/bin/tini -- /usr/l…&amp;#34;&lt;/span> &lt;span class="m">3&lt;/span> minutes ago Up &lt;span class="m">3&lt;/span> minutes 0.0.0.0:9200-&amp;gt;9200/tcp, :::9200-&amp;gt;9200/tcp, 0.0.0.0:9300-&amp;gt;9300/tcp, :::9300-&amp;gt;9300/tcp docker-elk_elasticsearch_1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>https://192.168.1.71:9200/&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024220535.png"
width="905"
height="308"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024220535_hu7687eda4f9ca66bf49c5100d449e1522_33921_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024220535_hu7687eda4f9ca66bf49c5100d449e1522_33921_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="293"
data-flex-basis="705px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024220559.png"
width="505"
height="392"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024220559_huc23ed2490624e48fc2f5f8eb872c5fde_55184_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024220559_huc23ed2490624e48fc2f5f8eb872c5fde_55184_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="128"
data-flex-basis="309px"
>&lt;/p>
&lt;p>https://192.168.1.71:9200/_cat/health?v&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024220713.png"
width="1160"
height="188"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024220713_hud0e7452ea50f0a65183a6bf5bfa5fbfb_37341_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024220713_hud0e7452ea50f0a65183a6bf5bfa5fbfb_37341_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="617"
data-flex-basis="1480px"
>&lt;/p>
&lt;h3 id="啟動kibana">啟動kibana&lt;/h3>
&lt;p>&lt;strong>&lt;font color=red>需要安裝kibana的執行&lt;/font>&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 執行kibana容器，啟動kibana&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# docker-compose up -d kibana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# docker ps &lt;span class="p">|&lt;/span> grep -i elk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">a652860861bc docker-elk_kibana &lt;span class="s2">&amp;#34;/bin/tini -- /usr/l…&amp;#34;&lt;/span> &lt;span class="m">45&lt;/span> seconds ago Up &lt;span class="m">38&lt;/span> seconds 0.0.0.0:5601-&amp;gt;5601/tcp, :::5601-&amp;gt;5601/tcp docker-elk_kibana_1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">13130e0e2653 docker-elk_elasticsearch &lt;span class="s2">&amp;#34;/bin/tini -- /usr/l…&amp;#34;&lt;/span> &lt;span class="m">11&lt;/span> minutes ago Up &lt;span class="m">11&lt;/span> minutes 0.0.0.0:9200-&amp;gt;9200/tcp, :::9200-&amp;gt;9200/tcp, 0.0.0.0:9300-&amp;gt;9300/tcp, :::9300-&amp;gt;9300/tcp docker-elk_elasticsearch_1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>https://192.168.1.71:5601/&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221117.png"
width="950"
height="635"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221117_hu5ccbdcd97d532a51c81b93dd17f0c90c_47418_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221117_hu5ccbdcd97d532a51c81b93dd17f0c90c_47418_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="149"
data-flex-basis="359px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221159.png"
width="1491"
height="980"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221159_hu718524bc52e4e726c36836bd028cf749_209262_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221159_hu718524bc52e4e726c36836bd028cf749_209262_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="152"
data-flex-basis="365px"
>&lt;/p>
&lt;h3 id="啟動logstash">啟動logstash&lt;/h3>
&lt;p>&lt;strong>需要安裝logstash的執行&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 執行logstash容器，啟動logstash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# docker-compose up -d logstash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/docker-elk# docker-compose up -d logstash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# docker ps &lt;span class="p">|&lt;/span> grep -i elk
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">c7712d2eb7bd docker-elk_logstash &lt;span class="s2">&amp;#34;/usr/local/bin/dock…&amp;#34;&lt;/span> &lt;span class="m">31&lt;/span> seconds ago Up &lt;span class="m">30&lt;/span> seconds 0.0.0.0:5044-&amp;gt;5044/tcp, :::5044-&amp;gt;5044/tcp, 0.0.0.0:9600-&amp;gt;9600/tcp, :::9600-&amp;gt;9600/tcp, 0.0.0.0:50000-&amp;gt;50000/tcp, :::50000-&amp;gt;50000/tcp, 0.0.0.0:50000-&amp;gt;50000/udp, :::50000-&amp;gt;50000/udp docker-elk_logstash_1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">678934a90729 docker-elk_elasticsearch &lt;span class="s2">&amp;#34;/bin/tini -- /usr/l…&amp;#34;&lt;/span> &lt;span class="m">13&lt;/span> minutes ago Up &lt;span class="m">13&lt;/span> minutes 0.0.0.0:9200-&amp;gt;9200/tcp, :::9200-&amp;gt;9200/tcp, 0.0.0.0:9300-&amp;gt;9300/tcp, :::9300-&amp;gt;9300/tcp docker-elk_elasticsearch_1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>可以從kibana頁面看到，有索引進來了&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221559.png"
width="1486"
height="644"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221559_hu0b65a9bd0ec421a6e5979f34902073e3_129987_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221559_hu0b65a9bd0ec421a6e5979f34902073e3_129987_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="230"
data-flex-basis="553px"
>&lt;/p>
&lt;p>創建Data Views&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221647.png"
width="1491"
height="876"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221647_huef1bb4750e7f138a139312e6bed51d22_134314_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221647_huef1bb4750e7f138a139312e6bed51d22_134314_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="170"
data-flex-basis="408px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221736.png"
width="1120"
height="454"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221736_hue70087df2ebefe204471f1fb69cf1ec7_53471_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221736_hue70087df2ebefe204471f1fb69cf1ec7_53471_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="246"
data-flex-basis="592px"
>&lt;/p>
&lt;p>可以從Discover查看到收集的log訊息了&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221820.png"
width="1500"
height="994"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221820_hu10c771c26dc4325490ea3a8693f83a9e_288133_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221820_hu10c771c26dc4325490ea3a8693f83a9e_288133_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="362px"
>&lt;/p>
&lt;p>點擊，Stack Monitoring
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221944.png"
width="1062"
height="932"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221944_hub2d210a90cf90aa33361e2042aba0b08_133784_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024221944_hub2d210a90cf90aa33361e2042aba0b08_133784_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="113"
data-flex-basis="273px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024222042.png"
width="644"
height="494"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024222042_hu29dabbce900bcb4e9e0ac4914ee83e9d_45700_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024222042_hu29dabbce900bcb4e9e0ac4914ee83e9d_45700_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="130"
data-flex-basis="312px"
>
可以簡單看到elasticsearch和kibana的狀態
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024222122.png"
width="1494"
height="884"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024222122_hu8d402cb3ec2f131a779e1c2689ce6bfa_160449_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024222122_hu8d402cb3ec2f131a779e1c2689ce6bfa_160449_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="169"
data-flex-basis="405px"
>&lt;/p>
&lt;h3 id="注意自簽憑證3年到期">(注意)自簽憑證3年到期&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024222246.png"
width="544"
height="666"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024222246_hu7381ac84c543957ed9ecb5299eedd136_69571_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024222246_hu7381ac84c543957ed9ecb5299eedd136_69571_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="81"
data-flex-basis="196px"
>&lt;/p>
&lt;h3 id="重新頒發憑證並改10年到期">重新頒發憑證(並改10年到期)&lt;/h3>
&lt;p>停掉所有elasticsearch和kibana和logstash&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# docker-compose down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# docker-compose down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/docker-elk# docker-compose down
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------------------------
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/docker-elk# docker-compose ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Name Command State Ports
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">------------------------------
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>刪除原本憑證&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# rm -rf tls/certs/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# rm -rf tls/certs/*
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/docker-elk# rm -rf tls/certs/*
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;font color=red>選一台執行，再將生成憑證拷貝至其他主機&lt;/font>&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 修改憑證頒發到期時間為10年，有bin/elasticsearch-certutil這段，都加上--days 3650&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# vim tls/entrypoint.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;[+] CA certificate and key&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> ! -f tls/certs/ca/ca.key &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">symbol&lt;/span>&lt;span class="o">=&lt;/span>⠿
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bin/elasticsearch-certutil ca &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --days &lt;span class="m">3650&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --silent &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --pem &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --out tls/certs/ca.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s1">&amp;#39;[+] Server certificates and keys&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> ! -f tls/certs/elasticsearch/elasticsearch.key &lt;span class="o">]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">symbol&lt;/span>&lt;span class="o">=&lt;/span>⠿
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bin/elasticsearch-certutil cert &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --days &lt;span class="m">3650&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --silent &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --pem &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --in tls/instances.yml &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --ca-cert tls/certs/ca/ca.crt &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --ca-key tls/certs/ca/ca.key &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --out tls/certs/certs.zip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 頒發憑證&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# docker-compose up tls
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Creating network &lt;span class="s2">&amp;#34;docker-elk_default&amp;#34;&lt;/span> with the default driver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Creating network &lt;span class="s2">&amp;#34;docker-elk_elk&amp;#34;&lt;/span> with driver &lt;span class="s2">&amp;#34;bridge&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Creating docker-elk_tls_1 ... &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Attaching to docker-elk_tls_1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> CA certificate and key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ Created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ SHA256 fingerprint: d93ccec000656ad3cd2ea04e1de39c0c2d32eef1b20b32a117d3c92469ed94fb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/ca/ca.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/ca/ca.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> &lt;span class="o">[&lt;/span>+&lt;span class="o">]&lt;/span> Server certificates and keys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ Created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/elasticsearch/elasticsearch.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/elasticsearch/elasticsearch.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/kibana/kibana.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/kibana/kibana.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/fleet-server/fleet-server.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/fleet-server/fleet-server.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/apm-server/apm-server.crt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tls_1 &lt;span class="p">|&lt;/span> ⠿ tls/certs/apm-server/apm-server.key
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-elk_tls_1 exited with code &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# scp -r tls/certs root@192.168.1.72:/data/docker-elk/tls/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# scp -r tls/certs root@192.168.1.73:/data/docker-elk/tls/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>將各台服務啟動&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# docker-compose up -d elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# docker-compose up -d elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/docker-elk# docker-compose up -d elasticsearch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/data/docker-elk# docker-compose up -d kibana
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:/data/docker-elk# docker-compose up -d logstash
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:/data/docker-elk# docker-compose up -d logstash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>https://192.168.1.71:9200/&lt;/p>
&lt;p>elasticsearch憑證更換成10年了
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230048.png"
width="544"
height="666"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230048_hu3d834ebb846991f6e64530588d316f89_72864_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230048_hu3d834ebb846991f6e64530588d316f89_72864_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="81"
data-flex-basis="196px"
>&lt;/p>
&lt;p>kibana可以正常登入&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230321.png"
width="963"
height="641"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230321_huccfd83508b5652092b376b9ab70d34c8_48165_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230321_huccfd83508b5652092b376b9ab70d34c8_48165_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="360px"
>&lt;/p>
&lt;p>kibana憑證更換成10年了
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230348.png"
width="544"
height="666"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230348_hu7381ac84c543957ed9ecb5299eedd136_70933_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230348_hu7381ac84c543957ed9ecb5299eedd136_70933_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="81"
data-flex-basis="196px"
>&lt;/p>
&lt;p>資料也有正常進來了，完成更換憑證&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230459.png"
width="1500"
height="994"
srcset="https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230459_hu2112db49c92ffdb9951f6e6149bc8ce8_293959_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/docker-compose-elk-multinodes-cluster/media/Pasted-image-20231024230459_hu2112db49c92ffdb9951f6e6149bc8ce8_293959_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="362px"
>&lt;/p></description></item><item><title>原子習慣 - Summary07 - 〈結語〉讓成果永續的祕訣</title><link>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary07/</link><pubDate>Sun, 22 Oct 2023 14:22:33 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary07/</guid><description>&lt;h2 id="font-colorblue結語讓成果永續的祕訣font">&lt;font color=blue>〈結語〉讓成果永續的祕訣&lt;/font>&lt;/h2>
&lt;p>&lt;font color=red>以下是我從書中提取出來，對我來說，是不錯的句子。
全出自《原子習慣》https://readmoo.com/book/210109063000101&lt;/font>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>有個被稱為「堆垛悖論」的古希臘寓言，講述一個小行為被重複足夠多次之後所能產生的影響。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>同樣的道理也適用於原子習慣。一個小改變可以顛覆你的人生嗎？你不太可能給出肯定的答案。但假如你再做了一個小改變呢？再一個呢？再一個呢？到了某個時間點，你不得不承認自己的人生被一個小改變顛覆了。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>有時你很難記住某個習慣，就需要「讓提示顯而易見」；有時你會缺乏起頭的動力，就需要「讓習慣有吸引力」；許多時候，你也許會覺得某個習慣太過困難，就需要「讓行動輕而易舉」；有時候，你不想堅持下去，就需要「讓獎賞令人滿足」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一輪又一輪，持續尋找讓你獲得百分之一的進步的下一個方法。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>小習慣不只會累積，還有複利效應&lt;/p>
&lt;/li>
&lt;li>
&lt;p>這就是原子習慣的力量：微小改變，非凡成果。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary07/media/Pasted-image-20231022142624.png"
width="1320"
height="514"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary07/media/Pasted-image-20231022142624_hu150469fb84eb759b513ca0bf0e343ea8_217509_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary07/media/Pasted-image-20231022142624_hu150469fb84eb759b513ca0bf0e343ea8_217509_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="256"
data-flex-basis="616px"
>&lt;/p></description></item><item><title>原子習慣 - Summary06 - |進階策略| 如何從「A」到「A+」</title><link>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary06/</link><pubDate>Sun, 22 Oct 2023 13:54:20 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary06/</guid><description>&lt;h2 id="font-colorblue進階策略-如何從a到afont">&lt;font color=blue>|進階策略| 如何從「A」到「A+」&lt;/font>&lt;/h2>
&lt;p>&lt;font color=red>以下是我從書中提取出來，對我來說，是不錯的句子。
全出自《原子習慣》https://readmoo.com/book/210109063000101&lt;/font>&lt;/p>
&lt;h2 id="18-基因如何影響習慣的養成">18. 基因如何影響習慣的養成&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>讓成功機率最大化的祕訣就是選對戰場，這個道理適用於運動與商業，也適用於習慣的改變。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>基因無法被輕易改變，這代表它們會在有利的條件下提供強大的優勢，也會在不利的環境中帶來嚴重的劣勢。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>簡言之，基因決定的不是你的命運，而是你在哪個領域會有機會。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>蓋伯．麥特醫師所言：「基因能預先決定傾向，但不能預先決定命運。」&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="性格如何影響習慣">「性格如何影響習慣」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>最有科學根據的分析被稱為「五大人格特質」，它將性格特質分解為五種行為光譜。&lt;/p>
&lt;ul>
&lt;li>1.經驗開放性：一端是好奇且具創造力，另一端是謹慎而堅守例行公事。&lt;/li>
&lt;li>2.嚴謹性：一端是有條理、有效率，另一端是隨和、隨性。&lt;/li>
&lt;li>3.外向性：一端是外向、有活力，另一端是孤僻、保守（就是常聽到的外向者與內向者）。&lt;/li>
&lt;li>4.友善性：一端是親切、有憐憫心，另一端是疏離、慣於質疑。&lt;/li>
&lt;li>5.神經質：一端是焦慮、敏感，另一端是自信、冷靜、情緒穩定。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>重點是，你應該配合性格打造習慣。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>選擇最適合你的習慣，而不是最受歡迎的習慣。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>每個習慣都有一個可以為你帶來喜悅與滿足的版本，把它找出來。若要長久維持，習慣必須讓人覺得愉快、享受，這是行為改變第四法則背後的核心概念。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="如何找到對自己有利的賽場">「如何找到對自己有利的賽場」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>選到正確的習慣，進步就很簡單；選到錯誤的習慣，人生就充滿掙扎、搏鬥。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>最普遍的做法是「試誤」。當然，這項策略有個問題：人生苦短。你沒有時間去嘗試每一種職業、去跟每個中意的單身對象約會，或是練習每一種樂器。幸好，有個方法可以解決這個難題──一個被稱為「開發與善用權衡」的妙法。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>長久下來，最有效的做法也許是將百分之八十到九十的時間投注於帶來最佳結果的策略上，然後用剩餘的百分之十到二十的時間繼續開發、探索。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在開發、探索不同選項時，可以問自己幾個問題，以持續縮小最能滿足自己的習慣與領域的範圍。&lt;/p>
&lt;ul>
&lt;li>什麼事情對別人來說是勞苦，對我來說卻是樂趣？&lt;/li>
&lt;li>什麼事情讓我忘記時間？&lt;/li>
&lt;li>什麼事情讓我比一般人得到更多報償？&lt;/li>
&lt;li>什麼事情對我來說是自然而然的？&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>倘若無法找到對你有利的賽場，就自己創造一個吧。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>當你無法靠著「更好」來贏，可以憑藉「不同」勝出。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>滾水會讓馬鈴薯變軟，但會讓雞蛋變硬。你無法控制自己生來是顆馬鈴薯或雞蛋，但你可以決定要比硬，還是比軟。若能找到比較有利的環境，就能翻轉原本對你不利的條件。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="如何善用你的基因">「如何善用你的基因」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>基因不會消除努力的必要，而是讓努力的方向變清楚。基因告訴我們要努力去做什麼。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>人們太執著於自己「有極限」這件事，以致很少真正盡力去接近那些極限。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>總之，要確保習慣可以長期為你帶來滿足感，最好的方法之一，就是選擇符合你性格與能力的行為。在對自己來說輕而易舉的事情上努力就對了。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>讓成功機率最大化的祕訣，就是選對戰場。&lt;/li>
&lt;li>選到正確的習慣，進步就很簡單；選到錯誤的習慣，人生就充滿掙扎、搏鬥。&lt;/li>
&lt;li>基因無法被輕易改變，這代表它們會在有利的條件下提供強大的優勢，也會在不利的環境中帶來嚴重的劣勢。&lt;/li>
&lt;li>符合你天生的能力時，習慣比較容易執行。請選擇最適合自己的習慣。&lt;/li>
&lt;li>選擇對自身強項有利的賽場。如果找不到，就自己創造一個。&lt;/li>
&lt;li>基因不會消除努力的必要，而是讓努力的方向變清楚。基因告訴我們要努力去做「什麼」。&lt;/li>
&lt;/ul>
&lt;h2 id="19-金髮女孩原則如何在生活與工作中維持動力">19. 金髮女孩原則：如何在生活與工作中維持動力&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>如他所言：「十年學習，四年精進，四年紅透半邊天。」&lt;/p>
&lt;/li>
&lt;li>
&lt;p>目前眾人最一致的發現是：維持動力並達到欲望最高點的關鍵，就是執行「難度恰到好處」的任務。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>根據金髮女孩原則，當執行的任務恰好位在當下能力的邊緣，人便會感受到最高程度的動力。不要太難，也不要太簡單，恰到好處就對了。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>然而，一旦建立習慣，重要的是持續產生微小的進步。這些小進步與新的挑戰可以讓你保持投入，若恰好擊中「金髮女孩區」，就能進入「心流狀態」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>而在自我精進的征途上，無聊可能是大魔王。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary06/media/Pasted-image-20231022140628.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary06/media/Pasted-image-20231022140628_hu9f07f2f13a8a05f15ca26d34e94c8bfa_217882_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary06/media/Pasted-image-20231022140628_hu9f07f2f13a8a05f15ca26d34e94c8bfa_217882_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;h3 id="如何在感到無聊時保持專注">「如何在感到無聊時保持專注」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>他提到幾個意料之中的因素：基因、運氣、天賦。不過，他接著丟出一個我沒料到的答案：「到了某個時間點，一切都歸結到誰能處理每天訓練的無聊，一次又一次，反覆做著相同的舉重動作。」&lt;/p>
&lt;/li>
&lt;li>
&lt;p>但這位教練的意思是，真正成功的人也會跟一般人一樣覺得沒有動力，差別在於，儘管覺得厭倦、無聊，他們還是設法繼續。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>成功最大的威脅不是失敗，而是無聊。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>變動獎賞不會創造渴望──也就是說，你不能拿一個人們不感興趣的獎賞，以變動的間隔給他們，然後希望這個獎賞可以讓他們改變主意──但對於強化我們原本就有的渴望非常有效，因為變動獎賞能夠減低無聊。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>欲望的甜蜜點出現在成功與失敗的機率各半之時。一半的時間，你得償所願；另一半的時間，你求之不得。你需要恰好足夠的「勝利」來體驗滿足感，也需要恰好足夠的「想要」來感受欲望。這是遵循金髮女孩原則的好處之一。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>不管有沒有變動獎賞，任何習慣都無法永遠保持有趣。在自我精進的旅途上，到了某個時間點，每個人都會面對同樣的挑戰：你必須愛上無聊。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>專業人士堅守既定行程，業餘者接受生活的干擾；專業人士知道什麼事情對自己最重要，帶著決心奮力向前，業餘者則讓生活中的緊急事件拽離正軌。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>反覆做著一模一樣的事，卻無止境地感受到趣味，就是成就卓越的不二法門。你必須愛上無聊。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-1">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>根據金髮女孩原則，當執行的任務恰好位在當下能力的邊緣，人便會感受到最高程度的動力。&lt;/li>
&lt;li>成功最大的威脅不是失敗，而是無聊。&lt;/li>
&lt;li>當習慣變成例行公事，就會變得比較不有趣、比較不令人滿足。我們會無聊。&lt;/li>
&lt;li>動力滿滿時，每個人都能努力打拚。在工作不令人興奮時繼續努力，這種能力才是造就差異的關鍵。&lt;/li>
&lt;li>專業人士堅守既定行程，業餘者接受生活的干擾。&lt;/li>
&lt;/ul>
&lt;h2 id="20-建立好習慣的壞處">20. 建立好習慣的壞處&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>當你可以不假思索地把事情做得「夠好」，就不會去思考要怎麼樣才能做得「更好」。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>事實上，某些研究顯示，一旦精通某項技巧，隨著時間過去，表現反而會有些微退步。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>追求精通，習慣是必要的，但只有習慣並不夠，你需要的是自動化習慣與刻意練習的組合。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>習慣＋刻意練習＝精通&lt;/p>
&lt;/li>
&lt;li>
&lt;p>精通是一個過程，你在此過程中將焦點鎖定在成功的一個微小元素，不斷重複該技能，直到將其內化，然後以這個新習慣為基礎，往個人發展的下一個疆界前進。第二次執行時，舊任務變得比較容易，但整體難度並沒有下降，因為現在你要把能量投入下一個挑戰中。每個習慣都為更高層次的表現解鎖，這是個無止境的循環。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary06/media/Pasted-image-20231022141049.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary06/media/Pasted-image-20231022141049_hucaa1e110f8c256ee028bd499889fcf47_226364_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary06/media/Pasted-image-20231022141049_hucaa1e110f8c256ee028bd499889fcf47_226364_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>開始覺得自己已精通一項技能──事情變得自動化，讓你應付自如──的那個瞬間更須小心，不要踏入自滿的陷阱。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>解決辦法？建立一套反省與複查的系統。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="如何複查習慣並做出調整">「如何複查習慣並做出調整」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>隔年，萊里帶領球隊再次奪冠，湖人隊成為ＮＢＡ二十年來第一支完成二連霸的隊伍。後來，他如此說道：「對任何事業而言，維持努力都是最重要的。成功之道就是學會用正確的方法做事，然後每一次都用同樣的方法做。」&lt;/p>
&lt;/li>
&lt;li>
&lt;p>改善不只關乎學習習慣，還關乎微調習慣。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>我個人主要運用的反省與複查模式有兩種。每年十二月，我會進行一次「年度審核」，反思過去的一年。我為那年的習慣打分數的方式，是計算自己發表了多少篇文章、健身了多少回、造訪了多少個新地方等等。接著，我透過回答以下三個問題，來反思自己的進步（或缺乏進步）：&lt;/p>
&lt;ul>
&lt;li>1.今年什麼事情很順利？&lt;/li>
&lt;li>2.今年什麼事情不順利？&lt;/li>
&lt;li>3.我從中學到什麼？&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>六個月後，當夏季到來，我會進行「誠實報告」。跟每個人一樣，我會犯許多錯，而我的誠實報告讓我明白哪裡出錯，激勵我重回正軌。我運用這段時間重新審視自己的核心價值觀，思考自己是否有依照這些價值觀行事。我會思索自己的身分認同，看看應該如何努力成為自己想要成為的那種人。在每年的誠實報告中，我會問自己三個問題：&lt;/p>
&lt;ul>
&lt;li>1.驅動我的生活與工作的核心價值觀為何？&lt;/li>
&lt;li>2.我現在如何誠實地生活與工作？&lt;/li>
&lt;li>3.未來如何設定更高的標準？&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>最後，反省與複查提供了一段理想的時間，讓我們重新檢視行為改變最重要的一個面向：身分認同。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="如何破除妨礙你前進的信念">「如何破除妨礙你前進的信念」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>解決方法之一，就是不要讓身分的任何單一面向決定你是誰。套句投資專家保羅．葛拉罕的話：「讓你的身分保持渺小。」愈是讓單一信念定義自己，愈無法適應生命的挑戰。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>要減輕身分喪失造成的影響，關鍵就是重新定義自己。如此一來，才能在特定角色改變時，仍保住你身分認同的重要面向。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>萬物皆無常，生命一直在改變，所以必須定期檢視舊有的習慣與信念是否仍然對自己有用。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>缺乏自我覺察是毒藥，反省與複查則是解藥。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-2">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>習慣的好處在於讓我們可以不經思考行事，壞處則在於讓我們不再注意到微小的失誤。&lt;/li>
&lt;li>習慣＋刻意練習＝精通&lt;/li>
&lt;li>反省與複查是一個讓你對自身表現長久保持覺察的過程。&lt;/li>
&lt;li>愈是緊抓一個身分認同不放，愈難讓自己超越這個身分成長。&lt;/li>
&lt;/ul></description></item><item><title>原子習慣 - Summary05 - |法則4| 讓獎賞令人滿足</title><link>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary05/</link><pubDate>Sun, 22 Oct 2023 13:51:44 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary05/</guid><description>&lt;h2 id="font-colorblue法則4-讓獎賞令人滿足font">&lt;font color=blue>|法則4| 讓獎賞令人滿足&lt;/font>&lt;/h2>
&lt;p>&lt;font color=red>以下是我從書中提取出來，對我來說，是不錯的句子。
全出自《原子習慣》https://readmoo.com/book/210109063000101&lt;/font>&lt;/p>
&lt;h2 id="15-行為改變的基本原則">15. 行為改變的基本原則&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>這十分有力地證明了行為改變第四法則：讓獎賞令人滿足。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>這些故事證明了行為改變的基本原則：帶來獎賞的行為會被重複，帶來懲罰的行為會被避免。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>行為改變的前三條法則──讓提示顯而易見、讓習慣有吸引力、讓行動輕而易舉──增加了我們這一次執行某個行為的機率。行為改變的第四條法則──讓獎賞令人滿足──則增加我們下一次重複該行為的可能性。習慣迴路就這樣完成了。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="立即獎賞與延遲獎賞之間的不一致">「立即獎賞與延遲獎賞之間的不一致」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>當立即的結果讓人喜歡，後來的結果就會帶來災難，反之亦然──幾乎總是如此……一個習慣最初結的果實愈甜美，後來的果實往往愈苦澀。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一般來說，一個行為讓你得到愈多立即的愉悅，你應該愈強烈地質疑該行為與自己的長遠目標是否一致。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>帶來立即獎賞的行為會被重複，帶來立即懲罰的行為會被避免。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>最好的辦法就是為長遠有益的習慣添加一些立即的愉悅，為長遠無益的習慣增添一些立即的痛苦。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="如何把立即滿足變得對你有利">「如何把「立即滿足」變得對你有利」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>維持一項習慣的關鍵重點是「成功」的感受，就算只是小規模。成功的感受讓你知道該習慣有所回報，努力是值得的。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>強化法則把習慣跟立即的獎賞綁在一起，讓你在結束時感到滿足。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>不過，證據的累積與新身分認同的出現都需要時間。在等待長期獎賞出現時，立即的強化能幫助你在短期內保持動機。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>行為改變第四法則，是「讓獎賞令人滿足」。&lt;/li>
&lt;li>當經驗令人滿足，我們比較有可能重複一項行為。&lt;/li>
&lt;li>人類的大腦演化為優先考慮立即的獎賞，而不是延遲的獎賞。&lt;/li>
&lt;li>行為改變的基本原則：帶來立即獎賞的行為會被重複，帶來立即懲罰的行為會被避免。&lt;/li>
&lt;li>維持一項習慣的關鍵重點是「成功」的感受──就算只是小規模。&lt;/li>
&lt;li>行為改變的前三條法則──讓提示顯而易見、讓習慣有吸引力、讓行動輕而易舉──增加了我們這一次執行某個行為的機率。行為改變的第四條法則──讓獎賞令人滿足──則增加我們下一次重複該行為的可能性。&lt;/li>
&lt;/ul>
&lt;h2 id="16-如何每天堅持好習慣">16. 如何每天堅持好習慣&lt;/h2>
&lt;ul>
&lt;li>進步令人滿足，視覺上的測量──例如移動迴紋針、髮夾或彈珠──則提供了你有所進步的清楚證據。&lt;/li>
&lt;/ul>
&lt;h3 id="習慣追蹤幫助你維持習慣">「習慣追蹤幫助你維持習慣」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>「不要中斷連續紀錄」是個強大的咒語。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>習慣追蹤的力量很強大，因為用上了好幾條行為改變法則：它同時讓一項行為顯而易見、有吸引力，且令人滿足。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h4 id="好處一習慣追蹤顯而易見">「好處一習慣追蹤顯而易見」&lt;/h4>
&lt;h4 id="好處二習慣追蹤有吸引力">「好處二習慣追蹤有吸引力」&lt;/h4>
&lt;h4 id="好處三習慣追蹤令人滿足">「好處三習慣追蹤令人滿足」&lt;/h4>
&lt;p>習慣堆疊加習慣追蹤的公式是：&lt;/p>
&lt;ul>
&lt;li>做完〔目前的習慣〕之後，我會〔追蹤該習慣〕。&lt;/li>
&lt;/ul>
&lt;h3 id="如何在習慣中斷之後快速回復">「如何在習慣中斷之後快速回復」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>每當這種情況發生，我就會提醒自己守住一個簡單的原則：不要錯過兩次。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如果錯過一天，我會盡快重回正軌。錯過一次健身難免，但我不會允許自己連續錯過兩次&lt;/p>
&lt;/li>
&lt;li>
&lt;p>毀掉你的永遠不會是第一個錯誤，而是後續接連發生的一錯再錯。錯過一次是意外，錯過兩次就是另一項習慣的開始。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如查理．蒙格所言：「複利的首要原則：非必要，別中斷。」&lt;/p>
&lt;/li>
&lt;li>
&lt;p>動力滿滿的時候去鍛鍊很容易，但不想做的時候還是去做，才是最重要的──就算做的比希望的少。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="弄清楚何時應該及何時不該追蹤一項習慣">「弄清楚何時應該（及何時不該）追蹤一項習慣」&lt;/h3>
&lt;ul>
&lt;li>古德哈特定律，因經濟學家查爾斯．古德哈特而得名。此定律指出：「當測量成了目標，就不再是個好的測量方式。」測量只有在引導你、助你看清全局，而不是消耗你心神的時候，才對你有用。&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-1">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>最令人感到滿足的感覺之一，就是進步的感覺。&lt;/li>
&lt;li>習慣追蹤器是測量自己有沒有執行某項習慣的簡單方式──例如在日曆上打一個勾。&lt;/li>
&lt;li>藉由提供進步的清楚證據，習慣追蹤器與其他視覺化的測量方式可以讓習慣變得令人滿足。&lt;/li>
&lt;li>不要中斷連續紀錄，試著讓連續執行習慣的紀錄延續下去。&lt;/li>
&lt;li>不要錯過兩次。如果錯過一天，就盡快回歸正軌。&lt;/li>
&lt;li>可以測量一樣事物，不代表那就是最重要的東西。&lt;/li>
&lt;/ul>
&lt;h2 id="17-問責夥伴作用大">17. 問責夥伴作用大&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>在討論行為改變第四法則的過程中，我們談到讓好習慣帶來立即滿足感的重要性。費雪的提議則是第四法則的反轉：讓後果立即令人不滿。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>痛苦是效能卓越的老師。當失敗令人痛苦，就會被修正；反之，當失敗比較不令人痛苦，往往會被無視。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>我們之所以重複惡習，是因為它們在某方面對我們有用，這讓惡習變得難以擺脫。就我所知，克服這個困境最好的方法，就是加快與該行為相關的懲罰到來的速度。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一般來說，後果愈切身、有形、具體、立即，愈有可能對個人行為產生影響；後果愈遙遠、無形、抽象、延遲，對個人行為產生影響的可能性愈低。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="習慣契約讓違背承諾變成公開且令人痛苦的事">「習慣契約讓違背承諾變成公開且令人痛苦的事」&lt;/h3>
&lt;ul>
&lt;li>要讓壞習慣令人不滿，最好的選擇就是讓它們在當下令人痛苦，而習慣契約正是為此而生的簡單做法。&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-2">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>行為改變第四法則的反轉，就是「讓後果令人不滿」。&lt;/li>
&lt;li>我們比較不可能重複會令人不滿或痛苦的壞習慣。&lt;/li>
&lt;li>問責夥伴能為「不作為」創造立即的代價。我們深深在乎他人如何看待自己，不希望別人對我們抱持較差的評價。&lt;/li>
&lt;li>習慣契約可以被用來為任何行為添加社會代價，它讓違背承諾變成一件公開且令人痛苦的事。&lt;/li>
&lt;li>知道有人在看著，會是個強大的動力。&lt;/li>
&lt;/ul></description></item><item><title>原子習慣 - Summary04 - |法則3| 讓行動輕而易舉</title><link>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/</link><pubDate>Sun, 22 Oct 2023 13:49:28 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/</guid><description>&lt;h2 id="font-colorblue法則3-讓行動輕而易舉font">&lt;font color=blue>|法則3| 讓行動輕而易舉&lt;/font>&lt;/h2>
&lt;p>&lt;font color=red>以下是我從書中提取出來，對我來說，是不錯的句子。
全出自《原子習慣》https://readmoo.com/book/210109063000101&lt;/font>&lt;/p>
&lt;h2 id="11-精通習慣由重複開始">11. 精通習慣由重複開始&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>嘗試找到改變的最佳計畫，往往讓人綁手綁腳：最快速的減重法、最棒的健身方式、開創副業的完美想法。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>這就是你一直處於啟動狀態，卻從不採取行動的最大原因：你想要延後失敗。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>當準備成了一種拖延，你就必須做出改變。你不會只想計畫，你要的是實行。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>想要精通一項習慣，關鍵是由重複開始，而非完美。你不必詳細列出新習慣的所有特徵，只要開始實行就好了。這就是行為改變第三法則的第一個重點：開始重複實行就對了。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="習慣的養成取決於頻率而非時間">「習慣的養成取決於頻率，而非時間」&lt;/h3>
&lt;ul>
&lt;li>每一次重複都強化了細胞間的信號傳遞，神經連結變得緊密。神經心理學家唐諾．海伯於一九四九年首次提出這個現象，所以它通常被稱作海伯定律：「同步發射的神經元會連結在一起。」&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020210556.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020210556_hu2075af17841b37d2e6abea14d25198f9_241422_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020210556_hu2075af17841b37d2e6abea14d25198f9_241422_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;ul>
&lt;li>習慣的養成取決於頻率，而非時間。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020210629.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020210629_huf86b6e8fcce1d9145af73843d7fe2cd4_237858_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020210629_huf86b6e8fcce1d9145af73843d7fe2cd4_237858_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>我最常聽到的一個問題是：「要花多久才能建立一項新習慣？」但大家真正應該問的是：「要花多少次才能建立一項新習慣？」&lt;/p>
&lt;/li>
&lt;li>
&lt;p>要養成一項習慣，就必須去實踐；而讓實踐發生最有效的方法，就是遵守行為改變第三法則：讓行動輕而易舉。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>行為改變第三法則，是「讓行動輕而易舉」。&lt;/li>
&lt;li>最有效的學習形式是實行，而非計畫。&lt;/li>
&lt;li>把重點放在行動，而非啟動。&lt;/li>
&lt;li>在習慣養成的過程中，透過不斷重複，一個行為漸漸變得自動化。&lt;/li>
&lt;li>執行一項習慣的時間長短，不如執行該習慣的次數多寡重要。&lt;/li>
&lt;/ul>
&lt;h2 id="12-最小努力原則">12. 最小努力原則&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020210832.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020210832_hu02f2b6468db4bf315b67b7c47558494a_390469_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020210832_hu02f2b6468db4bf315b67b7c47558494a_390469_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>而一項習慣所需的能量愈少，養成的可能性愈高。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>因此，讓習慣簡單到就算沒有意願也會執行至關重要。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>「讓行動輕而易舉」背後的概念並非叫你只做容易的事，而是要你盡可能讓「做那些長期下來會有回報的事」這個行動變得不費力。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="如何用更少力氣成就更多">「如何用更少力氣成就更多」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>與其試著克服生活中的阻力，不如將其減少。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>減少與習慣相關的阻力，最有效的方法之一就是環境設計。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>日本公司強調所謂的『精實生產』，不懈地在生產過程中移除各種浪費，包括重新設計工作空間，讓員工不必浪費時間轉身拿取工具。結果就是，日本工廠比美國的更有效率，日本製的產品也比美國製的更可靠。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>核心概念就是創造出一個讓正確的事情盡可能輕而易舉的環境。習慣打造的關鍵多半歸結到設法減少與好習慣相關的阻力，增加與壞習慣相關的麻煩。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="為了以後方便把環境準備好">「為了以後方便，把環境準備好」&lt;/h3>
&lt;ul>
&lt;li>我們都應該問自己：「如何設計一個讓做正確的事變得容易的世界？」請重新設計你的生活，讓最重要的事做起來最簡單。&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-1">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>人類行為遵循最小努力原則，我們自然會被花費最少力氣的選項吸引。&lt;/li>
&lt;li>創造一個讓正確的事情盡可能容易執行的環境。&lt;/li>
&lt;li>減少與好習慣相關的阻力。阻力一少，養成習慣就簡單了。&lt;/li>
&lt;li>增加與壞習慣相關的阻力。阻力一多，養成習慣就困難了。&lt;/li>
&lt;li>把環境準備好，讓未來的行動容易執行。&lt;/li>
&lt;/ul>
&lt;h2 id="13-如何運用兩分鐘法則停止拖延">13. 如何運用「兩分鐘法則」停止拖延&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>只要踏出第一步，接下來的每一件事──開車去健身房、決定要做哪些運動、站到槓鈴底下──都變得輕而易舉。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>每一天總有幾個這樣的瞬間，會在之後帶來巨大的影響。我把這些小選擇稱為「決定性瞬間」&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211226.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211226_hud8d34e049bb437916912c7df639fb97e_271853_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211226_hud8d34e049bb437916912c7df639fb97e_271853_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;h3 id="兩分鐘法則">「兩分鐘法則」&lt;/h3>
&lt;ul>
&lt;li>新習慣不該讓你覺得像是一種挑戰，接下來的行動可以有挑戰性，但開頭的兩分鐘應該輕而易舉。你需要的是可以自然引導你走上比較有成效的路的「入門習慣」。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211334.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211334_hu1c5657b8a5c5d6a9bf6c209407964beb_504631_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211334_hu1c5657b8a5c5d6a9bf6c209407964beb_504631_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>但重點不是做一件事，而是掌握「起頭」的習慣。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>對某些人來說，兩分鐘法則看起來可能像個花招。明知道真正的目標是在兩分鐘之後持續進行，運用兩分鐘法則好像在騙自己。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>其實，祕訣就是在覺得費力之前停止。英國一位領導力顧問葛瑞格．麥基昂就靠著特意寫得比自己想要的少，來養成每天寫日記的習慣。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>他說：「最棒的方式就是見好就收。」&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211524.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211524_hua5f92fbdbdd5798209ac0deef7549dfc_413742_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211524_hua5f92fbdbdd5798209ac0deef7549dfc_413742_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;ul>
&lt;li>每當你覺得很難堅持某個習慣時，就運用兩分鐘法則吧。這是讓習慣變得輕而易舉的簡單方法。&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-2">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>習慣可以在幾秒內完成，卻會持續影響你幾分鐘、甚至幾小時後的行為。&lt;/li>
&lt;li>許多習慣都發生在決定性瞬間。所謂決定性瞬間就是如同岔路般的種種選擇，可以讓你踏上成果豐碩的一日，也可以讓你踏上一事無成的一天。&lt;/li>
&lt;li>兩分鐘法則就是：新習慣的開始應該要花不到兩分鐘。&lt;/li>
&lt;li>愈是把一個過程的開頭儀式化，愈有可能進入成就大事所需的高度專注狀態。&lt;/li>
&lt;li>要先標準化，才能最佳化。你無法改善不存在的習慣。&lt;/li>
&lt;/ul>
&lt;h2 id="14-如何讓好習慣變得無可避免讓壞習慣不可能發生">14. 如何讓好習慣變得無可避免，讓壞習慣不可能發生&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>這是行為改變第三法則的反轉：讓行動困難無比。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>承諾機制是用當下做的選擇來控制未來的行為。這是鎖定未來行為，把你跟好習慣綁在一起，並讓你遠離惡習的一個方法。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>關鍵在於改變任務，讓違背好習慣比開始執行好習慣更花力氣。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="如何讓習慣自動化從此不假思索便能執行">「如何讓習慣自動化，從此不假思索便能執行」&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211736.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211736_hu95dc12a8d131cd6baa7920535916612c_406415_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211736_hu95dc12a8d131cd6baa7920535916612c_406415_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>數學家兼哲學家懷海德曾經寫道：「讓可以不假思索執行的事情變多，就是文明進步的基礎。」&lt;/p>
&lt;/li>
&lt;li>
&lt;p>透過運用承諾機制、策略性的一次性選擇，以及科技，你可以打造一個充滿必然性的環境──在這個空間裡，好習慣不再只是你希望的結果，而是幾乎保證會發生的結果。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-3">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>行為改變第三法則的反轉，就是「讓行動困難無比」。&lt;/li>
&lt;li>承諾機制就是用當下做的選擇來鎖定未來比較好的行為。&lt;/li>
&lt;li>鎖定未來行為的終極之道，是將習慣自動化。&lt;/li>
&lt;li>一次性選擇──例如購買更好的床墊或註冊自動儲蓄計畫──是能讓未來的習慣自動化，而且其回報會隨著時間增加的單一行為。&lt;/li>
&lt;li>要確保採取正確的行動，使用科技來讓習慣自動化是最可靠且有效的方法。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211908.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211908_hu4425f408faf42e672def01eb26591f9c_248655_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211908_hu4425f408faf42e672def01eb26591f9c_248655_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211925.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211925_hu40a9c9a65fa603fde6c8daff505a350f_131273_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary04/media/Pasted-image-20231020211925_hu40a9c9a65fa603fde6c8daff505a350f_131273_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p></description></item><item><title>原子習慣 - Summary03 - |法則2| 讓習慣有吸引力</title><link>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary03/</link><pubDate>Sun, 22 Oct 2023 13:44:07 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary03/</guid><description>&lt;h2 id="font-colorblue法則2-讓習慣有吸引力font">&lt;font color=blue>|法則2| 讓習慣有吸引力&lt;/font>&lt;/h2>
&lt;p>&lt;font color=red>以下是我從書中提取出來，對我來說，是不錯的句子。
全出自《原子習慣》https://readmoo.com/book/210109063000101&lt;/font>&lt;/p>
&lt;h2 id="８-如何讓習慣變得難以抗拒">８. 如何讓習慣變得難以抗拒&lt;/h2>
&lt;ul>
&lt;li>現代食品工業及其造成的飲食過量習慣，恰恰驗證了行為改變的第二條法則：讓習慣有吸引力。一個機會愈有吸引力，形成習慣的可能性愈大。&lt;/li>
&lt;/ul>
&lt;h3 id="多巴胺驅動的回饋迴路">「多巴胺驅動的回饋迴路」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>縱使多巴胺被阻斷，牠們還是跟以前一樣喜歡糖，只是不再想要了。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>習慣就是多巴胺驅動的回饋迴路。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>論及習慣，關鍵重點是：大腦不只在你體驗愉悅時分泌&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary03/media/Pasted-image-20231017001334.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary03/media/Pasted-image-20231017001334_hub5ebc455f8cbbfabc208dbfa62fdb1ee_460382_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary03/media/Pasted-image-20231017001334_hub5ebc455f8cbbfabc208dbfa62fdb1ee_460382_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;ul>
&lt;li>你的大腦分配給想要獎賞的神經迴路，遠比分配給喜歡獎賞的要多。&lt;/li>
&lt;/ul>
&lt;h3 id="如何運用誘惑綑綁讓習慣更有吸引力">「如何運用誘惑綑綁，讓習慣更有吸引力」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>誘惑綑綁的運作方式，就是把想要做的事跟必須做的事綁在一起。以拜恩為例，他把看 Netflix（想要做的事）跟踩健身自行車（必須做的事）綁在一起了。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>誘惑綑綁是心理學理論「普氏原則」的一種應用。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>「較高可能性的行為會強化較低可能性的行為」；換句話說，就算你不是真的想要處理延誤的工作郵件，如果它意味著你可以在過程中做某件你真正想做的事，你就會訓練自己去做。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>習慣堆疊加誘惑綑綁的公式如下：&lt;/p>
&lt;ul>
&lt;li>1.做完〔目前的習慣〕之後，我會執行〔我需要的習慣〕。&lt;/li>
&lt;li>2.做完〔我需要的習慣〕之後，我會執行〔我想要的習慣〕。&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>行為改變第二法則，是「讓習慣有吸引力」。&lt;/li>
&lt;li>一個機會愈有吸引力，愈有可能形成習慣。&lt;/li>
&lt;li>習慣是多巴胺驅動的回饋迴路。多巴胺升高，行為的動機也隨之提升。&lt;/li>
&lt;li>讓我們採取行動的，是對獎賞的預期，而非獎賞的實現。期待愈大，多巴胺峰值愈高。&lt;/li>
&lt;li>誘惑綑綁是讓習慣更有吸引力的一種方法，這個策略是將「想要」的行為與「需要」的行為配對。&lt;/li>
&lt;/ul>
&lt;h2 id="９-家人與朋友如何形塑你的習慣">９. 家人與朋友如何形塑你的習慣&lt;/h2>
&lt;ul>
&lt;li>他的格言是：「天才不是生出來的，而是教育與訓練出來的。」&lt;/li>
&lt;/ul>
&lt;h3 id="社會常規的誘人拉力">「社會常規的誘人拉力」&lt;/h3>
&lt;ul>
&lt;li>達爾文指出的：「在人類漫長的歷史中，學會合作且最能臨機應變的人總會取得優勢。」&lt;/li>
&lt;/ul>
&lt;p>我們尤其會模仿三種群體的習慣：&lt;/p>
&lt;ul>
&lt;li>1.親近的人&lt;/li>
&lt;li>2.多數的人&lt;/li>
&lt;li>3.有力的人&lt;/li>
&lt;/ul>
&lt;h4 id="1模仿親近的人">「1.模仿親近的人」&lt;/h4>
&lt;ul>
&lt;li>要打造更好的習慣，最有效的方法之一就是加入一個把你想要的行為視作常態的文化之中。&lt;/li>
&lt;/ul>
&lt;h4 id="2模仿多數的人">「2.模仿多數的人」&lt;/h4>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary03/media/Pasted-image-20231017235305.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary03/media/Pasted-image-20231017235305_hu4e7daf2ac3485e78e6630a35dbc01198_229559_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary03/media/Pasted-image-20231017235305_hu4e7daf2ac3485e78e6630a35dbc01198_229559_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;ul>
&lt;li>當改變習慣意味著挑戰族群，改變就沒有吸引力；而當改變習慣意味著融入族群，改變就變得很有吸引力了。&lt;/li>
&lt;/ul>
&lt;h4 id="3模仿有力的人">「3.模仿有力的人」&lt;/h4>
&lt;h3 id="本章總覽-1">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>所處文化決定了哪些行為對我們有吸引力。&lt;/li>
&lt;li>我們傾向養成被所處文化誇讚與認可的習慣，因為我們有融入與歸屬於族群的強烈渴望。&lt;/li>
&lt;li>我們往往會模仿三種人：親近的人（家人與朋友）、多數的人（族群），以及有力的人（有地位與聲望的人）。&lt;/li>
&lt;li>打造更好習慣最有效的方式之一，就是加入具備以下兩個特點的文化：一，你想要的行為是常態；二，你跟這個群體本來就有某些共同點。&lt;/li>
&lt;li>族群的常態行為往往會壓過個人想要的行為。大多數時間，我們寧願跟大家一起錯，也不要自己一個人對。&lt;/li>
&lt;li>若一個行為能獲得認可、尊敬與讚美，我們就會覺得那個行為有吸引力。&lt;/li>
&lt;/ul>
&lt;h2 id="10-如何找出並解決壞習慣的成因">10. 如何找出並解決壞習慣的成因&lt;/h2>
&lt;ul>
&lt;li>這就是行為改變第二法則的反轉：讓習慣毫無吸引力。&lt;/li>
&lt;/ul>
&lt;h3 id="採取行動的渴望從何而來">「採取行動的渴望從何而來」&lt;/h3>
&lt;ul>
&lt;li>神經學家安東尼歐．達馬吉歐解釋的：「讓你決定事情是好、是壞，或無關緊要的，就是情緒。」&lt;/li>
&lt;/ul>
&lt;h3 id="如何重新設定大腦讓自己享受困難的習慣">「如何重新設定大腦，讓自己享受困難的習慣」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>重新思考你的習慣，把重點放在益處，而非壞處。這是一個快速而輕鬆的方式，使你重新設定大腦，讓習慣顯得比較有吸引力。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>想要找出並解決壞習慣的成因，關鍵就是重新架構你對它們的聯想。這並不容易，但如果可以重新設定你的預測，就可以把困難的習慣轉變為有吸引力的習慣。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-2">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>行為改變第二法則的反轉，就是「讓習慣毫無吸引力」。&lt;/li>
&lt;li>每個行為都有表層的渴望與深層的潛在動機。&lt;/li>
&lt;li>習慣是古老欲望的現代解決方案。&lt;/li>
&lt;li>習慣的成因，其實就是行為發生前的預測。預測帶來感覺。&lt;/li>
&lt;li>強調避免某個壞習慣的益處，會讓它顯得沒有吸引力。&lt;/li>
&lt;li>與正面感受產生連結，習慣就有吸引力；與負面感受產生連結，習慣就沒有吸引力。創造一個動機儀式：在執行困難的習慣之前，做一件你很享受的事。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary03/media/Pasted-image-20231017235749.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary03/media/Pasted-image-20231017235749_hu7752d5c3d3ed63fc5cecc37be2966cf9_225054_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary03/media/Pasted-image-20231017235749_hu7752d5c3d3ed63fc5cecc37be2966cf9_225054_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p></description></item><item><title>原子習慣 - Summary02 - |法則1| 讓提示顯而易見</title><link>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary02/</link><pubDate>Sun, 22 Oct 2023 13:39:24 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary02/</guid><description>&lt;h2 id="font-colorblue法則1-讓提示顯而易見font">&lt;font color=blue>|法則1| 讓提示顯而易見&lt;/font>&lt;/h2>
&lt;p>&lt;font color=red>以下是我從書中提取出來，對我來說，是不錯的句子。
全出自《原子習慣》https://readmoo.com/book/210109063000101&lt;/font>&lt;/p>
&lt;h2 id="４-行為改變的過程始於覺察">４. 行為改變的過程始於覺察&lt;/h2>
&lt;ul>
&lt;li>在能夠有效建立新習慣之前，必須先掌握現有的習慣。&lt;/li>
&lt;/ul>
&lt;h3 id="習慣記分卡幫助你覺察自身習慣">「習慣記分卡幫助你覺察自身習慣」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>這套被稱為「指差確認」的程序是被設計來減少錯誤的安全系統&lt;/p>
&lt;/li>
&lt;li>
&lt;p>指差確認減少了百分之八十五的錯誤，並避免了百分之三十的事故。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>指差確認之所以如此有效，就是因為把無意識的習慣拉到有意識的層次。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>對自己實際的作為保持意識、保持覺察，是改變習慣最大的挑戰之一。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>能夠強化你渴望的身分認同的習慣，通常是好習慣；與之相悖的，則通常是壞習慣。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>改變惡習的第一步，就是密切注意它們。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>行為改變的過程始終始於覺察。指差確認與習慣記分卡這類策略的重點，在於讓你認出自己的習慣及觸發這些習慣的提示，這樣你才有可能以對自己有益的方式做出回應。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>只要有足夠的練習，你的大腦就會不假思索地挑出預示某些結果的提示。&lt;/li>
&lt;li>習慣一旦自動化，我們就不會再注意自己所做的事。&lt;/li>
&lt;li>行為改變的過程始終始於覺察。必須先意識到自己的習慣，才能改變它們。&lt;/li>
&lt;li>指差確認」透過開口說出自己的行為，把無意識的習慣拉到有意識的層次。&lt;/li>
&lt;li>你可以運用「習慣記分卡」這個簡單的練習，來增加對自身行為的覺察。&lt;/li>
&lt;/ul>
&lt;h2 id="５-開始一個新習慣最好的方法">５. 開始一個新習慣最好的方法&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>下週，我會於〔某日〕的〔某時〕在〔某處〕進行至少二十分鐘的激烈運動。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>第三組受試者填寫的句子，就是研究人員所謂的「執行意向」，一份你要在何時何處行動的預先計畫；換句話說，就是你打算如何執行某一特定習慣。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>概括地說，執行意向大致是長這樣：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>當Ｘ情境發生時，我就會執行Ｙ回應。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>對何時何地執行一項新習慣做出確切計畫的人，比較可能真的去執行。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>執行意向掃除模糊的概念，像是「我要多運動」或「我要更有生產力」或「我該去投票」，以具體的行動計畫取而代之。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一旦設定執行意向，就不用等靈感來敲門。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>我會於〔時間〕，在〔地點〕進行〔行為〕。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如果不確定要何時開始執行新習慣，試試每年、每月或每週的第一天。人比較可能在這些時間點展開行動，因為比較有充滿希望的感覺。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>當你的夢想太模糊，就很容易整天將小例外合理化，而不去處理成功所需的確切任務。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="徹底修正習慣的習慣堆疊">「徹底修正習慣的「習慣堆疊」」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>狄德羅效應顯示，取得一項新的所有物往往會帶來連鎖消費反應，平添額外的購物。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>建立新習慣最好的方法之一，就是先找出自己目前的每日習慣，然後把新的行為堆疊上去。這就叫作習慣堆疊。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>習慣堆疊的公式如下：&lt;/p>
&lt;ul>
&lt;li>做完〔目前的習慣〕之後，我會執行〔新的習慣〕。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary02/media/Pasted-image-20231014233704.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary02/media/Pasted-image-20231014233704_hu197f61332491f2e8fd2dece644880f2b_289678_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary02/media/Pasted-image-20231014233704_hu197f61332491f2e8fd2dece644880f2b_289678_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>關鍵在於把想要的行為跟每天已經在做的事情綁在一起。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>這讓你得以利用「一個行為導致下一個行為」的慣性──狄德羅效應的正面版本。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>無論你是如何運用這項策略，成功創造習慣堆疊的祕訣，就是找到觸發行為的正確提示。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>行為改變的第一條法則，是「讓提示顯而易見」。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-1">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>行為改變的第一條法則，是「讓提示顯而易見」。&lt;/li>
&lt;li>最常見的兩種提示是時間與地點。&lt;/li>
&lt;li>可以運用執行意向這個策略，將新習慣與確切的時間和地點配對。&lt;/li>
&lt;li>執行意向的公式是：我會於〔時間〕，在〔地點〕進行〔行為〕。&lt;/li>
&lt;li>習慣堆疊的公式是：做完〔目前的習慣〕之後，我會執行〔新的習慣〕。&lt;/li>
&lt;/ul>
&lt;h2 id="６-激勵被高估了環境往往更重要">６. 激勵被高估了，環境往往更重要&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>人們選擇某樣產品，往往不是因為那樣產品是什麼，而是因為產品在哪裡。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>習慣改變取決於你身處的空間，以及眼前的提示。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary02/media/Pasted-image-20231015235136.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary02/media/Pasted-image-20231015235136_hu94744d15d4c639b6417c90959d55e0b9_239341_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary02/media/Pasted-image-20231015235136_hu94744d15d4c639b6417c90959d55e0b9_239341_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>換言之，有時顧客購買產品，不是因為想要，而是因為這些產品被呈現的方式。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>然而，人類所有感覺能力中最強的一項，是視覺。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>因此，所見稍有不同，就可能造成所為的巨大變動。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="如何打造成功養成好習慣的環境">「如何打造成功養成好習慣的環境」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>想要讓習慣成為生活的一大部分，就讓提示成為環境的一大部分。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>不要只當你所處世界的顧客，也要成為它的設計者。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="情境是觸發習慣的提示">「情境是觸發習慣的提示」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>習慣可能不只跟單一提示聯想在一起，而是與圍繞著該行為的整個情境連結。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>定義行為的並非環境中的物品，而是我們與物品的關係。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>不要認為環境中充滿物品，要認為環境中充滿關係。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>情境的力量也透露了一項重要策略：在新環境中比較容易改變習慣。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>我個人覺得很有用的一句口號是：「一個空間，一個用途。」&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如果可以，盡量避免把一個習慣的情境跟另一個習慣的情境混在一起。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>我認識一個作家，他的電腦只用來寫作，平板只用來閱讀，手機只用來上社群媒體與收發訊息。每個習慣都應該有個自己的家。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一個凡事各安其位、各司其職的穩定環境，就是可以輕鬆養成習慣的環境。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-2">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>隨著時間過去，情境的小改變可能造成行為的大變化。&lt;/li>
&lt;li>每個習慣都是被提示觸發的。我們比較容易注意到突出的提示。&lt;/li>
&lt;li>讓環境裡可以觸發好習慣的提示顯而易見。&lt;/li>
&lt;li>漸漸地，你的習慣不是與單一提示聯想在一起，而是與圍繞著該行為的整個情境連結。情境成了提示。&lt;/li>
&lt;li>在新的環境養成新的習慣比較簡單，因為不用對抗舊提示。&lt;/li>
&lt;/ul>
&lt;h2 id="７-自制力的祕密">７. 自制力的祕密&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>「自律者」只是擅長建構生活，好讓自己不需要展現超凡的意志力與自我控制力。換言之，他們不常讓自己處於充滿誘惑的情境。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>最有自制力的，通常是最少用到自制力的人。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>習慣一旦建立，只要環境裡的提示再度出現，行動的渴望便隨之而來。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>研究人員將此現象稱為「提示引起的想望」：一個外在刺激造成了一股想要重複惡習的強迫性渴望。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>直白地說，我不曾看過有誰可以在負面環境裡一直保持正面習慣。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>要剷除一項壞習慣，最實用的方法之一就是減少接觸會激發此惡習的提示。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>這個做法是行為改變第一條法則的反轉：讓提示隱而不現，而非顯而易見。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>自制力是一種短期策略，不適用於長期。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>讓好習慣的提示顯而易見，讓壞習慣的提示隱而不現。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-3">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>行為改變第一法則的反轉，就是「讓提示隱而不現」。&lt;/li>
&lt;li>習慣一旦形成，就很難被遺忘。&lt;/li>
&lt;li>有高度自制力的人不常待在充滿誘惑的環境裡。迴避誘惑比抗拒誘惑簡單。&lt;/li>
&lt;li>要剷除一項壞習慣，最實用的方法之一就是減少接觸會激發此惡習的提示。&lt;/li>
&lt;li>自制力是一種短期策略，不適用於長期。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary02/media/Pasted-image-20231017001200.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary02/media/Pasted-image-20231017001200_huad54d79ee799a08c5b192db82a0deda1_171520_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary02/media/Pasted-image-20231017001200_huad54d79ee799a08c5b192db82a0deda1_171520_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p></description></item><item><title>原子習慣 - Summary01 - |基本原理| 為何細微改變會帶來巨大差異?</title><link>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/</link><pubDate>Sun, 22 Oct 2023 13:31:39 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/</guid><description>&lt;h2 id="font-colorblue基本原理-為何細微改變會帶來巨大差異font">&lt;font color=blue>|基本原理| 為何細微改變會帶來巨大差異?&lt;/font>&lt;/h2>
&lt;p>&lt;font color=red>以下是我從書中提取出來，對我來說，是不錯的句子。
全出自《原子習慣》https://readmoo.com/book/210109063000101&lt;/font>&lt;/p>
&lt;h2 id="前言原子習慣改變了我的人生">〈前言〉原子習慣改變了我的人生&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>我進入丹尼森大學時。那是一個新的開始，也是在那個地方，我初次發現微小習慣的驚人力量。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>只要你願意堅持多年，起初看似微不足道的改變終將像以複利計算一樣利滾利，滾出非比尋常的結果。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>唯一讓我進步的方式──我唯一做的選擇──就是由小做起。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>微小的習慣幫助我發揮自身潛能&lt;/p>
&lt;/li>
&lt;li>
&lt;p>本書的骨幹是我所謂「習慣的四階段模型」──提示、渴望、回應、獎賞&lt;/p>
&lt;/li>
&lt;li>
&lt;p>這本書探討的是不變的部分&lt;/p>
&lt;/li>
&lt;li>
&lt;p>人很容易高估一個決定性瞬間的重要性，也很容易低估每天都做些小改善的價值&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231010191016.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231010191016_hu7aa7f8029627a40e2a800de5130b6b57_316305_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231010191016_hu7aa7f8029627a40e2a800de5130b6b57_316305_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>本書的骨幹是我所謂「習慣的四階段模型」──提示、渴望、回應、獎賞&lt;/p>
&lt;/li>
&lt;li>
&lt;p>這本書探討的是不變的部分&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h2 id="1-原子習慣的驚人力量">1. 原子習慣的驚人力量&lt;/h2>
&lt;h3 id="複利效應讓小習慣造就大不同">「複利效應，讓小習慣造就大不同」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>人很容易高估一個決定性瞬間的重要性，也很容易低估每天都做些小改善的價值&lt;/p>
&lt;/li>
&lt;li>
&lt;p>造就成功的，是日常習慣，而不是千載難逢的轉變。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>好習慣讓時間成為你的盟友，壞習慣讓時間與你為敵。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="建立持久的習慣為何這麼難">「建立持久的習慣為何這麼難？」&lt;/h3>
&lt;ul>
&lt;li>在任何追尋的前期或中期，常常出現所謂的「失望之谷」──你期待有線性進展，但在前幾天、幾週，甚至幾個月，效果都很不顯著，令人感到挫敗。&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231010201349.png"
width="1440"
height="993"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231010201349_hu23bb2b9ff17405015c659f96508fa422_349935_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231010201349_hu23bb2b9ff17405015c659f96508fa422_349935_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="145"
data-flex-basis="348px"
>&lt;/p>
&lt;ul>
&lt;li>強大的成果總是姍姍來遲。&lt;/li>
&lt;/ul>
&lt;h3 id="別管目標專注於系統就好">「別管目標，專注於系統就好」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>目標是你想要達到的成果，而系統是讓你達到那些成果的過程。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>想要更好的成果，就不要管目標了，把焦點放在系統上就好。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>目標有助於確立方向，但系統是進步的最佳解答。如果花太多時間思考目標，卻花太少時間設計系統，會浮現許多問題。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;code>問題一贏家跟輸家擁有同樣的目標&lt;/code>&lt;/p>
&lt;p>&lt;code>問題二目標達成不過是短暫的改變&lt;/code>&lt;/p>
&lt;ul>
&lt;li>目標的達成只能暫時改變你的生活。&lt;/li>
&lt;/ul>
&lt;p>&lt;code>問題三目標限制了你的快樂&lt;/code>&lt;/p>
&lt;ul>
&lt;li>系統優先的心態提供了解藥。當你愛上過程，而非產物，就不必等到獲得自己的許可才能快樂。&lt;/li>
&lt;/ul>
&lt;p>&lt;code>問題四目標與長期進步互相矛盾&lt;/code>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>最後，目標取向的心態可能造成一種「溜溜球效應」。許多跑者連續努力數月，但衝過終點線之後，就停止訓練了。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>到頭來，progress（進步）的必要條件，是對 process（過程）的投入。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="原子習慣的系統">「原子習慣的系統」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>本書的核心主旨之一，就是教你聚焦於整體系統，而非單一目標。這也是「原子」一詞背後較為深層的意義之一。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>原子習慣指的是微小的改變、微不足道的增長、百分之一的改善。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>習慣雖小，力量無窮，這便是「原子習慣」一詞的真義&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>習慣是「自我改善」這件事的複利。每天進步百分之一，長久下來，進境可觀。&lt;/li>
&lt;li>習慣是一把兩面刃，能載舟亦能覆舟，因此了解細節是必要的。&lt;/li>
&lt;li>在跨越關鍵門檻之前，小改變往往看似無足輕重。所有複利過程的強大成果總是遲來，你要有耐性。&lt;/li>
&lt;li>原子習慣是構成大系統的小習慣。如同原子是分子的組成單元，原子習慣是建構非凡成果的元件。&lt;/li>
&lt;li>想要更好的結果，就別管目標設定，而是專注於你的系統。&lt;/li>
&lt;li>決定你成功或失敗的，不是你的目標，而是你的系統。&lt;/li>
&lt;/ul>
&lt;h2 id="２-改變習慣最有效的方法是改變身分認同">２. 改變習慣最有效的方法，是改變身分認同&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>改變習慣之所以如此具有挑戰性，原因有二：一，我們試圖改變的東西不對；二，我們試圖改變習慣的方式不對。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>第一個錯誤是試圖改變的東西不對。要了解我的意思，必須知道改變的發生分成三個層次，你可以想成洋蔥的三層皮。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;code>第一層是改變結果。&lt;/code>&lt;/p>
&lt;p>&lt;code>第二層是改變過程。&lt;/code>&lt;/p>
&lt;p>&lt;code>最深的第三層是改變身分認同。&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012000423.png"
width="1441"
height="908"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012000423_hu5ff5ed4f2daea5590a586b545a1a7e2f_295870_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012000423_hu5ff5ed4f2daea5590a586b545a1a7e2f_295870_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="158"
data-flex-basis="380px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>結果關乎你得到什麼，過程關乎你做了什麼，身分認同則關乎你相信什麼。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>問題在於改變的方向。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>許多人在展開改變習慣的過程時，都把重點放在想要達成什麼。這會將我們引至以結果為基礎的習慣。替代做法是建立以身分認同為基礎的習慣──在這種方式下，我們一開始就把重點放在希望成為什麼樣的人。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012000549.png"
width="1431"
height="912"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012000549_hu6121215a0002f11dca99e4607eaed990_429026_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012000549_hu6121215a0002f11dca99e4607eaed990_429026_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="156"
data-flex-basis="376px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>每個行動系統的背後都是一個信念系統。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>一組信念與假設形塑了系統，習慣背後存在著一個身分認同。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>你也許想要更有錢，但倘若你的身分認同就是個傾向消費而非創造收入的人，你就會一直被吸引去花錢，而不是賺錢&lt;/p>
&lt;/li>
&lt;li>
&lt;p>你也許想要變得更健康，但倘若你繼續把舒適擺在成就之前，你便會選擇放鬆而非訓練&lt;/p>
&lt;/li>
&lt;li>
&lt;p>你有新的目標與新的計畫，但你還沒改變自己是個什麼樣的人。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>內在動機的終極型態，就是讓習慣成為身分認同的一部分。覺得自己是想要這樣的人是一回事，覺得自己就是這樣的人又是另一回事。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>反覆對自己述說同一個故事，多年下來就很容易陷入這個心理慣例，認為它就是事實。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>然而長遠來說，未能維持習慣的真正原因，都是被你的自我形象阻攔。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>想要成為最好的自己，就要持續編輯、修訂自己的信念，升級並拓展你的身分認同。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="改變身分認同的兩個步驟">「改變身分認同的兩個步驟」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>習慣就是身分認同的具體化。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>有愈多證據支持某個信念，你愈會深信不疑。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>我並非一開始就是個作家，而是透過習慣成為一名作家。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>當然，習慣並非影響身分認同的唯一因素，但因為頻率的關係，它們往往是最重要的因素。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>藉由提供新身分的證據，小習慣可以造就有意義的差異；而當一個改變有意義，它實際上就是一個大改變。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>要改變你是什麼樣的人，最實際的方法就是改變你做的事。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;code>1.決定你想要成為什麼樣的人。&lt;/code>&lt;/p>
&lt;p>&lt;code>2.透過生活中的小勝利來向自己證明。&lt;/code>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>以身分認同為基礎的習慣這個概念是一塊敲門磚，引出本書另一個關鍵主題：回饋迴路。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>焦點永遠都要放在成為某一種人，而非得到某一種成果。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="習慣會讓你變成你想要成為的人">「習慣會讓你變成你想要成為的人」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>第一個步驟不是什麼，也不是如何，而是什麼樣的人。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>習慣可以幫助你達成上述這些，但根本上，習慣的精髓並非擁有，而是成為。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-1">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>改變分為三個層次：成果改變、過程改變，以及身分認同改變。&lt;/li>
&lt;li>改變習慣最有效的方法，就是把焦點放在想要成為什麼樣的人，而不是想要達到什麼成果。&lt;/li>
&lt;li>你的身分認同源自你的習慣。每個行動都是一張選票，投給你想要成為的那種人。&lt;/li>
&lt;li>要成為最好的自己，就必須持續編輯、修訂自己的信念，升級並拓展你的身分認同。&lt;/li>
&lt;li>習慣之所以重要的真正原因，不是因為可以讓你得到更好的成果（雖然確實有這個功效），而是因為可以讓你改變對自身的信念。&lt;/li>
&lt;/ul>
&lt;h2 id="３-四個簡單的步驟讓你建立更好的習慣">３. 四個簡單的步驟，讓你建立更好的習慣&lt;/h2>
&lt;ul>
&lt;li>桑代克如此描述學習的過程：「帶來可喜後果的行為往往會被重複，而帶來可厭後果的行為比較不可能被重複。」&lt;/li>
&lt;/ul>
&lt;h3 id="習慣可以讓你騰出自由思考與創意所需的心理空間">「習慣可以讓你騰出自由思考與創意所需的心理空間」&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>所謂習慣，就是重複次數多到足以自動化的行為。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>碰巧遇上意料之外的獎賞後，你下次就會變更策略。大腦會立刻開始記錄獎賞出現之前的行為。等一下，這感覺真棒。我在這之前做了什麼？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>所謂習慣，就是針對規律遇上的問題與壓力的一組自動化解決方案。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>科學家傑森．瑞哈所言：「習慣不過是環境中反覆出現的問題的可靠解決之道。」&lt;/p>
&lt;/li>
&lt;li>
&lt;p>習慣減輕了認知負荷，釋出心智容量，好讓你把注意力分配給其他任務。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>習慣不會限制自由，而是創造了自由。事實上，沒能掌握習慣的人往往擁有最少的自由。少了良好的財務習慣，你永遠在操心下一餐的著落；少了良好的健康習慣，你會永遠缺乏活力；少了良好的學習習慣，你會一直感覺自己追不上別人。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="習慣形成的四步驟">「習慣形成的四步驟」&lt;/h3>
&lt;ul>
&lt;li>提示、渴望、回應、獎賞&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012231805.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012231805_huad8266a25fd0a878b8092982d5b83704_198567_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012231805_huad8266a25fd0a878b8092982d5b83704_198567_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;ul>
&lt;li>
&lt;p>我們因為兩個目的追求獎賞：一，獎賞滿足我們；二，獎賞教育我們。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>這四個步驟合在一起，形成了一個神經學上的回饋迴路──提示、渴望、回應、獎賞；提示、渴望、回應、獎賞──最終讓你建立了自動化的習慣。這樣的循環被稱為習慣迴路。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012231854.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012231854_hu57cc16c44ca3e1bd98a9a5eb8ff6dddc_314187_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012231854_hu57cc16c44ca3e1bd98a9a5eb8ff6dddc_314187_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012231916.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012231916_hud4bf99dc4170f63446d93e532635ca98_383677_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012231916_hud4bf99dc4170f63446d93e532635ca98_383677_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;h3 id="適用於任何領域的行為改變四法則">「適用於任何領域的行為改變四法則」&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012232020.png"
width="1440"
height="914"
srcset="https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012232020_hu5a0be2838efdb17907c23490bcbe81be_333440_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/atomic-habits-day011-summary01/media/Pasted-image-20231012232020_hu5a0be2838efdb17907c23490bcbe81be_333440_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="378px"
>&lt;/p>
&lt;p>每當你想要改變一個行為，只要自問：&lt;/p>
&lt;ul>
&lt;li>1.我要怎麼讓提示顯而易見？&lt;/li>
&lt;li>2.我要怎麼讓習慣有吸引力？&lt;/li>
&lt;li>3.我要怎麼讓行動輕而易舉？&lt;/li>
&lt;li>4.我要怎麼讓獎賞令人滿足？&lt;/li>
&lt;/ul>
&lt;h3 id="本章總覽-2">「本章總覽」&lt;/h3>
&lt;ul>
&lt;li>習慣就是重複次數多到足以自動化的行為。&lt;/li>
&lt;li>習慣的終極目標，就是用最少的能量與努力解決生活中的問題。&lt;/li>
&lt;li>所有習慣都能被分解為包括提示、渴望、回應、獎賞等四步驟的回饋迴路。&lt;/li>
&lt;li>行為改變四法則是一組能幫助我們建立更好習慣的簡單規則：一，讓提示顯而易見；二，讓習慣有吸引力；三，讓行動輕而易舉；四，讓獎賞令人滿足。&lt;/li>
&lt;/ul></description></item><item><title>Lesson006 - 想瘦身？運動跟節食哪個比較有效？</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson006/</link><pubDate>Sat, 21 Oct 2023 23:23:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson006/</guid><description>&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/ztiHRiFXtoc" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">significant
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 顯著的；有效的 ; 重大的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">diet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 飲食
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">factor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 因素，要素
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">maintenance
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 維持；保持
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">combination
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 結合
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calorie
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 卡，卡路里
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aging
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 老化的
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>「要不是&amp;hellip;就是&amp;hellip;」、「要麼&amp;hellip;要麼&amp;hellip;」&lt;/p>
&lt;p>Either&amp;hellip;or&amp;hellip;&lt;/p>
&lt;/blockquote>
&lt;p>Either 若是與連接詞 or 連用，中文意思是「要不是&amp;hellip;就是&amp;hellip;」、「要麼&amp;hellip;要麼&amp;hellip;」，帶有兩者擇一的概念。要特別注意的是，either 與 or 後面一個字的詞性通常必須對等。例如 either 後面接一個動詞片語，or 後面通常也須接一個動詞片語。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Emily will visit you either today or tomorrow.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Emily 要不是今天會拜訪你，就是明天。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- You can either play the card game or see a film.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">你要麼可以玩牌，要麼可以看場電影。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Either I drive to the restaurant or I get a taxi.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">要麼我開車去餐廳，要麼我搭計程車去。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson005 - 你所不知道「冷凍食品」的秘密！</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson005/</link><pubDate>Thu, 19 Oct 2023 22:56:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson005/</guid><description>&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/uWZwncX_4hk" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">invent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 發明
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">preserve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 保存，對食物進行保鮮處理
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">freeze
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 冷凍
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cell
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 細胞
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">conditions
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 環境，（天氣）情況
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">damage
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 破壞
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">combine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 結合
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">inspired
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 受到啟發的
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>分詞構句&lt;/p>
&lt;p>Participle Clauses&lt;/p>
&lt;/blockquote>
&lt;p>本堂課中我們介紹了由過去分詞 (P.P.) 所形成的分詞構句。過去分詞構句的原句主要是包含主詞以及 be 動詞的「被動句」。藉由省略了相同的主詞、be 動詞，最後留下了過去分詞 (功能類似形容詞) 進而精簡句子。看看下面例句，你會更了解過去分詞構句的形成過程唷！&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- When threatened, they will definitely fight back.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">當被威脅時，他們將會反擊。（原句為 When/If they are threatened, they will definitely fight back.。）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Written in simple English, the book is suitable for the beginners.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">以淺顯易懂的英語所寫成，這本書適合初級學生使用。（原句為Because the book is written in simple English, it is suitable for the beginners.。）
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Worried by the news, she called the hospital.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">她對這個消息感到很擔心，所以就打電話到醫院。（原句為 Because she was worried by the news, she called the hospital.）
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson004 - 魔術師現身：這個搭機安全介紹影片我看得完！</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson004/</link><pubDate>Tue, 17 Oct 2023 23:59:03 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson004/</guid><description>&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/Sp3XNr0ICU4" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">briefing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 簡報，簡要介紹
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fasten
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 繫上
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">illegal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 違法的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">prohibited
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 禁止的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emergency
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 緊急情況
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">aircraft
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 飛機
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">operate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 操作
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">takeoff
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 起飛
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">upright
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 豎直的
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>助動詞 May、Might&lt;/p>
&lt;p>Modal Verbs - May, Might&lt;/p>
&lt;/blockquote>
&lt;p>May 這個助動詞常見的意思是「可能，也許」，而 might 則是它的過去式。但其實在現代英文中，若要表示「現在或未來有可能會發生的情況」，兩者皆可使用。這種情形下，語意上唯一的小小差異是 may 所表達的可能性比 might 還要高一點。 要注意的是，may 也能用來表達「禮貌表達許可與否」，所以如果要表示「現在或未來可能不會發生的情況」，就要使用 might not，而不是 may not，否則會讓聆聽者不知道到底是要表達「不允許」還是「可能不會」。舉例來說，You may not go to the store 有可能是「你不能去商店」或是「你可能不會去商店」，但You might not go to the store 只有一種意思：「你可能不會去商店」。所以當要表達可能不會發生的事情時，要用 might not 才不會造成誤解喔！&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I may grab some snacks and drinks on my way.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我路上可能會買些零食飲料。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- There may be a delay in the delivery on weekends.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">週末時運送可能會延遲。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I might be wrong, but don&amp;#39;t you think watching TV is a total waste of time?
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我不一定是對的，不過你不覺得看電視根本是浪費時間嗎？
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson003 - 你有強迫症嗎？來看看你是否也有這些症狀</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson003/</link><pubDate>Sun, 15 Oct 2023 19:55:30 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson003/</guid><description>&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/AbMaP6qyQJY" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">keep
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 保持
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 厭惡
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">improve
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 改善
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">thought
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 想法
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">change
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 改變
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">awful
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 糟糕的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">straight
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 直的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">suffer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v. 受苦
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">hardly
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adv. 幾乎不
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>過去進行式&lt;/p>
&lt;p>The Past Continuous&lt;/p>
&lt;/blockquote>
&lt;p>過去進行式多用來表達「過去未完成或不完整」的動作或狀態，由 be 動詞的過去式 (was/were) ＋ 現在分詞 (V-ing) 構成。 我們都知道現在分詞類似於「形容詞」，而接在 be 動詞後，就是描述一種「狀態」。所以注意，就是因為這樣的特性，這種狀態是會有「持續性」或「經常性」的特性。例如本課 Why was I completely leaving out my left hand? 這句，這個動作並不是在過去就完成、結束的，反而是一種「持續了一段時間、過去正在進行中」的狀態。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- They were seeing a film last night.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">他們昨晚在看一部電影。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- He was playing basketball this morning.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">今天早上他在打籃球。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I was running this time yesterday.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">我昨天這個時候在跑步。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Lesson002 - 【艾倫秀】安海瑟威如何看待自己被霸凌</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson002/</link><pubDate>Wed, 11 Oct 2023 23:50:17 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson002/</guid><description>&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/hcH7Vm3owZM" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mean
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.   卑鄙的；刻薄的；惡毒的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">shut
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">v.   （使）停止運作；（使）關閉
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">level
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n.   程度；高度；層次
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fragile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.   易損壞的；易碎的；脆弱的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">journey
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n.   旅行；旅程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tremendous
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.   巨大的；極好的；大量的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sensitive
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.   神經過敏的；易被冒犯的；敏感的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">horrible
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.   極糟的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dependent
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj.   依賴的
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>虛主詞 - There&lt;/p>
&lt;p>Dummy Subjects - There&lt;/p>
&lt;/blockquote>
&lt;p>英文的句子，有個規定，就是「主詞的位置」是需要被填滿的。舉例來說，當我們在中文裡說：「有個東西在那」，嚴格說起來這句是沒有主詞的，然而英文不允許這樣的事發生，因此我們會安插入「虛主詞」。英文的虛主詞主要包含 It 與 There 兩者。本課主要聚焦在 there 上，這個字原本作為地方副詞，放在句尾，其意義為強調動作發生的「地方」，而其本身亦是名詞。作為虛主詞，其實是由倒裝句型的演變而成，There 成為主詞後，失去其原本表達地方的意義，反而變成強調動作發生的事實，用來引出某人、事、物的存在。There 所銜接的動詞的「數」，由後方的名詞所決定。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- There are two people waiting outside.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">外頭有兩個人在等。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- There was once a poor farmer with his little farm.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">從前有位窮農夫，他有座小農場。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- There could be three typhoons coming next month.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">下個月可能會有三個颱風接力而來。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>修改hugo在github上的架構</title><link>https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/</link><pubDate>Tue, 10 Oct 2023 10:38:49 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/</guid><description>&lt;p>架構修改如下圖：
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121753.png"
width="2062"
height="989"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121753_hu722b33167e8c2db1cf4f4b4091ce8b6b_182791_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121753_hu722b33167e8c2db1cf4f4b4091ce8b6b_182791_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="208"
data-flex-basis="500px"
>&lt;/p>
&lt;p>參考網站： &lt;a class="link" href="https://www.criwits.top/page/20220828132827-0gnvmfs" target="_blank" rel="noopener"
>https://www.criwits.top/page/20220828132827-0gnvmfs&lt;/a>&lt;/p>
&lt;p>原始workflow yml檔如下：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># chingtsechen.github.io/.github/workflows/gh-pages.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">github pages&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">main &lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Set a branch to deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-20.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">submodules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Fetch Hugo themes (true OR recursive)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">fetch-depth&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Fetch all history for .GitInfo and .Lastmod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Setup Hugo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-hugo@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;latest&amp;#39;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># &amp;#39;0.83.1&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 有用擴充套件則將 # 移除&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hugo --minify&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-gh-pages@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">github_token&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.GITHUB_TOKEN }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./public&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="創建source-code-repository">創建Source Code Repository&lt;/h2>
&lt;p>設定為Private，外部無法直接訪問
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010110139.png"
width="1167"
height="668"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010110139_hue05f4b6dd4a9d7d04c9caaf937c186d0_92986_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010110139_hue05f4b6dd4a9d7d04c9caaf937c186d0_92986_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="174"
data-flex-basis="419px"
>&lt;/p>
&lt;h2 id="生成公鑰與私鑰">生成公鑰與私鑰&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP 8. blog % ssh-keygen -t rsa -b &lt;span class="m">4096&lt;/span> -C &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>git config user.email&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span> -f gh-pages -N &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP 8. blog % ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">16&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">6&lt;/span> chenqingze staff &lt;span class="m">192&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">21&lt;/span> 00:37 Kubernetes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">5&lt;/span> chenqingze staff &lt;span class="m">160&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">30&lt;/span> 21:37 Python
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">21&lt;/span> chenqingze staff &lt;span class="m">672&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">9&lt;/span> 15:25 chingtsechen.github.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw------- &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">3389&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:02 gh-pages
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">750&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:02 gh-pages.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="配置source-code-repository-私鑰">配置Source Code Repository 私鑰&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP 8. blog % cat gh-pages
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010110724.png"
width="1265"
height="693"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010110724_hud1dd307ae4c8d1167ccdf1c5297ca7e9_114499_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010110724_hud1dd307ae4c8d1167ccdf1c5297ca7e9_114499_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="182"
data-flex-basis="438px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010110806.png"
width="1242"
height="820"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010110806_huf863af346627722d5ccd1def131b1545_170454_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010110806_huf863af346627722d5ccd1def131b1545_170454_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="151"
data-flex-basis="363px"
>&lt;/p>
&lt;h2 id="將source-code-推送進去repository">將Source Code 推送進去Repository&lt;/h2>
&lt;p>由於Source Code Repository是Private的，所以pull code與push code要用帳號和密碼，
現在密碼都改用token的方式，所以要生成一個token&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010111733.png"
width="1215"
height="412"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010111733_hu60a98ae0319cf750676e58975440cffe_76081_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010111733_hu60a98ae0319cf750676e58975440cffe_76081_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="294"
data-flex-basis="707px"
>&lt;/p>
&lt;p>使用帶帳號的方式git clone代碼&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># git clone帶帳號
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://chingtsechen@
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># @git clone的連結
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">github.com/chingtsechen/blog-goldfishbrain-fighting.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 完整動作
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">git clone https://chingtsechen@github.com/chingtsechen/blog-goldfishbrain-fighting.git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 會要求打密碼，就是使用token&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP 8. blog % git clone https://chingtsechen@github.com/chingtsechen/blog-goldfishbrain-fighting.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Cloning into &lt;span class="s1">&amp;#39;blog-goldfishbrain-fighting&amp;#39;&lt;/span>...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Password &lt;span class="k">for&lt;/span> &lt;span class="s1">&amp;#39;https://chingtsechen@github.com&amp;#39;&lt;/span>:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">warning: You appear to have cloned an empty repository.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>clone下來會是空目錄，將blog源碼檔案放置進去&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP blog-goldfishbrain-fighting % ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">32&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">1066&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:24 LICENSE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">2874&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:24 README.md
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">7&lt;/span> chenqingze staff &lt;span class="m">224&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:24 assets
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">4&lt;/span> chenqingze staff &lt;span class="m">128&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:24 config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">7&lt;/span> chenqingze staff &lt;span class="m">224&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:24 content
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">130&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:25 go.mod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--@ &lt;span class="m">1&lt;/span> chenqingze staff &lt;span class="m">199&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:25 go.sum
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">5&lt;/span> chenqingze staff &lt;span class="m">160&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:25 layouts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">3&lt;/span> chenqingze staff &lt;span class="m">96&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:25 resources
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">9&lt;/span> chenqingze staff &lt;span class="m">288&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:25 static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">3&lt;/span> chenqingze staff &lt;span class="m">96&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:25 template
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">3&lt;/span> chenqingze staff &lt;span class="m">96&lt;/span> &lt;span class="m">10&lt;/span> &lt;span class="m">10&lt;/span> 11:26 themes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>推送至github&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP blog-goldfishbrain-fighting % git add . -A
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP blog-goldfishbrain-fighting % git commit -m &lt;span class="s2">&amp;#34;first commit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP blog-goldfishbrain-fighting % git push
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>可以看到，代碼都push上來了
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010114858.png"
width="1360"
height="783"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010114858_huaa21c3c5f75eda0ba9830e62ce57fb50_143754_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010114858_huaa21c3c5f75eda0ba9830e62ce57fb50_143754_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="173"
data-flex-basis="416px"
>&lt;/p>
&lt;h2 id="配置靜態頁repository-公鑰">配置靜態頁Repository 公鑰&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP 8. blog % cat gh-pages.pub
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121041.png"
width="1252"
height="706"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121041_hub816b42453fea6f6af4edbf1595e7949_112477_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121041_hub816b42453fea6f6af4edbf1595e7949_112477_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="177"
data-flex-basis="425px"
>&lt;/p>
&lt;h2 id="為source-code-repository創建workflow">為Source Code Repository創建workflow&lt;/h2>
&lt;p>Actions → set up a workflow yourself&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010115519.png"
width="1192"
height="340"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010115519_hu901d591c1d4323787798857db8935b76_51975_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010115519_hu901d591c1d4323787798857db8935b76_51975_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="350"
data-flex-basis="841px"
>&lt;/p>
&lt;p>workflow代碼如下，#處要注意，需依自己需求去修改&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="c"># blog-goldfishbrain-fighting/.github/workflows/main.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">GitHub Pages&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">push&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">branches&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">main&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">jobs&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">runs-on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">ubuntu-20.04&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Checkout repositories&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">actions/checkout@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">submodules&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Fetch Hugo themes (true OR recursive)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">fetch-depth&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># Fetch all history for .GitInfo and .Lastmod&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Setup Hugo&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-hugo@v2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">hugo-version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;latest&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">extended&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 有用擴充套件則將 # 移除&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">run&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">hugo --minify&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Deploy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">uses&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">peaceiris/actions-gh-pages@v3&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">with&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">deploy_key&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">${{ secrets.ACTIONS_DEPLOY_KEY }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">external_repository&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">chingtsechen/chingtsechen.github.io&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 要發佈的repository&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">main&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">publish_dir&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">./public&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 要發佈的目錄&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cname&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">blog.goldfishbrain-fighting.com&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 如果有修改域名，這裡打上&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010120114.png"
width="1466"
height="870"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010120114_hue4dad10fa05f5e3e099535c2c354d415_235519_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010120114_hue4dad10fa05f5e3e099535c2c354d415_235519_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="168"
data-flex-basis="404px"
>&lt;/p>
&lt;p>可以看到佈屬成功
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121235.png"
width="1481"
height="390"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121235_hu7e7a1c304c07bb1e8cb31f20e928b566_67577_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121235_hu7e7a1c304c07bb1e8cb31f20e928b566_67577_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="379"
data-flex-basis="911px"
>&lt;/p>
&lt;h2 id="到靜態頁repository查看是否佈屬成功">到靜態頁Repository查看是否佈屬成功&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121355.png"
width="1394"
height="871"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121355_hu25b0395051ca69fc83ce68405b57e0e0_244310_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121355_hu25b0395051ca69fc83ce68405b57e0e0_244310_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="160"
data-flex-basis="384px"
>&lt;/p>
&lt;p>確認Settings-&amp;gt;Pages，使用Branch和Custom domain是否設定正確
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121538.png"
width="1471"
height="866"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121538_hufbdeabb492ad79c245bff0c207799aa6_172878_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010121538_hufbdeabb492ad79c245bff0c207799aa6_172878_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="169"
data-flex-basis="407px"
>&lt;/p>
&lt;h2 id="測試發佈文章">測試發佈文章&lt;/h2>
&lt;p>推送代碼至blog-goldfisnbrain-fighting後，workflow執行編譯並推送編譯後靜態頁至chingtsechen.github.io中
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010123422.png"
width="1469"
height="505"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010123422_huffca0ef7c6fb2850a727a08cc21b6094_106442_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010123422_huffca0ef7c6fb2850a727a08cc21b6094_106442_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="290"
data-flex-basis="698px"
>
可以看到，發佈文章成功，就此，整體hugo架構修改已大功告成了
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010123343.png"
width="1483"
height="942"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010123343_hu43765ec200dcb372d9a712a5764f5df7_267620_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo-architecture/media/Pasted-image-20231010123343_hu43765ec200dcb372d9a712a5764f5df7_267620_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="377px"
>&lt;/p></description></item><item><title>我開始使用Readmoo讀墨 閱讀電子書</title><link>https://blog.goldfishbrain-fighting.com/2023/readmoo-book000/</link><pubDate>Tue, 10 Oct 2023 00:49:07 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/readmoo-book000/</guid><description>&lt;p>分享一下，為了想讓生活多點想法，想知道成功人士分享的經驗，於是我開始閱讀習慣，選擇使用電子書，試閱讀之後，選擇用Readmoo讀墨這個平台，整體使用感受非常好，尤其能夠使用朗讀方式，幫我朗讀書，因為專注力很難集中，有了這個功能，大大增加了我對書的閱讀興趣，以下是使用平板試閱的影片，往後會再來分享，讀書心得。&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/40G1xUgpAWY" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div></description></item><item><title>使用google drive當作圖床</title><link>https://blog.goldfishbrain-fighting.com/2023/google-drive-image/</link><pubDate>Mon, 09 Oct 2023 22:34:26 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/google-drive-image/</guid><description>&lt;p>簡單來說，將圖片存在google drive，設定共享，複製連結，將連結修改即可。&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-drive-image/media/Pasted-image-20231009224246.png"
width="796"
height="476"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-drive-image/media/Pasted-image-20231009224246_hu8b67f2d345989a394037088e9b68c891_43191_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-drive-image/media/Pasted-image-20231009224246_hu8b67f2d345989a394037088e9b68c891_43191_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="167"
data-flex-basis="401px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/google-drive-image/media/Pasted-image-20231009224352.png"
width="513"
height="479"
srcset="https://blog.goldfishbrain-fighting.com/2023/google-drive-image/media/Pasted-image-20231009224352_hu5ae54b65308a155a446c1928d8a321ce_47187_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/google-drive-image/media/Pasted-image-20231009224352_hu5ae54b65308a155a446c1928d8a321ce_47187_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="107"
data-flex-basis="257px"
>&lt;/p>
&lt;p>點複製連結&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 連結如下
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://drive.google.com/file/d/1Gdh2dKRP1X4xv8Br6K56SZdn_RwgTOj1/view?usp=sharing
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>修改連結&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-gdscript3" data-lang="gdscript3">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1. 只要提取上述連結中的字串&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">....../&lt;/span>&lt;span class="n">file&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">d&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="err">字串&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">view&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="o">......&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">字串&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="n">Gdh2dKRP1X4xv8Br6K56SZdn_RwgTOj1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2. 將字串與以下連結合併&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">drive&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">google&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">uc&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="k">export&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">view&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="err">字串&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="err">完整連結&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">drive&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">google&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">uc&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="k">export&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">view&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="n">Gdh2dKRP1X4xv8Br6K56SZdn_RwgTOj1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3. 此完整連結就能永久分享在各處，例如以下markdown插入圖片分享&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">!&lt;/span>&lt;span class="p">[](&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">drive&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">google&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">com&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">uc&lt;/span>&lt;span class="err">?&lt;/span>&lt;span class="k">export&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="n">view&lt;/span>&lt;span class="o">&amp;amp;&lt;/span>&lt;span class="n">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="n">Gdh2dKRP1X4xv8Br6K56SZdn_RwgTOj1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>插入圖片效果&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1Gdh2dKRP1X4xv8Br6K56SZdn_RwgTOj1"
loading="lazy"
>&lt;/p></description></item><item><title>Lesson001 - 第一次看見色彩</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson001/</link><pubDate>Mon, 09 Oct 2023 21:44:08 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson001/</guid><description>&lt;h2 id="學習影片">學習影片&lt;/h2>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/b0eSg_8Afh0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div>
&lt;h2 id="單字">單字&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">colorblind
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 色盲的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">issue
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 問題
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">occasional
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 偶爾的；不經常的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">entire
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 整個的；完全的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">supposed to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 應該
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">emotional
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">adj. 激動的；感情強烈的
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">excitement
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">n. 興奮；令人興奮的事情
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="文法">文法&lt;/h2>
&lt;blockquote>
&lt;p>過去簡單式&lt;/p>
&lt;p>The Past Simple&lt;/p>
&lt;/blockquote>
&lt;p>過去簡單式表示過去所發生的動作，而且這個動作在過去某一時間點已經結束。過去式動詞有分規則與不規則兩種。規則動詞過去式通常在字尾加上 -ed；不規則則須加以熟悉。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">### 例句
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Sara refused her boyfriend&amp;#39;s proposal.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sara 拒絕了她男友的求婚。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- I went fishing with my grandpa last weekend.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">上週末我和爺爺釣魚去了。
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- Andy bought some bread for tomorrow&amp;#39;s breakfast on his way home.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Andy 在回家的路上買了一些麵包作為明天的早餐。
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>我使用hugo在github架設我的第一個Blog</title><link>https://blog.goldfishbrain-fighting.com/2023/blog-hugo/</link><pubDate>Mon, 09 Oct 2023 09:53:09 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/blog-hugo/</guid><description>&lt;p>先稍微記錄一下，整體建置與工作流程：&lt;/p>
&lt;ol>
&lt;li>hugo官網找喜歡的theme(&lt;a class="link" href="https://themes.gohugo.io/" target="_blank" rel="noopener"
>https://themes.gohugo.io/&lt;/a>)&lt;/li>
&lt;li>選擇使用Stack(&lt;a class="link" href="https://themes.gohugo.io/themes/hugo-theme-stack/" target="_blank" rel="noopener"
>https://themes.gohugo.io/themes/hugo-theme-stack/&lt;/a>)&lt;/li>
&lt;li>作者github裡面有教學，可以直接clone代碼匯入我的github repositiry
&lt;ol>
&lt;li>新repositiry名稱使用：github帳號id.github.io&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>git clone代碼到本機，hugo server執行看看，打上http://localhost:1313，就能直接看到頁面效果&lt;/li>
&lt;li>修改手機版無法看到大綱toc問題(直接複製貼上裡面四個檔案到相對的目錄中)
&lt;ol>
&lt;li>參考網站(&lt;a class="link" href="https://github.com/CaiJimmy/hugo-theme-stack/pull/615/files#diff-eef437e68bc6669e72d9b52c51e6f18c33aaedc919cd231abc1a68aa7030fcb3" target="_blank" rel="noopener"
>https://github.com/CaiJimmy/hugo-theme-stack/pull/615/files#diff-eef437e68bc6669e72d9b52c51e6f18c33aaedc919cd231abc1a68aa7030fcb3&lt;/a>)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>網站左邊menu 透明漂亮icon使用，svg檔製作
&lt;ol>
&lt;li>參考網站(&lt;a class="link" href="https://tablericons.com/" target="_blank" rel="noopener"
>https://tablericons.com/&lt;/a>)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>網站左邊page新增與修改&lt;/li>
&lt;li>色碼表，網站各處顏色更改會用到
&lt;ol>
&lt;li>參考網站(&lt;a class="link" href="https://www.ifreesite.com/color/" target="_blank" rel="noopener"
>https://www.ifreesite.com/color/&lt;/a>)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>開始優化美化頁面
&lt;ol>
&lt;li>參考網站(&lt;a class="link" href="https://blog.linsnow.cn/p/modify-hugo/" target="_blank" rel="noopener"
>https://blog.linsnow.cn/p/modify-hugo/&lt;/a>)&lt;/li>
&lt;li>參考網站(&lt;a class="link" href="https://ponder.lol/2023/custom-hugo-theme-stack/" target="_blank" rel="noopener"
>https://ponder.lol/2023/custom-hugo-theme-stack/&lt;/a>)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>添加網站底部顯示發表xx文章、本站運行xx天、本站總訪問量xx次功能
&lt;ol>
&lt;li>參考網站(&lt;a class="link" href="https://thirdshire.com/post/hugo-stack-renovation/" target="_blank" rel="noopener"
>https://thirdshire.com/post/hugo-stack-renovation/&lt;/a>)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>修改文章description描述字體大小，縮小(在article.scss裡面的.article-subtitle)&lt;/li>
&lt;li>添加disqus評論功能
&lt;ol>
&lt;li>參考網站(&lt;a class="link" href="https://blog.tershi.com/pages/cafd93/#%E8%A8%BB%E5%86%8A-disqus-%E5%B8%B3%E8%99%9F" target="_blank" rel="noopener"
>https://blog.tershi.com/pages/cafd93/#%E8%A8%BB%E5%86%8A-disqus-%E5%B8%B3%E8%99%9F&lt;/a>)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>添加channel.io頁面即時聊天功能
&lt;ol>
&lt;li>參考網站(&lt;a class="link" href="https://thirdshire.com/post/hugo-stack-renovation/" target="_blank" rel="noopener"
>https://thirdshire.com/post/hugo-stack-renovation/&lt;/a>)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>以上在本地修改與美化頁面功能驗證完畢後，將代碼推送到github中&lt;/li>
&lt;li>使用github workflow建立自動發佈gh-pages branch功能
&lt;ol>
&lt;li>參考網站(&lt;a class="link" href="https://www.zoeydc.com/zh/posts/2021-05-23-hugo-website_github-pages_custom-domain/" target="_blank" rel="noopener"
>https://www.zoeydc.com/zh/posts/2021-05-23-hugo-website_github-pages_custom-domain/&lt;/a>)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>網頁測試打(https://github帳號id.github.io)，網站是否呈現&lt;/li>
&lt;li>購買domain name，我使用cloudflare(&lt;a class="link" href="https://dash.cloudflare.com/" target="_blank" rel="noopener"
>https://dash.cloudflare.com/&lt;/a>)
&lt;ol>
&lt;li>購買domain name&lt;/li>
&lt;li>更新DNS記錄，設定CNAME，名稱blog，內容github預設pages頁面網址(github帳號id.github.io)&lt;/li>
&lt;li>啟用http強制轉到https&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>將github pages自訂網域名
&lt;ol>
&lt;li>至github專案中，Settings-&amp;gt;Pages-&amp;gt;Branch選擇gh-pages分支&lt;/li>
&lt;li>Custom domain-&amp;gt;設定已註冊的domain name(blog.goldfishbrain-fighting.com)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>網頁測試打domain name，網站是否呈現(&lt;a class="link" href="https://blog.goldfishbrain-fighting.com/" target="_blank" rel="noopener"
>https://blog.goldfishbrain-fighting.com/&lt;/a>)&lt;/li>
&lt;li>google-search-console添加
&lt;ol>
&lt;li>會需要驗證網站擁有權，將google提供檔案放置網站根目錄下(static/googlexxxxxx.html)&lt;/li>
&lt;li>添加sitemap，好讓google幫我們產生索引，後續才能夠過google瀏覽器，搜尋到我的網站(可能會需要好多天，才能完成)&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>google-analytics添加
&lt;ol>
&lt;li>好讓後續可以分析網站使用狀況&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>以上就完成了使用hugo在github架站&lt;/li>
&lt;li>後續新文章撰寫，我是使用obsidian撰寫文章&lt;/li>
&lt;li>使用template功能，寫文章時，快速插入front matter&lt;/li>
&lt;li>如果categories有新增，記得要先去categories目錄新增出來&lt;/li>
&lt;li>如有快速貼上圖片，圖片記得改檔名，因為會有空格，網站會無法正常辨識路徑和檔名&lt;/li>
&lt;li>撰寫文章完畢，使用obsidian git插件，直接使用快捷鍵ctrl+p叫出命令面板，執行Commit all changes、Push就能將文章推送到我的github中&lt;/li>
&lt;li>github接收到commit，就會自動使用workflow幫我佈屬gh-pages&lt;/li>
&lt;li>以下就是網站呈現的樣子&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/blog-hugo/media/Pasted-image-20231009112857.png"
width="1491"
height="947"
srcset="https://blog.goldfishbrain-fighting.com/2023/blog-hugo/media/Pasted-image-20231009112857_hudc34fb163dc46197b208c6c4030eb97f_297694_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/blog-hugo/media/Pasted-image-20231009112857_hudc34fb163dc46197b208c6c4030eb97f_297694_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="157"
data-flex-basis="377px"
>&lt;/p></description></item><item><title>我的Macbook M1 Pro，使用Geforce Now遊玩Steam遊戲(Counter-Strike 2)</title><link>https://blog.goldfishbrain-fighting.com/2023/geforce-now/</link><pubDate>Mon, 09 Oct 2023 07:33:09 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/geforce-now/</guid><description>&lt;p>我選擇免費方案，每天能遊玩30分鐘，體驗一下
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/geforce-now/media/Pasted-image-20231009081029.png"
width="1486"
height="867"
srcset="https://blog.goldfishbrain-fighting.com/2023/geforce-now/media/Pasted-image-20231009081029_hu148da14496559642bbb285fe5181bf47_154458_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/geforce-now/media/Pasted-image-20231009081029_hu148da14496559642bbb285fe5181bf47_154458_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="171"
data-flex-basis="411px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/geforce-now/media/Pasted-image-20231009081120.png"
width="1490"
height="869"
srcset="https://blog.goldfishbrain-fighting.com/2023/geforce-now/media/Pasted-image-20231009081120_hu25c8e7fafb37afb6c3500c93d292da7d_110867_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/geforce-now/media/Pasted-image-20231009081120_hu25c8e7fafb37afb6c3500c93d292da7d_110867_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="171"
data-flex-basis="411px"
>&lt;/p>
&lt;p>使用我的MACBOOK M1 PRO登入Counter-Strike 2中，需要排隊一下
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/geforce-now/media/Pasted-image-20231009073311.png"
width="2560"
height="994"
srcset="https://blog.goldfishbrain-fighting.com/2023/geforce-now/media/Pasted-image-20231009073311_hu5ce89885fd29bbfbe560ce6e0f930fbb_1316249_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/geforce-now/media/Pasted-image-20231009073311_hu5ce89885fd29bbfbe560ce6e0f930fbb_1316249_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="257"
data-flex-basis="618px"
>&lt;/p>
&lt;p>下方就是我的遊玩體驗影片，很久沒玩CS，有點爛，見諒 :)&lt;/p>
&lt;div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
&lt;iframe src="https://www.youtube.com/embed/vvJtycIxnLM" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" allowfullscreen title="YouTube Video">&lt;/iframe>
&lt;/div></description></item><item><title>我開始使用VoiceTube-Hero學習英文</title><link>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson000/</link><pubDate>Mon, 09 Oct 2023 01:37:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson000/</guid><description>&lt;p>紀錄一下，為什麼要購買此課程，很久以前，就有這樣的目標，想要將英文這門語言學好，
礙於工作轉職、人生待辦事項優先順序，所以一直遲遲沒有開始。&lt;/p>
&lt;p>近期是在學習程式語言python與django，想要將工作更有效率的完成(辦公自動化)與管理平台化(網頁點一點完成需求)，陸陸續續學習了快一年了，開始覺得不是我的興趣，也常常會提不起勁繼續學習，或許是沒有能大量應用上的環境，變的學習時感覺很孤單、很無趣，也跟著導致我連生活也提不起勁，因為會覺得，有很多資料要看、要練習，但是要看、要練習時，就又會覺得提不起勁，就在這樣的心態上拉扯，也就因為這樣，導致生活和精神也越來越疲憊。&lt;/p>
&lt;p>因為上述的狀況，讓我心態有所轉變，人生還那麼長，還有很多事情等著我去探險與嘗試，於是就將人生待辦事項優先順序調整了，從影片去學習語言，讓學習不再那麼枯燥乏味，又能藉由影片瞭解更多新知與世界上發生了什麼事，同時也能讓我藉由這門語言，未來能與世界各地更拉近一點距離。&lt;/p>
&lt;p>我是直接購買12個月，一個月675台幣，無限堂學習，不強求變的多厲害，考什麼多益、雅思，只希望能在未來(1年之後)，遇到外國人，能與之簡單對談(不會害怕)，聽到電影影集，能夠聽懂在說什麼，最後給自己加油打氣，加油我一定行，堅持下去。&lt;/p>
&lt;p>現在夜深了，其實也該睡了。&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson000/media/Pasted-image-20231009013654.png"
width="1490"
height="869"
srcset="https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson000/media/Pasted-image-20231009013654_hu976612dcc39dba542b5c8d6641cc3c66_295855_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/voicetube-hero-learn-english-lesson000/media/Pasted-image-20231009013654_hu976612dcc39dba542b5c8d6641cc3c66_295855_1024x0_resize_box_3.png 1024w"
loading="lazy"
class="gallery-image"
data-flex-grow="171"
data-flex-basis="411px"
>&lt;/p></description></item><item><title>剪映 - 影片快速上字幕及冗言、停頓刪除</title><link>https://blog.goldfishbrain-fighting.com/2023/capcut/</link><pubDate>Sun, 08 Oct 2023 12:38:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/capcut/</guid><description>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481DcmWsYfACZ.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481DcmWsYfACZ.png"
>&lt;/p>
&lt;p>分享我自己平常使用剪映這個軟體，影片快速上字幕及冗言、停頓刪除。&lt;/p>
&lt;h1 id="youtube教學影片">YouTube教學影片&lt;/h1>
&lt;p>&lt;a class="link" href="https://www.youtube.com/watch?v=dxLCK-u3AbY" target="_blank" rel="noopener"
>&lt;img src="https://img.youtube.com/vi/dxLCK-u3AbY/0.jpg"
loading="lazy"
alt="Yes"
>&lt;/a>&lt;/p></description></item><item><title>Jenkins+Gitlab+Ansible 版控與佈屬 Redis Redis-Sentinel集群</title><link>https://blog.goldfishbrain-fighting.com/2023/devops-jenkins-gitlab-ansible-redis/</link><pubDate>Sun, 08 Oct 2023 11:49:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/devops-jenkins-gitlab-ansible-redis/</guid><description>&lt;h1 id="今日大綱">今日大綱&lt;/h1>
&lt;ol>
&lt;li>Ansible自動化安裝Redis、Redis-Sentinel服務&lt;/li>
&lt;li>Gitlab redis-config設定檔管理
&lt;ol>
&lt;li>創建project&lt;/li>
&lt;li>將設定檔傳入&lt;/li>
&lt;/ol>
&lt;/li>
&lt;li>Ansible佈屬腳本撰寫&lt;/li>
&lt;li>Jenkins Free-Style專案建立
&lt;ol>
&lt;li>創建Free-Style軟體專案&lt;/li>
&lt;li>參數化構建&lt;/li>
&lt;li>原始碼管理&lt;/li>
&lt;li>Build Steps: Invoke Ansible Playbook&lt;/li>
&lt;li>建置測試&lt;/li>
&lt;/ol>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481A1zg9qCmwo.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481A1zg9qCmwo.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481T64YfhjSvU.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481T64YfhjSvU.png"
>&lt;/p>
&lt;h1 id="ansible自動化安裝redisredis-sentinel服務">Ansible自動化安裝Redis、Redis-Sentinel服務&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># ansible佈屬腳本目錄&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ansible&lt;span class="o">]&lt;/span>&lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">12593&lt;/span> 9月 &lt;span class="m">11&lt;/span> 22:52 hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x. &lt;span class="m">33&lt;/span> root root &lt;span class="m">4096&lt;/span> 9月 &lt;span class="m">12&lt;/span> 21:05 roles
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r--. &lt;span class="m">1&lt;/span> root root &lt;span class="m">2091&lt;/span> 9月 &lt;span class="m">11&lt;/span> 22:38 site.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 主機清單&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ansible&lt;span class="o">]&lt;/span>&lt;span class="c1"># cat hosts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>redis&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.11 &lt;span class="nv">ansible_nodename&lt;/span>&lt;span class="o">=&lt;/span>redis01
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12 &lt;span class="nv">ansible_nodename&lt;/span>&lt;span class="o">=&lt;/span>redis02
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13 &lt;span class="nv">ansible_nodename&lt;/span>&lt;span class="o">=&lt;/span>redis03
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14 &lt;span class="nv">ansible_nodename&lt;/span>&lt;span class="o">=&lt;/span>redis04
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 選擇要佈屬的主機和角色，使用become: yes(sudo su -)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ansible&lt;span class="o">]&lt;/span>&lt;span class="c1"># cat site.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- hosts: redis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> remote_user: root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> gather_facts: &lt;span class="nb">false&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> become: yes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> roles:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - roles/redis
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 要佈屬的任務腳本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ansible&lt;span class="o">]&lt;/span>&lt;span class="c1"># cat roles/redis/tasks/main.yml&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 執行佈屬&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ansible&lt;span class="o">]&lt;/span>&lt;span class="c1"># ansible-playbook -i hosts site.yml --ask-pass&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">PLAY RECAP *******************************************************************************************************************
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.11 : &lt;span class="nv">ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">46&lt;/span> &lt;span class="nv">changed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">45&lt;/span> &lt;span class="nv">unreachable&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">failed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">skipped&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">rescued&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ignored&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.12 : &lt;span class="nv">ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">46&lt;/span> &lt;span class="nv">changed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">45&lt;/span> &lt;span class="nv">unreachable&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">failed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">skipped&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">rescued&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ignored&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.13 : &lt;span class="nv">ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">46&lt;/span> &lt;span class="nv">changed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">45&lt;/span> &lt;span class="nv">unreachable&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">failed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">skipped&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">rescued&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ignored&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.14 : &lt;span class="nv">ok&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">46&lt;/span> &lt;span class="nv">changed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">45&lt;/span> &lt;span class="nv">unreachable&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">failed&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">skipped&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">rescued&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span> &lt;span class="nv">ignored&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="gitlab-redis-config設定檔管理">Gitlab redis-config設定檔管理&lt;/h1>
&lt;h2 id="1-創建project">1. 創建project&lt;/h2>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/201324811FAyYPAkSA.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/201324811FAyYPAkSA.png"
>&lt;/p>
&lt;h2 id="2-將設定檔傳入">2. 將設定檔傳入&lt;/h2>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481dsdfZSG51j.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481dsdfZSG51j.png"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 使用已存在目錄的方式，將設定檔傳入&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 當前目錄&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP redis-config-test % ll
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">5&lt;/span> chenqingze staff &lt;span class="m">160&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">12&lt;/span> 22:49 batch
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">4&lt;/span> chenqingze staff &lt;span class="m">128&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">12&lt;/span> 22:44 t1zone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drwxr-xr-x@ &lt;span class="m">4&lt;/span> chenqingze staff &lt;span class="m">128&lt;/span> &lt;span class="m">9&lt;/span> &lt;span class="m">12&lt;/span> 22:45 t2zone
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 傳入gitlab&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP redis-config-test % git init
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Initialized empty Git repository in /Users/chenqingze/Desktop/redis-config-test/redis-config-test/.git/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP redis-config-test % git remote add origin http://gitlab.jimmyhome.tw/root/redis-config-test.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP redis-config-test % git add .
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP redis-config-test % git commit -m &lt;span class="s2">&amp;#34;Initial commit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP redis-config-test % git branch -m main master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP redis-config-test % git push -u origin master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enumerating objects: 19, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Counting objects: 100% &lt;span class="o">(&lt;/span>19/19&lt;span class="o">)&lt;/span>, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Delta compression using up to &lt;span class="m">10&lt;/span> threads
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Compressing objects: 100% &lt;span class="o">(&lt;/span>19/19&lt;span class="o">)&lt;/span>, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Writing objects: 100% &lt;span class="o">(&lt;/span>19/19&lt;span class="o">)&lt;/span>, 45.79 KiB &lt;span class="p">|&lt;/span> 7.63 MiB/s, &lt;span class="k">done&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Total &lt;span class="m">19&lt;/span> &lt;span class="o">(&lt;/span>delta 6&lt;span class="o">)&lt;/span>, reused &lt;span class="m">0&lt;/span> &lt;span class="o">(&lt;/span>delta 0&lt;span class="o">)&lt;/span>, pack-reused &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To http://gitlab.jimmyhome.tw/root/redis-config-test.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> * &lt;span class="o">[&lt;/span>new branch&lt;span class="o">]&lt;/span> master -&amp;gt; master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">branch &lt;span class="s1">&amp;#39;master&amp;#39;&lt;/span> &lt;span class="nb">set&lt;/span> up to track &lt;span class="s1">&amp;#39;origin/master&amp;#39;&lt;/span>.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481x1b02IPM1q.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481x1b02IPM1q.png"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">redis-sentinel.conf -&amp;gt; redis-sentinel設定檔
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">redis.conf -&amp;gt; redis設定檔
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sentinel-users.acl -&amp;gt; redis-sentinel的acl設定檔
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">users.acl -&amp;gt; redis的acl設定檔
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/201324818UCYMZ6gqm.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/201324818UCYMZ6gqm.png"
>&lt;/p>
&lt;h1 id="ansible佈屬腳本撰寫">Ansible佈屬腳本撰寫&lt;/h1>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">1. 變數定義與獲取、判斷輸入選項&lt;span class="o">(&lt;/span>Jenkins本地端操作&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1. 獲取項目的工作目錄 &lt;span class="o">{{&lt;/span> workspace.stdout &lt;span class="o">}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2. 確認function是否沒有選擇，沒有選擇，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3. 確認masterip不能沒有輸入，沒有輸入，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4. 確認masterip只能一個，一個以上則報錯，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 5. 確認slaveip不能沒有輸入，沒有輸入，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2. masterip開始流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0. 確認Redis服務是否活著，活著的話，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0. 確認Redis-Sentinel服務是否活著，活著的話，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1. 拷貝檔案至遠端主機
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2. 替換redis-sentinel.conf配置文件，將masterip寫入
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">3. slaveip開始流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0. 確認Redis服務是否啟動，啟動的話，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0. 確認Redis-Sentinel服務是否啟動，啟動的話，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1. 拷貝檔案至遠端主機
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2. 替換redis-sentinel.conf配置文件，將masterip寫入
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3. 將slaveof masterip 6379寫入redis.conf配置文件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">4. all開始流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0. 確認Redis服務是否啟動，啟動的話，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 0. 確認Redis-Sentinel服務是否啟動，啟動的話，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 1. 啟動，開機自啟動redis服務
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 2. 確認Redis服務是否正常啟動，不啟動的話，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 3. 啟動，開機自啟動redis-sentinel服務
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 4. 確認Redis-Sentinel服務是否正常啟動，不啟動的話，報錯終止流程
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> redis-sentinel剛啟動連接，需要一點時間偵測，所以流程暫停5秒
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 5. 查看Redis-Sentinel狀態連接狀態&lt;span class="o">(&lt;/span>/usr/local/bin/redis-cli -p &lt;span class="m">26379&lt;/span> info &lt;span class="p">|&lt;/span> grep -i &lt;span class="o">{{&lt;/span> &lt;span class="k">function&lt;/span> &lt;span class="o">}})&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="p">[&lt;/span>&lt;span class="l">root@ansible ansible]# cat se_redis-config-test_deploy.yml&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">##################變數定義與獲取、判斷輸入選項(Jenkins本地端操作)###################&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">all&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gather_facts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tasks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 1. 獲取項目的工作目錄 {{ workspace.stdout }}&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Get WorkSpace Work Path&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">shell&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cmd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;echo ${WORKSPACE}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">workspace&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">delegate_to&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 2. 確認function是否沒有選擇，沒有選擇，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Function Choice&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">shell&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cmd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;echo {{ function }} | wc -w&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">is_function&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">delegate_to&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;0&amp;#39; == is_function.stdout&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 3. 確認masterip不能沒有輸入，沒有輸入，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Masterip Input&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">shell&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cmd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;echo {{ masterip }} | wc -w&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">is_masterip&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">delegate_to&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;0&amp;#39; == is_masterip.stdout&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 4. 確認masterip只能一個，一個以上則報錯，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Masterip Count&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">shell&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cmd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;echo -e &amp;#39;{{ masterip }}&amp;#39; | wc -l&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">is_masterip&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">delegate_to&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;is_masterip.stdout &amp;gt; &amp;#39;1&amp;#39;&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 5. 確認slaveip不能沒有輸入，沒有輸入，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Slaveip Input&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">shell&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">cmd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;echo {{ slaveip }} | wc -w&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">is_slaveip&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">delegate_to&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">127.0.0.1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;0&amp;#39; == is_slaveip.stdout&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">################################masterip開始流程###################################&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{{ masterip }}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gather_facts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tasks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 0. 確認Redis服務是否活著，活著的話，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Redis Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/usr/bin/systemctl is-active redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">command_result&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;active&amp;#39; == command_result.stdout&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 0. 確認Redis-Sentinel服務是否活著，活著的話，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Redis-Sentinel Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/usr/bin/systemctl is-active redis-sentinel&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">command_result&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;active&amp;#39; == command_result.stdout&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 1. 拷貝檔案至遠端主機&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy Filepath To Remote Server&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{{ workspace.stdout }}/{{ zone }}/{{ function }}/&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/usr/local/redis/&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0644&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 2. 替換redis-sentinel.conf配置文件，將masterip寫入&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Replace Masterip To redis-sentinel.conf&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">shell&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;sed -i &amp;#39;s/o.o.o.o/{{ masterip }}/g&amp;#39; /usr/local/redis/redis-sentinel.conf&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">################################slaveip開始流程###################################&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{{ slaveip }}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gather_facts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tasks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 0. 確認Redis服務是否啟動，啟動的話，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Redis Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/usr/bin/systemctl is-active redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">command_result&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;active&amp;#39; == command_result.stdout&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 0. 確認Redis-Sentinel服務是否啟動，啟動的話，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Redis-Sentinel Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/usr/bin/systemctl is-active redis-sentinel&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">command_result&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;active&amp;#39; == command_result.stdout&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 1. 拷貝檔案至遠端主機&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Copy Filepath To Remote Server&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">copy&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">src&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{{ workspace.stdout }}/{{ zone }}/{{ function }}/&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">dest&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/usr/local/redis/&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">owner&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">group&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">mode&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;0644&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 2. 替換redis-sentinel.conf配置文件，將masterip寫入&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Replace Masterip To redis-sentinel.conf&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">shell&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;sed -i &amp;#39;s/o.o.o.o/{{ masterip }}/g&amp;#39; /usr/local/redis/redis-sentinel.conf&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 3. 將slaveof masterip 6379寫入redis.conf配置文件&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Add Slaveof To redis.conf&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">blockinfile&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">path&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/usr/local/redis/redis.conf&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">block&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="sd">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="sd"> slaveof {{ masterip }} 6379&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="c">##################################all開始流程#####################################&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>- &lt;span class="nt">hosts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">all&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gather_facts&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">tasks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 0. 確認Redis服務是否啟動，啟動的話，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Redis Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/usr/bin/systemctl is-active redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">command_result&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;active&amp;#39; == command_result.stdout&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 0. 確認Redis-Sentinel服務是否啟動，啟動的話，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Redis-Sentinel Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/usr/bin/systemctl is-active redis-sentinel&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">command_result&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;active&amp;#39; == command_result.stdout&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 1. 啟動，開機自啟動redis服務&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 2. 確認Redis服務是否正常啟動，不啟動的話，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Enabled、Started Redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">systemd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Redis Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/usr/bin/systemctl is-active redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">command_result&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;failed&amp;#39; in command_result.stdout or &amp;#39;unknown&amp;#39; in command_result.stdout or &amp;#39;inactive&amp;#39; in command_result.stdout&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 3. 啟動，開機自啟動redis-sentinel服務&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 4. 確認Redis-Sentinel服務是否正常啟動，不啟動的話，報錯終止流程&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Enabled、Started Redis-Sentinel&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">systemd&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redis-sentinel&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">enabled&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">state&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">started&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Redis-Sentinel Service&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">command&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">/usr/bin/systemctl is-active redis-sentinel&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">command_result&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">failed_when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;&amp;#39;failed&amp;#39; in command_result.stdout or &amp;#39;unknown&amp;#39; in command_result.stdout or &amp;#39;inactive&amp;#39; in command_result.stdout&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># redis-sentinel剛啟動連接，需要一點時間偵測，所以流程暫停5秒&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Pause for 5 seconds to build app cache&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">pause&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">seconds&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">5&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 5. 查看Redis-Sentinel狀態連接狀態(/usr/local/bin/redis-cli -p 26379 info | grep -i web-front)&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Check Redis-Sentinel info&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">shell&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;/usr/local/bin/redis-cli -p 26379 info | grep -i {{ function }}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">register&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;command_result&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">args&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">warn&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">no&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ignore_errors&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">Runcommand Redis-Sentinel info Msg&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">debug&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">msg&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s2">&amp;#34;{{ command_result.stdout_lines }}&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ignore_errors&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="kc">True&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="jenkins-free-style專案建立">Jenkins Free-Style專案建立&lt;/h1>
&lt;h2 id="1-創建free-style軟體專案">1. 創建Free-Style軟體專案&lt;/h2>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481aMfv8sP1jS.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481aMfv8sP1jS.png"
>&lt;/p>
&lt;h2 id="2-參數化構建">2. 參數化構建&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">Active Choices Parameter
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/201324816dBspBN6eY.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/201324816dBspBN6eY.png"
>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481CW3GbdJirK.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481CW3GbdJirK.png"
>&lt;/p>
&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">Active Choices Reactive Parameter
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481Lp13bGXNcC.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481Lp13bGXNcC.png"
>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481iOycuFWgoP.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481iOycuFWgoP.png"
>&lt;/p>
&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">文字參數
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481eP6AKSX7e5.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481eP6AKSX7e5.png"
>&lt;/p>
&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">文字參數
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481yAkfGqKUdj.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481yAkfGqKUdj.png"
>&lt;/p>
&lt;hr>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">使用ansible這台主機來跑佈屬流程
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481ipmJ9CICyP.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481ipmJ9CICyP.png"
>&lt;/p>
&lt;h2 id="3-原始碼管理">3. 原始碼管理&lt;/h2>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481ZKuUi0pyiK.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481ZKuUi0pyiK.png"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">原始碼管理&lt;span class="o">(&lt;/span>連接Gitlab&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##### Gitlab複製下來的clone&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">http://gitlab.jimmyhome.tw/root/redis-config-test.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##### Credential&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">連接gitlab帳號和密碼
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481Kr0sAjwIin.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481Kr0sAjwIin.png"
>&lt;/p>
&lt;h2 id="4-build-steps-invoke-ansible-playbook">4. Build Steps: Invoke Ansible Playbook&lt;/h2>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481pTjDL6LvhP.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481pTjDL6LvhP.png"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">Invoke Ansible Playbook
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##### ansible腳本位置&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Playbook path: /root/ansible/se_redis-config-test_deploy.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">##### Inventory主機IP&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">以下撰寫方式，ip都會傳入
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481uYiDE3t2eA.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481uYiDE3t2eA.png"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">連接要佈屬的主機，使用帳號，我這裡用key，
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">所以我有從ansible主機，產生key，ssh-copy-id 要佈屬的主機
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># ssh-copy-id 192.168.1.11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/ssh-copy-id: INFO: Source of key&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> to be installed: &lt;span class="s2">&amp;#34;/root/.ssh/id_rsa.pub&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span>, to filter out any that are already installed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/ssh-copy-id: INFO: &lt;span class="m">1&lt;/span> key&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> remain to be installed -- &lt;span class="k">if&lt;/span> you are prompted now it is to install the new keys
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@192.168.1.11&lt;span class="s1">&amp;#39;s password:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Number of key(s) added: 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">Now try logging into the machine, with: &amp;#34;ssh &amp;#39;&lt;/span>192.168.1.11&lt;span class="err">&amp;#39;&lt;/span>&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">and check to make sure that only the key(s) you wanted were added.
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">[root@ansible ~]# ssh-copy-id 192.168.1.12
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">[root@ansible ~]# ssh-copy-id 192.168.1.13
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">[root@ansible ~]# ssh-copy-id 192.168.1.14
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">Jenkins參數，要傳入ansible內
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Extra Variables
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481JVmDfr5D8r.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481JVmDfr5D8r.png"
>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481lnceXat7Q5.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481lnceXat7Q5.png"
>&lt;/p>
&lt;h2 id="5-建置測試">5. 建置測試&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">可以看到，zone選擇，function也會跟著變動
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481kddeuPgLDr.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481kddeuPgLDr.png"
>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481KWj671Rc4p.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481KWj671Rc4p.png"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">輸入IP處，slaveip可以輸入多個
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481GguK5r8Es5.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481GguK5r8Es5.png"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">可以看到，redis-sentinel已經成功啟動，有偵測到目前master是誰，也偵測到slaves主機有3台，總共4台主機啟動sentinel服務
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481BEZgT17eQl.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481BEZgT17eQl.png"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">進redis主機直接確認，使用redis-cli登入，選擇index 1，
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">set&lt;/span> 1個key為test value為1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">get key test，value為1
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&amp;gt; &lt;span class="k">select&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>&amp;gt; &lt;span class="nb">set&lt;/span> &lt;span class="nb">test&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">OK
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1:6379&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>&amp;gt; get &lt;span class="nb">test&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@redis01 redis&lt;span class="o">]&lt;/span>&lt;span class="c1"># redis-cli -p 26379&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">master0:name&lt;span class="o">=&lt;/span>search,status&lt;span class="o">=&lt;/span>ok,address&lt;span class="o">=&lt;/span>192.168.1.11:6379,slaves&lt;span class="o">=&lt;/span>3,sentinels&lt;span class="o">=&lt;/span>&lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">可以看到，如果再次佈屬，會顯示失敗，因為主機redis和redis-sentinel服務如果是active狀態，就不能佈屬&lt;span class="o">(&lt;/span>腳本一開始就有添加此段），
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">防止輸入IP輸錯，導致設定檔覆蓋，營運中的redis服務異常
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481P7LDryWPOC.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481P7LDryWPOC.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230913/20132481R6pScPLx4K.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230913/20132481R6pScPLx4K.png"
>&lt;/p>
&lt;h1 id="youtube教學影片">YouTube教學影片&lt;/h1>
&lt;p>&lt;a class="link" href="https://www.youtube.com/watch?v=2h1r68Im_Bg" target="_blank" rel="noopener"
>&lt;img src="https://img.youtube.com/vi/2h1r68Im_Bg/0.jpg"
loading="lazy"
alt="Yes"
>&lt;/a>&lt;/p></description></item><item><title>Day04 - 基本數據類型(bool、tuple、set)，與使用者交互，格式化輸出，基本運算符，常用賦值符，邏輯運算符，成員運算符，身份運算符，練習題</title><link>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day04/</link><pubDate>Sat, 07 Oct 2023 03:02:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day04/</guid><description>&lt;h2 id="基本數據類型之布爾值bool">基本數據類型之布爾值bool&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">用來判斷事物的對錯&lt;/span> &lt;span class="n">是否可行&lt;/span> &lt;span class="n">只要用於流程控制中&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">只有兩種狀態&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kc">True&lt;/span> &lt;span class="n">對的&lt;/span> &lt;span class="n">真的&lt;/span> &lt;span class="n">可行的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="kc">False&lt;/span> &lt;span class="n">錯的&lt;/span> &lt;span class="n">假的&lt;/span> &lt;span class="n">不可行的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">python中所有數據都自帶布爾值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">布爾值為False的數據有&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="kc">None&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&lt;/span> &lt;span class="p">[]&lt;/span> &lt;span class="p">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">布爾值為True的數據有&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="n">除了上面的都是True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">存儲布爾值的變數名一般推薦使用is開頭&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">is_delete&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">is_alive&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="kc">True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">很多程式中提供的註銷帳戶的功能 其實底層並沒有刪除數據 而是修改了數據的狀態
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">id username password phone is_delete
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">1 jimmy 123 110 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">2 kevin 321 120 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>EX：&lt;/code>
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1UKGhrcTgQmiyHRSeR7Lg-fih_pbBeH9z"
loading="lazy"
alt="[media/Pasted image 20230924132454.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1ULYWLzB01iQ7GzcVwSDX1m3leDzrEiPD"
loading="lazy"
alt="[media/Pasted image 20230924132503.png]"
>&lt;/p>
&lt;h2 id="基本數據類型之元組tuple">基本數據類型之元組tuple&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">也稱為&lt;/span>&lt;span class="err">『&lt;/span>&lt;span class="n">不可變&lt;/span>&lt;span class="err">』&lt;/span>&lt;span class="n">的列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">元組內索引綁定的記憶體位址不能修改&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">小括弧括起來&lt;/span> &lt;span class="n">內部存放多個數據值&lt;/span> &lt;span class="n">數據值與數據值之間逗號隔開&lt;/span> &lt;span class="n">數據值可以是任何數據類型&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">代碼實現&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">元組與列表的對比&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span> &lt;span class="c1"># 獲取索引0對應的數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">666&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># [666, 22, 33]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 元組&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">33&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">0&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">999&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 報錯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 練習題 元組混列表&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">111&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">222&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">666&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># (11, 22, [111, 666])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> A.直接報錯
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> B.(11, 22, [111, 666])
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> C.不知道 超出了我的認知
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">5.&lt;/span>&lt;span class="n">元組內如果只有一個數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">11.11&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Jimmy&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t3&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># &amp;lt;class &amp;#39;int&amp;#39;&amp;gt; &amp;lt;class &amp;#39;float&amp;#39;&amp;gt; &amp;lt;class &amp;#39;str&amp;#39;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="mf">11.11&lt;/span>&lt;span class="p">,)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">t3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;Jimmy&amp;#39;&lt;/span>&lt;span class="p">,)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t1&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t2&lt;/span>&lt;span class="p">),&lt;/span> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">t3&lt;/span>&lt;span class="p">))&lt;/span> &lt;span class="c1"># &amp;lt;class &amp;#39;tuple&amp;#39;&amp;gt; &amp;lt;class &amp;#39;tuple&amp;#39;&amp;gt; &amp;lt;class &amp;#39;tuple&amp;#39;&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 建議：以後在使用可以存放多個數據值的數據類型時 如果裡面暫時只有一個數據值 那麼也建議你加上逗號
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>EX1：元組與列表的對比&lt;/code>&lt;/p>
&lt;p>列表：
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1UNTMp4yPuolhPzSyPej2VZie3y03TLf_"
loading="lazy"
alt="[media/Pasted image 20230924133144.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1UOCTk877VtPQb3_GoVL5dnoZtF1Pi6LX"
loading="lazy"
alt="[media/Pasted image 20230924133151.png]"
>&lt;/p>
&lt;p>圖解：
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1UXXhPnGt7AQAzIcjEZ6eETZxg6au4jg6"
loading="lazy"
alt="[media/Pasted image 20230924134118.png]"
>&lt;/p>
&lt;p>元組：
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1USayX3L1mJbGYMNE0rmGYGP_dSAy9MnQ"
loading="lazy"
alt="[media/Pasted image 20230924133230.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1UT9-mFcjaWiEzJQvJvZd4xsWCJlL4697"
loading="lazy"
alt="[media/Pasted image 20230924133318.png]"
>&lt;/p>
&lt;p>圖解：
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1UmZ9kksysocDyVU5UJaUrfqvwW4Zq2k2"
loading="lazy"
alt="[media/Pasted image 20230924134132.png]"
>
&lt;code>EX2：練習題 元組混列表&lt;/code>
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1UwJib92QzhP14nFJVOnNvudHTYWdWnha"
loading="lazy"
alt="[media/Pasted image 20230924134356.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1UxJwb9ou21ZOiRZJe29eqWZX4K-0--gQ"
loading="lazy"
alt="[media/Pasted image 20230924134515.png]"
>&lt;/p>
&lt;p>圖解：&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1V9ypSNxKABMRj5Jblfh5oiF8wyayrqFr"
loading="lazy"
alt="[media/Pasted image 20230924134920.png]"
>&lt;/p>
&lt;p>&lt;code>EX3：元組內如果只有一個數據值&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1VO20_6qbUH0mokCtLZkTo1MErCh2vYYF"
loading="lazy"
alt="[media/Pasted image 20230924140052.png]"
>&lt;/p>
&lt;h2 id="基本數據類型之集合set">基本數據類型之集合set&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">集合只能用於去重和關係運算&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">後面再講&lt;/span> &lt;span class="n">暫且忽略&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">集合內數據只能是不可變類型&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">後面再講&lt;/span> &lt;span class="n">暫且忽略&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">大括弧括起來&lt;/span> &lt;span class="n">內部存放多個數據值&lt;/span> &lt;span class="n">數據值與數據值之間逗號隔開&lt;/span> &lt;span class="n">數據值不是k&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="n">v鍵值對&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">代碼實現&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">s1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">3&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">4&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">5&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">6&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">5.&lt;/span>&lt;span class="n">定義空集合與空字典&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{}&lt;/span> &lt;span class="n">預設是字典&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">set&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="n">定義空集合&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>EX1：定義空集合&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1VKrI0Ly6DmQzf9Y1KFrV-AvR4wk21HXw"
loading="lazy"
alt="[media/Pasted image 20230924135732.png]"
>&lt;/p>
&lt;h2 id="與使用者交互">與使用者交互&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">獲取使用者輸入&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">input&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 獲取使用者輸入&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;請輸入您的使用者名&amp;gt;&amp;gt;&amp;gt;：&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 1.先執行input獲取用戶輸入
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 2.將輸入的數據綁定給變數名username
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 3.以後在程式中就可以使用變數名反覆調用用戶數據
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">強調&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="n">input獲取到的數據都會統一處理成字串類型&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">輸出內部資訊&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">括弧內既可以放數據值也可以放變數名&lt;/span> &lt;span class="n">並且支援多個&lt;/span> &lt;span class="n">逗號隔開即可&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">print自帶換行符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">換行符&lt;/span>&lt;span class="err">：&lt;/span>\&lt;span class="n">r&lt;/span>\&lt;span class="n">n&lt;/span> \&lt;span class="n">n&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">斜杠與字母組合到一起可能會產生特殊的含義&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">print也可以切換結束符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">數據&lt;/span>&lt;span class="p">,&lt;/span>&lt;span class="n">end&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;預設是&lt;/span>&lt;span class="se">\n&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">擴展&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="n">python2與python3中兩個關鍵字的區別&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python2中&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">input方法需要使用者自己提前指定數據類型&lt;/span> &lt;span class="n">寫什麼類型就是什麼類型&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">raw_input方法與python3中input一致&lt;/span> &lt;span class="n">輸入的統一處理成字串&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python2中&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">print方法有兩種使用方式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span> &lt;span class="n">數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">資料值&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>EX1：1.獲取使用者輸入&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1VPOQE18WZKXhim0p24AEhtEnVy_jtD-S"
loading="lazy"
alt="[media/Pasted image 20230924145933.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1VkabhN6YRWzirOeB-bVgy_ze2foYKJSN"
loading="lazy"
alt="[media/Pasted image 20230924145941.png]"
>&lt;/p>
&lt;p>&lt;code>EX2：input獲取到的數據都會統一處理成字串類型&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1VsxamENYyMmjSV-JrltrewhKCHuZrg2E"
loading="lazy"
alt="[media/Pasted image 20230924150312.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1Vkno0qxdZCQoDMt8OiuSFkC8JIO60MpQ"
loading="lazy"
alt="[media/Pasted image 20230924150214.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1VmtBhmKDm2226V3cxn9QV05MUKjq9_ir"
loading="lazy"
alt="[media/Pasted image 20230924150232.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1Vo98sapoA8uZ2vBzEOYFpt7ajWuljH2z"
loading="lazy"
alt="[media/Pasted image 20230924150303.png]"
>&lt;/p>
&lt;p>&lt;code>EX3：輸出內部資訊&lt;/code>
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1W0t52WQYj7_a0SpkKLzC-SIwRNOcyAay"
loading="lazy"
alt="[media/Pasted image 20230924150850.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1W3B8TAGggJvONfAFT22NOW8jdXPLICMr"
loading="lazy"
alt="[media/Pasted image 20230924150902.png]"
>&lt;/p>
&lt;p>&lt;code>EX4：2.print自帶換行符&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1W3ym1qprsvZu6qDWUQTqefWfn6EWvJ8N"
loading="lazy"
alt="[media/Pasted image 20230924151229.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1W4oTdG5E_bKa9A-rb6ReBKmewMmfjfXY"
loading="lazy"
alt="[media/Pasted image 20230924151236.png]"
>&lt;/p>
&lt;p>&lt;code>EX5：3.print也可以切換結束符&lt;/code>
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1W5Pf2x060pAfzyPQQ7Ieo85CkNjVMbBF"
loading="lazy"
alt="[media/Pasted image 20230924151416.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1W94i8AqA_BnBnGWHhLpPS910Y2CXAHkR"
loading="lazy"
alt="[media/Pasted image 20230924151424.png]"
>&lt;/p>
&lt;p>&lt;code>EX6：python2與python3中兩個關鍵字的區別&lt;/code>&lt;/p>
&lt;p>python2&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">input方法需要使用者自己提前指定數據類型 寫什麼類型就是什麼類型
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">raw_input方法與python3中input一致 輸入的統一處理成字串
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1WFqqGgia6hn5VKdqA6vMoD6Dicos0XUl"
loading="lazy"
alt="[media/Pasted image 20230924152959.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1WMVeustUNexvZBCM2qzLvgFN2d6ODR6p"
loading="lazy"
alt="[media/Pasted image 20230924153037.png]"
>&lt;/p>
&lt;p>python2&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">print方法有兩種使用方式
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> print 數據值
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> print(資料值)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1WOrXnz3jBL39bAzTrBvZm3yU9Q6f4pqJ"
loading="lazy"
alt="[media/Pasted image 20230924153154.png]"
>&lt;/p>
&lt;h2 id="格式化輸出">格式化輸出&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">提前定義好一些內容&lt;/span> &lt;span class="n">將來需要使用的時候可以局部修改&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">代碼實現&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">在現實生活中大部分情況下使用下劃線提示別人填寫內容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">但是在程式中需要使用佔位元&lt;/span>&lt;span class="err">：&lt;/span>&lt;span class="o">%&lt;/span>&lt;span class="n">s&lt;/span> &lt;span class="o">%&lt;/span>&lt;span class="n">d&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">info&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s1">同學你好&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;單個佔位符&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(info % &amp;#39;Jimmy&amp;#39;) # Jimmy同學你好&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;%s同學你好&amp;#39; % &amp;#39;Tony&amp;#39;) # Tony同學你好&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(info % (&amp;#39;Jimmy&amp;#39;,))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;%s同學你好&amp;#39; % (&amp;#39;Tony&amp;#39;,))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;多個佔位符&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># desc = &amp;#39;姓名：%s 年齡：%s 愛好：%s&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(desc % (&amp;#39;Jimmy&amp;#39;, 18, &amp;#39;read&amp;#39;))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;姓名：%s 年齡：%s 愛好：%s&amp;#39; % (&amp;#39;tony&amp;#39;, 28, &amp;#39;rap&amp;#39;))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;注意事項：有幾個佔位符就需要幾個數據值&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;my name is %s my age is %s&amp;#39; % (&amp;#39;Jimmy&amp;#39;,)) # 少了不行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;my name is %s my age is %s&amp;#39; % (&amp;#39;Jimmy&amp;#39;, 18, &amp;#39;read&amp;#39;)) # 多了不行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;不同佔位符的區別&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># demo1 = &amp;#39;%s您好 您本月的話費是%s 餘額是%s&amp;#39; # %s常見數據類型都支援&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(demo1 % (&amp;#39;Jimmy&amp;#39;, 100, 10000000000000))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># demo2 = &amp;#39;%d您好 您本月的話費是%d 餘額是%d&amp;#39; # %d只支援數字類型&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(demo2 % (&amp;#39;tony&amp;#39;, 1000000000, -100000))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">%08d&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="o">%&lt;/span> &lt;span class="mi">123&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 00000123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="si">%08d&lt;/span>&lt;span class="s1">&amp;#39;&lt;/span>&lt;span class="o">%&lt;/span> &lt;span class="mi">1234324324&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 1234324324&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>EX1：單個佔位符&lt;/code>
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1WP1pcqIn0k9lsBtqHVkDSkK66kjS8A7p"
loading="lazy"
alt="[media/Pasted image 20230924154615.png]"
>&lt;/p>
&lt;p>&lt;code>EX2：多個佔位符&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1WPVVNs4kxeI27ZmVyDqtUJoGHJbdEJ4X"
loading="lazy"
alt="[media/Pasted image 20230924154626.png]"
>&lt;/p>
&lt;p>&lt;code>EX3：注意事項：有幾個佔位符就需要幾個數據值&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1WXJKWeotlTge8-WUmbJgX2GsCijcjga1"
loading="lazy"
alt="[media/Pasted image 20230924154812.png]"
>&lt;/p>
&lt;p>&lt;code>EX4：不同佔位符的區別&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">%s常見數據類型都支援
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1W_5ByyA9tqEV2I32Tg_O0F3MRfv6Wyrc"
loading="lazy"
alt="[media/Pasted image 20230924154936.png]"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">%d只支援數字類型
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1Wa1yC-SM5HnhTs-2tl0qUGxF624oh_GN"
loading="lazy"
alt="[media/Pasted image 20230924154951.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1WeKTpra0DR3xzB1soOyiNvmaeJBhkQ4I"
loading="lazy"
alt="[media/Pasted image 20230924155002.png]"
>&lt;/p>
&lt;p>&lt;code>EX5：%d補位功能&lt;/code>
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1WijFevjuTzqETBz3i2lu6_F7zJu_UxNG"
loading="lazy"
alt="[media/Pasted image 20230924155155.png]"
>&lt;/p>
&lt;h2 id="基本運算符">基本運算符&lt;/h2>
&lt;p>以下假設變數： &lt;strong>a=10，b=20&lt;/strong>：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>運算符&lt;/th>
&lt;th>描述&lt;/th>
&lt;th>實例&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>+&lt;/td>
&lt;td>加 - 兩個物件相加&lt;/td>
&lt;td>a + b 輸出結果 30&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-&lt;/td>
&lt;td>減 - 得到負數或是一個數減去另一個數&lt;/td>
&lt;td>a - b 輸出結果 -10&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>*&lt;/td>
&lt;td>乘 - 兩個數相乘或是返回一個被重複若干次的字串&lt;/td>
&lt;td>a * b 輸出結果 200&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>/&lt;/td>
&lt;td>除 - x除以y&lt;/td>
&lt;td>b / a 輸出結果 2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>%&lt;/td>
&lt;td>取餘 - 返回除法的餘數&lt;/td>
&lt;td>b % a 输出结果 0&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>**&lt;/td>
&lt;td>次方 - 返回x的y次方&lt;/td>
&lt;td>a**b 為10的20次方， 輸出結果 100000000000000000000&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>//&lt;/td>
&lt;td>取整除 - 傳回商的整數部分（向下取整）&lt;/td>
&lt;td>&amp;raquo;&amp;gt;9//2 4, &amp;raquo;&amp;gt;-9//2 -5&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">數學運算符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">+&lt;/span> &lt;span class="o">-&lt;/span> &lt;span class="o">*&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="o">//&lt;/span> &lt;span class="o">**&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">簡化寫法&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">+=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># n = n + 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">-=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># n = n - 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">*=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># n = n * 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">/=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># n = n / 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">%=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># n = n % 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">//=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># n = n // 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">**=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># n = n ** 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">比較運算符&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="o">&amp;lt;=&lt;/span> &lt;span class="o">&amp;gt;=&lt;/span> &lt;span class="o">==&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">等於號&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="o">!=&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">不等於&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="常用賦值符">常用賦值符&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">鏈式賦值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># name = &amp;#39;jimmy&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># name1 = name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># name2 = name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 鏈式賦值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">name1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">name2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">交叉賦值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">m&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">999&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;讓m和n互相轉換綁定的值&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;奇葩式寫法&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># m = n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># n = m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(m, n) # 999 999&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;方式1:採用中間變數&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># temp = m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># m = n&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># n = temp&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(m, n) # 999 100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;方式2:交叉賦值語法&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">m&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">m&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">n&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 999 100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">解壓賦值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;oscar&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;low的寫法&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># name1 = name_list[0]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># name2 = name_list[1]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># name3 = name_list[2]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># name4 = name_list[3]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;解壓賦值語法&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># name1, name2, name3, name4 = name_list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;解壓賦值在使用的時候 正常情況下需要保證左邊的變數名與右邊的數據值個數一致&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># a, b = name_list # 變數名少了不行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># a, b, c, d, e = name_list # 變數名多了也不行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;當需要解壓的數據個數特別多 並且我們只需要使用其中的幾個 那麼可以打破上述的規則&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># a, *b = name_list # *會自動接收多餘的數據 組織成列表賦值給後面的變數名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(a) # jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(b) # [&amp;#39;kevin&amp;#39;, &amp;#39;tony&amp;#39;, &amp;#39;oscar&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># a, c, *b = name_list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(a)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(c)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(b) # [&amp;#39;tony&amp;#39;, &amp;#39;oscar&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># a, *b, c = name_list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(a) # jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(b) # [&amp;#39;kevin&amp;#39;, &amp;#39;tony&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(c) # oscar&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;當數據值不準備使用的時候 可以使用下劃線作為變數名綁定&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="n">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">c&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">name_list&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>EX1：1.鏈式賦值&lt;/code>
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1WkvQeI6jCqx7LjxeD_Am633bE3dPe4oW"
loading="lazy"
alt="[media/Pasted image 20230924161001.png]"
>&lt;/p>
&lt;p>&lt;code>EX2：2.交叉賦值&lt;/code>&lt;/p>
&lt;p>奇葩式寫法：
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1Wmf0RWqS1D14pwwMfR4VdUTnU45P_iBF"
loading="lazy"
alt="[media/Pasted image 20230924161159.png]"
>&lt;/p>
&lt;p>圖解：
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1Wrj8gJjos962NQSM6-e-cXC4F1142kXQ"
loading="lazy"
alt="[media/Pasted image 20230924161420.png]"
>&lt;/p>
&lt;p>方式1:採用中間變數：&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1WyO8xfP9rSwPRckHth_LzW_TzaHZxiNR"
loading="lazy"
alt="[media/Pasted image 20230924161617.png]"
>&lt;/p>
&lt;p>圖解：&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1X2zQV0va9R_TiyURbSjzJ5dvrf8mPnLz"
loading="lazy"
alt="[media/Pasted image 20230924161808.png]"
>&lt;/p>
&lt;p>方式2:交叉賦值語法：&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1X5Uf-m-CqZfwJAa9AIYBtrB5BOhUWutw"
loading="lazy"
alt="[media/Pasted image 20230924161858.png]"
>&lt;/p>
&lt;p>&lt;code>EX3：3.解壓賦值&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1XBRguC_2efTtnrCvkyg5NrAxA3J2zmly"
loading="lazy"
alt="[media/Pasted image 20230924162110.png]"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">解壓賦值在使用的時候 正常情況下需要保證左邊的變數名與右邊的數據值個數一致
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">變數名少了不行
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">變數名多了也不行
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1XGmJgvg3Ct36F1ynSkZ2dDXEBUqBWihW"
loading="lazy"
alt="[media/Pasted image 20230924162629.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1XKdhAVdFrw-6Fg1Mv0BNxyU856UK5yaA"
loading="lazy"
alt="[media/Pasted image 20230924162744.png]"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">當需要解壓的數據個數特別多 並且我們只需要使用其中的幾個 那麼可以打破上述的規則
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">*會自動接收多餘的數據 組織成列表賦值給後面的變數名
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1XLkR3uSy4o9PVsG-Mk4ZfUHaK_eLy5QG"
loading="lazy"
alt="[media/Pasted image 20230924162813.png]"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">當數據值不準備使用的時候 可以使用下劃線作為變數名綁定
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1XPnZIlwsKPV_JO5iD599aBNAhlLQPKsa"
loading="lazy"
alt="[media/Pasted image 20230924163036.png]"
>&lt;/p>
&lt;h2 id="邏輯運算符">邏輯運算符&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;主要配合條件一起使用&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ow">and&lt;/span> &lt;span class="n">與&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">and連接的多個條件必須全部成立&lt;/span> &lt;span class="n">結果才成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">如果條件中全部由and組成那麼判斷起來非常的簡單&lt;/span> &lt;span class="n">只要發現一個不成立&lt;/span> &lt;span class="n">結果就不成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">666&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 666 成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">8&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># True 成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">111&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">222&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 222 成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">如果需要你準確的說出具體的結果值&lt;/span> &lt;span class="n">那麼需要按照下列方式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">如果and左邊的條件是成立的&lt;/span> &lt;span class="n">那麼就完全取決於右邊的條件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">右邊如果直接是數據值&lt;/span> &lt;span class="n">那麼結果就是該數據值&lt;/span> &lt;span class="n">如果是含有表達式&lt;/span> &lt;span class="n">則為布爾值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ow">or&lt;/span> &lt;span class="n">或&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">or連接的多個條件只要有一個成立&lt;/span> &lt;span class="n">結果就成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;gt;&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">8&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">10&lt;/span> &lt;span class="o">&amp;lt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="n">如果條件中全部由or組成那麼判斷起來非常的簡單&lt;/span> &lt;span class="n">只要發現一個成立&lt;/span> &lt;span class="n">結果就成立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(1 &amp;lt; 10 or 666) # True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># print(666 or 1 &amp;gt; 10) # 666&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="kc">False&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">0&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">111&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># 111&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">規律用and&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ow">not&lt;/span> &lt;span class="n">非&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">取反&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">類似於說反話&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ow">not&lt;/span> &lt;span class="mi">1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># False &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="ow">not&lt;/span> &lt;span class="mi">0&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">三者混合使用的時候有優先順序之分 但是我們不需要記憶優先順序 應該通過代碼的形式提前規定好優先順序
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> eg: 先乘除後加減 但是可以使用括弧來改變優先順序
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> (3&amp;gt;4 and 4&amp;gt;3) or ((1==3 and &amp;#39;x&amp;#39; == &amp;#39;x&amp;#39;) or 3 &amp;gt;3)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>EX1：and&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1Xyz3gB-X7v4DTCPqX4rSYxETeMR6sWy7"
loading="lazy"
alt="[media/Pasted image 20230924213932.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1Y7DNOYpHFD6iVck8oL2hOXKhJaU3trM0"
loading="lazy"
alt="[media/Pasted image 20230924214104.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1YNfbbQUaTTy_VEeH3cAFcBU-DQ0dlmPM"
loading="lazy"
alt="[media/Pasted image 20230924214203.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1YOQ6eHPHssCaAsVJQr8bRMF3ItJiA7Cy"
loading="lazy"
alt="[media/Pasted image 20230924214240.png]"
>&lt;/p>
&lt;p>&lt;code>EX2：or&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1YOUNIG8-wKxetNZnv54w3kb5YY42XQ8x"
loading="lazy"
alt="[media/Pasted image 20230924214645.png]"
>&lt;/p>
&lt;p>&lt;code>EX3：not&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1YQdjHEJalfKB5O57xkpmBgR27gq4wxwO"
loading="lazy"
alt="[media/Pasted image 20230924214814.png]"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">三者混合使用的時候有優先順序之分 但是我們不需要記憶優先順序 應該通過代碼的形式提前規定好優先順序
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1YXoEsW0WnrPUO_2vqAq82fXXdV9GtTqA"
loading="lazy"
alt="[media/Pasted image 20230924215046.png]"
>&lt;/p>
&lt;h2 id="成員運算符">成員運算符&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">判斷個體在不在群體內&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># name_list = [&amp;#39;jimmy&amp;#39;, &amp;#39;kevin&amp;#39;, &amp;#39;oscar&amp;#39;, &amp;#39;jerry&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;tony&amp;#39; in name_list) # False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;tony&amp;#39; not in name_list) # True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;j&amp;#39; in name_list) # False 列表最小單位是數據值 不能再細分&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># s1 = &amp;#39;hello world&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;d&amp;#39; in s1) # 字串最小單位是單個單個的字元&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;pwd&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">123&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">d1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># False 字典成員運算只有鍵參與&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span> &lt;span class="ow">in&lt;/span> &lt;span class="n">d1&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1"># True &amp;#39;username&amp;#39; &amp;#39;pwd&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>EX1：成員運算符&lt;/code>&lt;/p>
&lt;p>列表
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1Yen-H1q_kfsgDzHLuXgiNxuhBl9Rtd5a"
loading="lazy"
alt="[media/Pasted image 20230924215420.png]"
>&lt;/p>
&lt;p>字串
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1YjgP1oPtAnhSdC06jODS9DO-MfAV_MZL"
loading="lazy"
alt="[media/Pasted image 20230924215537.png]"
>&lt;/p>
&lt;p>字典
&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1YkrLiCXru6AmHIQ0q8gXucubplhFqJXc"
loading="lazy"
alt="[media/Pasted image 20230924215657.png]"
>&lt;/p>
&lt;h2 id="身份運算符">身份運算符&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">id() 返回一串數字 該數字可以看成是記憶體位址
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="ow">is&lt;/span> &lt;span class="n">判斷記憶體位址是否相同&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">==&lt;/span> &lt;span class="n">判斷數據值是否相同&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># l1 = [11, 22, 33, 44, 55, 66, 77, 88]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># l2 = [11, 22, 33, 44, 55, 66, 77, 88]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(l1 == l2) # True&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(id(l1))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(id(l2))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(l1 is l2) # False&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 小整數池&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">i1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">i2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">i1&lt;/span> &lt;span class="ow">is&lt;/span> &lt;span class="n">i2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">s1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jason jason jason&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">s2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jason jason jason&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">s1&lt;/span> &lt;span class="ow">is&lt;/span> &lt;span class="n">s2&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">不同的環境下可能優化的程度不一樣&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">了解
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 值相同 内存地址可能不同
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 内存地址相同 值肯定相同
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>EX1：身份運算符&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">is 判斷記憶體位址是否相同
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">== 判斷數據值是否相同
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1YlTxoqnPsqOOYuuzz7nwj10lKZjkRizV"
loading="lazy"
alt="[media/Pasted image 20230924220017.png]"
>&lt;/p>
&lt;p>&lt;code>EX2：不同的環境下可能優化的程度不一樣&lt;/code>&lt;/p>
&lt;p>pycharm有額外做優化和解釋器出來結果不一樣&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1YsHUn77xVSBt2YNRLXbDM8Ag3zA9l5GU"
loading="lazy"
alt="[media/Pasted image 20230924220655.png]"
>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1Yu6wBC4MUP1-NKV_3IcmT50yX064U83T"
loading="lazy"
alt="[media/Pasted image 20230924220726.png]"
>&lt;/p>
&lt;h2 id="練習題">練習題&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">獲取使用者輸入並列印成下列格式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">------------&lt;/span> &lt;span class="n">info&lt;/span> &lt;span class="n">of&lt;/span> &lt;span class="n">Jimmy&lt;/span> &lt;span class="o">-----------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Name&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Age&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="mi">18&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Job&lt;/span> &lt;span class="p">:&lt;/span> &lt;span class="n">Teacher&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">----------------&lt;/span> &lt;span class="n">end&lt;/span> &lt;span class="o">-----------------&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 1.先制定一個列印的範本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">info_demo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> ------------ info of &lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2"> -------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Name : &lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Age : &lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> Job : &lt;/span>&lt;span class="si">%s&lt;/span>&lt;span class="s2">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> ---------------- end -----------------
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 2.獲取用戶輸入&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">username&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;username&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;age&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">job&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nb">input&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;job&amp;gt;&amp;gt;&amp;gt;:&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 3.格式化輸出&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">info_demo&lt;/span> &lt;span class="o">%&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="n">username&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">username&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">age&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">job&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">下列變數名v綁定的結果&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">v1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="c1"># 1 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">v2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">3&lt;/span> &lt;span class="c1"># 3 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">v3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># 0 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">v4&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># 1 沒寫執行順序，是not-&amp;gt;and-&amp;gt;or &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">v5&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">2&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="mi">4&lt;/span> &lt;span class="c1"># 1 沒寫執行順序，是not-&amp;gt;and-&amp;gt;or &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">v6&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">0&lt;/span> &lt;span class="ow">or&lt;/span> &lt;span class="kc">False&lt;/span> &lt;span class="ow">and&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="c1"># False&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;code>EX1：1.獲取使用者輸入並列印成下列格式&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1ZD_kB5_uIwEm-F8j_JC4sRUqujPhpuby"
loading="lazy"
alt="[media/Pasted image 20230924221852.png]"
>&lt;/p>
&lt;p>&lt;code>EX2：2.下列變數名v綁定的結果&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://drive.google.com/uc?export=view&amp;amp;id=1ZDzI9mW1ffwb0sF06RyYHZMuolKfKUN5"
loading="lazy"
alt="[media/Pasted image 20230924222521.png]"
>&lt;/p></description></item><item><title>Day03 - pycharm，註解，PEP8規範，變量與常量，基本數據類型int、float、str、list、dict(初探)，練習題(數據類型)</title><link>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day03/</link><pubDate>Sat, 07 Oct 2023 03:00:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day03/</guid><description>&lt;h2 id="pycharm下載與使用">pycharm下載與使用&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">該軟體分為收費版和免費版&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">免費版功能太少&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">community&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">我們盡量使用收費版&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">professional&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="mi">30&lt;/span>&lt;span class="n">天試用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">pycharm比較笨重&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">本身占據的資源較多&lt;/span> &lt;span class="n">並且保持運行的情況下需要消耗計算機1GB多的資源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">文件後綴名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">儲存python代碼的文件後綴名一般叫&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">py&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">如何創建py文件&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">使用pycharm創建的py文件在編寫程式碼的時候有自動提示&lt;/span> &lt;span class="n">tab補全&lt;/span> &lt;span class="n">方向鍵選擇&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">5.&lt;/span>&lt;span class="n">配置調整&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">字體大小&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">編程背景&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">解釋器選擇&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">6.&lt;/span>&lt;span class="n">運行python代碼&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Pycharm官網下載網址：
&lt;a class="link" href="https://www.jetbrains.com/pycharm/download/?section=mac" target="_blank" rel="noopener"
>https://www.jetbrains.com/pycharm/download/?section=mac&lt;/a>&lt;/p>
&lt;h3 id="mac版安裝">MAC版安裝：&lt;/h3>
&lt;p>下載最新版Pycharm
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481jHMxC9Sxc9.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481jHMxC9Sxc9.png"
>&lt;/p>
&lt;p>下載其他版本，我電腦是mac m1晶片
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481b3mJVujroH.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481b3mJVujroH.png"
>&lt;/p>
&lt;p>拖曳過去Applications檔案夾即可
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481JodobzlU6q.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481JodobzlU6q.png"
>&lt;/p>
&lt;p>需要licenses授權，因為我是有購買的，所以我採取登入JB帳號，即可使用
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481MNpYFmG0Db.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481MNpYFmG0Db.png"
>&lt;/p>
&lt;h3 id="windows版安裝">windows版安裝：&lt;/h3>
&lt;p>Next
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481beORdhOGFq.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481beORdhOGFq.png"
>&lt;/p>
&lt;p>目錄選擇簡單一點的名稱，方便後續查找
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481YlDMszlBcn.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481YlDMszlBcn.png"
>&lt;/p>
&lt;p>安裝後，桌面會一個PyCharm的icon捷徑
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481JFXQDhopa8.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481JFXQDhopa8.png"
>&lt;/p>
&lt;h3 id="回到我的mac電腦創建項目">回到我的MAC電腦，創建項目&lt;/h3>
&lt;h4 id="1-處建項目">1. 處建項目&lt;/h4>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481a8M6SCQhSf.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481a8M6SCQhSf.png"
>&lt;/p>
&lt;h4 id="2-location要填寫解釋器選擇先不要用虛擬環境">2. Location要填寫、解釋器選擇，先不要用虛擬環境&lt;/h4>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481G2AyFwQPZh.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481G2AyFwQPZh.png"
>&lt;/p>
&lt;h4 id="3-儲存python代碼的文件後綴名一般叫py">3. 儲存python代碼的文件後綴名一般叫.py&lt;/h4>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/2013248193Hq5yFPpg.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/2013248193Hq5yFPpg.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481bIgMKnOZtX.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481bIgMKnOZtX.png"
>&lt;/p>
&lt;p>項目創建的資料，就會看到上面創建的.py文件
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481KhTkwcjYSy.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481KhTkwcjYSy.png"
>&lt;/p>
&lt;h4 id="4-使用pycharm創建的py文件在編寫程式碼的時候有自動提示-tab補全-方向鍵選擇">4. 使用pycharm創建的py文件在編寫程式碼的時候有自動提示 tab補全 方向鍵選擇&lt;/h4>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481uxHGEjr5gl.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481uxHGEjr5gl.png"
>&lt;/p>
&lt;h4 id="5-配置調整">5. 配置調整&lt;/h4>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/2013248176ZUTEGxB7.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/2013248176ZUTEGxB7.png"
>&lt;/p>
&lt;p>字體
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481mUSWuhh2lg.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481mUSWuhh2lg.png"
>&lt;/p>
&lt;p>背景，我習慣用白的，這裡再依各位個人喜好去修改
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481qNMwDfc2Gg.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481qNMwDfc2Gg.png"
>&lt;/p>
&lt;p>可以看到選擇Darcula，視窗就變暗色系了
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481atQeLJY1Fm.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481atQeLJY1Fm.png"
>&lt;/p>
&lt;p>如果pycharm無法找到python解釋器，可以再來這裡再設定
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324819cPDx76gio.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324819cPDx76gio.png"
>&lt;/p>
&lt;p>有新安裝版本，也能從旁右方齒輪按鍵，去新增
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481Clm05y3Tkc.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481Clm05y3Tkc.png"
>&lt;/p>
&lt;h4 id="6運行python代碼">6.運行python代碼&lt;/h4>
&lt;p>代碼行處，右鍵，即可執行此當下這個.py文件代碼
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481YZKDpusEEK.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481YZKDpusEEK.png"
>&lt;/p>
&lt;p>或者視窗右上面，也能執行
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481rO1yQSlC9P.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481rO1yQSlC9P.png"
>&lt;/p>
&lt;h2 id="python語法之注釋">python語法之注釋&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">什麼是注釋&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">注釋其實就是對一段代碼的解釋說明&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">如何編寫注釋&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">方式1&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">解釋說明文字前加警號&lt;/span> &lt;span class="n">pycharm中有快捷鍵&lt;/span> &lt;span class="n">ctrl&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="o">/&lt;/span> &lt;span class="n">mac電腦&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">用&lt;/span> &lt;span class="n">command&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># 注釋(單行注釋) &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">方式2&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">鍵盤enter鍵左邊那個鍵英文輸入法下連續按三下&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> 多行注釋
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1"> &amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">方式3&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">鍵盤enter鍵左邊那個鍵英文輸入法下&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">shift&lt;/span> &lt;span class="n">連續按三下&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 多行注釋
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s1">&amp;#39;hello world&amp;#39;&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">#1. 這是列印數據方式，單行註釋 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(&amp;#39;hello world&amp;#39;) # Prcharm快捷鍵，command + /(右邊shift左邊那個鍵) &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">2. 多行註釋:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">大家好，我是翻轉吧金魚腦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">3. 多行註釋:
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">哈摟，我是翻轉吧金魚腦
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="pep8規範">PEP8規範&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">pycharm中很多時候會有各種顏色提示還有波浪線
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 只要不是紅線一般都不影響代碼運行
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">python代碼編寫規範&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">單行注釋如果跟在代碼之後&lt;/span> &lt;span class="n">那麼警號與代碼之間需要空兩格&lt;/span> &lt;span class="n">內容與警號空一格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">如果單行注釋自成一行&lt;/span> &lt;span class="n">那麼內容與警號空一格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">如何學習規範&lt;/span> &lt;span class="n">可以借助於pycharm自動化格式程式碼反向學習&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1: 單行注釋如果跟在代碼之後 那麼警號與代碼之間需要空兩格 內容與警號空一格&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324818R0yXdJ2qy.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324818R0yXdJ2qy.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324818uUz9fNCgy.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324818uUz9fNCgy.png"
>&lt;/p>
&lt;p>&lt;strong>&lt;code>EX2: 如果單行注釋自成一行 那麼內容與警號空一格&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324817kAqHOGaO6.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324817kAqHOGaO6.png"
>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481uWlvpQluAk.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481uWlvpQluAk.png"
>&lt;/p>
&lt;p>&lt;strong>&lt;code>EX3: 如何學習規範 可以借助於pycharm自動化格式程式碼反向學習&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324811qduMtokcQ.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324811qduMtokcQ.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324810ppTAhFBsw.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324810ppTAhFBsw.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324817MWBV5NMs6.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324817MWBV5NMs6.png"
>&lt;/p>
&lt;h2 id="變數與常量">變數與常量&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">變數與常量就是為了讓程序具備人記錄事物狀態的能力&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">什麼是變數&lt;/span>&lt;span class="err">?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">記錄變化&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">可能會經常改變&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">的事物狀態&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">eg&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">年齡&lt;/span> &lt;span class="n">容貌&lt;/span> &lt;span class="n">薪資&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">什麼是常量&lt;/span>&lt;span class="err">?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">記錄固定&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">可能不經常改變&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">的事物狀態&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">eg&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">圓周率&lt;/span> &lt;span class="n">重力加速度&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="變數的基本使用">變數的基本使用&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">日常生活中的變數案例&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">翻轉吧金魚腦&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">姓名叫jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">年齡是20&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">性別是男性&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">代碼中如何記錄事物狀態&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">age&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">20&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">gender&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;male&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">變數使用的語法結構與底層原理&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> name = &amp;#39;jimmy&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 變數名 賦值符號 數據值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 1.一旦看到賦值符號 那麼一定先看符號的右側
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 2.在記憶體空間中申請一塊記憶體空間儲存數據值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 3.給數據值綁定一個變數名
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 4.以後就可以通過變數名訪問到數據值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">注意事項&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">同一個數據值可以綁定多個變數名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">賦值符號也可能是變數名&lt;/span> &lt;span class="n">如果是就先找該變數名綁定的數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">一個變數名同一時間只能綁定一個數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">name&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">name1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="mi">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">x&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">x&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">x&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="1-日常生活中的變數案例">1. 日常生活中的變數案例&lt;/h3>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481Uzvr5cf1io.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481Uzvr5cf1io.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481WlmsceNEuR.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481WlmsceNEuR.png"
>&lt;/p>
&lt;h3 id="2--變數使用的語法結構與底層原理">2. 變數使用的語法結構與底層原理&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> name = &amp;#39;jimmy&amp;#39;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 變數名 賦值符號 數據值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 1.一旦看到賦值符號 那麼一定先看符號的右側
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 2.在記憶體空間中申請一塊記憶體空間儲存數據值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 3.給數據值綁定一個變數名
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 4.以後就可以通過變數名訪問到數據值
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1: 變數名 賦值符號 數據值&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324814tQJ0AtQde.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324814tQJ0AtQde.png"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="n">注意事項&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span> &lt;span class="n">同一個數據值可以綁定多個變數名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">賦值符號也可能是變數名&lt;/span> &lt;span class="n">如果是就先找該變數名綁定的數據值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">一個變數名同一時間只能綁定一個數據值&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1: 一個數據值可以綁定多個變數名(賦值符號也可能是變數名 如果是就先找該變數名綁定的數據值)&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324810DpWmvlU3V.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324810DpWmvlU3V.png"
>
&lt;strong>&lt;code>EX2: 一個變數名同一時間只能綁定一個數據值&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481oJfkaOoaOa.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481oJfkaOoaOa.png"
>&lt;/p>
&lt;h3 id="3-變數名的命名規範">3. 變數名的命名規範&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">變數名的命名規範&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">中文是可以用作變數名的&lt;/span> &lt;span class="n">但是不建議使用&lt;/span> &lt;span class="n">並且容易報錯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">變數名只能出現字母&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">數字&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">下劃線&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">數字不能開頭&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">4.&lt;/span>&lt;span class="n">變數名盡量做到見名知意&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">5.&lt;/span>&lt;span class="n">變數名不能與關鍵字衝突&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1: 中文是可以用作變數名的 但是不建議使用 並且容易報錯&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481wGMhsG0ofs.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481wGMhsG0ofs.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481yfUJgOxbc4.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481yfUJgOxbc4.png"
>&lt;/p>
&lt;p>&lt;strong>&lt;code>EX2: 變數名只能出現字母、數字、下劃線、數字不能開頭&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324812wy2FJw4qC.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324812wy2FJw4qC.png"
>&lt;/p>
&lt;p>&lt;strong>&lt;code>EX3: 見名之意 &lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481cbvhLeBjuE.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481cbvhLeBjuE.png"
>&lt;/p>
&lt;p>&lt;strong>&lt;code>EX4: 關鍵字&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481cFujswvc4n.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481cFujswvc4n.png"
>&lt;/p>
&lt;h3 id="4-變數名的命名風格">4. 變數名的命名風格&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">變數名的命名風格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">下劃線式&lt;/span> &lt;span class="n">python推薦使用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">變數名中單字很多&lt;/span> &lt;span class="n">彼此使用下劃線隔開&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name_from_mysql_db1_userinfo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">駝峰體式&lt;/span> &lt;span class="n">JS推薦使用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">大駝峰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">NameFromMysqlDb1Userinfo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">小駝峰&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">nameFromMysqlDb1Userinfo&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">在同一個程式語言中盡量固定使用一種&lt;/span> &lt;span class="n">不要隨意切換&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1: 下劃線式 (變數名中單字很多 彼此使用下劃線隔開)&lt;/code>&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481hkhaKSLRqx.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481hkhaKSLRqx.png"
>&lt;/p>
&lt;h2 id="常量的基本使用">常量的基本使用&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">在python沒有真正意義上的常量&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">定義了就不能改&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">定義了可以隨時修改&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">在python中如果想表示出常量&lt;/span> &lt;span class="n">那麼可以使用全大寫的變數名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">HOST&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;127.0.0.1&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">除了全大寫之外&lt;/span> &lt;span class="n">其他與變數用法一致&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481LhJDVnqr2N.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481LhJDVnqr2N.png"
>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481htiFUXUnWY.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481htiFUXUnWY.png"
>&lt;/p>
&lt;h2 id="數據類型">數據類型&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">什麼是數據類型&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">在日常生活中數據的表現形式多種多樣&lt;/span> &lt;span class="n">在程序中也是如此&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">為何學習數據類型&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">針對不同的數據採用最佳的數據類型來表示出該數據的價值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">本次學習數據類型僅僅是了解&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">只要看到每個數據類型能夠叫出它們的名字以及代碼如何編寫即可&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span>&lt;span class="n">學前必會&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">如何查看數據值的數據類型&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">數據值&lt;/span>&lt;span class="p">)&lt;/span>\&lt;span class="nb">type&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">變數名&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1: &lt;/code>&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481ykVbo5EJLi.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481ykVbo5EJLi.png"
>&lt;/p>
&lt;h3 id="數據類型之整型int">數據類型之整型int&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">大白話的意思其實就是整數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">應用場景&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">年齡&lt;/span> &lt;span class="n">班級人數&lt;/span> &lt;span class="n">年份&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1:&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481MAkMG50Ua2.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481MAkMG50Ua2.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481qbEse25PFw.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481qbEse25PFw.png"
>&lt;/p>
&lt;h3 id="數據類型之浮點型float">數據類型之浮點型float&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">大白話的意思其實就是小數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">應用場景&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">身高&lt;/span> &lt;span class="n">體重&lt;/span> &lt;span class="n">薪資&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1:&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481d7OY4Wsja0.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481d7OY4Wsja0.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481gbzFuBRKCG.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481gbzFuBRKCG.png"
>&lt;/p>
&lt;h3 id="數據類型之字串str">數據類型之字串str&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">大白話的意思其實就是文本類型的數據&lt;/span>&lt;span class="o">&amp;gt;&amp;gt;&amp;gt;&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">引號引起來的部分都是字串&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">應用場景&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">姓名&lt;/span> &lt;span class="n">地址&lt;/span> &lt;span class="n">愛好&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">定義字串有四種方式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;jimmy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;jimmy&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;jimmy&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">為什麼定義字串需要有多種方式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">我們在字串中編寫文本也可能會使用到引號&lt;/span> &lt;span class="n">為了避免衝突&lt;/span> &lt;span class="n">有了多種方式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">info&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;jimmy說:&amp;#39;好學&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">如何區分三引號是字串還是注釋&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">關注左側是否含有賦值符號和變數名&lt;/span> &lt;span class="n">如果有則為字串&lt;/span> &lt;span class="n">沒有則為注釋&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1:&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481JpAuNseOuw.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481JpAuNseOuw.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481AmriHTCGrm.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481AmriHTCGrm.png"
>&lt;/p>
&lt;h4 id="1定義字串有四種方式">1.定義字串有四種方式&lt;/h4>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">定義字串有四種方式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;jimmy&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;jimmy&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;jimmy&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">為什麼定義字串需要有多種方式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">我們在字串中編寫文本也可能會使用到引號&lt;/span> &lt;span class="n">為了避免衝突&lt;/span> &lt;span class="n">有了多種方式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">info&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;jimmy說：&amp;#39;好學&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">如何區分三引號是字串還是注釋&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">關注左側是否含有賦值符號和變數名&lt;/span> &lt;span class="n">如果有則為字串&lt;/span> &lt;span class="n">沒有則為注釋&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1:&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/2013248168cjHdewDQ.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/2013248168cjHdewDQ.png"
>&lt;/p>
&lt;p>&lt;strong>&lt;code>EX2: 為什麼定義字串需要有多種方式(為了避免衝突)&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481eW3QBenJiO.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481eW3QBenJiO.png"
>&lt;/p>
&lt;h3 id="數據類型之列表list">數據類型之列表list&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">大白話的意思其實就是可以儲存多個數據值的類型&lt;/span> &lt;span class="n">並且可以非常方便的取&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">應用場景&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">儲存多個數據值&lt;/span> &lt;span class="n">並且將來可能需要單獨取其中一些&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">代碼實現&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">name_list&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;oscar&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;jerry&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">列表的文字描述&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">中括號括起來&lt;/span> &lt;span class="n">內部可以存放多個數據值&lt;/span> &lt;span class="n">數據值與數據值之間逗號隔開&lt;/span> &lt;span class="n">數據值可以是任意數據類型&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mf">11.11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,[&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">22&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">索引取值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">起始數字是從0開始&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">l1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">索引值&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">PEP8規範補充
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 1.逗號後面與數據值空一格
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 2.賦值符號左右都得空一格
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1:&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324814hopyTagwk.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324814hopyTagwk.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324810yyJKkC5FZ.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324810yyJKkC5FZ.png"
>&lt;/p>
&lt;p>&lt;strong>&lt;code>EX2:&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481Noiht6ZySb.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481Noiht6ZySb.png"
>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481NlCZgoMV42.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481NlCZgoMV42.png"
>&lt;/p>
&lt;h3 id="數據類型之字典dict">數據類型之字典dict&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">能夠非常精確的儲存和表達數據值的含義&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">代碼實現&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">info_dict&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;age&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">20&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;hobby&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;coding&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">字典文字描述&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">大括號括起來&lt;/span> &lt;span class="n">內部可以存放多個數據&lt;/span> &lt;span class="n">數據的組織形式是K&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">V鍵值對&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">鍵值對與鍵值對之間逗號隔開&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">K是對V的描述性性質的資訊&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">解釋說明&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">一般都是字串類型&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">V是真正的數據值&lt;/span> &lt;span class="n">可以是任意數據類型&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">按K取值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">字典只能按K取值&lt;/span> &lt;span class="n">因為字典是無序的&lt;/span> &lt;span class="n">沒有索引的概念&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">info_dict&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">PEP8規範補充
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> 1.字典K:V，:右邊要空一格
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1:字典&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/2013248183BgL1bxlf.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/2013248183BgL1bxlf.png"
>&lt;/p>
&lt;p>&lt;strong>&lt;code>EX2: 按鍵取值&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481YcLzi4Ap67.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481YcLzi4Ap67.png"
>&lt;/p>
&lt;h2 id="小結-今日pep8規範">小結 今日PEP8規範&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">單行注釋如果跟在代碼之後&lt;/span> &lt;span class="n">那麼警號與代碼之間需要空兩格&lt;/span> &lt;span class="n">內容與警號空一格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">如果單行注釋自成一行&lt;/span> &lt;span class="n">那麼內容與警號空一格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">list&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">逗號後面與數據值空一格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">賦值符號左右都得空一格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">4.&lt;/span>&lt;span class="n">dict&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">字典K&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">V&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">右邊要空一格&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">如何學習規範&lt;/span> &lt;span class="n">可以借助於pycharm自動化格式程式碼反向學習&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">(&lt;/span>&lt;span class="n">mac快捷鍵command&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">option&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">L&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="練習題數據類型">練習題(數據類型)&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 附加練習題(提示:一步步拆解)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1.想辦法列印出jimmy&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">l1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;kevin&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;tony&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;jerry&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">123&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">456&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;分步操作&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1.先看大列表到底有幾個數據值 以及我們想要的數據值在哪個裡面 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(l1[3]) &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">l2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">l1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># [&amp;#39;tony&amp;#39;, &amp;#39;jerry&amp;#39;, [123, 456, &amp;#39;jimmy&amp;#39;]] &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2.再次思考小列表有幾個數據值 以及我們想要的數據值在哪個裡面 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(l2[2]) &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">l3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">l2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># [123, 456, &amp;#39;jimmy&amp;#39;] &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3.最後轉化成了簡單的索引直接取值 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l3&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;簡化操作&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">l1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2.想辦法列印出大寶貝&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;name&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;others&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;a1&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;heiheihei&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;a2&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;k1&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;hahaha&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;k2&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;hehehe&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;k3&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;大寶貝&amp;#39;&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;分步操作&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1.先拿大字典第二個鍵值對的值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(d1[&amp;#39;others&amp;#39;])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">d1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;others&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># {&amp;#39;a1&amp;#39;: &amp;#39;heiheihei&amp;#39;, &amp;#39;a2&amp;#39;: {&amp;#39;k1&amp;#39;: &amp;#39;hahaha&amp;#39;, &amp;#39;k2&amp;#39;: &amp;#39;hehehe&amp;#39;, &amp;#39;k3&amp;#39;: &amp;#39;大寶貝&amp;#39;}}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2.再拿小字典第二個鍵值對的值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(d2[&amp;#39;a2&amp;#39;])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">d3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">d2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;a2&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># {&amp;#39;k1&amp;#39;: &amp;#39;hahaha&amp;#39;, &amp;#39;k2&amp;#39;: &amp;#39;hehehe&amp;#39;, &amp;#39;k3&amp;#39;: &amp;#39;大寶貝&amp;#39;}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3.轉化成簡單的按k直接取值&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">d3&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;k3&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;簡化操作&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">d1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;others&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;a2&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;k3&amp;#39;&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3.想辦法列印出run&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">data&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;username&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s1">&amp;#39;jimmy&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;hobby&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="mi">11&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mi">22&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">{&lt;/span>&lt;span class="s1">&amp;#39;height&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">183&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;hobby&amp;#39;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;read&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;run&amp;#39;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s1">&amp;#39;music&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;分步操作&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(data[&amp;#39;hobby&amp;#39;])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">data1&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;hobby&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># [11, 22, {&amp;#39;height&amp;#39;: 183, &amp;#39;hobby&amp;#39;: [&amp;#39;read&amp;#39;, &amp;#39;run&amp;#39;, &amp;#39;music&amp;#39;]}]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(data1[2])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">data2&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data1&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># {&amp;#39;height&amp;#39;: 183, &amp;#39;hobby&amp;#39;: [&amp;#39;read&amp;#39;, &amp;#39;run&amp;#39;, &amp;#39;music&amp;#39;]}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print(data2[&amp;#39;hobby&amp;#39;])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">data3&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="n">data2&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;hobby&amp;#39;&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="c1"># [&amp;#39;read&amp;#39;, &amp;#39;run&amp;#39;, &amp;#39;music&amp;#39;]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data3&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;簡化操作&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">print&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">data&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="s1">&amp;#39;hobby&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">2&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="s1">&amp;#39;hobby&amp;#39;&lt;/span>&lt;span class="p">][&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">])&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;strong>&lt;code>EX1: 想辦法列印出jimmy&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481kMbzFu90dY.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481kMbzFu90dY.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481VR7kMNfM5R.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481VR7kMNfM5R.png"
>&lt;/p>
&lt;p>&lt;strong>&lt;code>EX2: 想辦法列印出大寶貝&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481DWOpQt4Cpp.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481DWOpQt4Cpp.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481E2BOkRwmGK.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481E2BOkRwmGK.png"
>&lt;/p>
&lt;p>&lt;strong>&lt;code>EX3: 想辦法列印出run&lt;/code>&lt;/strong>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/20132481LvFAeXpEMx.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/20132481LvFAeXpEMx.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230916/201324813l3KmpF0xH.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230916/201324813l3KmpF0xH.png"
>&lt;/p>
&lt;h2 id="youtube教學影片">YouTube教學影片&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.youtube.com/watch?v=QVndMgzyljI" target="_blank" rel="noopener"
>&lt;img src="https://img.youtube.com/vi/QVndMgzyljI/0.jpg"
loading="lazy"
alt="Yes"
>&lt;/a>&lt;/p></description></item><item><title>Day02 - 計算機三大核心，操作系統，程式語言分類，Python解釋器，Linux、Mac、Windows電腦安裝Python解釋器</title><link>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day02/</link><pubDate>Sat, 07 Oct 2023 02:50:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day02/</guid><description>&lt;h2 id="計算機三大核心硬體">計算機三大核心硬體&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">計算機三大核心硬體&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">CPU&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">記憶體&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">硬碟&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">為什麼不直接省略記憶體&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">跟硬碟溝通就好&lt;/span>&lt;span class="err">?&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">記憶體的容量一般比硬碟小的多得多&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">CPU運行速度快&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">硬碟運行速度慢&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">記憶體搭配CPU運作&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">提升CPU運行效率&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">只要是運行的程序&lt;/span> &lt;span class="n">產生的數據第一時間肯定在記憶體&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">突然斷電數據會立刻遺失&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="操作系統">操作系統&lt;/h2>
&lt;p>&lt;a class="link" href="https://ithelp.ithome.com.tw/upload/images/20230909/20132481mxrUPlFKDC.png" target="_blank" rel="noopener"
>https://ithelp.ithome.com.tw/upload/images/20230909/20132481mxrUPlFKDC.png&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="n">控制&lt;/span> &lt;span class="n">協調&lt;/span> &lt;span class="n">管理計算機各個硬體的工作&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">PC端常見操作系統&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">windows&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">macOS&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">linux&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="n">行動端常見操作系統&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">Android&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">IOS&lt;/span>&lt;span class="err">、&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="程式語言的分類">程式語言的分類&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">編譯型語言&lt;/span> &lt;span class="n">C&lt;/span>&lt;span class="o">++&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">Java&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">Golang&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">類似於GOOGLE翻譯&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">一次性翻譯&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="n">翻譯之後可以反覆使用翻譯的結果&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">優勢&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">一次翻譯可以反覆使用&lt;/span> &lt;span class="n">執行效率高&lt;/span> &lt;span class="n">速度快&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">劣勢&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">當程序中頻繁出現bug&lt;/span> &lt;span class="n">那麼需要反覆編譯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">解釋型語言&lt;/span> &lt;span class="n">python&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">類似於翻譯官&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">說一句翻一句&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">優勢&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">有bug和沒有bug執行效率幾乎一樣&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">劣勢&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="n">速度沒有編譯型語言快&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s1">&amp;#39;&amp;#39;&amp;#39;要想讓計算機能夠識別並運行高級語言需要對應類型的翻譯官&amp;#39;&amp;#39;&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="python解釋器">python解釋器&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">python發展方向&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">web方向&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">自動化運維&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">自動化測試&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">自動化辦公&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">網路爬蟲&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">金融量化&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">人工智慧&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">機器學習&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">數據分析&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">python解釋器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">歷史&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">荷蘭的Guido&lt;/span> &lt;span class="n">van&lt;/span> &lt;span class="n">Rossum因為當時的程式語言存在缺陷&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">聖誕節期間&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">他決定創建一種新的語言&lt;/span>&lt;span class="err">。&lt;/span>&lt;span class="n">一種更易於使用又功能強大的語言&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">版本其實是軟體更新疊代的紀錄&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python1&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">初期版本&lt;/span> &lt;span class="n">幾乎不用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python2&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">python2&lt;/span>&lt;span class="mf">.7&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">2020&lt;/span>&lt;span class="n">年就已經不再維護更新&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">python3&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">X&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">python3&lt;/span>&lt;span class="mf">.6&lt;/span> &lt;span class="n">python3&lt;/span>&lt;span class="mf">.8&lt;/span> &lt;span class="n">python3&lt;/span>&lt;span class="mf">.10&lt;/span>&lt;span class="o">+&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">學習python語法&lt;/span> &lt;span class="n">對版本的區別差異不大&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">目前常用&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">python2&lt;/span>&lt;span class="mf">.7&lt;/span> &lt;span class="n">python3&lt;/span>&lt;span class="mf">.6&lt;/span> &lt;span class="n">python3&lt;/span>&lt;span class="mf">.8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">下載&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">官網&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">https&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="o">//&lt;/span>&lt;span class="n">www&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">python&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">org&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">downloads&lt;/span>&lt;span class="o">/&lt;/span>&lt;span class="n">windows&lt;/span>&lt;span class="o">/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">ps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">蘋果電腦macOS&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">linux系統&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">centos7&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">rhel7&lt;/span>&lt;span class="o">...&lt;/span>&lt;span class="n">等&lt;/span>&lt;span class="p">)&lt;/span>&lt;span class="n">自帶python2&lt;/span>&lt;span class="mf">.7&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">4.&lt;/span>&lt;span class="n">安裝&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">如本頁後面&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">mac&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">windows電腦安裝python解釋器&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="n">多版本&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">自訂安裝&lt;/span> &lt;span class="n">路徑盡量簡單一些&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">示範&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">windows電腦&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">mac電腦&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">5.&lt;/span>&lt;span class="n">使用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">windows&lt;/span>&lt;span class="o">+&lt;/span>&lt;span class="n">r&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">輸入cmd回車&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">切換盤符&lt;/span> &lt;span class="n">C&lt;/span>&lt;span class="p">:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">4.&lt;/span>&lt;span class="n">切換目錄&lt;/span> &lt;span class="n">cd&lt;/span> &lt;span class="n">python38&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">5.&lt;/span>&lt;span class="n">運行解釋器&lt;/span> &lt;span class="n">python&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">6.&lt;/span>&lt;span class="n">退出解釋器&lt;/span> &lt;span class="n">exit&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">7.&lt;/span>&lt;span class="n">退到上一層目錄&lt;/span> &lt;span class="n">cd&lt;/span> &lt;span class="o">..&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="運行python程序的三種方式">運行python程序的三種方式&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span>&lt;span class="n">cmd直接編寫運行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">適用於較短&lt;/span> &lt;span class="n">臨時執行的代碼&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span>&lt;span class="n">解釋器命令運行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">可以編寫較長的代碼&lt;/span> &lt;span class="n">並且可以長久保存&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span>&lt;span class="n">利用IDE工具編寫並運行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">IDE開發者工具&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="n">自動提示&lt;/span> &lt;span class="n">攜帶各種功能插件&lt;/span> &lt;span class="n">編寫程式碼效率更高更快&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">1.&lt;/span>&lt;span class="n">sublime&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">2.&lt;/span>&lt;span class="n">vscode&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">3.&lt;/span>&lt;span class="n">pycharm&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol>
&lt;li>cmd直接編寫運行
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481lI5P9KVn8f.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481lI5P9KVn8f.png"
>&lt;/li>
&lt;li>解釋器命令運行
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481P2bzxv2zux.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481P2bzxv2zux.png"
>&lt;/li>
&lt;li>利用IDE工具編寫並運行(pycharm 2021.3.3)
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/201324813V3tZ5XD7h.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/201324813V3tZ5XD7h.png"
>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481tkOH5HuRSU.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481tkOH5HuRSU.png"
>&lt;/li>
&lt;/ol>
&lt;h2 id="linuxmacwindows電腦安裝python解釋器多版本">linux、mac、windows電腦安裝python解釋器(多版本)&lt;/h2>
&lt;h3 id="linux電腦安裝python解釋器多版本">linux電腦安裝python解釋器(多版本)&lt;/h3>
&lt;p>官網Downloads網址：https://www.python.org/downloads/release/python-3918/&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span> &lt;span class="n">安裝需要套件sudo&lt;/span> &lt;span class="n">yum&lt;/span> &lt;span class="n">install&lt;/span> &lt;span class="n">gcc&lt;/span> &lt;span class="n">openssl&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span> &lt;span class="n">bzip2&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span> &lt;span class="n">libffi&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span> &lt;span class="n">zlib&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">devel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span> &lt;span class="n">WGET要安裝的python版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span> &lt;span class="n">解壓tgz包&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span> &lt;span class="o">./&lt;/span>&lt;span class="n">configure&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">5.&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">make&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">6.&lt;/span> &lt;span class="n">sudo&lt;/span> &lt;span class="n">make&lt;/span> &lt;span class="n">altinstall&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">7.&lt;/span> &lt;span class="n">python3&lt;/span>&lt;span class="mf">.9&lt;/span> &lt;span class="o">--&lt;/span>&lt;span class="n">version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">8.&lt;/span> &lt;span class="n">修改python3默認使用python3&lt;/span>&lt;span class="mf">.9&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># sudo yum install gcc openssl-devel bzip2-devel libffi-devel zlib-devel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># wget https://www.python.org/ftp/python/3.9.18/Python-3.9.18.tgz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># tar -xvf Python-3.9.18.tgz&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd Python-3.9.18&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="4">
&lt;li>./configure&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible Python-3.9.18&lt;span class="o">]&lt;/span>&lt;span class="c1"># ./configure &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 完成畫面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">running build_scripts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">creating build/scripts-3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">copying and adjusting /root/Python-3.9.18/Tools/scripts/pydoc3 -&amp;gt; build/scripts-3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">copying and adjusting /root/Python-3.9.18/Tools/scripts/idle3 -&amp;gt; build/scripts-3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">copying and adjusting /root/Python-3.9.18/Tools/scripts/2to3 -&amp;gt; build/scripts-3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changing mode of build/scripts-3.9/pydoc3 from &lt;span class="m">644&lt;/span> to &lt;span class="m">755&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changing mode of build/scripts-3.9/idle3 from &lt;span class="m">644&lt;/span> to &lt;span class="m">755&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changing mode of build/scripts-3.9/2to3 from &lt;span class="m">644&lt;/span> to &lt;span class="m">755&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">renaming build/scripts-3.9/pydoc3 to build/scripts-3.9/pydoc3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">renaming build/scripts-3.9/idle3 to build/scripts-3.9/idle3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">renaming build/scripts-3.9/2to3 to build/scripts-3.9/2to3-3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/bin/install -c -m &lt;span class="m">644&lt;/span> ./Tools/gdb/libpython.py python-gdb.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcc -pthread -c -Wno-unused-result -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -std&lt;span class="o">=&lt;/span>c99 -Wextra -Wno-unused-result -Wno-unused-parameter -Wno-missing-field-initializers -Werror&lt;span class="o">=&lt;/span>implicit-function-declaration -fvisibility&lt;span class="o">=&lt;/span>hidden -I./Include/internal -I. -I./Include -DPy_BUILD_CORE -o Programs/_testembed.o ./Programs/_testembed.c
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gcc -pthread -Xlinker -export-dynamic -o Programs/_testembed Programs/_testembed.o libpython3.9.a -lcrypt -lpthread -ldl -lutil -lm -lm
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sed -e &lt;span class="s2">&amp;#34;s,@EXENAME@,/usr/local/bin/python3.9,&amp;#34;&lt;/span> &amp;lt; ./Misc/python-config.in &amp;gt;python-config.py
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">LC_ALL&lt;/span>&lt;span class="o">=&lt;/span>C sed -e &lt;span class="s1">&amp;#39;s,\$(\([A-Za-z0-9_]*\)),\$\{\1\},g&amp;#39;&lt;/span> &amp;lt; Misc/python-config.sh &amp;gt;python-config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="5">
&lt;li>sudo make&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible Python-3.9.18&lt;span class="o">]&lt;/span>&lt;span class="c1"># sudo make&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 完成畫面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">running build_scripts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">copying and adjusting /root/Python-3.9.18/Tools/scripts/pydoc3 -&amp;gt; build/scripts-3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">copying and adjusting /root/Python-3.9.18/Tools/scripts/idle3 -&amp;gt; build/scripts-3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">copying and adjusting /root/Python-3.9.18/Tools/scripts/2to3 -&amp;gt; build/scripts-3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changing mode of build/scripts-3.9/pydoc3 from &lt;span class="m">644&lt;/span> to &lt;span class="m">755&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changing mode of build/scripts-3.9/idle3 from &lt;span class="m">644&lt;/span> to &lt;span class="m">755&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">changing mode of build/scripts-3.9/2to3 from &lt;span class="m">644&lt;/span> to &lt;span class="m">755&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">renaming build/scripts-3.9/pydoc3 to build/scripts-3.9/pydoc3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">renaming build/scripts-3.9/idle3 to build/scripts-3.9/idle3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">renaming build/scripts-3.9/2to3 to build/scripts-3.9/2to3-3.9
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="6">
&lt;li>sudo make altinstall&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible Python-3.9.18&lt;span class="o">]&lt;/span>&lt;span class="c1"># sudo make altinstall&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 完成畫面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>Installing collected packages: setuptools, pip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> WARNING: The script pip3.9 is installed in &lt;span class="s1">&amp;#39;/usr/local/bin&amp;#39;&lt;/span> which is not on PATH.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Consider adding this directory to PATH or, &lt;span class="k">if&lt;/span> you prefer to suppress this warning, use --no-warn-script-location.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Successfully installed pip-23.0.1 setuptools-58.1.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Running pip as the &lt;span class="s1">&amp;#39;root&amp;#39;&lt;/span> user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv&lt;span class="o">](&lt;/span>&amp;lt;Looking in links: /tmp/tmp73qq39wa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Processing /tmp/tmp73qq39wa/setuptools-58.1.0-py3-none-any.whl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Processing /tmp/tmp73qq39wa/pip-23.0.1-py3-none-any.whl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Installing collected packages: setuptools, pip
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> WARNING: The script pip3.9 is installed in &lt;span class="s1">&amp;#39;/usr/local/bin&amp;#39;&lt;/span> which is not on PATH.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Consider adding this directory to PATH or, &lt;span class="k">if&lt;/span> you prefer to suppress this warning, use --no-warn-script-location.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Successfully installed pip-23.0.1 setuptools-58.1.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">WARNING: Running pip as the &lt;span class="s1">&amp;#39;root&amp;#39;&lt;/span> user can result in broken permissions and conflicting behaviour with the system package manager. It is recommended to use a virtual environment instead: https://pip.pypa.io/warnings/venv&amp;gt;&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="7">
&lt;li>python3.9 &amp;ndash;version&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># python3.9 --version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Python 3.9.18
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol start="8">
&lt;li>修改python3默認使用python3.9&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 目前python3使用3.8.6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># python3 --version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Python 3.8.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看目前python3目的地&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># which python3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/usr/local/bin/python3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 到目的地&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible ~&lt;span class="o">]&lt;/span>&lt;span class="c1"># cd /usr/local/bin/&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible bin&lt;span class="o">]&lt;/span>&lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">34264&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">8&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> 2to3 -&amp;gt; 2to3-3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">101&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> 2to3-3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">101&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:13 2to3-3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">238&lt;/span> 5月 &lt;span class="m">20&lt;/span> &lt;span class="m">2023&lt;/span> easy_install-3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">7&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> idle3 -&amp;gt; idle3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">99&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> idle3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">99&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:13 idle3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">229&lt;/span> 5月 &lt;span class="m">20&lt;/span> &lt;span class="m">2023&lt;/span> pip3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">229&lt;/span> 5月 &lt;span class="m">20&lt;/span> &lt;span class="m">2023&lt;/span> pip3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">229&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:13 pip3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">238&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> pyarmor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">234&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> pyarmor-7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">227&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> pyarmor-8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">8&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> pydoc3 -&amp;gt; pydoc3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">84&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> pydoc3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">84&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:13 pydoc3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">9&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> python3 -&amp;gt; python3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">17118088&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> python3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">3087&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> python3.8-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">17901680&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:12 python3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">3087&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:13 python3.9-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">16&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> python3-config -&amp;gt; python3.8-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 修改軟連結&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible bin&lt;span class="o">]&lt;/span>&lt;span class="c1"># ln -sf python3.9 python3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible bin&lt;span class="o">]&lt;/span>&lt;span class="c1"># ln -sf pydoc3.9 pydoc3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible bin&lt;span class="o">]&lt;/span>&lt;span class="c1"># ln -sf python3.9-config python3-config&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible bin&lt;span class="o">]&lt;/span>&lt;span class="c1"># ln -sf idle3.9 idle3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible bin&lt;span class="o">]&lt;/span>&lt;span class="c1"># ln -sf 2to3-3.9 2to3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible bin&lt;span class="o">]&lt;/span>&lt;span class="c1"># ll&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">總計 &lt;span class="m">34264&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">8&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:28 2to3 -&amp;gt; 2to3-3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">101&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> 2to3-3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">101&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:13 2to3-3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">238&lt;/span> 5月 &lt;span class="m">20&lt;/span> &lt;span class="m">2023&lt;/span> easy_install-3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">7&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:28 idle3 -&amp;gt; idle3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">99&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> idle3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">99&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:13 idle3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">229&lt;/span> 5月 &lt;span class="m">20&lt;/span> &lt;span class="m">2023&lt;/span> pip3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">229&lt;/span> 5月 &lt;span class="m">20&lt;/span> &lt;span class="m">2023&lt;/span> pip3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">229&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:13 pip3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">238&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> pyarmor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">234&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> pyarmor-7
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">227&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> pyarmor-8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">8&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:26 pydoc3 -&amp;gt; pydoc3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">84&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> pydoc3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">84&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:13 pydoc3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">9&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:25 python3 -&amp;gt; python3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">17118088&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> python3.8
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">3087&lt;/span> 5月 &lt;span class="m">25&lt;/span> &lt;span class="m">2023&lt;/span> python3.8-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">17901680&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:12 python3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rwxr-xr-x. &lt;span class="m">1&lt;/span> root root &lt;span class="m">3087&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:13 python3.9-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lrwxrwxrwx. &lt;span class="m">1&lt;/span> root root &lt;span class="m">16&lt;/span> 12月 &lt;span class="m">2&lt;/span> 17:27 python3-config -&amp;gt; python3.9-config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>root@ansible bin&lt;span class="o">]&lt;/span>&lt;span class="c1"># python3 --version&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Python 3.9.18
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="mac電腦安裝python解釋器多版本">mac電腦安裝python解釋器(多版本)&lt;/h3>
&lt;p>官網Downloads網址：https://www.python.org/downloads/macos/&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span> &lt;span class="n">Downloads&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span> &lt;span class="n">找到要安裝的版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span> &lt;span class="n">全程點繼續&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">完成安裝&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span> &lt;span class="n">打開termimel&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">可以看到使用者環境變數已自動加上python3&lt;/span>&lt;span class="mf">.9&lt;/span>&lt;span class="n">路徑&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">5.&lt;/span> &lt;span class="n">直接可以使用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">6.&lt;/span> &lt;span class="n">要使用多版本共存&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">同前面1&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">步驟&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">到官網下載並安裝版本即可&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">我這裡示範3&lt;/span>&lt;span class="mf">.8.6&lt;/span>&lt;span class="n">本版的&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol>
&lt;li>
&lt;p>Downloads
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481NrucsnXvCT.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481NrucsnXvCT.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>找到要安裝的版本，因為我的電腦是m1晶片，所以就不能選擇intel-only，選擇universal2
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/201324818ZMSJoqCbc.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/201324818ZMSJoqCbc.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>全程點繼續，完成安裝
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481ClCTxpiWOl.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481ClCTxpiWOl.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>打開termimel，可以看到使用者環境變數已自動加上python3.9路徑
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481m940oX70gl.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481m940oX70gl.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>直接可以使用
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481Qwkn2y4DsL.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481Qwkn2y4DsL.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>要使用多版本共存，同前面1~3步驟，到官網下載並安裝版本即可，我這裡示範3.8.6本版的
可以看到使用者環境變數也已自動加上python3.8路徑&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481jEOpntc1Pk.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481jEOpntc1Pk.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481AKWIW4ifts.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481AKWIW4ifts.png"
>&lt;/p>
&lt;h3 id="windows電腦安裝python解釋器多版本">windows電腦安裝python解釋器(多版本)&lt;/h3>
&lt;p>官網Downloads網址：https://www.python.org/downloads/windows/&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">1.&lt;/span> &lt;span class="n">Downloads&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">2.&lt;/span> &lt;span class="n">找到要安裝的版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">3.&lt;/span> &lt;span class="n">注意&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">點選Customize&lt;/span> &lt;span class="n">installation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">4.&lt;/span> &lt;span class="n">打開termimel&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">到安裝目錄下&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">5.&lt;/span> &lt;span class="n">可以看到有一個python&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exe檔案&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">執行即可使用&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">6.&lt;/span> &lt;span class="n">要使用多版本共存&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">同前面1&lt;/span>&lt;span class="o">~&lt;/span>&lt;span class="mi">3&lt;/span>&lt;span class="n">步驟&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">到官網下載並安裝版本即可&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">7.&lt;/span> &lt;span class="n">每次都要到安裝目錄下&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">才能使用python&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">故將路徑直接加入環境變數&lt;/span>&lt;span class="err">。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">7.1&lt;/span> &lt;span class="n">將各版本目錄下python&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exe再複製出來&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">並命名為版本號&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">7.2&lt;/span> &lt;span class="n">檔案總管&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">本機右鍵&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">內容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">7.3&lt;/span> &lt;span class="n">進階系統設定&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">環境變數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">7.4&lt;/span> &lt;span class="n">找到系統變數&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">path點兩下&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">7.5&lt;/span> &lt;span class="n">新增C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">python38&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">python38&lt;/span>\&lt;span class="n">Scripts&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">python39&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">python39&lt;/span>\&lt;span class="n">Scripts&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">確認&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="mf">7.6&lt;/span> &lt;span class="n">開啟terminel測試&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ol>
&lt;li>
&lt;p>Downloads
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481sFLbr8ltre.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481sFLbr8ltre.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>找到要安裝的版本，因為我的電腦是w11 64bit，所以選擇Windows installer (64-bit)
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481OtXhH2qgav.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481OtXhH2qgav.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>注意，點選Customize installation，自訂安裝路徑，不然原安裝路徑名稱非常長，以後要找，不易
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481lztaexaobW.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481lztaexaobW.png"
>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>我選擇在C:\，創建一個python39資料夾，將python3.9安裝在此位置
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481JEeVDhgK1d.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481JEeVDhgK1d.png"
>
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481QwjMc5P3LV.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481QwjMc5P3LV.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481a5MBkRSUA9.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481a5MBkRSUA9.png"
>&lt;/p>
&lt;ol start="4">
&lt;li>
&lt;p>打開termimel，到安裝目錄下
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481r0BIOc09dj.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481r0BIOc09dj.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>可以看到有一個python.exe檔案，執行即可使用
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481OWvpsFMMnN.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481OWvpsFMMnN.png"
>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>要使用多版本共存，同前面1~3步驟，到官網下載並安裝版本即可，我這裡示範3.8.6、本版的
我選擇在C:\，創建一個python38資料夾，將python3.8安裝在此位置&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481Wa5rXo9mtw.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481Wa5rXo9mtw.png"
>&lt;/p>
&lt;ol start="7">
&lt;li>每次都要到安裝目錄下，才能使用python，故將路徑直接加入環境變數。&lt;/li>
&lt;/ol>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-python" data-lang="python">&lt;span class="line">&lt;span class="cl">&lt;span class="mf">7.1&lt;/span> &lt;span class="n">將各版本目錄下python&lt;/span>&lt;span class="o">.&lt;/span>&lt;span class="n">exe再複製出來&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">並命名為版本號&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">7.2&lt;/span> &lt;span class="n">檔案總管&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">本機右鍵&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">內容&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">7.3&lt;/span> &lt;span class="n">進階系統設定&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">環境變數&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">7.4&lt;/span> &lt;span class="n">找到系統變數&lt;/span>&lt;span class="o">-&amp;gt;&lt;/span>&lt;span class="n">path點兩下&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">7.5&lt;/span> &lt;span class="n">新增C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">python38&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">python38&lt;/span>\&lt;span class="n">Scripts&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">python39&lt;/span>&lt;span class="err">、&lt;/span>&lt;span class="n">C&lt;/span>&lt;span class="p">:&lt;/span>\&lt;span class="n">python39&lt;/span>\&lt;span class="n">Scripts&lt;/span>&lt;span class="err">，&lt;/span>&lt;span class="n">確認&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="mf">7.6&lt;/span> &lt;span class="n">開啟terminel測試&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>7.1 將各版本目錄下python.exe再複製出來，並命名為版本號
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481wyU3kgMGnD.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481wyU3kgMGnD.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481hJH78QQhjm.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481hJH78QQhjm.png"
>&lt;/p>
&lt;p>7.2 檔案總管-&amp;gt;本機右鍵-&amp;gt;內容
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481K8SufI4nnZ.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481K8SufI4nnZ.png"
>&lt;/p>
&lt;p>7.3 進階系統設定-&amp;gt;環境變數
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481hZrWsR9wBu.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481hZrWsR9wBu.png"
>&lt;/p>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481BZ2nc5pzhB.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481BZ2nc5pzhB.png"
>
7.4 找到系統變數-&amp;gt;path點兩下
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481mp8oCoqpDk.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481mp8oCoqpDk.png"
>&lt;/p>
&lt;p>7.5 新增C:\python38、C:\python38\Scripts、C:\python39、C:\python39\Scripts，確認
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/201324818C5vnW5egj.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/201324818C5vnW5egj.png"
>&lt;/p>
&lt;p>7.6 開啟terminel測試
&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230909/20132481HayFEFPEwW.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230909/20132481HayFEFPEwW.png"
>&lt;/p>
&lt;h2 id="youtube教學影片">YouTube教學影片&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.youtube.com/watch?v=JqtGViPO4Ts" target="_blank" rel="noopener"
>&lt;img src="https://img.youtube.com/vi/JqtGViPO4Ts/0.jpg"
loading="lazy"
alt="Yes"
>&lt;/a>&lt;/p></description></item><item><title>Day01 - 計算機五大組成、三大核心、自我介紹</title><link>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day01/</link><pubDate>Sat, 07 Oct 2023 02:45:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/python-self-learning-day01/</guid><description>&lt;h2 id="計算機五大組成部分">計算機五大組成部分&lt;/h2>
&lt;ol>
&lt;li>控制器
&lt;ul>
&lt;li>似大腦控制各器官與四肢&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>運算器
&lt;ul>
&lt;li>似大腦運算，邏輯思考&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>存儲器
&lt;ul>
&lt;li>似人記憶，短期記憶(記憶體)，長期記憶(硬盤)&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>輸入設備
&lt;ul>
&lt;li>似眼睛，接收外在訊息&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>輸出設備
&lt;ul>
&lt;li>似嘴巴，講述想法&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230904/2013248184Vpa3Qq6G.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230904/2013248184Vpa3Qq6G.png"
>&lt;/p>
&lt;h2 id="計算機單位與轉換">計算機單位與轉換&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">1 Byte = 8 bit
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1024Byte = 1KB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1024KB = 1MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1024MB = 1GB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">1024GB = 1TB
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230904/20132481pQJXWgXWGg.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230904/20132481pQJXWgXWGg.png"
>&lt;/p>
&lt;h3 id="二進制十六進制十進制八進制-的轉換">二進制、十六進制、十進制、八進制 的轉換&lt;/h3>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230904/201324813JAoN9yEfK.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230904/201324813JAoN9yEfK.png"
>&lt;/p>
&lt;h2 id="自我介绍">自我介绍&lt;/h2>
&lt;h3 id="就學歷程">就學歷程&lt;/h3>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230904/20132481iHa7CpjGgD.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230904/20132481iHa7CpjGgD.png"
>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>高中：就讀普通高中，讀2類自然組，對化學很有興趣，也考過全校化學競賽第一名，代表學校去參加全市比賽，但沒得名。
就是在那次比賽後，有深刻的體悟，普通高中，實作實驗真的太少，去比賽時，幾乎都是實作實驗，讓我不知所措，才會再報考大學時，轉而去讀科技大學，希望能學到一技之常。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>大學：就讀科技大學電機系，果然是科技大學，很多都是實作課，那時候才發現我與同學們的差距那麼大，因為他們幾乎都是專科進來的，所以大部分實驗，很多都接觸過了，我那時候連麵包版都不會插，電阻看不懂，剛開始實在是超辛苦，還好有同儕的教學，讓我挺過來。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>當兵：海軍陸戰隊，戰車營，去新竹受訓3個月，回來營上，開戰車下基地，是我人生中，非常特殊的回憶。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="工作經歷">工作經歷&lt;/h3>
&lt;p>&lt;img src="https://ithelp.ithome.com.tw/upload/images/20230904/20132481nTcvrd2ocE.png"
loading="lazy"
alt="https://ithelp.ithome.com.tw/upload/images/20230904/20132481nTcvrd2ocE.png"
>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>弱電工程師：不超過110V的工程都做，佈網路線、電話線、監控、廣播，建置網路機房&amp;hellip;等，全台有配合的裝修場、配合的維護銀行，都要跑。做了3年半，做到主任，但考量薪水、工作環境差、未來規劃，裸辭，決定轉職進IT領域。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>特訓班：前份工作裸辭，就是為了能進特訓班，此特訓班不用費用，但前提是要沒有工作的人(就是勞動部幫助失業的人轉職)，同時也要進過考試和面試，學習到的課程：Windows Server管理、Linux Server管理、Cisco網路設備管理。&lt;code>(特訓完：考取CCNA證照)&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>網路FAE：特訓班結訓後，進入通路商，負責公司販賣的網路設備售後技術支援。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>MIS：和網路FAE是同一家公司，因為公司內部缺網管，長官希望我過去幫忙，就內轉到MIS部門，負責公司內部網路、伺服器建置與管理，會選擇離開，主要是MIS負責太多事了，沒辦法專心在一個領域技術提升。&lt;code>(考取：CCNP證照、RHCSA7證照、RCHE7證照、RHCSA8證照)&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>電商伺服器工程師：到此公司，就是專門負責電商對外伺服器管理和建置，原則上就幾乎都是linux系統和pve虛擬化系統，會選擇只做4個月就離開，主要是因為公司文化、公司凝聚力、部門間協調、SOP不明確、公司不賺錢，基於以上原因，才會選擇盡快離開。當然在此公司是非常好的經歷，因為電商領域，就是我轉職到IT時，一直想走上的路，也算讓我進到這個領域有了第一個敲門磚。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>電商伺服器 資深工程師：負責電商伺服器管理與建置、Redis服務管理與建置、K8S平台管理與建置、目前自學Python、前端、Django，主要是為了讓管理方式能更有效率、更系統化。目前在公司也會安排向內部員工進行教育訓練課程、分享技術，讓我在此工作上得到滿滿的成就感。就我自己認為，會再多，如果不能說到讓別人也瞭解，那就不是真的瞭解這個技術了。所以我熱衷於這份工作，能讓我分享技術，公司也不斷的引進新技術、新想法，讓我們去嘗試，所以目前在此工作，是非常開心的狀態，希望這種感覺，能一直持續下去。&lt;code>(考取：CKA證照、CKAD證照、CKS證照)&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="youtube教學影片">YouTube教學影片&lt;/h2>
&lt;p>&lt;a class="link" href="https://www.youtube.com/watch?v=D-bPj6w-EmQ" target="_blank" rel="noopener"
>&lt;img src="https://img.youtube.com/vi/D-bPj6w-EmQ/0.jpg"
loading="lazy"
alt="Yes"
>&lt;/a>&lt;/p></description></item><item><title>kubeadm安裝 高可用版(ubuntu2204+k8s版本1.26.3+docker+cri-docker)</title><link>https://blog.goldfishbrain-fighting.com/2023/kubernetes-install/</link><pubDate>Sat, 07 Oct 2023 02:30:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/kubernetes-install/</guid><description>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-install/media/Pasted-image-20230919205815.png"
width="1057"
height="723"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-install/media/Pasted-image-20230919205815_hu68c64d2de39064ad11cfc1877399bd32_320279_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-install/media/Pasted-image-20230919205815_hu68c64d2de39064ad11cfc1877399bd32_320279_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230919205815.png"
class="gallery-image"
data-flex-grow="146"
data-flex-basis="350px"
>&lt;/p>
&lt;h2 id="一節點規劃">一、節點規劃&lt;/h2>
&lt;p>部署k8s集群的節點按照用途可以劃分為如下2類角色：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>master&lt;/strong>：集群的master節點，集群的初始化節點，基礎配置不低於2C4G&lt;/li>
&lt;li>&lt;strong>node&lt;/strong>：集群的node節點，可以多台，基礎配置不低於2C4G&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>K8S實體機網段: 192.168.1.0/24&lt;/strong>&lt;/p>
&lt;p>&lt;strong>POD網段: 10.244.0.0/16&lt;/strong>&lt;/p>
&lt;p>&lt;strong>SERVICE網段: 10.245.0.0/16&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>主機名&lt;/th>
&lt;th>節點ip&lt;/th>
&lt;th>角色&lt;/th>
&lt;th>部署組件&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>k8s-master71u&lt;/td>
&lt;td>192.168.1.71&lt;/td>
&lt;td>master&lt;/td>
&lt;td>etcd, kube-apiserver, kube-controller-manager, kubectl, kubeadm, kubelet, kube-proxy, calico&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-master72u&lt;/td>
&lt;td>192.168.1.72&lt;/td>
&lt;td>master&lt;/td>
&lt;td>etcd, kube-apiserver, kube-controller-manager, kubectl, kubeadm, kubelet, kube-proxy, calico&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-master73u&lt;/td>
&lt;td>192.168.1.73&lt;/td>
&lt;td>master&lt;/td>
&lt;td>etcd, kube-apiserver, kube-controller-manager, kubectl, kubeadm, kubelet, kube-proxy, calico&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;/td>
&lt;td>&lt;strong>192.168.1.74&lt;/strong>&lt;/td>
&lt;td>VIP&lt;/td>
&lt;td>作為3台master節點的LB使用&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-node75u&lt;/td>
&lt;td>k8s-node75u&lt;/td>
&lt;td>node&lt;/td>
&lt;td>kubectl, kubelet, kube-proxy, calico&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>k8s-node76u&lt;/td>
&lt;td>k8s-node76u&lt;/td>
&lt;td>node&lt;/td>
&lt;td>kubectl, kubelet, kube-proxy, calico&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h2 id="二組件版本">二、組件版本&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>組件&lt;/th>
&lt;th>版本&lt;/th>
&lt;th>說明&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Ubuntu&lt;/td>
&lt;td>22.04.3 LTS&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>Kernel&lt;/td>
&lt;td>5.15.0-83-generic&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>etcd&lt;/td>
&lt;td>3.5.6-0&lt;/td>
&lt;td>使用Pod方式部署，默認數據掛載到本地路徑&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>coredns&lt;/td>
&lt;td>v1.9.3&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>kubeadm&lt;/td>
&lt;td>v1.26.3&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>kubectl&lt;/td>
&lt;td>v1.26.3&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>kubelet&lt;/td>
&lt;td>v1.26.3&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>kube-proxy&lt;/td>
&lt;td>v1.26.3&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>calico&lt;/td>
&lt;td>v3.26.0&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>cri-dockerd&lt;/td>
&lt;td>0.3.3.3-0&lt;/td>
&lt;td>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h1 id="安裝前準備">安裝前準備&lt;/h1>
&lt;h2 id="一設置hosts解析">一、設置hosts解析&lt;/h2>
&lt;p>操作節點：所有節點（&lt;code>k8s-master，k8s-node&lt;/code>）均需執行&lt;/p>
&lt;ul>
&lt;li>&lt;strong>添加hosts解析&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat &amp;gt;&amp;gt;/etc/hosts&lt;span class="s">&amp;lt;&amp;lt;EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">192.168.1.71 k8s-master71u
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">192.168.1.72 k8s-master72u
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">192.168.1.73 k8s-master73u
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">192.168.1.75 k8s-node75u
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">192.168.1.76 k8s-node76u
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.0.1 localhost
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">127.0.1.1 k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># The following lines are desirable for IPv6 capable hosts&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">::1 ip6-localhost ip6-loopback
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fe00::0 ip6-localnet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ff00::0 ip6-mcastprefix
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ff02::1 ip6-allnodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ff02::2 ip6-allrouters
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.71 k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.72 k8s-master72u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.73 k8s-master73u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.75 k8s-node75u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.76 k8s-node76u
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="二調整系統配置">二、調整系統配置&lt;/h2>
&lt;p>操作節點： 所有的master和node節點（&lt;code>k8s-master,k8s-node&lt;/code>）需要執行&lt;/p>
&lt;blockquote>
&lt;p>本章下述操作均以k8s-master為例，其他節點均是相同的操作（ip和hostname的值換成對應機器的真實值）&lt;/p>
&lt;/blockquote>
&lt;ul>
&lt;li>&lt;strong>設置安全組開放端口&lt;/strong>&lt;/li>
&lt;/ul>
&lt;p>如果節點間無安全組限制（內網機器間可以任意訪問），可以忽略，否則，至少保證如下端口可通： k8s-master節點：TCP：6443，2379，2380，60080，60081UDP協議端口全部打開 k8s-node節點：UDP協議端口全部打開&lt;/p>
&lt;ul>
&lt;li>&lt;strong>關閉防火牆&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# ufw status
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Status: inactive
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>關閉swap&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# swapoff -a &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sysctl -w vm.swappiness&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vm.swappiness &lt;span class="o">=&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# sed -i &lt;span class="s1">&amp;#39;s/.*swap.*/#&amp;amp;/g&amp;#39;&lt;/span> /etc/fstab
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#/dev/disk/by-id/dm-uuid-LVM-kAtY9KpfwxzNTDEpBzFkOODzcZgK93hc3OfpHLBwOVbgBZUOZC21pLNScKzDP2aI none swap sw 0 0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>修改內核參數&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat &lt;span class="s">&amp;lt;&amp;lt;EOF | sudo tee /etc/modules-load.d/k8s.conf
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">overlay
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">br_netfilter
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl restart systemd-modules-load.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl status systemd-modules-load.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">● systemd-modules-load.service - Load Kernel Modules
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Loaded: loaded &lt;span class="o">(&lt;/span>/lib/systemd/system/systemd-modules-load.service&lt;span class="p">;&lt;/span> static&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active: active &lt;span class="o">(&lt;/span>exited&lt;span class="o">)&lt;/span> since Wed 2023-09-20 00:23:11 UTC&lt;span class="p">;&lt;/span> 6s ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Docs: man:systemd-modules-load.service&lt;span class="o">(&lt;/span>8&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> man:modules-load.d&lt;span class="o">(&lt;/span>5&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Process: &lt;span class="m">2322&lt;/span> &lt;span class="nv">ExecStart&lt;/span>&lt;span class="o">=&lt;/span>/lib/systemd/systemd-modules-load &lt;span class="o">(&lt;/span>&lt;span class="nv">code&lt;/span>&lt;span class="o">=&lt;/span>exited, &lt;span class="nv">status&lt;/span>&lt;span class="o">=&lt;/span>0/SUCCESS&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Main PID: &lt;span class="m">2322&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nv">code&lt;/span>&lt;span class="o">=&lt;/span>exited, &lt;span class="nv">status&lt;/span>&lt;span class="o">=&lt;/span>0/SUCCESS&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CPU: 39ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:23:11 k8s-master71u systemd&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>: Starting Load Kernel Modules...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:23:11 k8s-master71u systemd-modules-load&lt;span class="o">[&lt;/span>2322&lt;span class="o">]&lt;/span>: Inserted module &lt;span class="s1">&amp;#39;overlay&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:23:11 k8s-master71u systemd-modules-load&lt;span class="o">[&lt;/span>2322&lt;span class="o">]&lt;/span>: Inserted module &lt;span class="s1">&amp;#39;br_netfilter&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:23:11 k8s-master71u systemd&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>: Finished Load Kernel Modules.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# lsmod &lt;span class="p">|&lt;/span>grep -e overlay
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">overlay &lt;span class="m">151552&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# lsmod &lt;span class="p">|&lt;/span>grep -e br_netfilter
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">br_netfilter &lt;span class="m">32768&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bridge &lt;span class="m">307200&lt;/span> &lt;span class="m">1&lt;/span> br_netfilter
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat &lt;span class="s">&amp;lt;&amp;lt;EOF &amp;gt; /etc/sysctl.d/k8s.conf
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">vm.max_map_count=262144
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.ip_forward = 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.bridge.bridge-nf-call-iptables = 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.bridge.bridge-nf-call-ip6tables = 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">vm.overcommit_memory=1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">vm.panic_on_oom=0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">fs.inotify.max_user_watches=89100
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">fs.file-max=52706963
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">fs.nr_open=52706963
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.netfilter.nf_conntrack_max=2310720
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.tcp_keepalive_time = 600
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.tcp_keepalive_probes = 3
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.tcp_keepalive_intvl =15
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.tcp_max_tw_buckets = 36000
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.tcp_tw_reuse = 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.tcp_max_orphans = 327680
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.tcp_orphan_retries = 3
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.tcp_syncookies = 1
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.tcp_max_syn_backlog = 16384
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.tcp_max_syn_backlog = 16384
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.ipv4.tcp_timestamps = 0
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">net.core.somaxconn = 16384
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# sysctl -p /etc/sysctl.d/k8s.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vm.max_map_count &lt;span class="o">=&lt;/span> &lt;span class="m">262144&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.ip_forward &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.bridge.bridge-nf-call-iptables &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.bridge.bridge-nf-call-ip6tables &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vm.overcommit_memory &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vm.panic_on_oom &lt;span class="o">=&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fs.inotify.max_user_watches &lt;span class="o">=&lt;/span> &lt;span class="m">89100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fs.file-max &lt;span class="o">=&lt;/span> &lt;span class="m">52706963&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fs.nr_open &lt;span class="o">=&lt;/span> &lt;span class="m">52706963&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sysctl: cannot stat /proc/sys/net/netfilter/nf_conntrack_max: No such file or directory
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_keepalive_time &lt;span class="o">=&lt;/span> &lt;span class="m">600&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_keepalive_probes &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_keepalive_intvl &lt;span class="o">=&lt;/span> &lt;span class="m">15&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_max_tw_buckets &lt;span class="o">=&lt;/span> &lt;span class="m">36000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_tw_reuse &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_max_orphans &lt;span class="o">=&lt;/span> &lt;span class="m">327680&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_orphan_retries &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_syncookies &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_max_syn_backlog &lt;span class="o">=&lt;/span> &lt;span class="m">16384&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_max_syn_backlog &lt;span class="o">=&lt;/span> &lt;span class="m">16384&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_timestamps &lt;span class="o">=&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.core.somaxconn &lt;span class="o">=&lt;/span> &lt;span class="m">16384&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 報錯&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sysctl: cannot stat /proc/sys/net/netfilter/nf_conntrack_max: 沒有此一檔案或目錄
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 解決方式&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# modprobe ip_conntrack
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# sysctl -p /etc/sysctl.d/k8s.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vm.max_map_count &lt;span class="o">=&lt;/span> &lt;span class="m">262144&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.ip_forward &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.bridge.bridge-nf-call-iptables &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.bridge.bridge-nf-call-ip6tables &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vm.overcommit_memory &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vm.panic_on_oom &lt;span class="o">=&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fs.inotify.max_user_watches &lt;span class="o">=&lt;/span> &lt;span class="m">89100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fs.file-max &lt;span class="o">=&lt;/span> &lt;span class="m">52706963&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">fs.nr_open &lt;span class="o">=&lt;/span> &lt;span class="m">52706963&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.netfilter.nf_conntrack_max &lt;span class="o">=&lt;/span> &lt;span class="m">2310720&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_keepalive_time &lt;span class="o">=&lt;/span> &lt;span class="m">600&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_keepalive_probes &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_keepalive_intvl &lt;span class="o">=&lt;/span> &lt;span class="m">15&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_max_tw_buckets &lt;span class="o">=&lt;/span> &lt;span class="m">36000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_tw_reuse &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_max_orphans &lt;span class="o">=&lt;/span> &lt;span class="m">327680&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_orphan_retries &lt;span class="o">=&lt;/span> &lt;span class="m">3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_syncookies &lt;span class="o">=&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_max_syn_backlog &lt;span class="o">=&lt;/span> &lt;span class="m">16384&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_max_syn_backlog &lt;span class="o">=&lt;/span> &lt;span class="m">16384&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.ipv4.tcp_timestamps &lt;span class="o">=&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">net.core.somaxconn &lt;span class="o">=&lt;/span> &lt;span class="m">16384&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>&lt;strong>添加ipvs，安裝套件&lt;/strong>&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# apt -y install ipvsadm ipset sysstat conntrack libseccomp2 libseccomp-dev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat &amp;gt; /etc/modules-load.d/ipvs.conf &lt;span class="s">&amp;lt;&amp;lt; EOF
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_lc
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_wlc
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_rr
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_wrr
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_lblc
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_lblcr
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_dh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_fo
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_nq
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_sed
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_vs_ftp
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">nf_conntrack
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_tables
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ip_set
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">xt_set
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ipt_set
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ipt_rpfilter
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ipt_REJECT
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">ipip
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s">EOF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl restart systemd-modules-load.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl status systemd-modules-load.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">● systemd-modules-load.service - Load Kernel Modules
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Loaded: loaded &lt;span class="o">(&lt;/span>/lib/systemd/system/systemd-modules-load.service&lt;span class="p">;&lt;/span> static&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active: active &lt;span class="o">(&lt;/span>exited&lt;span class="o">)&lt;/span> since Wed 2023-09-20 00:28:06 UTC&lt;span class="p">;&lt;/span> 7s ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Docs: man:systemd-modules-load.service&lt;span class="o">(&lt;/span>8&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> man:modules-load.d&lt;span class="o">(&lt;/span>5&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Process: &lt;span class="m">3116&lt;/span> &lt;span class="nv">ExecStart&lt;/span>&lt;span class="o">=&lt;/span>/lib/systemd/systemd-modules-load &lt;span class="o">(&lt;/span>&lt;span class="nv">code&lt;/span>&lt;span class="o">=&lt;/span>exited, &lt;span class="nv">status&lt;/span>&lt;span class="o">=&lt;/span>0/SUCCESS&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Main PID: &lt;span class="m">3116&lt;/span> &lt;span class="o">(&lt;/span>&lt;span class="nv">code&lt;/span>&lt;span class="o">=&lt;/span>exited, &lt;span class="nv">status&lt;/span>&lt;span class="o">=&lt;/span>0/SUCCESS&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CPU: 76ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:28:06 k8s-master71u systemd-modules-load&lt;span class="o">[&lt;/span>3116&lt;span class="o">]&lt;/span>: Inserted module &lt;span class="s1">&amp;#39;ip_vs_fo&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:28:06 k8s-master71u systemd-modules-load&lt;span class="o">[&lt;/span>3116&lt;span class="o">]&lt;/span>: Inserted module &lt;span class="s1">&amp;#39;ip_vs_nq&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:28:06 k8s-master71u systemd-modules-load&lt;span class="o">[&lt;/span>3116&lt;span class="o">]&lt;/span>: Inserted module &lt;span class="s1">&amp;#39;ip_vs_sed&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:28:06 k8s-master71u systemd-modules-load&lt;span class="o">[&lt;/span>3116&lt;span class="o">]&lt;/span>: Inserted module &lt;span class="s1">&amp;#39;ip_vs_ftp&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:28:06 k8s-master71u systemd-modules-load&lt;span class="o">[&lt;/span>3116&lt;span class="o">]&lt;/span>: Inserted module &lt;span class="s1">&amp;#39;ip_set&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:28:06 k8s-master71u systemd-modules-load&lt;span class="o">[&lt;/span>3116&lt;span class="o">]&lt;/span>: Inserted module &lt;span class="s1">&amp;#39;xt_set&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:28:06 k8s-master71u systemd-modules-load&lt;span class="o">[&lt;/span>3116&lt;span class="o">]&lt;/span>: Inserted module &lt;span class="s1">&amp;#39;ipt_rpfilter&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:28:06 k8s-master71u systemd-modules-load&lt;span class="o">[&lt;/span>3116&lt;span class="o">]&lt;/span>: Inserted module &lt;span class="s1">&amp;#39;ipt_REJECT&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:28:06 k8s-master71u systemd-modules-load&lt;span class="o">[&lt;/span>3116&lt;span class="o">]&lt;/span>: Inserted module &lt;span class="s1">&amp;#39;ipip&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:28:06 k8s-master71u systemd&lt;span class="o">[&lt;/span>1&lt;span class="o">]&lt;/span>: Finished Load Kernel Modules.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# lsmod &lt;span class="p">|&lt;/span>grep -e ip_vs -e nf_conntrack_ipv4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_ftp &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nf_nat &lt;span class="m">49152&lt;/span> &lt;span class="m">1&lt;/span> ip_vs_ftp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_sed &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_nq &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_fo &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_sh &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_dh &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_lblcr &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_lblc &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_wrr &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_rr &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_wlc &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs_lc &lt;span class="m">16384&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ip_vs &lt;span class="m">176128&lt;/span> &lt;span class="m">24&lt;/span> ip_vs_wlc,ip_vs_rr,ip_vs_dh,ip_vs_lblcr,ip_vs_sh,ip_vs_fo,ip_vs_nq,ip_vs_lblc,ip_vs_wrr,ip_vs_lc,ip_vs_sed,ip_vs_ftp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nf_conntrack &lt;span class="m">172032&lt;/span> &lt;span class="m">2&lt;/span> nf_nat,ip_vs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nf_defrag_ipv6 &lt;span class="m">24576&lt;/span> &lt;span class="m">2&lt;/span> nf_conntrack,ip_vs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">libcrc32c &lt;span class="m">16384&lt;/span> &lt;span class="m">7&lt;/span> nf_conntrack,nf_nat,btrfs,nf_tables,xfs,raid456,ip_vs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="三安裝docker">三、安裝docker&lt;/h2>
&lt;p>所有的master和node節點（&lt;code>k8s-master,k8s-node&lt;/code>）需要執行&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener"
>https://docs.docker.com/engine/install/ubuntu/&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1. Update the apt package index and install packages to allow apt to use a repository over HTTPS:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get install ca-certificates curl gnupg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2. Add Docker’s official GPG key:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo install -m &lt;span class="m">0755&lt;/span> -d /etc/apt/keyrings
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -fsSL https://download.docker.com/linux/ubuntu/gpg &lt;span class="p">|&lt;/span> sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo chmod a+r /etc/apt/keyrings/docker.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3. Use the following command to set up the repository:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="s2">&amp;#34;deb [arch=&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>dpkg --print-architecture&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34; signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>. /etc/os-release &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$VERSION_CODENAME&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34; stable&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> sudo tee /etc/apt/sources.list.d/docker.list &amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4. 檢查是否已經添加源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat /etc/apt/sources.list.d/docker.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deb &lt;span class="o">[&lt;/span>&lt;span class="nv">arch&lt;/span>&lt;span class="o">=&lt;/span>amd64 signed-by&lt;span class="o">=&lt;/span>/etc/apt/keyrings/docker.gpg&lt;span class="o">]&lt;/span> https://download.docker.com/linux/ubuntu jammy stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5. Update the apt package index&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看所有的可用版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# apt-cache madison docker-ce &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{ print $3 }&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:24.0.6-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:24.0.5-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:24.0.4-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:24.0.3-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:24.0.2-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:24.0.1-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:24.0.0-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:23.0.6-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:23.0.5-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:23.0.4-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:23.0.3-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:23.0.2-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:23.0.1-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:23.0.0-1~ubuntu.22.04~jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.24~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.23~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.22~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.21~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.20~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.19~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.18~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.17~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.16~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.15~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.14~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5:20.10.13~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 指定版本，安裝docker-ce&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nv">VERSION_STRING&lt;/span>&lt;span class="o">=&lt;/span>5:20.10.13~3-0~ubuntu-jammy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# sudo apt-get install docker-ce&lt;span class="o">=&lt;/span>&lt;span class="nv">$VERSION_STRING&lt;/span> docker-ce-cli&lt;span class="o">=&lt;/span>&lt;span class="nv">$VERSION_STRING&lt;/span> containerd.io
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 配置docker使用cgroupdriver=systemd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# mkdir -p /etc/docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# vim /etc/docker/daemon.json
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s2">&amp;#34;exec-opts&amp;#34;&lt;/span>: &lt;span class="o">[&lt;/span>&lt;span class="s2">&amp;#34;native.cgroupdriver=systemd&amp;#34;&lt;/span>&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl restart docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 啟動docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl &lt;span class="nb">enable&lt;/span> docker &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> systemctl start docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl status docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 測試起一個容器&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# sudo docker run hello-world
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Unable to find image &lt;span class="s1">&amp;#39;hello-world:latest&amp;#39;&lt;/span> locally
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">latest: Pulling from library/hello-world
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">719385e32844: Pull &lt;span class="nb">complete&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Digest: sha256:4f53e2564790c8e7856ec08e384732aa38dc43c52f02952483e3f003afbf23db
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Status: Downloaded newer image &lt;span class="k">for&lt;/span> hello-world:latest
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hello from Docker!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="四安裝cri-docker">四、安裝cri-docker&lt;/h2>
&lt;p>所有的master和node節點（&lt;code>k8s-master,k8s-node&lt;/code>）需要執行&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/Mirantis/cri-dockerd" target="_blank" rel="noopener"
>https://github.com/Mirantis/cri-dockerd&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# wget https://github.com/Mirantis/cri-dockerd/releases/download/v0.3.3/cri-dockerd_0.3.3.3-0.ubuntu-jammy_amd64.deb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# sudo dpkg -i cri-dockerd_0.3.3.3-0.ubuntu-jammy_amd64.deb
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl &lt;span class="nb">enable&lt;/span> cri-docker &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> systemctl start cri-docker &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> systemctl status cri-docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">● cri-docker.service - CRI Interface &lt;span class="k">for&lt;/span> Docker Application Container Engine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Loaded: loaded &lt;span class="o">(&lt;/span>/lib/systemd/system/cri-docker.service&lt;span class="p">;&lt;/span> enabled&lt;span class="p">;&lt;/span> vendor preset: enabled&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Active: active &lt;span class="o">(&lt;/span>running&lt;span class="o">)&lt;/span> since Wed 2023-09-20 00:44:58 UTC&lt;span class="p">;&lt;/span> 25s ago
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TriggeredBy: ● cri-docker.socket
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Docs: https://docs.mirantis.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Main PID: &lt;span class="m">5055&lt;/span> &lt;span class="o">(&lt;/span>cri-dockerd&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Tasks: &lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Memory: 9.8M
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CPU: 83ms
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> CGroup: /system.slice/cri-docker.service
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> └─5055 /usr/bin/cri-dockerd --container-runtime-endpoint fd://
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:44:58 k8s-master71u cri-dockerd&lt;span class="o">[&lt;/span>5055&lt;span class="o">]&lt;/span>: &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2023-09-20T00:44:58Z&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Start docker client with reque&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Sep 20 00:44:58 k8s-master71u cri-dockerd[5055]: time=&amp;#34;&lt;/span>2023-09-20T00:44:58Z&lt;span class="s2">&amp;#34; level=info msg=&amp;#34;&lt;/span>Hairpin mode is &lt;span class="nb">set&lt;/span> to none&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Sep 20 00:44:58 k8s-master71u cri-dockerd[5055]: time=&amp;#34;&lt;/span>2023-09-20T00:44:58Z&lt;span class="s2">&amp;#34; level=info msg=&amp;#34;&lt;/span>Loaded network plugin cni&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Sep 20 00:44:58 k8s-master71u cri-dockerd[5055]: time=&amp;#34;&lt;/span>2023-09-20T00:44:58Z&lt;span class="s2">&amp;#34; level=info msg=&amp;#34;&lt;/span>Docker cri networking managed &amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:44:58 k8s-master71u cri-dockerd&lt;span class="o">[&lt;/span>5055&lt;span class="o">]&lt;/span>: &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2023-09-20T00:44:58Z&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Docker Info: &amp;amp;{ID:ZVOJ:5V6C:QO&amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Sep 20 00:44:58 k8s-master71u cri-dockerd[5055]: time=&amp;#34;&lt;/span>2023-09-20T00:44:58Z&lt;span class="s2">&amp;#34; level=info msg=&amp;#34;&lt;/span>Setting cgroupDriver systemd&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Sep 20 00:44:58 k8s-master71u cri-dockerd[5055]: time=&amp;#34;&lt;/span>2023-09-20T00:44:58Z&lt;span class="s2">&amp;#34; level=info msg=&amp;#34;&lt;/span>Docker cri received runtime co&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Sep &lt;span class="m">20&lt;/span> 00:44:58 k8s-master71u cri-dockerd&lt;span class="o">[&lt;/span>5055&lt;span class="o">]&lt;/span>: &lt;span class="nv">time&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;2023-09-20T00:44:58Z&amp;#34;&lt;/span> &lt;span class="nv">level&lt;/span>&lt;span class="o">=&lt;/span>info &lt;span class="nv">msg&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;Starting the GRPC backend for &amp;gt;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Sep 20 00:44:58 k8s-master71u cri-dockerd[5055]: time=&amp;#34;&lt;/span>2023-09-20T00:44:58Z&lt;span class="s2">&amp;#34; level=info msg=&amp;#34;&lt;/span>Start cri-dockerd grpc backend&lt;span class="s2">&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">Sep 20 00:44:58 k8s-master71u systemd[1]: Started CRI Interface for Docker Application Container Engine.
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="初始化集群">初始化集群&lt;/h1>
&lt;h2 id="一安裝kubeadmkubeletkubectl">一、安裝kubeadm、kubelet、kubectl&lt;/h2>
&lt;p>操作節點： 所有的master和node節點(&lt;code>k8s-master,k8s-node&lt;/code>) 需要執行&lt;/p>
&lt;p>&lt;a class="link" href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/" target="_blank" rel="noopener"
>https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1. Update the apt package index and install packages needed to use the Kubernetes apt repository:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get install -y apt-transport-https ca-certificates curl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2. Download the Google Cloud public signing key:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -fsSL https://packages.cloud.google.com/apt/doc/apt-key.gpg &lt;span class="p">|&lt;/span> sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-archive-keyring.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3. Add the Kubernetes apt repository:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;deb [signed-by=/etc/apt/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee /etc/apt/sources.list.d/kubernetes.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4. 檢查是否已經添加源 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat /etc/apt/sources.list.d/kubernetes.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deb &lt;span class="o">[&lt;/span>signed-by&lt;span class="o">=&lt;/span>/etc/apt/keyrings/kubernetes-archive-keyring.gpg&lt;span class="o">]&lt;/span> https://apt.kubernetes.io/ kubernetes-xenial main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5. Update apt package index, install kubelet, kubeadm and kubectl, and pin their version:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# sudo apt-get install -y &lt;span class="nv">kubelet&lt;/span>&lt;span class="o">=&lt;/span>1.26.3-00 &lt;span class="nv">kubeadm&lt;/span>&lt;span class="o">=&lt;/span>1.26.3-00 &lt;span class="nv">kubectl&lt;/span>&lt;span class="o">=&lt;/span>1.26.3-00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 查看kubeadm 版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubeadm version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubeadm version: &lt;span class="p">&amp;amp;&lt;/span>version.Info&lt;span class="o">{&lt;/span>Major:&lt;span class="s2">&amp;#34;1&amp;#34;&lt;/span>, Minor:&lt;span class="s2">&amp;#34;26&amp;#34;&lt;/span>, GitVersion:&lt;span class="s2">&amp;#34;v1.26.3&amp;#34;&lt;/span>, GitCommit:&lt;span class="s2">&amp;#34;9e644106593f3f4aa98f8a84b23db5fa378900bd&amp;#34;&lt;/span>, GitTreeState:&lt;span class="s2">&amp;#34;clean&amp;#34;&lt;/span>, BuildDate:&lt;span class="s2">&amp;#34;2023-03-15T13:38:47Z&amp;#34;&lt;/span>, GoVersion:&lt;span class="s2">&amp;#34;go1.19.7&amp;#34;&lt;/span>, Compiler:&lt;span class="s2">&amp;#34;gc&amp;#34;&lt;/span>, Platform:&lt;span class="s2">&amp;#34;linux/amd64&amp;#34;&lt;/span>&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 設置kubelet開機啟動，並使用ipvs與systemd&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# vim /etc/default/kubelet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">KUBE_PROXY_MODE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;ipvs&amp;#34;&lt;/span> &lt;span class="nv">KUBELET_EXTRA_ARGS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;--cgroup-driver=systemd --pod-infra-container-image=registry.k8s.io/pause:3.6&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl &lt;span class="nb">enable&lt;/span> --now kubelet
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="二安裝配置haproxykeepalived">二、安裝配置haproxy、keepalived&lt;/h2>
&lt;p>&lt;font color=red>操作節點： 所有的master&lt;/font>&lt;/p>
&lt;p>注意：如果有兩個集群，都在同一網段內，/etc/keepalived/keepalived.conf裡面的virtual_router_id 60記得要不一樣，不然/var/log/message會一直報錯。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# apt-get install keepalived haproxy -y
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 所有master節點執行,注意替換最後的master節點IP地址&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# vim /etc/haproxy/haproxy.cfg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">global
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> maxconn &lt;span class="m">2000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ulimit-n &lt;span class="m">16384&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log 127.0.0.1 local0 err
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> stats timeout 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">defaults
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> log global
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mode http
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option httplog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout connect &lt;span class="m">5000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout client &lt;span class="m">50000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout server &lt;span class="m">50000&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout http-request 15s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeout http-keep-alive 15s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">frontend monitor-in
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">bind&lt;/span> *:33305
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mode http
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option httplog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> monitor-uri /monitor
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">frontend k8s-master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">bind&lt;/span> 0.0.0.0:7443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">bind&lt;/span> 127.0.0.1:7443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mode tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option tcplog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> tcp-request inspect-delay 5s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default_backend k8s-master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">backend k8s-master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mode tcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option tcplog
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> option tcp-check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> balance roundrobin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> default-server inter 10s downinter 5s rise &lt;span class="m">2&lt;/span> fall &lt;span class="m">2&lt;/span> slowstart 60s maxconn &lt;span class="m">250&lt;/span> maxqueue &lt;span class="m">256&lt;/span> weight &lt;span class="m">100&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server k8s-master71u 192.168.1.71:6443 check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server k8s-master72u 192.168.1.72:6443 check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> server k8s-master73u 192.168.1.73:6443 check
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 在k8s-master71u節點，注意mcast_src_ip換成實際的master1ip地址，virtual_ipaddress換成lb地址，interface要替換成主機IP使用的介面&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# vim /etc/keepalived/keepalived.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">! Configuration File &lt;span class="k">for&lt;/span> keepalived
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">global_defs &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> router_id LVS_DEVEL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">script_user root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> enable_script_security
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vrrp_script chk_apiserver &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> script &lt;span class="s2">&amp;#34;/etc/keepalived/check_apiserver.sh&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> interval &lt;span class="m">5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> weight -5
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> fall &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> rise &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">vrrp_instance VI_1 &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> state MASTER
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> interface ens160
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mcast_src_ip 192.168.1.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> virtual_router_id &lt;span class="m">60&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> priority &lt;span class="m">101&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> advert_int &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> authentication &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> auth_type PASS
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> auth_pass K8SHA_KA_AUTH
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> virtual_ipaddress &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 192.168.1.74
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> track_script &lt;span class="o">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> chk_apiserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 在k8s-master52u和k8s-master53u分別創建/etc/keepalived/keepalived.conf，注意修改mcast_src_ip和virtual_ipaddress&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#所有master節點配置KeepAlived健康檢查文件：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# vim /etc/keepalived/check_apiserver.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#!/bin/bash&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">err&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> k in &lt;span class="k">$(&lt;/span>seq &lt;span class="m">1&lt;/span> 3&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">do&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">check_code&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>pgrep haproxy&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$check_code&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">err&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>expr &lt;span class="nv">$err&lt;/span> + 1&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sleep &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">continue&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">err&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">break&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[[&lt;/span> &lt;span class="nv">$err&lt;/span> !&lt;span class="o">=&lt;/span> &lt;span class="s2">&amp;#34;0&amp;#34;&lt;/span> &lt;span class="o">]]&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;systemctl stop keepalived&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> /usr/bin/systemctl stop keepalived
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">exit&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 啟動haproxy和keepalived----&amp;gt;所有master節點&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# chmod +x /etc/keepalived/check_apiserver.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl &lt;span class="nb">enable&lt;/span> --now haproxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl &lt;span class="nb">enable&lt;/span> --now keepalived
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl restart haproxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl restart keepalived
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl status haproxy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# systemctl status keepalived
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 測試lbip是否生效(從node節點測試的)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# telnet 192.168.1.74 &lt;span class="m">7443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Trying 192.168.1.74...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connected to 192.168.1.74.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Escape character is &lt;span class="s1">&amp;#39;^]&amp;#39;&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connection closed by foreign host.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="三初始化配置文件">三、初始化配置文件&lt;/h2>
&lt;p>操作節點： 只在master節點（&lt;code>k8s-master&lt;/code>）執行&lt;/p>
&lt;p>&lt;a class="link" href="https://kubernetes.io/docs/reference/config-api/kubeadm-config.v1beta3/" target="_blank" rel="noopener"
>https://kubernetes.io/docs/reference/config-api/kubeadm-config.v1beta3/&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1.24.0版本之後，需修改為criSocket: unix:///var/run/cri-dockerd.sock&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1.27.x版本之後，需修改為apiVersion: kubeadm.k8s.io/v1beta3，v1beta2不能用了&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># imageRepository: k8s.gcr.io已不更新，改imageRepository: registry.k8s.io&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># clusterName: kubernetes -&amp;gt;依自己需求修改&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># dns: type: CoreDNS 已棄用，不用寫&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# vim kubeadm.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: kubeadm.k8s.io/v1beta3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">bootstrapTokens:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">- groups:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - system:bootstrappers:kubeadm:default-node-token
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> token: 7t2weq.bjbawausm0jaxury
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ttl: 24h0m0s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> usages:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - signing
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - authentication
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: InitConfiguration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">localAPIEndpoint:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> advertiseAddress: 192.168.1.71
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> bindPort: &lt;span class="m">6443&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nodeRegistration:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> criSocket: unix:///var/run/cri-dockerd.sock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: k8s-master71u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> taints:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - effect: NoSchedule
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> key: node-role.kubernetes.io/master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiServer:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> certSANs:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - 192.168.1.74
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> timeoutForControlPlane: 4m0s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: kubeadm.k8s.io/v1beta3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">certificatesDir: /etc/kubernetes/pki
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">clusterName: kubernetes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">controlPlaneEndpoint: 192.168.1.74:7443
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">controllerManager: &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> local:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dataDir: /var/lib/etcd
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">imageRepository: registry.k8s.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: ClusterConfiguration
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubernetesVersion: v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">networking:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> dnsDomain: cluster.local
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> podSubnet: 10.244.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> serviceSubnet: 10.245.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">scheduler: &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="四提前下載鏡像">四、提前下載鏡像&lt;/h2>
&lt;p>操作節點：所有master節點執行&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubeadm config images list --config kubeadm.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">registry.k8s.io/kube-apiserver:v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">registry.k8s.io/kube-controller-manager:v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">registry.k8s.io/kube-scheduler:v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">registry.k8s.io/kube-proxy:v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">registry.k8s.io/pause:3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">registry.k8s.io/etcd:3.5.6-0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">registry.k8s.io/coredns/coredns:v1.9.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubeadm config images pull --config kubeadm.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>config/images&lt;span class="o">]&lt;/span> Pulled registry.k8s.io/kube-apiserver:v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>config/images&lt;span class="o">]&lt;/span> Pulled registry.k8s.io/kube-controller-manager:v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>config/images&lt;span class="o">]&lt;/span> Pulled registry.k8s.io/kube-scheduler:v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>config/images&lt;span class="o">]&lt;/span> Pulled registry.k8s.io/kube-proxy:v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>config/images&lt;span class="o">]&lt;/span> Pulled registry.k8s.io/pause:3.9
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>config/images&lt;span class="o">]&lt;/span> Pulled registry.k8s.io/etcd:3.5.6-0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>config/images&lt;span class="o">]&lt;/span> Pulled registry.k8s.io/coredns/coredns:v1.9.3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="五初始化master節點">五、初始化master節點&lt;/h2>
&lt;p>操作節點：只在master節點（&lt;code>k8s-master&lt;/code>）執行，找一台master執行即可&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubeadm init --config kubeadm.yaml --upload-certs
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 若初始化成功後，最後會提示如下信息：&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your Kubernetes control-plane has initialized successfully!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To start using your cluster, you need to run the following as a regular user:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> mkdir -p &lt;span class="nv">$HOME&lt;/span>/.kube
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo cp -i /etc/kubernetes/admin.conf &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo chown &lt;span class="k">$(&lt;/span>id -u&lt;span class="k">)&lt;/span>:&lt;span class="k">$(&lt;/span>id -g&lt;span class="k">)&lt;/span> &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Alternatively, &lt;span class="k">if&lt;/span> you are the root user, you can run:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">export&lt;/span> &lt;span class="nv">KUBECONFIG&lt;/span>&lt;span class="o">=&lt;/span>/etc/kubernetes/admin.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You should now deploy a pod network to the cluster.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Run &lt;span class="s2">&amp;#34;kubectl apply -f [podnetwork].yaml&amp;#34;&lt;/span> with one of the options listed at:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> https://kubernetes.io/docs/concepts/cluster-administration/addons/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You can now join any number of the control-plane node running the following &lt;span class="nb">command&lt;/span> on each as root:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> kubeadm join 192.168.1.74:7443 --token 7t2weq.bjbawausm0jaxury &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --discovery-token-ca-cert-hash sha256:86af29371fd57d46a8592782fb4ae158035711372c0541449dcadfdc8f7fc243 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --control-plane --certificate-key a543d4775e0ca9787d4d2936758a3447d189cdae117170512b4de60a23b59e8a
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Please note that the certificate-key gives access to cluster sensitive data, keep it secret!
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">As a safeguard, uploaded-certs will be deleted in two hours&lt;span class="p">;&lt;/span> If necessary, you can use
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;kubeadm init phase upload-certs --upload-certs&amp;#34;&lt;/span> to reload certs afterward.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Then you can join any number of worker nodes by running the following on each as root:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubeadm join 192.168.1.74:7443 --token 7t2weq.bjbawausm0jaxury &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --discovery-token-ca-cert-hash sha256:86af29371fd57d46a8592782fb4ae158035711372c0541449dcadfdc8f7fc243
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">## 接下來按照上述提示信息操作，配置kubectl客戶端的認證&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# mkdir -p &lt;span class="nv">$HOME&lt;/span>/.kube
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# sudo cp -i /etc/kubernetes/admin.conf &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# sudo chown &lt;span class="k">$(&lt;/span>id -u&lt;span class="k">)&lt;/span>:&lt;span class="k">$(&lt;/span>id -g&lt;span class="k">)&lt;/span> &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;blockquote>
&lt;p>若執行初始化過程中出錯，根據錯誤信息調整後，執行 kubeadm reset -f ; ipvsadm &amp;ndash;clear ; rm -rf ~/.kube ; rm -rf /etc/kubernetes/manifests/* ; rm -rf /var/lib/etcd/&lt;/p>
&lt;/blockquote>
&lt;h2 id="六添加其他master節點到集群中">六、添加其他master節點到集群中&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># k8s-master72u主機&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:~# kubeadm join 192.168.1.74:7443 --token 7t2weq.bjbawausm0jaxury &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --discovery-token-ca-cert-hash sha256:86af29371fd57d46a8592782fb4ae158035711372c0541449dcadfdc8f7fc243 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --control-plane --certificate-key a543d4775e0ca9787d4d2936758a3447d189cdae117170512b4de60a23b59e8a &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --cri-socket&lt;span class="o">=&lt;/span>unix:///var/run/cri-dockerd.sock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:~# mkdir -p &lt;span class="nv">$HOME&lt;/span>/.kube
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:~# sudo cp -i /etc/kubernetes/admin.conf &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master72u:~# sudo chown &lt;span class="k">$(&lt;/span>id -u&lt;span class="k">)&lt;/span>:&lt;span class="k">$(&lt;/span>id -g&lt;span class="k">)&lt;/span> &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># k8s-master73u主機&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:~# kubeadm join 192.168.1.74:7443 --token 7t2weq.bjbawausm0jaxury &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --discovery-token-ca-cert-hash sha256:86af29371fd57d46a8592782fb4ae158035711372c0541449dcadfdc8f7fc243 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --control-plane --certificate-key a543d4775e0ca9787d4d2936758a3447d189cdae117170512b4de60a23b59e8a &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --cri-socket&lt;span class="o">=&lt;/span>unix:///var/run/cri-dockerd.sock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:~# mkdir -p &lt;span class="nv">$HOME&lt;/span>/.kube
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:~# sudo cp -i /etc/kubernetes/admin.conf &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master73u:~# sudo chown &lt;span class="k">$(&lt;/span>id -u&lt;span class="k">)&lt;/span>:&lt;span class="k">$(&lt;/span>id -g&lt;span class="k">)&lt;/span> &lt;span class="nv">$HOME&lt;/span>/.kube/config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="七添加node節點到集群中">七、添加node節點到集群中&lt;/h2>
&lt;p>操作節點：所有的node節點（&lt;code>k8s-node&lt;/code>）需要執行 在每台node節點，執行如下命令，該命令是在kubeadm init成功後提示信息中打印出來的，需要替換成實際init後打印出的命令。&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># k8s-node75u主機&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node75u:~# kubeadm join 192.168.1.74:7443 --token 7t2weq.bjbawausm0jaxury &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --discovery-token-ca-cert-hash sha256:86af29371fd57d46a8592782fb4ae158035711372c0541449dcadfdc8f7fc243 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --cri-socket&lt;span class="o">=&lt;/span>unix:///var/run/cri-dockerd.sock
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># k8s-node76u主機&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# kubeadm join 192.168.1.74:7443 --token 7t2weq.bjbawausm0jaxury &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --discovery-token-ca-cert-hash sha256:86af29371fd57d46a8592782fb4ae158035711372c0541449dcadfdc8f7fc243 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --cri-socket&lt;span class="o">=&lt;/span>unix:///var/run/cri-dockerd.sock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>如果忘記添加命令，可以通過如下命令生成：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubeadm token create --print-join-command
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>查看目前node狀況:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master71u NotReady control-plane 10m v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master72u NotReady control-plane 3m58s v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master73u NotReady control-plane 2m57s v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node75u NotReady &amp;lt;none&amp;gt; 55s v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node76u NotReady &amp;lt;none&amp;gt; 51s v1.26.3
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="部署容器網絡calico">部署容器網絡（calico）&lt;/h2>
&lt;p>操作節點：只在master節點（&lt;code>k8s-master&lt;/code>）執行，找一台master執行即可，CNI&lt;/p>
&lt;p>Calico是一個純三層的數據中心網絡方案，是目前Kubernetes主流的網絡方案。&lt;/p>
&lt;p>&lt;a class="link" href="https://docs.tigera.io/calico/latest/getting-started/kubernetes/quickstart" target="_blank" rel="noopener"
>https://docs.tigera.io/calico/latest/getting-started/kubernetes/quickstart&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# mkdir calico
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">cd&lt;/span> calico/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/calico# wget https://raw.githubusercontent.com/projectcalico/calico/v3.26.0/manifests/tigera-operator.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/calico# wget https://raw.githubusercontent.com/projectcalico/calico/v3.26.0/manifests/custom-resources.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/calico# kubectl create -f tigera-operator.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># cidr ip部分，與前面kubeadm init的 --pod-network-cidr指定的一樣。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/calico# vim custom-resources.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This section includes base Calico installation configuration.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.Installation&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: operator.tigera.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: Installation
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Configures Calico networking.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> calicoNetwork:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1"># Note: The ipPools section cannot be modified post-install.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> ipPools:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> - blockSize: &lt;span class="m">26&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> cidr: 10.244.0.0/16
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> encapsulation: VXLANCrossSubnet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> natOutgoing: Enabled
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> nodeSelector: all&lt;span class="o">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># This section configures the Calico API server.&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># For more information, see: https://projectcalico.docs.tigera.io/master/reference/installation/api#operator.tigera.io/v1.APIServer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: operator.tigera.io/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: APIServer
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: default
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec: &lt;span class="o">{}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/calico# kubectl create -f custom-resources.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 等Calico Pod都Running，節點也會准備就緒。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/calico# kubectl get pods -n calico-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-kube-controllers-676484d755-9llvm 1/1 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-2s4gl 1/1 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-f9dz9 1/1 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-kvc55 1/1 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-l9gb2 1/1 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-node-xdp42 1/1 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-typha-98f544f9f-nqc4n 1/1 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-typha-98f544f9f-plpnn 1/1 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">calico-typha-98f544f9f-vgrmn 1/1 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-node-driver-42c8p 2/2 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-node-driver-kdd42 2/2 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-node-driver-nxf5d 2/2 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-node-driver-rphdj 2/2 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">csi-node-driver-shs2s 2/2 Running &lt;span class="m">0&lt;/span> 16m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/calico# kubectl get node
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master71u Ready control-plane 31m v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master72u Ready control-plane 24m v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master73u Ready control-plane 23m v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node75u Ready &amp;lt;none&amp;gt; 21m v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node76u Ready &amp;lt;none&amp;gt; 21m v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/calico# kubectl get pods -n kube-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">coredns-787d4945fb-6x8v2 1/1 Running &lt;span class="m">0&lt;/span> 31m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">coredns-787d4945fb-ddpgp 1/1 Running &lt;span class="m">0&lt;/span> 31m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd-k8s-master71u 1/1 Running &lt;span class="m">0&lt;/span> 31m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd-k8s-master72u 1/1 Running &lt;span class="m">0&lt;/span> 24m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd-k8s-master73u 1/1 Running &lt;span class="m">0&lt;/span> 23m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-apiserver-k8s-master71u 1/1 Running &lt;span class="m">0&lt;/span> 31m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-apiserver-k8s-master72u 1/1 Running &lt;span class="m">0&lt;/span> 24m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-apiserver-k8s-master73u 1/1 Running &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>23m ago&lt;span class="o">)&lt;/span> 23m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-controller-manager-k8s-master71u 1/1 Running &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>24m ago&lt;span class="o">)&lt;/span> 31m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-controller-manager-k8s-master72u 1/1 Running &lt;span class="m">0&lt;/span> 24m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-controller-manager-k8s-master73u 1/1 Running &lt;span class="m">0&lt;/span> 22m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-proxy-4rtwz 1/1 Running &lt;span class="m">0&lt;/span> 23m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-proxy-84v9t 1/1 Running &lt;span class="m">0&lt;/span> 24m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-proxy-9bh8t 1/1 Running &lt;span class="m">0&lt;/span> 21m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-proxy-m5gj8 1/1 Running &lt;span class="m">0&lt;/span> 21m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-proxy-x4t5v 1/1 Running &lt;span class="m">0&lt;/span> 31m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-scheduler-k8s-master71u 1/1 Running &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>24m ago&lt;span class="o">)&lt;/span> 31m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-scheduler-k8s-master72u 1/1 Running &lt;span class="m">0&lt;/span> 24m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-scheduler-k8s-master73u 1/1 Running &lt;span class="m">0&lt;/span> 22m
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>註：以後所有yaml文件都只在Master節點執行。&lt;/p>
&lt;p>安裝目錄：/etc/kubernetes/&lt;/p>
&lt;p>組件配置文件目錄：/etc/kubernetes/manifests/&lt;/p>
&lt;h1 id="集群設置">集群設置&lt;/h1>
&lt;h2 id="設置master節點是否可調度可選">設置master節點是否可調度（可選）&lt;/h2>
&lt;p>操作節點：&lt;code>k8s-master&lt;/code>&lt;/p>
&lt;p>默認部署成功後，master節點無法調度業務pod，如需設置master節點也可以參與pod的調度，需執行：&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">$ kubectl taint node k8s-master node-role.kubernetes.io/master:NoSchedule-
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="設置kubectl自動補全">設置kubectl自動補全&lt;/h2>
&lt;p>操作節點：&lt;code>k8s-master&lt;/code>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# apt install -y bash-completion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# apt install plocate
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# locate bash_completion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">source&lt;/span> /usr/share/bash-completion/bash_completion
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">source&lt;/span> &amp;lt;&lt;span class="o">(&lt;/span>kubectl completion bash&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;source &amp;lt;(kubectl completion bash)&amp;#34;&lt;/span> &amp;gt;&amp;gt; ~/.bashrc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="調整證書過期">調整證書過期&lt;/h1>
&lt;p>使用kubeadm安裝的集群，證書默認有效期為1年，可以通過如下方式修改為10年。&lt;strong>全部master節點都要執行&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/calico# &lt;span class="nb">cd&lt;/span> /etc/kubernetes/pki
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki# &lt;span class="k">for&lt;/span> i in &lt;span class="k">$(&lt;/span>ls *.crt&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;===== &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2"> =====&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> openssl x509 -in &lt;span class="nv">$i&lt;/span> -text -noout &lt;span class="p">|&lt;/span> grep -A &lt;span class="m">3&lt;/span> &lt;span class="s1">&amp;#39;Validity&amp;#39;&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> apiserver.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 04:42:27 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">19&lt;/span> 04:42:27 &lt;span class="m">2024&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> kube-apiserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> apiserver-etcd-client.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 04:42:28 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">19&lt;/span> 04:42:29 &lt;span class="m">2024&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">O&lt;/span> &lt;span class="o">=&lt;/span> system:masters, &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> kube-apiserver-etcd-client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> apiserver-kubelet-client.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 04:42:27 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">19&lt;/span> 04:42:27 &lt;span class="m">2024&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">O&lt;/span> &lt;span class="o">=&lt;/span> system:masters, &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> kube-apiserver-kubelet-client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> ca.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 04:42:27 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">17&lt;/span> 04:42:27 &lt;span class="m">2033&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">kubernetes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> front-proxy-ca.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 04:42:27 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">17&lt;/span> 04:42:27 &lt;span class="m">2033&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> front-proxy-ca
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> front-proxy-client.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 04:42:27 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">19&lt;/span> 04:42:28 &lt;span class="m">2024&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> front-proxy-client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki# mkdir backup_key&lt;span class="p">;&lt;/span> cp -rp ./* backup_key/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki# git clone https://github.com/yuyicai/update-kube-cert.git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki# &lt;span class="nb">cd&lt;/span> update-kube-cert/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki/update-kube-cert# bash update-kubeadm-cert.sh all
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki/update-kube-cert# kubectl -n kube-system delete po kube-apiserver-k8s-master71u kube-apiserver-k8s-master72u kube-apiserver-k8s-master73u kube-controller-manager-k8s-master71u kube-controller-manager-k8s-master72u kube-controller-manager-k8s-master73u kube-scheduler-k8s-master71u kube-scheduler-k8s-master72u kube-scheduler-k8s-master73u
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki/update-kube-cert# kubectl get pod -n kube-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">coredns-787d4945fb-6x8v2 1/1 Running &lt;span class="m">0&lt;/span> 36m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">coredns-787d4945fb-ddpgp 1/1 Running &lt;span class="m">0&lt;/span> 36m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd-k8s-master71u 1/1 Running &lt;span class="m">0&lt;/span> 36m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd-k8s-master72u 1/1 Running &lt;span class="m">0&lt;/span> 29m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">etcd-k8s-master73u 1/1 Running &lt;span class="m">0&lt;/span> 28m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-apiserver-k8s-master71u 1/1 Running &lt;span class="m">0&lt;/span> 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-apiserver-k8s-master72u 1/1 Running &lt;span class="m">0&lt;/span> 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-apiserver-k8s-master73u 1/1 Running &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>28m ago&lt;span class="o">)&lt;/span> 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-controller-manager-k8s-master71u 1/1 Running &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>29m ago&lt;span class="o">)&lt;/span> 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-controller-manager-k8s-master72u 1/1 Running &lt;span class="m">0&lt;/span> 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-controller-manager-k8s-master73u 1/1 Running &lt;span class="m">0&lt;/span> 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-proxy-4rtwz 1/1 Running &lt;span class="m">0&lt;/span> 28m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-proxy-84v9t 1/1 Running &lt;span class="m">0&lt;/span> 29m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-proxy-9bh8t 1/1 Running &lt;span class="m">0&lt;/span> 26m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-proxy-m5gj8 1/1 Running &lt;span class="m">0&lt;/span> 26m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-proxy-x4t5v 1/1 Running &lt;span class="m">0&lt;/span> 36m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-scheduler-k8s-master71u 1/1 Running &lt;span class="m">2&lt;/span> &lt;span class="o">(&lt;/span>69s ago&lt;span class="o">)&lt;/span> 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-scheduler-k8s-master72u 1/1 Running &lt;span class="m">0&lt;/span> 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kube-scheduler-k8s-master73u 1/1 Running &lt;span class="m">0&lt;/span> 30s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki/update-kube-cert# &lt;span class="nb">cd&lt;/span> /etc/kubernetes/pki
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:/etc/kubernetes/pki# &lt;span class="k">for&lt;/span> i in &lt;span class="k">$(&lt;/span>ls *.crt&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;===== &lt;/span>&lt;span class="nv">$i&lt;/span>&lt;span class="s2"> =====&amp;#34;&lt;/span>&lt;span class="p">;&lt;/span> openssl x509 -in &lt;span class="nv">$i&lt;/span> -text -noout &lt;span class="p">|&lt;/span> grep -A &lt;span class="m">3&lt;/span> &lt;span class="s1">&amp;#39;Validity&amp;#39;&lt;/span> &lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> apiserver.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 05:17:58 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">17&lt;/span> 05:17:58 &lt;span class="m">2033&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> kube-apiserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> apiserver-etcd-client.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 05:17:55 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">17&lt;/span> 05:17:55 &lt;span class="m">2033&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">O&lt;/span> &lt;span class="o">=&lt;/span> system:masters, &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> kube-apiserver-etcd-client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> apiserver-kubelet-client.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 05:17:58 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">17&lt;/span> 05:17:58 &lt;span class="m">2033&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">O&lt;/span> &lt;span class="o">=&lt;/span> system:masters, &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> kube-apiserver-kubelet-client
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> ca.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 04:42:27 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">17&lt;/span> 04:42:27 &lt;span class="m">2033&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> &lt;span class="nv">kubernetes&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> front-proxy-ca.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 04:42:27 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">17&lt;/span> 04:42:27 &lt;span class="m">2033&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> front-proxy-ca
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">=====&lt;/span> front-proxy-client.crt &lt;span class="o">=====&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Validity
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not Before: Sep &lt;span class="m">20&lt;/span> 05:17:59 &lt;span class="m">2023&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Not After : Sep &lt;span class="m">17&lt;/span> 05:17:59 &lt;span class="m">2033&lt;/span> GMT
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> Subject: &lt;span class="nv">CN&lt;/span> &lt;span class="o">=&lt;/span> front-proxy-client
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="驗證集群">驗證集群&lt;/h1>
&lt;p>操作節點： 在master節點（&lt;code>k8s-master&lt;/code>）執行&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get nodes
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME STATUS ROLES AGE VERSION
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master71u Ready control-plane 39m v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master72u Ready control-plane 32m v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-master73u Ready control-plane 31m v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node75u Ready &amp;lt;none&amp;gt; 29m v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">k8s-node76u Ready &amp;lt;none&amp;gt; 29m v1.26.3
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl run test-nginx --image&lt;span class="o">=&lt;/span>nginx:alpine
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pod/test-nginx created
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">test-nginx 1/1 Running &lt;span class="m">0&lt;/span> 21s 10.244.255.195 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# curl 10.244.255.195
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;!DOCTYPE html&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;html&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;head&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;title&amp;gt;Welcome to nginx!&amp;lt;/title&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;style&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">html &lt;span class="o">{&lt;/span> color-scheme: light dark&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">body &lt;span class="o">{&lt;/span> width: 35em&lt;span class="p">;&lt;/span> margin: &lt;span class="m">0&lt;/span> auto&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">font-family: Tahoma, Verdana, Arial, sans-serif&lt;span class="p">;&lt;/span> &lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/style&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/head&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;body&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;h1&amp;gt;Welcome to nginx!&amp;lt;/h1&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;p&amp;gt;If you see this page, the nginx web server is successfully installed and
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">working. Further configuration is required.&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;p&amp;gt;For online documentation and support please refer to
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;a &lt;span class="nv">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://nginx.org/&amp;#34;&lt;/span>&amp;gt;nginx.org&amp;lt;/a&amp;gt;.&amp;lt;br/&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Commercial support is available at
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;a &lt;span class="nv">href&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;http://nginx.com/&amp;#34;&lt;/span>&amp;gt;nginx.com&amp;lt;/a&amp;gt;.&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;p&amp;gt;&amp;lt;em&amp;gt;Thank you &lt;span class="k">for&lt;/span> using nginx.&amp;lt;/em&amp;gt;&amp;lt;/p&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/body&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&amp;lt;/html&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>使用Docker安裝Rancher管理平台，納管現有k8s集群(單節點-非高可用)</title><link>https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/</link><pubDate>Sat, 07 Oct 2023 02:00:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/</guid><description>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920224620.png"
width="1185"
height="787"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920224620_hu5a39cd61ec6101b6320b865185a3e4e0_367454_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920224620_hu5a39cd61ec6101b6320b865185a3e4e0_367454_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920224620.png"
class="gallery-image"
data-flex-grow="150"
data-flex-basis="361px"
>&lt;/p>
&lt;p>Rancher官網安裝網址：
&lt;a class="link" href="https://ranchermanager.docs.rancher.com/zh/pages-for-subheaders/rancher-on-a-single-node-with-docker" target="_blank" rel="noopener"
>https://ranchermanager.docs.rancher.com/zh/pages-for-subheaders/rancher-on-a-single-node-with-docker&lt;/a>&lt;/p>
&lt;p>最新版Rancher(v2.7.6)能夠納管的kubernetes版本為1.26.4：
&lt;a class="link" href="https://www.suse.com/suse-rancher/support-matrix/all-supported-versions/rancher-v2-7-6/" target="_blank" rel="noopener"
>https://www.suse.com/suse-rancher/support-matrix/all-supported-versions/rancher-v2-7-6/&lt;/a>
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175154.png"
width="767"
height="576"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175154_hu01fa84ee148454aed4aa51b480f9836a_40466_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175154_hu01fa84ee148454aed4aa51b480f9836a_40466_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920175154.png"
class="gallery-image"
data-flex-grow="133"
data-flex-basis="319px"
>&lt;/p>
&lt;h2 id="一rancher-server安裝">一、Rancher Server安裝&lt;/h2>
&lt;h3 id="一使用docker起容器">一、使用docker起容器&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-node75u:~# sudo docker run --privileged -d --restart&lt;span class="o">=&lt;/span>unless-stopped -p 80:80 -p 443:443 rancher/rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node75u:~# docker ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">0e92a3ece9cd rancher/rancher &lt;span class="s2">&amp;#34;entrypoint.sh&amp;#34;&lt;/span> &lt;span class="m">4&lt;/span> minutes ago Up About a minute 0.0.0.0:80-&amp;gt;80/tcp, :::80-&amp;gt;80/tcp, 0.0.0.0:443-&amp;gt;443/tcp, :::443-&amp;gt;443/tcp dreamy_rubin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="二查看初始密碼">二、查看初始密碼&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175456.png"
width="766"
height="755"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175456_hua3986ebe76c28593123877564810c0e5_76029_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175456_hua3986ebe76c28593123877564810c0e5_76029_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920175456.png"
class="gallery-image"
data-flex-grow="101"
data-flex-basis="243px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-node75u:~# docker logs 0e92a3ece9cd 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="p">|&lt;/span> grep &lt;span class="s2">&amp;#34;Bootstrap Password:&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">2023/09/20 09:50:01 &lt;span class="o">[&lt;/span>INFO&lt;span class="o">]&lt;/span> Bootstrap Password: 79j4khgd9952rmn55kdntxt7kwxfn7f7dvpmrsgx6nr7wqblrtpp6l
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="三登入">三、登入&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175658.png"
width="783"
height="768"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175658_hu3d2c40f5d0939a2b52203051317c438e_76967_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175658_hu3d2c40f5d0939a2b52203051317c438e_76967_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920175658.png"
class="gallery-image"
data-flex-grow="101"
data-flex-basis="244px"
>&lt;/p>
&lt;h3 id="四重新設定admin密碼">四、重新設定admin密碼&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175838.png"
width="801"
height="890"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175838_hu52cba99bffb2683bebf9888bc6b13c40_85503_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920175838_hu52cba99bffb2683bebf9888bc6b13c40_85503_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920175838.png"
class="gallery-image"
data-flex-grow="90"
data-flex-basis="216px"
>
登入成功頁面
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180029.png"
width="1571"
height="723"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180029_hufcf2fa2ea45ee7c98df35c55f7b48945_101094_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180029_hufcf2fa2ea45ee7c98df35c55f7b48945_101094_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920180029.png"
class="gallery-image"
data-flex-grow="217"
data-flex-basis="521px"
>&lt;/p>
&lt;h2 id="二匯入現有集群">二、匯入現有集群&lt;/h2>
&lt;h3 id="一點選import-existing">一、點選Import Existing&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180135.png"
width="1568"
height="715"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180135_hu81920a18e2926839b7b0711657581ae5_100846_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180135_hu81920a18e2926839b7b0711657581ae5_100846_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920180135.png"
class="gallery-image"
data-flex-grow="219"
data-flex-basis="526px"
>&lt;/p>
&lt;h3 id="二點選import-any-kubernetes-clustergeneric">二、點選Import any Kubernetes cluster(Generic)&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180232.png"
width="1241"
height="625"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180232_hu4d47c145f3344da3a90cc7cca9c878c3_69000_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180232_hu4d47c145f3344da3a90cc7cca9c878c3_69000_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920180232.png"
class="gallery-image"
data-flex-grow="198"
data-flex-basis="476px"
>&lt;/p>
&lt;h3 id="三填寫cluster-name自己決定以利後續辨識點選create">三、填寫Cluster Name(自己決定，以利後續辨識)，點選Create&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180509.png"
width="1563"
height="943"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180509_hud6431c9eb3b2c5342e0bb099a0106bc5_103694_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180509_hud6431c9eb3b2c5342e0bb099a0106bc5_103694_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920180509.png"
class="gallery-image"
data-flex-grow="165"
data-flex-basis="397px"
>&lt;/p>
&lt;h3 id="四創建之後會有提供加入的方式選擇第二項">四、創建之後，會有提供加入的方式，選擇第二項&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180638.png"
width="1559"
height="805"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180638_hu962b03cd08d4a0c5eedf892051dab8f4_177154_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920180638_hu962b03cd08d4a0c5eedf892051dab8f4_177154_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920180638.png"
class="gallery-image"
data-flex-grow="193"
data-flex-basis="464px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># master節點執行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# curl --insecure -sfL https://192.168.1.75/v3/import/ff4mlx8k768hsz8vmwl89lqhbmcsfbttkxqdtmk4m8pgqsrnd87pqc_c-m-gq2vbtfn.yaml &lt;span class="p">|&lt;/span> kubectl apply -f -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看pod是否都創建成功&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -n cattle-system -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cattle-cluster-agent-6c97c478bb-mjgwg 1/1 Running &lt;span class="m">0&lt;/span> 5m 10.244.14.137 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cattle-cluster-agent-6c97c478bb-vdn59 1/1 Running &lt;span class="m">0&lt;/span> 16m 10.244.255.199 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-webhook-74c9bd4d6-znrdp 1/1 Running &lt;span class="m">0&lt;/span> 61s 10.244.255.201 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="五確認現有集群已加入納管">五、確認現有集群已加入納管&lt;/h3>
&lt;p>加入rancher需要一點時間，請耐心等候，如果鏡像拉取失敗，可以手動去下載鏡像&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920183031.png"
width="1573"
height="720"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920183031_hu9e59a4907e63c34faa594edfc314c151_111515_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920183031_hu9e59a4907e63c34faa594edfc314c151_111515_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920183031.png"
class="gallery-image"
data-flex-grow="218"
data-flex-basis="524px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920182502.png"
width="1563"
height="936"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920182502_hu0d54cd16036aa81d0943b0f05cc93b8a_152101_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920182502_hu0d54cd16036aa81d0943b0f05cc93b8a_152101_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920182502.png"
class="gallery-image"
data-flex-grow="166"
data-flex-basis="400px"
>&lt;/p>
&lt;h3 id="六開啟kubectl-shell介面rancher會臨時起一個容器來跑shell指令關閉shell介面容器就會刪除">六、開啟Kubectl Shell介面，Rancher會臨時起一個容器來跑Shell指令，關閉Shell介面，容器就會刪除&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920182636.png"
width="1568"
height="949"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920182636_hu7038623ebb20f600634e4c858d61cdf9_227476_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920182636_hu7038623ebb20f600634e4c858d61cdf9_227476_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920182636.png"
class="gallery-image"
data-flex-grow="165"
data-flex-basis="396px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pod -n cattle-system -o wide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cattle-cluster-agent-6c97c478bb-mjgwg 1/1 Running &lt;span class="m">0&lt;/span> 6m11s 10.244.14.137 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cattle-cluster-agent-6c97c478bb-vdn59 1/1 Running &lt;span class="m">0&lt;/span> 17m 10.244.255.199 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dashboard-shell-75g77 2/2 Running &lt;span class="m">0&lt;/span> 9s 10.244.255.202 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher-webhook-74c9bd4d6-znrdp 1/1 Running &lt;span class="m">0&lt;/span> 2m12s 10.244.255.201 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="三加入windows-server-active-directory-ldap">三、加入Windows Server Active Directory (LDAP)&lt;/h2>
&lt;p>Rancher官網設定網址： &lt;a class="link" href="https://ranchermanager.docs.rancher.com/zh/how-to-guides/new-user-guides/authentication-permissions-and-global-configuration/authentication-config/configure-active-directory" target="_blank" rel="noopener"
>https://ranchermanager.docs.rancher.com/zh/how-to-guides/new-user-guides/authentication-permissions-and-global-configuration/authentication-config/configure-active-directory&lt;/a>&lt;/p>
&lt;h3 id="一查看可以整合登入驗證的方式">一、查看可以整合登入驗證的方式&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920183804.png"
width="277"
height="578"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920183804_hubff23e8276d6d1ee799bc3e36745626f_37911_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920183804_hubff23e8276d6d1ee799bc3e36745626f_37911_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920183804.png"
class="gallery-image"
data-flex-grow="47"
data-flex-basis="115px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920183831.png"
width="1553"
height="713"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920183831_hu316de54a60d50e6d08a5ea8995e319c3_103739_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920183831_hu316de54a60d50e6d08a5ea8995e319c3_103739_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920183831.png"
class="gallery-image"
data-flex-grow="217"
data-flex-basis="522px"
>&lt;/p>
&lt;h3 id="二創建ad使用者供rancher獲取ldap使用者資料">二、創建AD使用者，供Rancher獲取ldap使用者資料&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195052.png"
width="1022"
height="672"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195052_hu4bf1f5dae4f9517e3a6de85d581b01ad_468873_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195052_hu4bf1f5dae4f9517e3a6de85d581b01ad_468873_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920195052.png"
class="gallery-image"
data-flex-grow="152"
data-flex-basis="365px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195204.png"
width="508"
height="427"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195204_hu67582e5b58b9fa956d48e3e1b3025d88_55257_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195204_hu67582e5b58b9fa956d48e3e1b3025d88_55257_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920195204.png"
class="gallery-image"
data-flex-grow="118"
data-flex-basis="285px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195303.png"
width="512"
height="430"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195303_hua519bb2883bb325622ef0a431cf08e34_56340_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195303_hua519bb2883bb325622ef0a431cf08e34_56340_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920195303.png"
class="gallery-image"
data-flex-grow="119"
data-flex-basis="285px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195336.png"
width="748"
height="526"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195336_hu0984df2fb84430bf441ceeaf57952603_246853_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195336_hu0984df2fb84430bf441ceeaf57952603_246853_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920195336.png"
class="gallery-image"
data-flex-grow="142"
data-flex-basis="341px"
>&lt;/p>
&lt;h3 id="三使用ldapsearch測試一下是否可以查找到剛剛建立的使用者資訊">三、使用ldapsearch測試一下，是否可以查找到剛剛建立的使用者資訊&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % ldapsearch -x -H &lt;span class="s2">&amp;#34;ldap://192.168.1.49:389&amp;#34;&lt;/span> -D &lt;span class="s2">&amp;#34;jimmyhome\rancheruser&amp;#34;&lt;/span> -w &lt;span class="s2">&amp;#34;密碼&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -b &lt;span class="s2">&amp;#34;dc=jimmyhome,dc=tw&amp;#34;&lt;/span> -s sub &lt;span class="s2">&amp;#34;sAMAccountName=rancheruser&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># extended LDIF&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># LDAPv3&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># base &amp;lt;dc=jimmyhome,dc=tw&amp;gt; with scope subtree&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># filter: sAMAccountName=rancheruser&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># requesting: ALL&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">#&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># rancheruser, Users, jimmyhome.tw&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dn: &lt;span class="nv">CN&lt;/span>&lt;span class="o">=&lt;/span>rancheruser,CN&lt;span class="o">=&lt;/span>Users,DC&lt;span class="o">=&lt;/span>jimmyhome,DC&lt;span class="o">=&lt;/span>tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">objectClass: top
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">objectClass: person
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">objectClass: organizationalPerson
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">objectClass: user
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cn: rancheruser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">givenName: rancheruser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">distinguishedName: &lt;span class="nv">CN&lt;/span>&lt;span class="o">=&lt;/span>rancheruser,CN&lt;span class="o">=&lt;/span>Users,DC&lt;span class="o">=&lt;/span>jimmyhome,DC&lt;span class="o">=&lt;/span>tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">instanceType: &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">whenCreated: 20230920115311.0Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">whenChanged: 20230920120448.0Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">displayName: rancheruser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uSNCreated: &lt;span class="m">16399&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">uSNChanged: &lt;span class="m">16452&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">name: rancheruser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">objectGUID:: &lt;span class="nv">B9nTPDTyY0ehHZz4mWIJ1Q&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">userAccountControl: &lt;span class="m">66048&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">badPwdCount: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">codePage: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">countryCode: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">badPasswordTime: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lastLogoff: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lastLogon: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pwdLastSet: &lt;span class="m">133396843913520620&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">primaryGroupID: &lt;span class="m">513&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">objectSid:: &lt;span class="nv">AQUAAAAAAAUVAAAA2KPkIYA62ax0WlhyTwQAAA&lt;/span>&lt;span class="o">==&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">accountExpires: &lt;span class="m">9223372036854775807&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">logonCount: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sAMAccountName: rancheruser
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sAMAccountType: &lt;span class="m">805306368&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">userPrincipalName: rancheruser@jimmyhome.tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">objectCategory: &lt;span class="nv">CN&lt;/span>&lt;span class="o">=&lt;/span>Person,CN&lt;span class="o">=&lt;/span>Schema,CN&lt;span class="o">=&lt;/span>Configuration,DC&lt;span class="o">=&lt;/span>jimmyhome,DC&lt;span class="o">=&lt;/span>tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">dSCorePropagationData: 16010101000000.0Z
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">lastLogonTimestamp: &lt;span class="m">133396850882972826&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># search reference&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ref: ldap://ForestDnsZones.jimmyhome.tw/DC&lt;span class="o">=&lt;/span>ForestDnsZones,DC&lt;span class="o">=&lt;/span>jimmyhome,DC&lt;span class="o">=&lt;/span>tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># search reference&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ref: ldap://DomainDnsZones.jimmyhome.tw/DC&lt;span class="o">=&lt;/span>DomainDnsZones,DC&lt;span class="o">=&lt;/span>jimmyhome,DC&lt;span class="o">=&lt;/span>tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># search reference&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ref: ldap://jimmyhome.tw/CN&lt;span class="o">=&lt;/span>Configuration,DC&lt;span class="o">=&lt;/span>jimmyhome,DC&lt;span class="o">=&lt;/span>tw
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># search result&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">search: &lt;span class="m">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">result: &lt;span class="m">0&lt;/span> Success
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># numResponses: 5&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># numEntries: 1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># numReferences: 3&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="四整合ad驗證">四、整合AD驗證&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195828.png"
width="1565"
height="752"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195828_hu32023433e28c58be869cfd4b00a53e0a_109608_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920195828_hu32023433e28c58be869cfd4b00a53e0a_109608_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920195828.png"
class="gallery-image"
data-flex-grow="208"
data-flex-basis="499px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920202516.png"
width="1562"
height="770"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920202516_huf5819385887aa47ed3ad2353805236a5_89123_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920202516_huf5819385887aa47ed3ad2353805236a5_89123_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920202516.png"
class="gallery-image"
data-flex-grow="202"
data-flex-basis="486px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920200440.png"
width="1564"
height="876"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920200440_hu594f130566eb0d55a608ebc53d559d8b_105762_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920200440_hu594f130566eb0d55a608ebc53d559d8b_105762_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920200440.png"
class="gallery-image"
data-flex-grow="178"
data-flex-basis="428px"
>
確認驗證成功，連接到ldap
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920202553.png"
width="1573"
height="400"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920202553_hu55c8f478c070de92d1bbb3a45da7ed62_61301_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920202553_hu55c8f478c070de92d1bbb3a45da7ed62_61301_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920202553.png"
class="gallery-image"
data-flex-grow="393"
data-flex-basis="943px"
>&lt;/p>
&lt;p>可以看到，此時已經自動改成用剛剛驗證的ad帳戶登入了
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920203808.png"
width="1575"
height="444"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920203808_hue9cb7d09133fb0a90ab4f9720061370b_73641_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920203808_hue9cb7d09133fb0a90ab4f9720061370b_73641_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920203808.png"
class="gallery-image"
data-flex-grow="354"
data-flex-basis="851px"
>&lt;/p>
&lt;h3 id="五再到ad創建一個使用者驗證一下是否rancher可以獲取到此使用者帳號">五、再到AD創建一個使用者，驗證一下，是否Rancher可以獲取到此使用者帳號&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920202931.png"
width="754"
height="530"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920202931_hucce501a8d63116565fd51bf626607f7a_265285_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920202931_hucce501a8d63116565fd51bf626607f7a_265285_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920202931.png"
class="gallery-image"
data-flex-grow="142"
data-flex-basis="341px"
>&lt;/p>
&lt;p>編輯default project(裡面只有一個default namespace)
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920203941.png"
width="1573"
height="652"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920203941_hu85815b49f4cde207d4d8d84c72ff1e58_89204_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920203941_hu85815b49f4cde207d4d8d84c72ff1e58_89204_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920203941.png"
class="gallery-image"
data-flex-grow="241"
data-flex-basis="579px"
>&lt;/p>
&lt;p>添加ldap帳號
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204039.png"
width="1247"
height="487"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204039_hu4d5d91582cc4c220bc6ff9f834b34b84_54173_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204039_hu4d5d91582cc4c220bc6ff9f834b34b84_54173_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920204039.png"
class="gallery-image"
data-flex-grow="256"
data-flex-basis="614px"
>&lt;/p>
&lt;p>可以看到有jimmy帳號
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204053.png"
width="600"
height="515"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204053_hu2abd776d23e2d0a365cc775f8f5692c4_43125_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204053_hu2abd776d23e2d0a365cc775f8f5692c4_43125_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920204053.png"
class="gallery-image"
data-flex-grow="116"
data-flex-basis="279px"
>&lt;/p>
&lt;p>添加此帳號
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204121.png"
width="1573"
height="871"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204121_hu80effc2f7246d9943ad2ff6d835d4b03_79555_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204121_hu80effc2f7246d9943ad2ff6d835d4b03_79555_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920204121.png"
class="gallery-image"
data-flex-grow="180"
data-flex-basis="433px"
>&lt;/p>
&lt;p>登出Rancher，改用jimmy帳號登入，密碼是ad中設定的密碼
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920203512.png"
width="785"
height="724"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920203512_hu88df8f70c9e88da09d43788021a358c2_40923_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920203512_hu88df8f70c9e88da09d43788021a358c2_40923_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920203512.png"
class="gallery-image"
data-flex-grow="108"
data-flex-basis="260px"
>
確認可以登入
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204201.png"
width="1572"
height="664"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204201_hu7ae9ac3b08242c87cd4281f509e35bba_85934_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204201_hu7ae9ac3b08242c87cd4281f509e35bba_85934_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920204201.png"
class="gallery-image"
data-flex-grow="236"
data-flex-basis="568px"
>&lt;/p>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204230.png"
width="1561"
height="692"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204230_hud978b472884248a7277e5c20dd0fafaf_82394_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204230_hud978b472884248a7277e5c20dd0fafaf_82394_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920204230.png"
class="gallery-image"
data-flex-grow="225"
data-flex-basis="541px"
>&lt;/p>
&lt;p>可以看到，能查看到default project與default namespace
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204242.png"
width="1568"
height="428"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204242_hu72ca91c4954247a7001523fef5da9ab9_54105_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204242_hu72ca91c4954247a7001523fef5da9ab9_54105_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920204242.png"
class="gallery-image"
data-flex-grow="366"
data-flex-basis="879px"
>&lt;/p>
&lt;p>dashboard shell也是可以使用的，但只能看到default namespace的資源
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204317.png"
width="1562"
height="588"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204317_hu6392b9858d6d8f644485c04ae83482b0_79177_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204317_hu6392b9858d6d8f644485c04ae83482b0_79177_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920204317.png"
class="gallery-image"
data-flex-grow="265"
data-flex-basis="637px"
>&lt;/p>
&lt;p>是無法查看kube-system namespace的資源，確實跟前面設定的權限是符合的
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204411.png"
width="1581"
height="615"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204411_hu365ef24150b6d29b60f3749b249db757_101516_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204411_hu365ef24150b6d29b60f3749b249db757_101516_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920204411.png"
class="gallery-image"
data-flex-grow="257"
data-flex-basis="616px"
>&lt;/p>
&lt;h3 id="六也可以下載連線設定檔到自己常用linux主機連線管理">六、也可以下載連線設定檔到自己常用linux主機，連線管理&lt;/h3>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204450.png"
width="1568"
height="509"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204450_hu09d71deb5eec4885ea45686ca35e74b2_90652_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-docker/media/Pasted-image-20230920204450_hu09d71deb5eec4885ea45686ca35e74b2_90652_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230920204450.png"
class="gallery-image"
data-flex-grow="308"
data-flex-basis="739px"
>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1. 將下載的設定檔，scp到常用linux主機&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % scp /Users/chenqingze/Downloads/kubernetes-config.yml root@192.168.1.76:/root/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2. 可以看到設定檔&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# ls -l
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">total &lt;span class="m">9376&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">-rw-r--r-- &lt;span class="m">1&lt;/span> root root &lt;span class="m">1396&lt;/span> Sep &lt;span class="m">20&lt;/span> 12:47 kubernetes-config.yml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3. 在使用者家目錄下，創建.kube目錄&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# mkdir .kube
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4. 將設定檔複製到.kube目錄，且命名為config(因kubectl預設就是用.kube/config設定檔連線)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# cp kubernetes-config.yml ~/.kube/config
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5. 確認可以連線，查看default namespace下的資源&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# kubectl get pod
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">test-nginx 1/1 Running &lt;span class="m">1&lt;/span> &lt;span class="o">(&lt;/span>3h20m ago&lt;span class="o">)&lt;/span> 7h26m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 6. 其他namespace下的資源，是無法查看的&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-node76u:~# kubectl get pod -n kube-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Error from server &lt;span class="o">(&lt;/span>Forbidden&lt;span class="o">)&lt;/span>: pods is forbidden: User &lt;span class="s2">&amp;#34;u-hx7xy6ap22&amp;#34;&lt;/span> cannot list resource &lt;span class="s2">&amp;#34;pods&amp;#34;&lt;/span> in API group &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> in the namespace &lt;span class="s2">&amp;#34;kube-system&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>使用Helm安裝Rancher管理平台，納管現有k8s集群(高可用)</title><link>https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/</link><pubDate>Sat, 07 Oct 2023 01:00:00 +0800</pubDate><guid>https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/</guid><description>&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230922172936.png"
width="1323"
height="728"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230922172936_hu707fbbc58435615f6600069941230842_701550_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230922172936_hu707fbbc58435615f6600069941230842_701550_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230922172936.png"
class="gallery-image"
data-flex-grow="181"
data-flex-basis="436px"
>&lt;/p>
&lt;p>安裝先決條件：&lt;/p>
&lt;ul>
&lt;li>kubernetes 集群&lt;/li>
&lt;li>Ingress Controller&lt;/li>
&lt;li>Helm 、kubectl CLI 工具&lt;/li>
&lt;/ul>
&lt;h2 id="一ingress-controller安裝">一、Ingress Controller安裝&lt;/h2>
&lt;p>github網址:&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/kubernetes/ingress-nginx" target="_blank" rel="noopener"
>https://github.com/kubernetes/ingress-nginx&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % scp /Users/chenqingze/Downloads/ingress-nginx-controller-v1.6.4.tar.gz root@192.168.1.71:/root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# tar -xzvf ingress-nginx-controller-v1.6.4.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">cd&lt;/span> ingress-nginx-controller-v1.6.4/deploy/static/provider/baremetal
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Deployment改成DaemonSet &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 添加hostNetwork: true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/ingress-nginx-controller-v1.6.4/deploy/static/provider/baremetal# vim deploy.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">---
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">apiVersion: apps/v1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kind: DaemonSet
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app.kubernetes.io/component: controller
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app.kubernetes.io/instance: ingress-nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app.kubernetes.io/name: ingress-nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app.kubernetes.io/part-of: ingress-nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app.kubernetes.io/version: 1.6.4
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> name: ingress-nginx-controller
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> namespace: ingress-nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> minReadySeconds: &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> revisionHistoryLimit: &lt;span class="m">10&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> selector:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> matchLabels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app.kubernetes.io/component: controller
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app.kubernetes.io/instance: ingress-nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app.kubernetes.io/name: ingress-nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> template:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> metadata:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> labels:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app.kubernetes.io/component: controller
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app.kubernetes.io/instance: ingress-nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> app.kubernetes.io/name: ingress-nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> spec:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> hostNetwork: &lt;span class="nb">true&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> containers:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/ingress-nginx-controller-v1.6.4/deploy/static/provider/baremetal# kubectl apply -f deploy.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~/ingress-nginx-controller-v1.6.4/deploy/static/provider/baremetal# kubectl get pod -n ingress-nginx -owide
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE IP NODE NOMINATED NODE READINESS GATES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress-nginx-admission-create-zmkrl 0/1 Completed &lt;span class="m">0&lt;/span> 73s 10.244.255.199 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress-nginx-admission-patch-rlglf 0/1 Completed &lt;span class="m">0&lt;/span> 73s 10.244.14.133 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress-nginx-controller-js2fl 1/1 Running &lt;span class="m">0&lt;/span> 73s 192.168.1.76 k8s-node76u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ingress-nginx-controller-mmc2h 1/1 Running &lt;span class="m">0&lt;/span> 73s 192.168.1.75 k8s-node75u &amp;lt;none&amp;gt; &amp;lt;none&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="二kubectl與helm-cli-工具安裝">二、Kubectl與Helm CLI 工具安裝&lt;/h2>
&lt;p>官方安裝網站： &lt;a class="link" href="https://helm.sh/docs/intro/install/" target="_blank" rel="noopener"
>https://helm.sh/docs/intro/install/&lt;/a>&lt;/p>
&lt;p>Helm v3.12.3 Binary Releases：
&lt;a class="link" href="https://get.helm.sh/helm-v3.12.3-linux-amd64.tar.gz" target="_blank" rel="noopener"
>https://get.helm.sh/helm-v3.12.3-linux-amd64.tar.gz&lt;/a>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# wget https://get.helm.sh/helm-v3.12.3-linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# tar -zxvf helm-v3.12.3-linux-amd64.tar.gz
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# mv linux-amd64/helm /usr/local/bin/helm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Kubectl：
&lt;a class="link" href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/" target="_blank" rel="noopener"
>https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/&lt;/a>&lt;/p>
&lt;p>如果主機就是master,應該都有kubectl了,此流程可以略過&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 1. Update the apt package index and install packages needed to use the Kubernetes apt repository:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get install -y apt-transport-https ca-certificates curl
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 2. Download the Google Cloud public signing key:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -fsSL https://packages.cloud.google.com/apt/doc/apt-key.gpg &lt;span class="p">|&lt;/span> sudo gpg --dearmor -o /etc/apt/keyrings/kubernetes-archive-keyring.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 3. Add the Kubernetes apt repository:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;deb [signed-by=/etc/apt/keyrings/kubernetes-archive-keyring.gpg] https://apt.kubernetes.io/ kubernetes-xenial main&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee /etc/apt/sources.list.d/kubernetes.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 4. 檢查是否已經添加源 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# cat /etc/apt/sources.list.d/kubernetes.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deb &lt;span class="o">[&lt;/span>signed-by&lt;span class="o">=&lt;/span>/etc/apt/keyrings/kubernetes-archive-keyring.gpg&lt;span class="o">]&lt;/span> https://apt.kubernetes.io/ kubernetes-xenial main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 5. Update apt package index, install kubelet, kubeadm and kubectl, and pin their version:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# sudo apt-get install -y &lt;span class="nv">kubectl&lt;/span>&lt;span class="o">=&lt;/span>1.26.3-00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl version
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="三rancher高可用管理平台安裝">三、Rancher高可用管理平台安裝&lt;/h2>
&lt;h3 id="一添加-helm-chart-倉庫">一、添加 Helm Chart 倉庫&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# helm repo add rancher-stable https://releases.rancher.com/server-charts/stable
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2">&amp;#34;rancher-stable&amp;#34;&lt;/span> has been added to your repositories
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="二為-rancher-建立命名空間">二、為 Rancher 建立命名空間&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl create namespace cattle-system
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="三選擇-ssl-配置">三、選擇 SSL 配置&lt;/h3>
&lt;p>Rancher 產生的憑證（預設）
需要 cert-manager&lt;/p>
&lt;h3 id="四安裝-cert-manager">四、安裝 cert-manager&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 如果你手動安裝了CRD，而不是在 Helm 安裝命令中添加了 &amp;#39;--set installCRDs=true&amp;#39; 選項，你應該在升級 Helm Chart 之前升級 CRD 資源。&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.11.0/cert-manager.crds.yaml
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 添加 Jetstack Helm 倉庫&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# helm repo add jetstack https://charts.jetstack.io
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 更新本地 Helm Chart 倉庫緩存&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# helm repo update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Hang tight &lt;span class="k">while&lt;/span> we grab the latest from your chart repositories...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...Successfully got an update from the &lt;span class="s2">&amp;#34;jetstack&amp;#34;&lt;/span> chart repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">...Successfully got an update from the &lt;span class="s2">&amp;#34;rancher-stable&amp;#34;&lt;/span> chart repository
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Update Complete. ⎈Happy Helming!⎈
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安裝 cert-manager Helm Chart&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# helm install cert-manager jetstack/cert-manager &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --namespace cert-manager &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --create-namespace &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --version v1.11.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 安裝完 cert-manager 后，你可以通過檢查 cert-manager 命名空間中正在運行的 Pod 來驗證它是否已正確部署&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get pods --namespace cert-manager
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY STATUS RESTARTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager-64f9f45d6f-8j65z 1/1 Running &lt;span class="m">0&lt;/span> 2m1s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager-cainjector-56bbdd5c47-4hngr 1/1 Running &lt;span class="m">0&lt;/span> 2m1s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager-startupapicheck-vzq7z 0/1 Completed &lt;span class="m">0&lt;/span> 2m
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">cert-manager-webhook-d4f4545d7-rhbkv 1/1 Running &lt;span class="m">0&lt;/span> 2m1s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="五根據你選擇的證書選項通過-helm-安裝-rancher">五、根據你選擇的證書選項，通過 Helm 安裝 Rancher&lt;/h3>
&lt;p>採Rancher 生成的證書方式&lt;/p>
&lt;p>Rancher Helm Chart 選項：
&lt;a class="link" href="https://ranchermanager.docs.rancher.com/zh/getting-started/installation-and-upgrade/installation-references/helm-chart-options" target="_blank" rel="noopener"
>https://ranchermanager.docs.rancher.com/zh/getting-started/installation-and-upgrade/installation-references/helm-chart-options&lt;/a>&lt;/p>
&lt;p>&lt;font color=red>需多指定ingressClassName為nginx&lt;/font>&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# helm install rancher rancher-stable/rancher &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --namespace cattle-system &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --set &lt;span class="nv">hostname&lt;/span>&lt;span class="o">=&lt;/span>rancher.jimmyhome.tw &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --set &lt;span class="nv">bootstrapPassword&lt;/span>&lt;span class="o">=&lt;/span>admin &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --set ingress.ingressClassName&lt;span class="o">=&lt;/span>nginx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME: rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">LAST DEPLOYED: Wed Sep &lt;span class="m">20&lt;/span> 18:31:10 &lt;span class="m">2023&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAMESPACE: cattle-system
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">STATUS: deployed
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">REVISION: &lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">TEST SUITE: None
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTES:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Rancher Server has been installed.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NOTE: Rancher may take several minutes to fully initialize. Please standby &lt;span class="k">while&lt;/span> Certificates are being issued, Containers are started and the Ingress rule comes up.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Check out our docs at https://rancher.com/docs/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If you provided your own bootstrap password during installation, browse to https://rancher.jimmyhome.tw to get started.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">If this is the first &lt;span class="nb">time&lt;/span> you installed Rancher, get started by running this &lt;span class="nb">command&lt;/span> and clicking the URL it generates:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> https://rancher.jimmyhome.tw/dashboard/?setup&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>kubectl get secret --namespace cattle-system bootstrap-secret -o go-template&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{{.data.bootstrapPassword|base64decode}}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To get just the bootstrap password on its own, run:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">kubectl get secret --namespace cattle-system bootstrap-secret -o go-template&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{{.data.bootstrapPassword|base64decode}}{{ &amp;#34;\n&amp;#34; }}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Happy Containering!
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 等待 Rancher 運行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl -n cattle-system rollout status deploy/rancher
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting &lt;span class="k">for&lt;/span> deployment &lt;span class="s2">&amp;#34;rancher&amp;#34;&lt;/span> rollout to finish: &lt;span class="m">0&lt;/span> of &lt;span class="m">3&lt;/span> updated replicas are available...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting &lt;span class="k">for&lt;/span> deployment &lt;span class="s2">&amp;#34;rancher&amp;#34;&lt;/span> rollout to finish: &lt;span class="m">1&lt;/span> of &lt;span class="m">3&lt;/span> updated replicas are available...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Waiting &lt;span class="k">for&lt;/span> deployment &lt;span class="s2">&amp;#34;rancher&amp;#34;&lt;/span> rollout to finish: &lt;span class="m">2&lt;/span> of &lt;span class="m">3&lt;/span> updated replicas are available...
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">deployment &lt;span class="s2">&amp;#34;rancher&amp;#34;&lt;/span> successfully rolled out
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h3 id="六驗證-rancher-server-是否部署成功">六、驗證 Rancher Server 是否部署成功&lt;/h3>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl -n cattle-system get deploy
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME READY UP-TO-DATE AVAILABLE AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher 3/3 &lt;span class="m">3&lt;/span> &lt;span class="m">3&lt;/span> 53s
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl -n cattle-system get ingress
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">NAME CLASS HOSTS ADDRESS PORTS AGE
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">rancher nginx rancher.jimmyhome.tw 192.168.1.75,192.168.1.76 80, &lt;span class="m">443&lt;/span> 67s
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 我自己的筆電，先設定/etc/hosts測試網頁訪問&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 如是內部有dns server的，就到dns server設定a record解析&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">chenqingze@chenqingze-MBP ~ % sudo vim /etc/hosts
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">192.168.1.75 rancher.jimmyhome.tw
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>打 &lt;a class="link" href="https://rancher.jimmyhome.tw" target="_blank" rel="noopener"
>https://rancher.jimmyhome.tw&lt;/a> 可以看到網頁
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921023255.png"
width="1010"
height="894"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921023255_hu255ddf89689e804c5d835315e9863c95_89733_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921023255_hu255ddf89689e804c5d835315e9863c95_89733_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230921023255.png"
class="gallery-image"
data-flex-grow="112"
data-flex-basis="271px"
>
由上方helm install rancher完成時，可以看到以下兩個指令，可以獲取到預設admin帳號的密碼&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># If this is the first time you installed Rancher, get started by running this command and clicking the URL it generates&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# &lt;span class="nb">echo&lt;/span> https://rancher.jimmyhome.tw/dashboard/?setup&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>kubectl get secret --namespace cattle-system bootstrap-secret -o go-template&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{{.data.bootstrapPassword|base64decode}}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">https://rancher.jimmyhome.tw/dashboard/?setup&lt;span class="o">=&lt;/span>admin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># To get just the bootstrap password on its own, run&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">root@k8s-master71u:~# kubectl get secret --namespace cattle-system bootstrap-secret -o go-template&lt;span class="o">=&lt;/span>&lt;span class="s1">&amp;#39;{{.data.bootstrapPassword|base64decode}}{{ &amp;#34;\n&amp;#34; }}&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">admin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>重設admin帳號的密碼
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921023557.png"
width="1008"
height="893"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921023557_hu9e81d5777cb32757e44e3be582d3603e_90642_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921023557_hu9e81d5777cb32757e44e3be582d3603e_90642_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230921023557.png"
class="gallery-image"
data-flex-grow="112"
data-flex-basis="270px"
>&lt;/p>
&lt;p>輸入剛剛重設的admin密碼，登入
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031136.png"
width="991"
height="782"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031136_hubdf0d5ed0ba43ff474725ac5a8ecccc3_79311_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031136_hubdf0d5ed0ba43ff474725ac5a8ecccc3_79311_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230921031136.png"
class="gallery-image"
data-flex-grow="126"
data-flex-basis="304px"
>&lt;/p>
&lt;p>可以看到集群資訊，state為Active
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031249.png"
width="1457"
height="722"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031249_hucbbfb060f3c77e6be7bccf554592ce7d_77193_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031249_hucbbfb060f3c77e6be7bccf554592ce7d_77193_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230921031249.png"
class="gallery-image"
data-flex-grow="201"
data-flex-basis="484px"
>&lt;/p>
&lt;p>進入集群，可以看到集群詳細訊息
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031718.png"
width="1975"
height="944"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031718_hu475c36b1f3937b05de60533cd5928b74_159357_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031718_hu475c36b1f3937b05de60533cd5928b74_159357_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230921031718.png"
class="gallery-image"
data-flex-grow="209"
data-flex-basis="502px"
>&lt;/p>
&lt;p>也可以使用dashboard shell去管理集群
&lt;img src="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031746.png"
width="1983"
height="721"
srcset="https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031746_hu87f73535b369c4edcdb990f935a08331_143573_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/2023/kubernetes-helm/media/Pasted-image-20230921031746_hu87f73535b369c4edcdb990f935a08331_143573_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230921031746.png"
class="gallery-image"
data-flex-grow="275"
data-flex-basis="660px"
>&lt;/p></description></item><item><title>歸檔</title><link>https://blog.goldfishbrain-fighting.com/archives/</link><pubDate>Sat, 07 Oct 2023 00:00:00 +0000</pubDate><guid>https://blog.goldfishbrain-fighting.com/archives/</guid><description/></item><item><title>連結</title><link>https://blog.goldfishbrain-fighting.com/links-to/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.goldfishbrain-fighting.com/links-to/</guid><description/></item><item><title>搜尋</title><link>https://blog.goldfishbrain-fighting.com/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.goldfishbrain-fighting.com/search/</guid><description/></item><item><title>關於我</title><link>https://blog.goldfishbrain-fighting.com/about-me/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://blog.goldfishbrain-fighting.com/about-me/</guid><description>&lt;h1 id="自我介绍">自我介绍&lt;/h1>
&lt;h2 id="就學歷程">就學歷程：&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/about-me/media/Pasted-image-20230904195127.png"
width="749"
height="133"
srcset="https://blog.goldfishbrain-fighting.com/about-me/media/Pasted-image-20230904195127_hufe9d766c1787b64e198f330c3bd9100a_124754_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/about-me/media/Pasted-image-20230904195127_hufe9d766c1787b64e198f330c3bd9100a_124754_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230904195127.png"
class="gallery-image"
data-flex-grow="563"
data-flex-basis="1351px"
>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>高中：就讀普通高中，讀2類自然組，對化學很有興趣，也考過全校化學進賽第一名，代表學校去參加全市比賽，但沒得名。
就是在那次比賽後，有深刻的體悟，普通高中，實作實驗真的太少，去比賽時，幾乎都是實作實驗，讓我不知所措，才會再報考大學時，轉而去讀科技大學，希望能學到一技之常。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>大學：就讀科技大學電機系，果然是科技大學，很多都是實作課，那時候才發現我與同學們的差距那麼大，因為他們幾乎都是專科進來的，所以大部分實驗，很多都接觸過了，我那時候連麵包版都不會插，電阻看不懂，剛開始實在是超辛苦，還好有同儕的教學，讓我挺過來。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>當兵：海軍陸戰隊，戰車營，去新竹受訓3個月，回來營上，開戰車下基地，是我人生中，非常特殊的回憶。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="工作經歷">工作經歷：&lt;/h2>
&lt;p>&lt;img src="https://blog.goldfishbrain-fighting.com/about-me/media/Pasted-image-20230904195145.png"
width="1514"
height="179"
srcset="https://blog.goldfishbrain-fighting.com/about-me/media/Pasted-image-20230904195145_hu29fcbbb1b9a430c76b3ea5c53c657114_291907_480x0_resize_box_3.png 480w, https://blog.goldfishbrain-fighting.com/about-me/media/Pasted-image-20230904195145_hu29fcbbb1b9a430c76b3ea5c53c657114_291907_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="media/Pasted-image-20230904195145.png"
class="gallery-image"
data-flex-grow="845"
data-flex-basis="2029px"
>&lt;/p>
&lt;ol>
&lt;li>
&lt;p>弱電工程師：不超過110V的工程都做，佈網路線、電話線、監控、廣播，建置網路機房&amp;hellip;等，全台有配合的裝修場、配合的維護銀行，都要跑。做了3年半，做到主任，但考量薪水、工作環境差、未來規劃，裸辭，決定轉職進IT領域。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>特訓班：前份工作裸辭，就是為了能進特訓班，此特訓班不用費用，但前提是要沒有工作的人(就是勞動部幫助失業的人轉職)，同時也要進過考試和面試，學習到的課程：Windows Server管理、Linux Server管理、Cisco網路設備管理。&lt;code>(特訓完：考取CCNA證照)&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>網路FAE：特訓班結訓後，進入通路商，負責公司販賣的網路設備售後技術支援。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>MIS：和網路FAE是同一家公司，因為公司內部缺網管，長官希望我過去幫忙，就內轉到MIS部門，負責公司內部網路、伺服器建置與管理，會選擇離開，主要是MIS負責太多事了，沒辦法專心在一個領域技術提升。&lt;code>(考取：CCNP證照、RHCSA7證照、RCHE7證照、RHCSA8證照)&lt;/code>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>電商伺服器工程師：到此公司，就是專門負責電商對外伺服器管理和建置，原則上就幾乎都是linux系統和pve虛擬化系統，會選擇只做4個月就離開，主要是因為公司文化、公司凝聚力、部門間協調、SOP不明確、公司不賺錢，基於以上原因，才會選擇盡快離開。當然在此公司是非常好的經歷，因為電商領域，就是我轉職到IT時，一直想走上的路，也算讓我進到這個領域有了第一個敲門磚。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>電商伺服器 資深工程師：負責電商伺服器管理與建置、Redis服務管理與建置、K8S平台管理與建置、目前自學Python、前端、Django，主要是為了讓管理方式能更有效率、更系統化。目前在公司也會安排向內部員工進行教育訓練課程、分享技術，讓我在此工作上得到滿滿的成就感。就我自己認為，會再多，如果不能說到讓別人也瞭解，那就不是真的瞭解這個技術了。所以我熱衷於這份工作，能讓我分享技術，公司也不斷的引進新技術、新想法，讓我們去嘗試，所以目前在此工作，是非常開心的狀態，希望這種感覺，能一直持續下去。&lt;code>(考取：CKA證照、CKAD證照、CKS證照)&lt;/code>&lt;/p>
&lt;/li>
&lt;/ol></description></item></channel></rss>